var F2=Object.defineProperty;var O2=(e,t,n)=>t in e?F2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var N2=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $p=(e,t,n)=>(O2(e,typeof t!="symbol"?t+"":t,n),n);var PU=N2((MU,Zu)=>{function $2(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();window.global||(window.global=window);function Gg(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Mt={},La=[],Br=()=>{},M2=()=>!1,V2=/^on[^a-z]/,Vc=e=>V2.test(e),Wg=e=>e.startsWith("onUpdate:"),Zt=Object.assign,Yg=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},B2=Object.prototype.hasOwnProperty,mt=(e,t)=>B2.call(e,t),Ze=Array.isArray,Ha=e=>Bc(e)==="[object Map]",rb=e=>Bc(e)==="[object Set]",at=e=>typeof e=="function",Yt=e=>typeof e=="string",Jg=e=>typeof e=="symbol",Nt=e=>e!==null&&typeof e=="object",ib=e=>Nt(e)&&at(e.then)&&at(e.catch),sb=Object.prototype.toString,Bc=e=>sb.call(e),L2=e=>Bc(e).slice(8,-1),ab=e=>Bc(e)==="[object Object]",Xg=e=>Yt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Du=Gg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lc=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},H2=/-(\w)/g,Ir=Lc(e=>e.replace(H2,(t,n)=>n?n.toUpperCase():"")),j2=/\B([A-Z])/g,ta=Lc(e=>e.replace(j2,"-$1").toLowerCase()),li=Lc(e=>e.charAt(0).toUpperCase()+e.slice(1)),Af=Lc(e=>e?`on${li(e)}`:""),ol=(e,t)=>!Object.is(e,t),Fu=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Qu=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Ah=e=>{const t=parseFloat(e);return isNaN(t)?e:t},q2=e=>{const t=Yt(e)?Number(e):NaN;return isNaN(t)?e:t};let Mp;const Ih=()=>Mp||(Mp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ll(e){if(Ze(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Yt(r)?G2(r):ll(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(Yt(e))return e;if(Nt(e))return e}}const U2=/;(?![^(]*\))/g,z2=/:([^]+)/,K2=/\/\*[^]*?\*\//g;function G2(e){const t={};return e.replace(K2,"").split(U2).forEach(n=>{if(n){const r=n.split(z2);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ri(e){let t="";if(Yt(e))t=e;else if(Ze(e))for(let n=0;n<e.length;n++){const r=ri(e[n]);r&&(t+=r+" ")}else if(Nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const W2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Y2=Gg(W2);function ob(e){return!!e||e===""}const Ue=e=>Yt(e)?e:e==null?"":Ze(e)||Nt(e)&&(e.toString===sb||!at(e.toString))?JSON.stringify(e,lb,2):String(e),lb=(e,t)=>t&&t.__v_isRef?lb(e,t.value):Ha(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:rb(t)?{[`Set(${t.size})`]:[...t.values()]}:Nt(t)&&!Ze(t)&&!ab(t)?String(t):t;let ir;class ub{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ir,!t&&ir&&(this.index=(ir.scopes||(ir.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=ir;try{return ir=this,t()}finally{ir=n}}}on(){ir=this}off(){ir=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Ml(e){return new ub(e)}function J2(e,t=ir){t&&t.active&&t.effects.push(e)}function cb(){return ir}function In(e){ir&&ir.cleanups.push(e)}const Zg=e=>{const t=new Set(e);return t.w=0,t.n=0,t},db=e=>(e.w&gs)>0,fb=e=>(e.n&gs)>0,X2=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=gs},Z2=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];db(i)&&!fb(i)?i.delete(e):t[n++]=i,i.w&=~gs,i.n&=~gs}t.length=n}},ec=new WeakMap;let Lo=0,gs=1;const Rh=30;let $r;const js=Symbol(""),kh=Symbol("");class Qg{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,J2(this,r)}run(){if(!this.active)return this.fn();let t=$r,n=us;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=$r,$r=this,us=!0,gs=1<<++Lo,Lo<=Rh?X2(this):Vp(this),this.fn()}finally{Lo<=Rh&&Z2(this),gs=1<<--Lo,$r=this.parent,us=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){$r===this?this.deferStop=!0:this.active&&(Vp(this),this.onStop&&this.onStop(),this.active=!1)}}function Vp(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let us=!0;const hb=[];function fo(){hb.push(us),us=!1}function ho(){const e=hb.pop();us=e===void 0?!0:e}function tr(e,t,n){if(us&&$r){let r=ec.get(e);r||ec.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=Zg()),gb(i)}}function gb(e,t){let n=!1;Lo<=Rh?fb(e)||(e.n|=gs,n=!db(e)):n=!e.has($r),n&&(e.add($r),$r.deps.push(e))}function Pi(e,t,n,r,i,s){const a=ec.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(n==="length"&&Ze(e)){const l=Number(r);a.forEach((u,f)=>{(f==="length"||f>=l)&&o.push(u)})}else switch(n!==void 0&&o.push(a.get(n)),t){case"add":Ze(e)?Xg(n)&&o.push(a.get("length")):(o.push(a.get(js)),Ha(e)&&o.push(a.get(kh)));break;case"delete":Ze(e)||(o.push(a.get(js)),Ha(e)&&o.push(a.get(kh)));break;case"set":Ha(e)&&o.push(a.get(js));break}if(o.length===1)o[0]&&Ph(o[0]);else{const l=[];for(const u of o)u&&l.push(...u);Ph(Zg(l))}}function Ph(e,t){const n=Ze(e)?e:[...e];for(const r of n)r.computed&&Bp(r);for(const r of n)r.computed||Bp(r)}function Bp(e,t){(e!==$r||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function Q2(e,t){var n;return(n=ec.get(e))==null?void 0:n.get(t)}const eT=Gg("__proto__,__v_isRef,__isVue"),vb=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Jg)),tT=ev(),nT=ev(!1,!0),rT=ev(!0),Lp=iT();function iT(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=st(this);for(let s=0,a=this.length;s<a;s++)tr(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(st)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){fo();const r=st(this)[t].apply(this,n);return ho(),r}}),e}function sT(e){const t=st(this);return tr(t,"has",e),t.hasOwnProperty(e)}function ev(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?_T:Sb:t?bb:yb).get(r))return r;const a=Ze(r);if(!e){if(a&&mt(Lp,i))return Reflect.get(Lp,i,s);if(i==="hasOwnProperty")return sT}const o=Reflect.get(r,i,s);return(Jg(i)?vb.has(i):eT(i))||(e||tr(r,"get",i),t)?o:kt(o)?a&&Xg(i)?o:o.value:Nt(o)?e?Vl(o):bn(o):o}}const aT=mb(),oT=mb(!0);function mb(e=!1){return function(n,r,i,s){let a=n[r];if(Xa(a)&&kt(a)&&!kt(i))return!1;if(!e&&(!tc(i)&&!Xa(i)&&(a=st(a),i=st(i)),!Ze(n)&&kt(a)&&!kt(i)))return a.value=i,!0;const o=Ze(n)&&Xg(r)?Number(r)<n.length:mt(n,r),l=Reflect.set(n,r,i,s);return n===st(s)&&(o?ol(i,a)&&Pi(n,"set",r,i):Pi(n,"add",r,i)),l}}function lT(e,t){const n=mt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Pi(e,"delete",t,void 0),r}function uT(e,t){const n=Reflect.has(e,t);return(!Jg(t)||!vb.has(t))&&tr(e,"has",t),n}function cT(e){return tr(e,"iterate",Ze(e)?"length":js),Reflect.ownKeys(e)}const pb={get:tT,set:aT,deleteProperty:lT,has:uT,ownKeys:cT},dT={get:rT,set(e,t){return!0},deleteProperty(e,t){return!0}},fT=Zt({},pb,{get:nT,set:oT}),tv=e=>e,Hc=e=>Reflect.getPrototypeOf(e);function du(e,t,n=!1,r=!1){e=e.__v_raw;const i=st(e),s=st(t);n||(t!==s&&tr(i,"get",t),tr(i,"get",s));const{has:a}=Hc(i),o=r?tv:n?iv:ul;if(a.call(i,t))return o(e.get(t));if(a.call(i,s))return o(e.get(s));e!==i&&e.get(t)}function fu(e,t=!1){const n=this.__v_raw,r=st(n),i=st(e);return t||(e!==i&&tr(r,"has",e),tr(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function hu(e,t=!1){return e=e.__v_raw,!t&&tr(st(e),"iterate",js),Reflect.get(e,"size",e)}function Hp(e){e=st(e);const t=st(this);return Hc(t).has.call(t,e)||(t.add(e),Pi(t,"add",e,e)),this}function jp(e,t){t=st(t);const n=st(this),{has:r,get:i}=Hc(n);let s=r.call(n,e);s||(e=st(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?ol(t,a)&&Pi(n,"set",e,t):Pi(n,"add",e,t),this}function qp(e){const t=st(this),{has:n,get:r}=Hc(t);let i=n.call(t,e);i||(e=st(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Pi(t,"delete",e,void 0),s}function Up(){const e=st(this),t=e.size!==0,n=e.clear();return t&&Pi(e,"clear",void 0,void 0),n}function gu(e,t){return function(r,i){const s=this,a=s.__v_raw,o=st(a),l=t?tv:e?iv:ul;return!e&&tr(o,"iterate",js),a.forEach((u,f)=>r.call(i,l(u),l(f),s))}}function vu(e,t,n){return function(...r){const i=this.__v_raw,s=st(i),a=Ha(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...r),f=n?tv:t?iv:ul;return!t&&tr(s,"iterate",l?kh:js),{next(){const{value:c,done:d}=u.next();return d?{value:c,done:d}:{value:o?[f(c[0]),f(c[1])]:f(c),done:d}},[Symbol.iterator](){return this}}}}function Yi(e){return function(...t){return e==="delete"?!1:this}}function hT(){const e={get(s){return du(this,s)},get size(){return hu(this)},has:fu,add:Hp,set:jp,delete:qp,clear:Up,forEach:gu(!1,!1)},t={get(s){return du(this,s,!1,!0)},get size(){return hu(this)},has:fu,add:Hp,set:jp,delete:qp,clear:Up,forEach:gu(!1,!0)},n={get(s){return du(this,s,!0)},get size(){return hu(this,!0)},has(s){return fu.call(this,s,!0)},add:Yi("add"),set:Yi("set"),delete:Yi("delete"),clear:Yi("clear"),forEach:gu(!0,!1)},r={get(s){return du(this,s,!0,!0)},get size(){return hu(this,!0)},has(s){return fu.call(this,s,!0)},add:Yi("add"),set:Yi("set"),delete:Yi("delete"),clear:Yi("clear"),forEach:gu(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=vu(s,!1,!1),n[s]=vu(s,!0,!1),t[s]=vu(s,!1,!0),r[s]=vu(s,!0,!0)}),[e,n,t,r]}const[gT,vT,mT,pT]=hT();function nv(e,t){const n=t?e?pT:mT:e?vT:gT;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(mt(n,i)&&i in r?n:r,i,s)}const yT={get:nv(!1,!1)},bT={get:nv(!1,!0)},ST={get:nv(!0,!1)},yb=new WeakMap,bb=new WeakMap,Sb=new WeakMap,_T=new WeakMap;function wT(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xT(e){return e.__v_skip||!Object.isExtensible(e)?0:wT(L2(e))}function bn(e){return Xa(e)?e:rv(e,!1,pb,yT,yb)}function _b(e){return rv(e,!1,fT,bT,bb)}function Vl(e){return rv(e,!0,dT,ST,Sb)}function rv(e,t,n,r,i){if(!Nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=xT(e);if(a===0)return e;const o=new Proxy(e,a===2?r:n);return i.set(e,o),o}function cs(e){return Xa(e)?cs(e.__v_raw):!!(e&&e.__v_isReactive)}function Xa(e){return!!(e&&e.__v_isReadonly)}function tc(e){return!!(e&&e.__v_isShallow)}function wb(e){return cs(e)||Xa(e)}function st(e){const t=e&&e.__v_raw;return t?st(t):e}function jc(e){return Qu(e,"__v_skip",!0),e}const ul=e=>Nt(e)?bn(e):e,iv=e=>Nt(e)?Vl(e):e;function xb(e){us&&$r&&(e=st(e),gb(e.dep||(e.dep=Zg())))}function Cb(e,t){e=st(e);const n=e.dep;n&&Ph(n)}function kt(e){return!!(e&&e.__v_isRef===!0)}function ne(e){return Eb(e,!1)}function Ae(e){return Eb(e,!0)}function Eb(e,t){return kt(e)?e:new CT(e,t)}class CT{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:st(t),this._value=n?t:ul(t)}get value(){return xb(this),this._value}set value(t){const n=this.__v_isShallow||tc(t)||Xa(t);t=n?t:st(t),ol(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ul(t),Cb(this))}}function Se(e){return kt(e)?e.value:e}const ET={get:(e,t,n)=>Se(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return kt(i)&&!kt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Tb(e){return cs(e)?e:new Proxy(e,ET)}function Bl(e){const t=Ze(e)?new Array(e.length):{};for(const n in e)t[n]=Ab(e,n);return t}class TT{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Q2(st(this._object),this._key)}}class AT{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function he(e,t,n){return kt(e)?e:at(e)?new AT(e):Nt(e)&&arguments.length>1?Ab(e,t,n):ne(e)}function Ab(e,t,n){const r=e[t];return kt(r)?r:new TT(e,t,n)}class IT{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Qg(t,()=>{this._dirty||(this._dirty=!0,Cb(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=st(this);return xb(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function RT(e,t,n=!1){let r,i;const s=at(e);return s?(r=e,i=Br):(r=e.get,i=e.set),new IT(r,i,s||!i,n)}function ds(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){qc(s,t,n)}return i}function Ar(e,t,n,r){if(at(e)){const s=ds(e,t,n,r);return s&&ib(s)&&s.catch(a=>{qc(a,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Ar(e[s],t,n,r));return i}function qc(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=n;for(;s;){const u=s.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){ds(l,null,10,[e,a,o]);return}}kT(e,n,i,r)}function kT(e,t,n,r=!0){console.error(e)}let cl=!1,Dh=!1;const Fn=[];let ei=0;const ja=[];let xi=null,Fs=0;const Ib=Promise.resolve();let sv=null;function ht(e){const t=sv||Ib;return e?t.then(this?e.bind(this):e):t}function PT(e){let t=ei+1,n=Fn.length;for(;t<n;){const r=t+n>>>1;dl(Fn[r])<e?t=r+1:n=r}return t}function av(e){(!Fn.length||!Fn.includes(e,cl&&e.allowRecurse?ei+1:ei))&&(e.id==null?Fn.push(e):Fn.splice(PT(e.id),0,e),Rb())}function Rb(){!cl&&!Dh&&(Dh=!0,sv=Ib.then(Pb))}function DT(e){const t=Fn.indexOf(e);t>ei&&Fn.splice(t,1)}function FT(e){Ze(e)?ja.push(...e):(!xi||!xi.includes(e,e.allowRecurse?Fs+1:Fs))&&ja.push(e),Rb()}function zp(e,t=cl?ei+1:0){for(;t<Fn.length;t++){const n=Fn[t];n&&n.pre&&(Fn.splice(t,1),t--,n())}}function kb(e){if(ja.length){const t=[...new Set(ja)];if(ja.length=0,xi){xi.push(...t);return}for(xi=t,xi.sort((n,r)=>dl(n)-dl(r)),Fs=0;Fs<xi.length;Fs++)xi[Fs]();xi=null,Fs=0}}const dl=e=>e.id==null?1/0:e.id,OT=(e,t)=>{const n=dl(e)-dl(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Pb(e){Dh=!1,cl=!0,Fn.sort(OT);const t=Br;try{for(ei=0;ei<Fn.length;ei++){const n=Fn[ei];n&&n.active!==!1&&ds(n,null,14)}}finally{ei=0,Fn.length=0,kb(),cl=!1,sv=null,(Fn.length||ja.length)&&Pb()}}function NT(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Mt;let i=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const f=`${a==="modelValue"?"model":a}Modifiers`,{number:c,trim:d}=r[f]||Mt;d&&(i=n.map(h=>Yt(h)?h.trim():h)),c&&(i=n.map(Ah))}let o,l=r[o=Af(t)]||r[o=Af(Ir(t))];!l&&s&&(l=r[o=Af(ta(t))]),l&&Ar(l,e,6,i);const u=r[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Ar(u,e,6,i)}}function Db(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let a={},o=!1;if(!at(e)){const l=u=>{const f=Db(u,t,!0);f&&(o=!0,Zt(a,f))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Nt(e)&&r.set(e,null),null):(Ze(s)?s.forEach(l=>a[l]=null):Zt(a,s),Nt(e)&&r.set(e,a),a)}function Uc(e,t){return!e||!Vc(t)?!1:(t=t.slice(2).replace(/Once$/,""),mt(e,t[0].toLowerCase()+t.slice(1))||mt(e,ta(t))||mt(e,t))}let _n=null,zc=null;function nc(e){const t=_n;return _n=e,zc=e&&e.type.__scopeId||null,t}function Kc(e){zc=e}function Gc(){zc=null}function q(e,t=_n,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&i0(-1);const s=nc(t);let a;try{a=e(...i)}finally{nc(s),r._d&&i0(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function If(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:f,renderCache:c,data:d,setupState:h,ctx:g,inheritAttrs:v}=e;let p,y;const w=nc(e);try{if(n.shapeFlag&4){const I=i||r;p=Xr(f.call(I,I,c,s,h,d,g)),y=l}else{const I=t;p=Xr(I.length>1?I(s,{attrs:l,slots:o,emit:u}):I(s,null)),y=t.props?l:$T(l)}}catch(I){Go.length=0,qc(I,e,1),p=b(ur)}let A=p;if(y&&v!==!1){const I=Object.keys(y),{shapeFlag:k}=A;I.length&&k&7&&(a&&I.some(Wg)&&(y=MT(y,a)),A=Di(A,y))}return n.dirs&&(A=Di(A),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&(A.transition=n.transition),p=A,nc(w),p}const $T=e=>{let t;for(const n in e)(n==="class"||n==="style"||Vc(n))&&((t||(t={}))[n]=e[n]);return t},MT=(e,t)=>{const n={};for(const r in e)(!Wg(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function VT(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Kp(r,a,u):!!a;if(l&8){const f=t.dynamicProps;for(let c=0;c<f.length;c++){const d=f[c];if(a[d]!==r[d]&&!Uc(u,d))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?Kp(r,a,u):!0:!!a;return!1}function Kp(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Uc(n,s))return!0}return!1}function BT({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const LT=e=>e.__isSuspense;function HT(e,t){t&&t.pendingBranch?Ze(e)?t.effects.push(...e):t.effects.push(e):FT(e)}function Qt(e,t){return ov(e,null,t)}const mu={};function Re(e,t,n){return ov(e,t,n)}function ov(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=Mt){var o;const l=cb()===((o=dn)==null?void 0:o.scope)?dn:null;let u,f=!1,c=!1;if(kt(e)?(u=()=>e.value,f=tc(e)):cs(e)?(u=()=>e,r=!0):Ze(e)?(c=!0,f=e.some(I=>cs(I)||tc(I)),u=()=>e.map(I=>{if(kt(I))return I.value;if(cs(I))return $s(I);if(at(I))return ds(I,l,2)})):at(e)?t?u=()=>ds(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return d&&d(),Ar(e,l,3,[h])}:u=Br,t&&r){const I=u;u=()=>$s(I())}let d,h=I=>{d=w.onStop=()=>{ds(I,l,4)}},g;if(pl)if(h=Br,t?n&&Ar(t,l,3,[u(),c?[]:void 0,h]):u(),i==="sync"){const I=PA();g=I.__watcherHandles||(I.__watcherHandles=[])}else return Br;let v=c?new Array(e.length).fill(mu):mu;const p=()=>{if(w.active)if(t){const I=w.run();(r||f||(c?I.some((k,x)=>ol(k,v[x])):ol(I,v)))&&(d&&d(),Ar(t,l,3,[I,v===mu?void 0:c&&v[0]===mu?[]:v,h]),v=I)}else w.run()};p.allowRecurse=!!t;let y;i==="sync"?y=p:i==="post"?y=()=>Yn(p,l&&l.suspense):(p.pre=!0,l&&(p.id=l.uid),y=()=>av(p));const w=new Qg(u,y);t?n?p():v=w.run():i==="post"?Yn(w.run.bind(w),l&&l.suspense):w.run();const A=()=>{w.stop(),l&&l.scope&&Yg(l.scope.effects,w)};return g&&g.push(A),A}function jT(e,t,n){const r=this.proxy,i=Yt(e)?e.includes(".")?Fb(r,e):()=>r[e]:e.bind(r,r);let s;at(t)?s=t:(s=t.handler,n=t);const a=dn;Za(this);const o=ov(i,s.bind(r),n);return a?Za(a):qs(),o}function Fb(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function $s(e,t){if(!Nt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),kt(e))$s(e.value,t);else if(Ze(e))for(let n=0;n<e.length;n++)$s(e[n],t);else if(rb(e)||Ha(e))e.forEach(n=>{$s(n,t)});else if(ab(e))for(const n in e)$s(e[n],t);return e}function qt(e,t){const n=_n;if(n===null)return e;const r=Zc(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,l,u=Mt]=t[s];a&&(at(a)&&(a={mounted:a,updated:a}),a.deep&&$s(o),i.push({dir:a,instance:r,value:o,oldValue:void 0,arg:l,modifiers:u}))}return e}function Ts(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(fo(),Ar(l,n,8,[e.el,o,e,t]),ho())}}function Ob(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zt(()=>{e.isMounted=!0}),sn(()=>{e.isUnmounting=!0}),e}const pr=[Function,Array],Nb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pr,onEnter:pr,onAfterEnter:pr,onEnterCancelled:pr,onBeforeLeave:pr,onLeave:pr,onAfterLeave:pr,onLeaveCancelled:pr,onBeforeAppear:pr,onAppear:pr,onAfterAppear:pr,onAppearCancelled:pr},qT={name:"BaseTransition",props:Nb,setup(e,{slots:t}){const n=pv(),r=Ob();let i;return()=>{const s=t.default&&lv(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const v of s)if(v.type!==ur){a=v;break}}const o=st(e),{mode:l}=o;if(r.isLeaving)return Rf(a);const u=Gp(a);if(!u)return Rf(a);const f=fl(u,o,r,n);hl(u,f);const c=n.subTree,d=c&&Gp(c);let h=!1;const{getTransitionKey:g}=u.type;if(g){const v=g();i===void 0?i=v:v!==i&&(i=v,h=!0)}if(d&&d.type!==ur&&(!Os(u,d)||h)){const v=fl(d,o,r,n);if(hl(d,v),l==="out-in")return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},Rf(a);l==="in-out"&&u.type!==ur&&(v.delayLeave=(p,y,w)=>{const A=$b(r,d);A[String(d.key)]=d,p._leaveCb=()=>{y(),p._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=w})}return a}}},UT=qT;function $b(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function fl(e,t,n,r){const{appear:i,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:c,onLeave:d,onAfterLeave:h,onLeaveCancelled:g,onBeforeAppear:v,onAppear:p,onAfterAppear:y,onAppearCancelled:w}=t,A=String(e.key),I=$b(n,e),k=(m,_)=>{m&&Ar(m,r,9,_)},x=(m,_)=>{const T=_[1];k(m,_),Ze(m)?m.every(E=>E.length<=1)&&T():m.length<=1&&T()},C={mode:s,persisted:a,beforeEnter(m){let _=o;if(!n.isMounted)if(i)_=v||o;else return;m._leaveCb&&m._leaveCb(!0);const T=I[A];T&&Os(e,T)&&T.el._leaveCb&&T.el._leaveCb(),k(_,[m])},enter(m){let _=l,T=u,E=f;if(!n.isMounted)if(i)_=p||l,T=y||u,E=w||f;else return;let R=!1;const D=m._enterCb=$=>{R||(R=!0,$?k(E,[m]):k(T,[m]),C.delayedLeave&&C.delayedLeave(),m._enterCb=void 0)};_?x(_,[m,D]):D()},leave(m,_){const T=String(e.key);if(m._enterCb&&m._enterCb(!0),n.isUnmounting)return _();k(c,[m]);let E=!1;const R=m._leaveCb=D=>{E||(E=!0,_(),D?k(g,[m]):k(h,[m]),m._leaveCb=void 0,I[T]===e&&delete I[T])};I[T]=e,d?x(d,[m,R]):R()},clone(m){return fl(m,t,n,r)}};return C}function Rf(e){if(Wc(e))return e=Di(e),e.children=null,e}function Gp(e){return Wc(e)?e.children?e.children[0]:void 0:e}function hl(e,t){e.shapeFlag&6&&e.component?hl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function lv(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===Fe?(a.patchFlag&128&&i++,r=r.concat(lv(a.children,t,o))):(t||a.type!==ur)&&r.push(o!=null?Di(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function go(e,t){return at(e)?(()=>Zt({name:e.name},t,{setup:e}))():e}const Uo=e=>!!e.type.__asyncLoader,Wc=e=>e.type.__isKeepAlive;function Mb(e,t){Bb(e,"a",t)}function Vb(e,t){Bb(e,"da",t)}function Bb(e,t,n=dn){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Yc(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Wc(i.parent.vnode)&&zT(r,t,n,i),i=i.parent}}function zT(e,t,n,r){const i=Yc(t,e,r,!0);uv(()=>{Yg(r[t],i)},n)}function Yc(e,t,n=dn,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;fo(),Za(n);const o=Ar(t,n,e,a);return qs(),ho(),o});return r?i.unshift(s):i.push(s),s}}const Vi=e=>(t,n=dn)=>(!pl||e==="sp")&&Yc(e,(...r)=>t(...r),n),Jc=Vi("bm"),zt=Vi("m"),Lb=Vi("bu"),Hb=Vi("u"),sn=Vi("bum"),uv=Vi("um"),KT=Vi("sp"),GT=Vi("rtg"),WT=Vi("rtc");function YT(e,t=dn){Yc("ec",e,t)}const cv="components",JT="directives";function ae(e,t){return dv(cv,e,!0,t)||e}const jb=Symbol.for("v-ndc");function qb(e){return Yt(e)?dv(cv,e,!1)||e:e||jb}function nr(e){return dv(JT,e)}function dv(e,t,n=!0,r=!1){const i=_n||dn;if(i){const s=i.type;if(e===cv){const o=IA(s,!1);if(o&&(o===t||o===Ir(t)||o===li(Ir(t))))return s}const a=Wp(i[e]||s[e],t)||Wp(i.appContext[e],t);return!a&&r?s:a}}function Wp(e,t){return e&&(e[t]||e[Ir(t)]||e[li(Ir(t))])}function zn(e,t,n,r){let i;const s=n&&n[r];if(Ze(e)||Yt(e)){i=new Array(e.length);for(let a=0,o=e.length;a<o;a++)i[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(Nt(e))if(e[Symbol.iterator])i=Array.from(e,(a,o)=>t(a,o,void 0,s&&s[o]));else{const a=Object.keys(e);i=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const u=a[o];i[o]=t(e[u],u,o,s&&s[o])}}else i=[];return n&&(n[r]=i),i}function fv(e,t,n={},r,i){if(_n.isCE||_n.parent&&Uo(_n.parent)&&_n.parent.isCE)return t!=="default"&&(n.name=t),b("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),de();const a=s&&Ub(s(n)),o=ke(Fe,{key:n.key||a&&a.key||`_${t}`},a||(r?r():[]),a&&e._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Ub(e){return e.some(t=>ml(t)?!(t.type===ur||t.type===Fe&&!Ub(t.children)):!0)?e:null}const Fh=e=>e?tS(e)?Zc(e)||e.proxy:Fh(e.parent):null,zo=Zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Fh(e.parent),$root:e=>Fh(e.root),$emit:e=>e.emit,$options:e=>hv(e),$forceUpdate:e=>e.f||(e.f=()=>av(e.update)),$nextTick:e=>e.n||(e.n=ht.bind(e.proxy)),$watch:e=>jT.bind(e)}),kf=(e,t)=>e!==Mt&&!e.__isScriptSetup&&mt(e,t),XT={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let u;if(t[0]!=="$"){const h=a[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(kf(r,t))return a[t]=1,r[t];if(i!==Mt&&mt(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&mt(u,t))return a[t]=3,s[t];if(n!==Mt&&mt(n,t))return a[t]=4,n[t];Oh&&(a[t]=0)}}const f=zo[t];let c,d;if(f)return t==="$attrs"&&tr(e,"get",t),f(e);if((c=o.__cssModules)&&(c=c[t]))return c;if(n!==Mt&&mt(n,t))return a[t]=4,n[t];if(d=l.config.globalProperties,mt(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return kf(i,t)?(i[t]=n,!0):r!==Mt&&mt(r,t)?(r[t]=n,!0):mt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||e!==Mt&&mt(e,a)||kf(t,a)||(o=s[0])&&mt(o,a)||mt(r,a)||mt(zo,a)||mt(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:mt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Yp(e){return Ze(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Oh=!0;function ZT(e){const t=hv(e),n=e.proxy,r=e.ctx;Oh=!1,t.beforeCreate&&Jp(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:u,created:f,beforeMount:c,mounted:d,beforeUpdate:h,updated:g,activated:v,deactivated:p,beforeDestroy:y,beforeUnmount:w,destroyed:A,unmounted:I,render:k,renderTracked:x,renderTriggered:C,errorCaptured:m,serverPrefetch:_,expose:T,inheritAttrs:E,components:R,directives:D,filters:$}=t;if(u&&QT(u,r,null),a)for(const L in a){const W=a[L];at(W)&&(r[L]=W.bind(n))}if(i){const L=i.call(n,n);Nt(L)&&(e.data=bn(L))}if(Oh=!0,s)for(const L in s){const W=s[L],te=at(W)?W.bind(n,n):at(W.get)?W.get.bind(n,n):Br,ie=!at(W)&&at(W.set)?W.set.bind(n):Br,Q=F({get:te,set:ie});Object.defineProperty(r,L,{enumerable:!0,configurable:!0,get:()=>Q.value,set:ee=>Q.value=ee})}if(o)for(const L in o)zb(o[L],r,n,L);if(l){const L=at(l)?l.call(n):l;Reflect.ownKeys(L).forEach(W=>{At(W,L[W])})}f&&Jp(f,e,"c");function O(L,W){Ze(W)?W.forEach(te=>L(te.bind(n))):W&&L(W.bind(n))}if(O(Jc,c),O(zt,d),O(Lb,h),O(Hb,g),O(Mb,v),O(Vb,p),O(YT,m),O(WT,x),O(GT,C),O(sn,w),O(uv,I),O(KT,_),Ze(T))if(T.length){const L=e.exposed||(e.exposed={});T.forEach(W=>{Object.defineProperty(L,W,{get:()=>n[W],set:te=>n[W]=te})})}else e.exposed||(e.exposed={});k&&e.render===Br&&(e.render=k),E!=null&&(e.inheritAttrs=E),R&&(e.components=R),D&&(e.directives=D)}function QT(e,t,n=Br){Ze(e)&&(e=Nh(e));for(const r in e){const i=e[r];let s;Nt(i)?"default"in i?s=it(i.from||r,i.default,!0):s=it(i.from||r):s=it(i),kt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function Jp(e,t,n){Ar(Ze(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function zb(e,t,n,r){const i=r.includes(".")?Fb(n,r):()=>n[r];if(Yt(e)){const s=t[e];at(s)&&Re(i,s)}else if(at(e))Re(i,e.bind(n));else if(Nt(e))if(Ze(e))e.forEach(s=>zb(s,t,n,r));else{const s=at(e.handler)?e.handler.bind(n):t[e.handler];at(s)&&Re(i,s,e)}}function hv(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(u=>rc(l,u,a,!0)),rc(l,t,a)),Nt(t)&&s.set(t,l),l}function rc(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&rc(e,s,n,!0),i&&i.forEach(a=>rc(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const o=eA[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const eA={data:Xp,props:Zp,emits:Zp,methods:Ho,computed:Ho,beforeCreate:jn,created:jn,beforeMount:jn,mounted:jn,beforeUpdate:jn,updated:jn,beforeDestroy:jn,beforeUnmount:jn,destroyed:jn,unmounted:jn,activated:jn,deactivated:jn,errorCaptured:jn,serverPrefetch:jn,components:Ho,directives:Ho,watch:nA,provide:Xp,inject:tA};function Xp(e,t){return t?e?function(){return Zt(at(e)?e.call(this,this):e,at(t)?t.call(this,this):t)}:t:e}function tA(e,t){return Ho(Nh(e),Nh(t))}function Nh(e){if(Ze(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function jn(e,t){return e?[...new Set([].concat(e,t))]:t}function Ho(e,t){return e?Zt(Object.create(null),e,t):t}function Zp(e,t){return e?Ze(e)&&Ze(t)?[...new Set([...e,...t])]:Zt(Object.create(null),Yp(e),Yp(t??{})):t}function nA(e,t){if(!e)return t;if(!t)return e;const n=Zt(Object.create(null),e);for(const r in t)n[r]=jn(e[r],t[r]);return n}function Kb(){return{app:null,config:{isNativeTag:M2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rA=0;function iA(e,t){return function(r,i=null){at(r)||(r=Zt({},r)),i!=null&&!Nt(i)&&(i=null);const s=Kb(),a=new Set;let o=!1;const l=s.app={_uid:rA++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:DA,get config(){return s.config},set config(u){},use(u,...f){return a.has(u)||(u&&at(u.install)?(a.add(u),u.install(l,...f)):at(u)&&(a.add(u),u(l,...f))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,f){return f?(s.components[u]=f,l):s.components[u]},directive(u,f){return f?(s.directives[u]=f,l):s.directives[u]},mount(u,f,c){if(!o){const d=b(r,i);return d.appContext=s,f&&t?t(d,u):e(d,u,c),o=!0,l._container=u,u.__vue_app__=l,Zc(d.component)||d.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,f){return s.provides[u]=f,l},runWithContext(u){gl=l;try{return u()}finally{gl=null}}};return l}}let gl=null;function At(e,t){if(dn){let n=dn.provides;const r=dn.parent&&dn.parent.provides;r===n&&(n=dn.provides=Object.create(r)),n[e]=t}}function it(e,t,n=!1){const r=dn||_n;if(r||gl){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:gl._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&at(t)?t.call(r&&r.proxy):t}}function sA(){return!!(dn||_n||gl)}function aA(e,t,n,r=!1){const i={},s={};Qu(s,Xc,1),e.propsDefaults=Object.create(null),Gb(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:_b(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function oA(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=st(i),[l]=e.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let c=0;c<f.length;c++){let d=f[c];if(Uc(e.emitsOptions,d))continue;const h=t[d];if(l)if(mt(s,d))h!==s[d]&&(s[d]=h,u=!0);else{const g=Ir(d);i[g]=$h(l,o,g,h,e,!1)}else h!==s[d]&&(s[d]=h,u=!0)}}}else{Gb(e,t,i,s)&&(u=!0);let f;for(const c in o)(!t||!mt(t,c)&&((f=ta(c))===c||!mt(t,f)))&&(l?n&&(n[c]!==void 0||n[f]!==void 0)&&(i[c]=$h(l,o,c,void 0,e,!0)):delete i[c]);if(s!==o)for(const c in s)(!t||!mt(t,c))&&(delete s[c],u=!0)}u&&Pi(e,"set","$attrs")}function Gb(e,t,n,r){const[i,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Du(l))continue;const u=t[l];let f;i&&mt(i,f=Ir(l))?!s||!s.includes(f)?n[f]=u:(o||(o={}))[f]=u:Uc(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(s){const l=st(n),u=o||Mt;for(let f=0;f<s.length;f++){const c=s[f];n[c]=$h(i,l,c,u[c],e,!mt(u,c))}}return a}function $h(e,t,n,r,i,s){const a=e[n];if(a!=null){const o=mt(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&at(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(Za(i),r=u[n]=l.call(null,t),qs())}else r=l}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===ta(n))&&(r=!0))}return r}function Wb(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!at(e)){const f=c=>{l=!0;const[d,h]=Wb(c,t,!0);Zt(a,d),h&&o.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!s&&!l)return Nt(e)&&r.set(e,La),La;if(Ze(s))for(let f=0;f<s.length;f++){const c=Ir(s[f]);Qp(c)&&(a[c]=Mt)}else if(s)for(const f in s){const c=Ir(f);if(Qp(c)){const d=s[f],h=a[c]=Ze(d)||at(d)?{type:d}:Zt({},d);if(h){const g=n0(Boolean,h.type),v=n0(String,h.type);h[0]=g>-1,h[1]=v<0||g<v,(g>-1||mt(h,"default"))&&o.push(c)}}}const u=[a,o];return Nt(e)&&r.set(e,u),u}function Qp(e){return e[0]!=="$"}function e0(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function t0(e,t){return e0(e)===e0(t)}function n0(e,t){return Ze(t)?t.findIndex(n=>t0(n,e)):at(t)&&t0(t,e)?0:-1}const Yb=e=>e[0]==="_"||e==="$stable",gv=e=>Ze(e)?e.map(Xr):[Xr(e)],lA=(e,t,n)=>{if(t._n)return t;const r=q((...i)=>gv(t(...i)),n);return r._c=!1,r},Jb=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Yb(i))continue;const s=e[i];if(at(s))t[i]=lA(i,s,r);else if(s!=null){const a=gv(s);t[i]=()=>a}}},Xb=(e,t)=>{const n=gv(t);e.slots.default=()=>n},uA=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=st(t),Qu(t,"_",n)):Jb(t,e.slots={})}else e.slots={},t&&Xb(e,t);Qu(e.slots,Xc,1)},cA=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=Mt;if(r.shapeFlag&32){const o=t._;o?n&&o===1?s=!1:(Zt(i,t),!n&&o===1&&delete i._):(s=!t.$stable,Jb(t,i)),a=t}else t&&(Xb(e,t),a={default:1});if(s)for(const o in i)!Yb(o)&&!(o in a)&&delete i[o]};function Mh(e,t,n,r,i=!1){if(Ze(e)){e.forEach((d,h)=>Mh(d,t&&(Ze(t)?t[h]:t),n,r,i));return}if(Uo(r)&&!i)return;const s=r.shapeFlag&4?Zc(r.component)||r.component.proxy:r.el,a=i?null:s,{i:o,r:l}=e,u=t&&t.r,f=o.refs===Mt?o.refs={}:o.refs,c=o.setupState;if(u!=null&&u!==l&&(Yt(u)?(f[u]=null,mt(c,u)&&(c[u]=null)):kt(u)&&(u.value=null)),at(l))ds(l,o,12,[a,f]);else{const d=Yt(l),h=kt(l);if(d||h){const g=()=>{if(e.f){const v=d?mt(c,l)?c[l]:f[l]:l.value;i?Ze(v)&&Yg(v,s):Ze(v)?v.includes(s)||v.push(s):d?(f[l]=[s],mt(c,l)&&(c[l]=f[l])):(l.value=[s],e.k&&(f[e.k]=l.value))}else d?(f[l]=a,mt(c,l)&&(c[l]=a)):h&&(l.value=a,e.k&&(f[e.k]=a))};a?(g.id=-1,Yn(g,n)):g()}}}const Yn=HT;function dA(e){return fA(e)}function fA(e,t){const n=Ih();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:f,parentNode:c,nextSibling:d,setScopeId:h=Br,insertStaticContent:g}=e,v=(V,H,G,re=null,ce=null,me=null,Ce=!1,ve=null,P=!!H.dynamicChildren)=>{if(V===H)return;V&&!Os(V,H)&&(re=B(V),ee(V,ce,me,!0),V=null),H.patchFlag===-2&&(P=!1,H.dynamicChildren=null);const{type:N,ref:j,shapeFlag:U}=H;switch(N){case Ll:p(V,H,G,re);break;case ur:y(V,H,G,re);break;case Pf:V==null&&w(H,G,re,Ce);break;case Fe:R(V,H,G,re,ce,me,Ce,ve,P);break;default:U&1?k(V,H,G,re,ce,me,Ce,ve,P):U&6?D(V,H,G,re,ce,me,Ce,ve,P):(U&64||U&128)&&N.process(V,H,G,re,ce,me,Ce,ve,P,z)}j!=null&&ce&&Mh(j,V&&V.ref,me,H||V,!H)},p=(V,H,G,re)=>{if(V==null)r(H.el=o(H.children),G,re);else{const ce=H.el=V.el;H.children!==V.children&&u(ce,H.children)}},y=(V,H,G,re)=>{V==null?r(H.el=l(H.children||""),G,re):H.el=V.el},w=(V,H,G,re)=>{[V.el,V.anchor]=g(V.children,H,G,re,V.el,V.anchor)},A=({el:V,anchor:H},G,re)=>{let ce;for(;V&&V!==H;)ce=d(V),r(V,G,re),V=ce;r(H,G,re)},I=({el:V,anchor:H})=>{let G;for(;V&&V!==H;)G=d(V),i(V),V=G;i(H)},k=(V,H,G,re,ce,me,Ce,ve,P)=>{Ce=Ce||H.type==="svg",V==null?x(H,G,re,ce,me,Ce,ve,P):_(V,H,ce,me,Ce,ve,P)},x=(V,H,G,re,ce,me,Ce,ve)=>{let P,N;const{type:j,props:U,shapeFlag:J,transition:oe,dirs:fe}=V;if(P=V.el=a(V.type,me,U&&U.is,U),J&8?f(P,V.children):J&16&&m(V.children,P,null,re,ce,me&&j!=="foreignObject",Ce,ve),fe&&Ts(V,null,re,"created"),C(P,V,V.scopeId,Ce,re),U){for(const Be in U)Be!=="value"&&!Du(Be)&&s(P,Be,null,U[Be],me,V.children,re,ce,le);"value"in U&&s(P,"value",null,U.value),(N=U.onVnodeBeforeMount)&&Yr(N,re,V)}fe&&Ts(V,null,re,"beforeMount");const Oe=(!ce||ce&&!ce.pendingBranch)&&oe&&!oe.persisted;Oe&&oe.beforeEnter(P),r(P,H,G),((N=U&&U.onVnodeMounted)||Oe||fe)&&Yn(()=>{N&&Yr(N,re,V),Oe&&oe.enter(P),fe&&Ts(V,null,re,"mounted")},ce)},C=(V,H,G,re,ce)=>{if(G&&h(V,G),re)for(let me=0;me<re.length;me++)h(V,re[me]);if(ce){let me=ce.subTree;if(H===me){const Ce=ce.vnode;C(V,Ce,Ce.scopeId,Ce.slotScopeIds,ce.parent)}}},m=(V,H,G,re,ce,me,Ce,ve,P=0)=>{for(let N=P;N<V.length;N++){const j=V[N]=ve?ns(V[N]):Xr(V[N]);v(null,j,H,G,re,ce,me,Ce,ve)}},_=(V,H,G,re,ce,me,Ce)=>{const ve=H.el=V.el;let{patchFlag:P,dynamicChildren:N,dirs:j}=H;P|=V.patchFlag&16;const U=V.props||Mt,J=H.props||Mt;let oe;G&&As(G,!1),(oe=J.onVnodeBeforeUpdate)&&Yr(oe,G,H,V),j&&Ts(H,V,G,"beforeUpdate"),G&&As(G,!0);const fe=ce&&H.type!=="foreignObject";if(N?T(V.dynamicChildren,N,ve,G,re,fe,me):Ce||W(V,H,ve,null,G,re,fe,me,!1),P>0){if(P&16)E(ve,H,U,J,G,re,ce);else if(P&2&&U.class!==J.class&&s(ve,"class",null,J.class,ce),P&4&&s(ve,"style",U.style,J.style,ce),P&8){const Oe=H.dynamicProps;for(let Be=0;Be<Oe.length;Be++){const ze=Oe[Be],ut=U[ze],Gt=J[ze];(Gt!==ut||ze==="value")&&s(ve,ze,ut,Gt,ce,V.children,G,re,le)}}P&1&&V.children!==H.children&&f(ve,H.children)}else!Ce&&N==null&&E(ve,H,U,J,G,re,ce);((oe=J.onVnodeUpdated)||j)&&Yn(()=>{oe&&Yr(oe,G,H,V),j&&Ts(H,V,G,"updated")},re)},T=(V,H,G,re,ce,me,Ce)=>{for(let ve=0;ve<H.length;ve++){const P=V[ve],N=H[ve],j=P.el&&(P.type===Fe||!Os(P,N)||P.shapeFlag&70)?c(P.el):G;v(P,N,j,null,re,ce,me,Ce,!0)}},E=(V,H,G,re,ce,me,Ce)=>{if(G!==re){if(G!==Mt)for(const ve in G)!Du(ve)&&!(ve in re)&&s(V,ve,G[ve],null,Ce,H.children,ce,me,le);for(const ve in re){if(Du(ve))continue;const P=re[ve],N=G[ve];P!==N&&ve!=="value"&&s(V,ve,N,P,Ce,H.children,ce,me,le)}"value"in re&&s(V,"value",G.value,re.value)}},R=(V,H,G,re,ce,me,Ce,ve,P)=>{const N=H.el=V?V.el:o(""),j=H.anchor=V?V.anchor:o("");let{patchFlag:U,dynamicChildren:J,slotScopeIds:oe}=H;oe&&(ve=ve?ve.concat(oe):oe),V==null?(r(N,G,re),r(j,G,re),m(H.children,G,j,ce,me,Ce,ve,P)):U>0&&U&64&&J&&V.dynamicChildren?(T(V.dynamicChildren,J,G,ce,me,Ce,ve),(H.key!=null||ce&&H===ce.subTree)&&vv(V,H,!0)):W(V,H,G,j,ce,me,Ce,ve,P)},D=(V,H,G,re,ce,me,Ce,ve,P)=>{H.slotScopeIds=ve,V==null?H.shapeFlag&512?ce.ctx.activate(H,G,re,Ce,P):$(H,G,re,ce,me,Ce,P):M(V,H,P)},$=(V,H,G,re,ce,me,Ce)=>{const ve=V.component=xA(V,re,ce);if(Wc(V)&&(ve.ctx.renderer=z),CA(ve),ve.asyncDep){if(ce&&ce.registerDep(ve,O),!V.el){const P=ve.subTree=b(ur);y(null,P,H,G)}return}O(ve,V,H,G,ce,me,Ce)},M=(V,H,G)=>{const re=H.component=V.component;if(VT(V,H,G))if(re.asyncDep&&!re.asyncResolved){L(re,H,G);return}else re.next=H,DT(re.update),re.update();else H.el=V.el,re.vnode=H},O=(V,H,G,re,ce,me,Ce)=>{const ve=()=>{if(V.isMounted){let{next:j,bu:U,u:J,parent:oe,vnode:fe}=V,Oe=j,Be;As(V,!1),j?(j.el=fe.el,L(V,j,Ce)):j=fe,U&&Fu(U),(Be=j.props&&j.props.onVnodeBeforeUpdate)&&Yr(Be,oe,j,fe),As(V,!0);const ze=If(V),ut=V.subTree;V.subTree=ze,v(ut,ze,c(ut.el),B(ut),V,ce,me),j.el=ze.el,Oe===null&&BT(V,ze.el),J&&Yn(J,ce),(Be=j.props&&j.props.onVnodeUpdated)&&Yn(()=>Yr(Be,oe,j,fe),ce)}else{let j;const{el:U,props:J}=H,{bm:oe,m:fe,parent:Oe}=V,Be=Uo(H);if(As(V,!1),oe&&Fu(oe),!Be&&(j=J&&J.onVnodeBeforeMount)&&Yr(j,Oe,H),As(V,!0),U&&Ee){const ze=()=>{V.subTree=If(V),Ee(U,V.subTree,V,ce,null)};Be?H.type.__asyncLoader().then(()=>!V.isUnmounted&&ze()):ze()}else{const ze=V.subTree=If(V);v(null,ze,G,re,V,ce,me),H.el=ze.el}if(fe&&Yn(fe,ce),!Be&&(j=J&&J.onVnodeMounted)){const ze=H;Yn(()=>Yr(j,Oe,ze),ce)}(H.shapeFlag&256||Oe&&Uo(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&V.a&&Yn(V.a,ce),V.isMounted=!0,H=G=re=null}},P=V.effect=new Qg(ve,()=>av(N),V.scope),N=V.update=()=>P.run();N.id=V.uid,As(V,!0),N()},L=(V,H,G)=>{H.component=V;const re=V.vnode.props;V.vnode=H,V.next=null,oA(V,H.props,re,G),cA(V,H.children,G),fo(),zp(),ho()},W=(V,H,G,re,ce,me,Ce,ve,P=!1)=>{const N=V&&V.children,j=V?V.shapeFlag:0,U=H.children,{patchFlag:J,shapeFlag:oe}=H;if(J>0){if(J&128){ie(N,U,G,re,ce,me,Ce,ve,P);return}else if(J&256){te(N,U,G,re,ce,me,Ce,ve,P);return}}oe&8?(j&16&&le(N,ce,me),U!==N&&f(G,U)):j&16?oe&16?ie(N,U,G,re,ce,me,Ce,ve,P):le(N,ce,me,!0):(j&8&&f(G,""),oe&16&&m(U,G,re,ce,me,Ce,ve,P))},te=(V,H,G,re,ce,me,Ce,ve,P)=>{V=V||La,H=H||La;const N=V.length,j=H.length,U=Math.min(N,j);let J;for(J=0;J<U;J++){const oe=H[J]=P?ns(H[J]):Xr(H[J]);v(V[J],oe,G,null,ce,me,Ce,ve,P)}N>j?le(V,ce,me,!0,!1,U):m(H,G,re,ce,me,Ce,ve,P,U)},ie=(V,H,G,re,ce,me,Ce,ve,P)=>{let N=0;const j=H.length;let U=V.length-1,J=j-1;for(;N<=U&&N<=J;){const oe=V[N],fe=H[N]=P?ns(H[N]):Xr(H[N]);if(Os(oe,fe))v(oe,fe,G,null,ce,me,Ce,ve,P);else break;N++}for(;N<=U&&N<=J;){const oe=V[U],fe=H[J]=P?ns(H[J]):Xr(H[J]);if(Os(oe,fe))v(oe,fe,G,null,ce,me,Ce,ve,P);else break;U--,J--}if(N>U){if(N<=J){const oe=J+1,fe=oe<j?H[oe].el:re;for(;N<=J;)v(null,H[N]=P?ns(H[N]):Xr(H[N]),G,fe,ce,me,Ce,ve,P),N++}}else if(N>J)for(;N<=U;)ee(V[N],ce,me,!0),N++;else{const oe=N,fe=N,Oe=new Map;for(N=fe;N<=J;N++){const Tn=H[N]=P?ns(H[N]):Xr(H[N]);Tn.key!=null&&Oe.set(Tn.key,N)}let Be,ze=0;const ut=J-fe+1;let Gt=!1,ya=0;const pi=new Array(ut);for(N=0;N<ut;N++)pi[N]=0;for(N=oe;N<=U;N++){const Tn=V[N];if(ze>=ut){ee(Tn,ce,me,!0);continue}let Wn;if(Tn.key!=null)Wn=Oe.get(Tn.key);else for(Be=fe;Be<=J;Be++)if(pi[Be-fe]===0&&Os(Tn,H[Be])){Wn=Be;break}Wn===void 0?ee(Tn,ce,me,!0):(pi[Wn-fe]=N+1,Wn>=ya?ya=Wn:Gt=!0,v(Tn,H[Wn],G,null,ce,me,Ce,ve,P),ze++)}const Es=Gt?hA(pi):La;for(Be=Es.length-1,N=ut-1;N>=0;N--){const Tn=fe+N,Wn=H[Tn],ba=Tn+1<j?H[Tn+1].el:re;pi[N]===0?v(null,Wn,G,ba,ce,me,Ce,ve,P):Gt&&(Be<0||N!==Es[Be]?Q(Wn,G,ba,2):Be--)}}},Q=(V,H,G,re,ce=null)=>{const{el:me,type:Ce,transition:ve,children:P,shapeFlag:N}=V;if(N&6){Q(V.component.subTree,H,G,re);return}if(N&128){V.suspense.move(H,G,re);return}if(N&64){Ce.move(V,H,G,z);return}if(Ce===Fe){r(me,H,G);for(let U=0;U<P.length;U++)Q(P[U],H,G,re);r(V.anchor,H,G);return}if(Ce===Pf){A(V,H,G);return}if(re!==2&&N&1&&ve)if(re===0)ve.beforeEnter(me),r(me,H,G),Yn(()=>ve.enter(me),ce);else{const{leave:U,delayLeave:J,afterLeave:oe}=ve,fe=()=>r(me,H,G),Oe=()=>{U(me,()=>{fe(),oe&&oe()})};J?J(me,fe,Oe):Oe()}else r(me,H,G)},ee=(V,H,G,re=!1,ce=!1)=>{const{type:me,props:Ce,ref:ve,children:P,dynamicChildren:N,shapeFlag:j,patchFlag:U,dirs:J}=V;if(ve!=null&&Mh(ve,null,G,V,!0),j&256){H.ctx.deactivate(V);return}const oe=j&1&&J,fe=!Uo(V);let Oe;if(fe&&(Oe=Ce&&Ce.onVnodeBeforeUnmount)&&Yr(Oe,H,V),j&6)$e(V.component,G,re);else{if(j&128){V.suspense.unmount(G,re);return}oe&&Ts(V,null,H,"beforeUnmount"),j&64?V.type.remove(V,H,G,ce,z,re):N&&(me!==Fe||U>0&&U&64)?le(N,H,G,!1,!0):(me===Fe&&U&384||!ce&&j&16)&&le(P,H,G),re&&ye(V)}(fe&&(Oe=Ce&&Ce.onVnodeUnmounted)||oe)&&Yn(()=>{Oe&&Yr(Oe,H,V),oe&&Ts(V,null,H,"unmounted")},G)},ye=V=>{const{type:H,el:G,anchor:re,transition:ce}=V;if(H===Fe){we(G,re);return}if(H===Pf){I(V);return}const me=()=>{i(G),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(V.shapeFlag&1&&ce&&!ce.persisted){const{leave:Ce,delayLeave:ve}=ce,P=()=>Ce(G,me);ve?ve(V.el,me,P):P()}else me()},we=(V,H)=>{let G;for(;V!==H;)G=d(V),i(V),V=G;i(H)},$e=(V,H,G)=>{const{bum:re,scope:ce,update:me,subTree:Ce,um:ve}=V;re&&Fu(re),ce.stop(),me&&(me.active=!1,ee(Ce,V,H,G)),ve&&Yn(ve,H),Yn(()=>{V.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},le=(V,H,G,re=!1,ce=!1,me=0)=>{for(let Ce=me;Ce<V.length;Ce++)ee(V[Ce],H,G,re,ce)},B=V=>V.shapeFlag&6?B(V.component.subTree):V.shapeFlag&128?V.suspense.next():d(V.anchor||V.el),K=(V,H,G)=>{V==null?H._vnode&&ee(H._vnode,null,null,!0):v(H._vnode||null,V,H,null,null,null,G),zp(),kb(),H._vnode=V},z={p:v,um:ee,m:Q,r:ye,mt:$,mc:m,pc:W,pbc:T,n:B,o:e};let se,Ee;return t&&([se,Ee]=t(z)),{render:K,hydrate:se,createApp:iA(K,se)}}function As({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function vv(e,t,n=!1){const r=e.children,i=t.children;if(Ze(r)&&Ze(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=ns(i[s]),o.el=a.el),n||vv(a,o)),o.type===Ll&&(o.el=a.el)}}function hA(e){const t=e.slice(),n=[0];let r,i,s,a,o;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<u?s=o+1:a=o;u<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}const gA=e=>e.__isTeleport,Ko=e=>e&&(e.disabled||e.disabled===""),r0=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Vh=(e,t)=>{const n=e&&e.to;return Yt(n)?t?t(n):null:n},vA={__isTeleport:!0,process(e,t,n,r,i,s,a,o,l,u){const{mc:f,pc:c,pbc:d,o:{insert:h,querySelector:g,createText:v,createComment:p}}=u,y=Ko(t.props);let{shapeFlag:w,children:A,dynamicChildren:I}=t;if(e==null){const k=t.el=v(""),x=t.anchor=v("");h(k,n,r),h(x,n,r);const C=t.target=Vh(t.props,g),m=t.targetAnchor=v("");C&&(h(m,C),a=a||r0(C));const _=(T,E)=>{w&16&&f(A,T,E,i,s,a,o,l)};y?_(n,x):C&&_(C,m)}else{t.el=e.el;const k=t.anchor=e.anchor,x=t.target=e.target,C=t.targetAnchor=e.targetAnchor,m=Ko(e.props),_=m?n:x,T=m?k:C;if(a=a||r0(x),I?(d(e.dynamicChildren,I,_,i,s,a,o),vv(e,t,!0)):l||c(e,t,_,T,i,s,a,o,!1),y)m||pu(t,n,k,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const E=t.target=Vh(t.props,g);E&&pu(t,E,null,u,0)}else m&&pu(t,x,C,u,1)}Zb(t)},remove(e,t,n,r,{um:i,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:u,targetAnchor:f,target:c,props:d}=e;if(c&&s(f),(a||!Ko(d))&&(s(u),o&16))for(let h=0;h<l.length;h++){const g=l[h];i(g,t,n,!0,!!g.dynamicChildren)}},move:pu,hydrate:mA};function pu(e,t,n,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:u,props:f}=e,c=s===2;if(c&&r(a,t,n),(!c||Ko(f))&&l&16)for(let d=0;d<u.length;d++)i(u[d],t,n,2);c&&r(o,t,n)}function mA(e,t,n,r,i,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},u){const f=t.target=Vh(t.props,l);if(f){const c=f._lpa||f.firstChild;if(t.shapeFlag&16)if(Ko(t.props))t.anchor=u(a(e),t,o(e),n,r,i,s),t.targetAnchor=c;else{t.anchor=a(e);let d=c;for(;d;)if(d=a(d),d&&d.nodeType===8&&d.data==="teleport anchor"){t.targetAnchor=d,f._lpa=t.targetAnchor&&a(t.targetAnchor);break}u(c,t,f,n,r,i,s)}Zb(t)}return t.anchor&&a(t.anchor)}const pA=vA;function Zb(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Fe=Symbol.for("v-fgt"),Ll=Symbol.for("v-txt"),ur=Symbol.for("v-cmt"),Pf=Symbol.for("v-stc"),Go=[];let Mr=null;function de(e=!1){Go.push(Mr=e?null:[])}function yA(){Go.pop(),Mr=Go[Go.length-1]||null}let vl=1;function i0(e){vl+=e}function Qb(e){return e.dynamicChildren=vl>0?Mr||La:null,yA(),vl>0&&Mr&&Mr.push(e),e}function et(e,t,n,r,i,s){return Qb(He(e,t,n,r,i,s,!0))}function ke(e,t,n,r,i){return Qb(b(e,t,n,r,i,!0))}function ml(e){return e?e.__v_isVNode===!0:!1}function Os(e,t){return e.type===t.type&&e.key===t.key}const Xc="__vInternal",eS=({key:e})=>e??null,Ou=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Yt(e)||kt(e)||at(e)?{i:_n,r:e,k:t,f:!!n}:e:null);function He(e,t=null,n=null,r=0,i=null,s=e===Fe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&eS(t),ref:t&&Ou(t),scopeId:zc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:_n};return o?(mv(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Yt(n)?8:16),vl>0&&!a&&Mr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Mr.push(l),l}const b=bA;function bA(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===jb)&&(e=ur),ml(e)){const o=Di(e,t,!0);return n&&mv(o,n),vl>0&&!s&&Mr&&(o.shapeFlag&6?Mr[Mr.indexOf(e)]=o:Mr.push(o)),o.patchFlag|=-2,o}if(RA(e)&&(e=e.__vccOpts),t){t=SA(t);let{class:o,style:l}=t;o&&!Yt(o)&&(t.class=ri(o)),Nt(l)&&(wb(l)&&!Ze(l)&&(l=Zt({},l)),t.style=ll(l))}const a=Yt(e)?1:LT(e)?128:gA(e)?64:Nt(e)?4:at(e)?2:0;return He(e,t,n,r,i,a,s,!0)}function SA(e){return e?wb(e)||Xc in e?Zt({},e):e:null}function Di(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=e,o=t?xe(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&eS(o),ref:t&&t.ref?n&&i?Ze(i)?i.concat(Ou(t)):[i,Ou(t)]:Ou(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Di(e.ssContent),ssFallback:e.ssFallback&&Di(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Ge(e=" ",t=0){return b(Ll,null,e,t)}function Je(e="",t=!1){return t?(de(),ke(ur,null,e)):b(ur,null,e)}function Xr(e){return e==null||typeof e=="boolean"?b(ur):Ze(e)?b(Fe,null,e.slice()):typeof e=="object"?ns(e):b(Ll,null,String(e))}function ns(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Di(e)}function mv(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ze(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),mv(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Xc in t)?t._ctx=_n:i===3&&_n&&(_n.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:_n},n=32):(t=String(t),r&64?(n=16,t=[Ge(t)]):n=8);e.children=t,e.shapeFlag|=n}function xe(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=ri([t.class,r.class]));else if(i==="style")t.style=ll([t.style,r.style]);else if(Vc(i)){const s=t[i],a=r[i];a&&s!==a&&!(Ze(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=r[i])}return t}function Yr(e,t,n,r=null){Ar(e,t,7,[n,r])}const _A=Kb();let wA=0;function xA(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||_A,s={uid:wA++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new ub(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wb(r,i),emitsOptions:Db(r,i),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:r.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=NT.bind(null,s),e.ce&&e.ce(s),s}let dn=null;const pv=()=>dn||_n;let yv,Sa,s0="__VUE_INSTANCE_SETTERS__";(Sa=Ih()[s0])||(Sa=Ih()[s0]=[]),Sa.push(e=>dn=e),yv=e=>{Sa.length>1?Sa.forEach(t=>t(e)):Sa[0](e)};const Za=e=>{yv(e),e.scope.on()},qs=()=>{dn&&dn.scope.off(),yv(null)};function tS(e){return e.vnode.shapeFlag&4}let pl=!1;function CA(e,t=!1){pl=t;const{props:n,children:r}=e.vnode,i=tS(e);aA(e,n,i,t),uA(e,r);const s=i?EA(e,t):void 0;return pl=!1,s}function EA(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=jc(new Proxy(e.ctx,XT));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?AA(e):null;Za(e),fo();const s=ds(r,e,0,[e.props,i]);if(ho(),qs(),ib(s)){if(s.then(qs,qs),t)return s.then(a=>{a0(e,a,t)}).catch(a=>{qc(a,e,0)});e.asyncDep=s}else a0(e,s,t)}else nS(e,t)}function a0(e,t,n){at(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Nt(t)&&(e.setupState=Tb(t)),nS(e,n)}let o0;function nS(e,t,n){const r=e.type;if(!e.render){if(!t&&o0&&!r.render){const i=r.template||hv(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,u=Zt(Zt({isCustomElement:s,delimiters:o},a),l);r.render=o0(i,u)}}e.render=r.render||Br}Za(e),fo(),ZT(e),ho(),qs()}function TA(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return tr(e,"get","$attrs"),t[n]}}))}function AA(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return TA(e)},slots:e.slots,emit:e.emit,expose:t}}function Zc(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Tb(jc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in zo)return zo[n](e)},has(t,n){return n in t||n in zo}}))}function IA(e,t=!0){return at(e)?e.displayName||e.name:e.name||t&&e.__name}function RA(e){return at(e)&&"__vccOpts"in e}const F=(e,t)=>RT(e,t,pl);function ui(e,t,n){const r=arguments.length;return r===2?Nt(t)&&!Ze(t)?ml(t)?b(e,null,[t]):b(e,t):b(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ml(n)&&(n=[n]),b(e,t,n))}const kA=Symbol.for("v-scx"),PA=()=>it(kA),DA="3.3.4",FA="http://www.w3.org/2000/svg",Ns=typeof document<"u"?document:null,l0=Ns&&Ns.createElement("template"),OA={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Ns.createElementNS(FA,e):Ns.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Ns.createTextNode(e),createComment:e=>Ns.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ns.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{l0.innerHTML=r?`<svg>${e}</svg>`:e;const o=l0.content;if(r){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function NA(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function $A(e,t,n){const r=e.style,i=Yt(n);if(n&&!i){if(t&&!Yt(t))for(const s in t)n[s]==null&&Bh(r,s,"");for(const s in n)Bh(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const u0=/\s*!important$/;function Bh(e,t,n){if(Ze(n))n.forEach(r=>Bh(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=MA(e,t);u0.test(n)?e.setProperty(ta(r),n.replace(u0,""),"important"):e[r]=n}}const c0=["Webkit","Moz","ms"],Df={};function MA(e,t){const n=Df[t];if(n)return n;let r=Ir(t);if(r!=="filter"&&r in e)return Df[t]=r;r=li(r);for(let i=0;i<c0.length;i++){const s=c0[i]+r;if(s in e)return Df[t]=s}return t}const d0="http://www.w3.org/1999/xlink";function VA(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(d0,t.slice(6,t.length)):e.setAttributeNS(d0,t,n);else{const s=Y2(t);n==null||s&&!ob(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function BA(e,t,n,r,i,s,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,s),e[t]=n??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){e._value=n;const u=o==="OPTION"?e.getAttribute("value"):e.value,f=n??"";u!==f&&(e.value=f),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=ob(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Da(e,t,n,r){e.addEventListener(t,n,r)}function LA(e,t,n,r){e.removeEventListener(t,n,r)}function HA(e,t,n,r,i=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[o,l]=jA(t);if(r){const u=s[t]=zA(r,i);Da(e,o,u,l)}else a&&(LA(e,o,a,l),s[t]=void 0)}}const f0=/(?:Once|Passive|Capture)$/;function jA(e){let t;if(f0.test(e)){t={};let r;for(;r=e.match(f0);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ta(e.slice(2)),t]}let Ff=0;const qA=Promise.resolve(),UA=()=>Ff||(qA.then(()=>Ff=0),Ff=Date.now());function zA(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ar(KA(r,n.value),t,5,[r])};return n.value=e,n.attached=UA(),n}function KA(e,t){if(Ze(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const h0=/^on[a-z]/,GA=(e,t,n,r,i=!1,s,a,o,l)=>{t==="class"?NA(e,r,i):t==="style"?$A(e,n,r):Vc(t)?Wg(t)||HA(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):WA(e,t,r,i))?BA(e,t,r,s,a,o,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),VA(e,t,r,i))};function WA(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&h0.test(t)&&at(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||h0.test(t)&&Yt(n)?!1:t in e}const Ji="transition",Po="animation",ii=(e,{slots:t})=>ui(UT,iS(e),t);ii.displayName="Transition";const rS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},YA=ii.props=Zt({},Nb,rS),Is=(e,t=[])=>{Ze(e)?e.forEach(n=>n(...t)):e&&e(...t)},g0=e=>e?Ze(e)?e.some(t=>t.length>1):e.length>1:!1;function iS(e){const t={};for(const R in e)R in rS||(t[R]=e[R]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:f=o,leaveFromClass:c=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,g=JA(i),v=g&&g[0],p=g&&g[1],{onBeforeEnter:y,onEnter:w,onEnterCancelled:A,onLeave:I,onLeaveCancelled:k,onBeforeAppear:x=y,onAppear:C=w,onAppearCancelled:m=A}=t,_=(R,D,$)=>{es(R,D?f:o),es(R,D?u:a),$&&$()},T=(R,D)=>{R._isLeaving=!1,es(R,c),es(R,h),es(R,d),D&&D()},E=R=>(D,$)=>{const M=R?C:w,O=()=>_(D,R,$);Is(M,[D,O]),v0(()=>{es(D,R?l:s),wi(D,R?f:o),g0(M)||m0(D,r,v,O)})};return Zt(t,{onBeforeEnter(R){Is(y,[R]),wi(R,s),wi(R,a)},onBeforeAppear(R){Is(x,[R]),wi(R,l),wi(R,u)},onEnter:E(!1),onAppear:E(!0),onLeave(R,D){R._isLeaving=!0;const $=()=>T(R,D);wi(R,c),aS(),wi(R,d),v0(()=>{R._isLeaving&&(es(R,c),wi(R,h),g0(I)||m0(R,r,p,$))}),Is(I,[R,$])},onEnterCancelled(R){_(R,!1),Is(A,[R])},onAppearCancelled(R){_(R,!0),Is(m,[R])},onLeaveCancelled(R){T(R),Is(k,[R])}})}function JA(e){if(e==null)return null;if(Nt(e))return[Of(e.enter),Of(e.leave)];{const t=Of(e);return[t,t]}}function Of(e){return q2(e)}function wi(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function es(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function v0(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let XA=0;function m0(e,t,n,r){const i=e._endId=++XA,s=()=>{i===e._endId&&r()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=sS(e,t);if(!a)return r();const u=a+"end";let f=0;const c=()=>{e.removeEventListener(u,d),s()},d=h=>{h.target===e&&++f>=l&&c()};setTimeout(()=>{f<l&&c()},o+1),e.addEventListener(u,d)}function sS(e,t){const n=window.getComputedStyle(e),r=g=>(n[g]||"").split(", "),i=r(`${Ji}Delay`),s=r(`${Ji}Duration`),a=p0(i,s),o=r(`${Po}Delay`),l=r(`${Po}Duration`),u=p0(o,l);let f=null,c=0,d=0;t===Ji?a>0&&(f=Ji,c=a,d=s.length):t===Po?u>0&&(f=Po,c=u,d=l.length):(c=Math.max(a,u),f=c>0?a>u?Ji:Po:null,d=f?f===Ji?s.length:l.length:0);const h=f===Ji&&/\b(transform|all)(,|$)/.test(r(`${Ji}Property`).toString());return{type:f,timeout:c,propCount:d,hasTransform:h}}function p0(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>y0(n)+y0(e[r])))}function y0(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function aS(){return document.body.offsetHeight}const oS=new WeakMap,lS=new WeakMap,uS={name:"TransitionGroup",props:Zt({},YA,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=pv(),r=Ob();let i,s;return Hb(()=>{if(!i.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!nI(i[0].el,n.vnode.el,a))return;i.forEach(QA),i.forEach(eI);const o=i.filter(tI);aS(),o.forEach(l=>{const u=l.el,f=u.style;wi(u,a),f.transform=f.webkitTransform=f.transitionDuration="";const c=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",c),u._moveCb=null,es(u,a))};u.addEventListener("transitionend",c)})}),()=>{const a=st(e),o=iS(a);let l=a.tag||Fe;i=s,s=t.default?lv(t.default()):[];for(let u=0;u<s.length;u++){const f=s[u];f.key!=null&&hl(f,fl(f,o,r,n))}if(i)for(let u=0;u<i.length;u++){const f=i[u];hl(f,fl(f,o,r,n)),oS.set(f,f.el.getBoundingClientRect())}return b(l,null,s)}}},ZA=e=>delete e.mode;uS.props;const bv=uS;function QA(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function eI(e){lS.set(e,e.el.getBoundingClientRect())}function tI(e){const t=oS.get(e),n=lS.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function nI(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&r.classList.remove(o))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(r);const{hasTransform:s}=sS(r);return i.removeChild(r),s}const b0=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ze(t)?n=>Fu(t,n):t};function rI(e){e.target.composing=!0}function S0(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const iI={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=b0(i);const s=r||i.props&&i.props.type==="number";Da(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),s&&(o=Ah(o)),e._assign(o)}),n&&Da(e,"change",()=>{e.value=e.value.trim()}),t||(Da(e,"compositionstart",rI),Da(e,"compositionend",S0),Da(e,"change",S0))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=b0(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&Ah(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},sI=["ctrl","shift","alt","meta"],aI={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>sI.some(n=>e[`${n}Key`]&&!t.includes(n))},_0=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const s=aI[t[i]];if(s&&s(n,t))return}return e(n,...r)},oI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Lh=(e,t)=>n=>{if(!("key"in n))return;const r=ta(n.key);if(t.some(i=>i===r||oI[i]===r))return e(n)},ci={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Do(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Do(e,!0),r.enter(e)):r.leave(e,()=>{Do(e,!1)}):Do(e,t))},beforeUnmount(e,{value:t}){Do(e,t)}};function Do(e,t){e.style.display=t?e._vod:"none"}const lI=Zt({patchProp:GA},OA);let w0;function uI(){return w0||(w0=dA(lI))}const cI=(...e)=>{const t=uI().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=dI(r);if(!i)return;const s=t._component;!at(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function dI(e){return Yt(e)?document.querySelector(e):e}class fI{error(t,n=null,r=null){console.error(`[adion]${n?` [${n}]`:""}: ${t}`,r?` - ${r}`:"")}success(t,n=null){console.log(`[adion] ${t}`,n?` - ${n}`:"")}info(t,n=null){console.info(`[adion] ${t}`,n?` - ${n}`:"")}debug(t,n=null){console.debug(`[adion] ${t}`,n?` - ${n}`:"")}}const hI="uc.adion-api.eu/api",gI="12a2c1f2-963f-47a2-a0ab-02a92abec5bf",vI="ws.adion-voip.eu",mI="32776",pI="uc.adion-voip.eu",yI="Lilou Adion-UC-Client/1.0.0",Qa={API_URL:hI,API_AK:gI,WS_URL:vI,WS_PORT:mI,UC_REALM:pI,USER_AGENT:yI};(function(){var e;try{if(typeof document<"u"){var t=document.createElement("style");t.nonce=(e=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:e.content,t.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(t)}}catch(n){console.error("vite-plugin-css-injected-by-js",n)}})();const cS=new Map;class bI{constructor(t,n,r){this.remaining=n,this.callback=t,this.notifyItem=r,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}}function SI(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const ic=SI(),Nf="[-+]?[0-9]*.?[0-9]+",x0=[{name:"px",regexp:new RegExp(`^${Nf}px$`)},{name:"%",regexp:new RegExp(`^${Nf}%$`)},{name:"px",regexp:new RegExp(`^${Nf}$`)}],_I=e=>{if(e==="auto")return{type:e,value:0};for(let t=0;t<x0.length;t++){const n=x0[t];if(n.regexp.test(e))return{type:n.name,value:parseFloat(e)}}return{type:"",value:e}},wI=e=>{switch(typeof e){case"number":return{type:"px",value:e};case"string":return _I(e);default:return{type:"",value:e}}},C0={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},xI=(e=>()=>e++)(0),CI=e=>typeof e!="string"?[]:e.split(/\s+/gi).filter(Boolean),EI=e=>{typeof e=="string"&&(e=CI(e));let t=null,n=null;return e.forEach(r=>{C0.y.has(r)&&(n=r),C0.x.has(r)&&(t=r)}),{x:t,y:n}},$f={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:e=>({height:[e.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},TI=go({__name:"VelocityGroup",emits:["enter","leave","after-leave"],setup(e,{emit:t}){const n=(s,a)=>{t("enter",s,a)},r=(s,a)=>{t("leave",s,a)},i=()=>{t("after-leave")};return(s,a)=>(de(),ke(bv,{tag:"span",css:!1,onEnter:n,onLeave:r,onAfterLeave:i},{default:q(()=>[fv(s.$slots,"default")]),_:3}))}}),AI=go({inheritAttrs:!1,__name:"CssGroup",props:{name:{}},setup(e){return(t,n)=>(de(),ke(bv,{tag:"span",name:t.name},{default:q(()=>[fv(t.$slots,"default")]),_:3},8,["name"]))}}),II=["data-id"],RI=["onClick"],kI=["innerHTML"],PI=["innerHTML"],DI={key:0,class:"notification-title"},FI={class:"notification-content"},OI=go({__name:"Notifications",props:{group:{default:""},width:{default:300},reverse:{type:Boolean,default:!1},position:{default:$f.position},classes:{default:"vue-notification"},animationType:{default:"css"},animation:{default:$f.velocityAnimation},animationName:{default:$f.cssAnimation},speed:{default:300},duration:{default:3e3},delay:{default:0},max:{default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:["click","destroy","start"],setup(e,{emit:t}){const n=e,r={IDLE:0,DESTROYED:2},i=ne([]),s=ne(null),a=ne(cS.get("velocity")),o=F(()=>n.animationType==="velocity"),l=F(()=>o.value?TI:AI),u=F(()=>i.value.filter(E=>E.state!==r.DESTROYED)),f=F(()=>wI(n.width)),c=F(()=>{const{x:E,y:R}=EI(n.position),D=f.value.value,$=f.value.type,M={width:D+$};return R&&(M[R]="0px"),E&&(E==="center"?M.left=`calc(50% - ${+D/2}${$})`:M[E]="0px"),M}),d=F(()=>"bottom"in c.value),h=E=>{t("click",E),n.closeOnClick&&I(E)},g=()=>{var E;n.pauseOnHover&&((E=s.value)==null||E.pause())},v=()=>{var E;n.pauseOnHover&&((E=s.value)==null||E.resume())},p=(E={})=>{if(E.group||(E.group=""),E.data||(E.data={}),n.group!==E.group)return;if(E.clean||E.clear){x();return}const R=typeof E.duration=="number"?E.duration:n.duration,D=typeof E.speed=="number"?E.speed:n.speed,$=typeof E.ignoreDuplicates=="boolean"?E.ignoreDuplicates:n.ignoreDuplicates,{title:M,text:O,type:L,data:W,id:te}=E,ie={id:te||xI(),title:M,text:O,type:L,state:r.IDLE,speed:D,length:R+2*D,data:W};R>=0&&(s.value=new bI(()=>I(ie),ie.length,ie));const Q=n.reverse?!d.value:d.value;let ee=-1;const ye=u.value.some(we=>we.title===E.title&&we.text===E.text);(!$||!ye)&&(Q?(i.value.push(ie),t("start",ie),u.value.length>n.max&&(ee=0)):(i.value.unshift(ie),t("start",ie),u.value.length>n.max&&(ee=u.value.length-1)),ee!==-1&&I(u.value[ee]))},y=E=>{k(E)},w=E=>["vue-notification-template",n.classes,E.type||""],A=E=>o.value?void 0:{transition:`all ${E.speed}ms`},I=E=>{clearTimeout(E.timer),E.state=r.DESTROYED,T(),t("destroy",E)},k=E=>{const R=i.value.find(D=>D.id===E);R&&I(R)},x=()=>{u.value.forEach(I)},C=(E,R)=>{var D;const $=(D=n.animation)==null?void 0:D[E];return typeof $=="function"?$(R):$},m=(E,R)=>{if(!o.value)return;const D=C("enter",E);a.value(E,D,{duration:n.speed,complete:R})},_=(E,R)=>{if(!o.value)return;const D=C("leave",E);a.value(E,D,{duration:n.speed,complete:R})};function T(){i.value=i.value.filter(E=>E.state!==r.DESTROYED)}return zt(()=>{ic.on("add",p),ic.on("close",y)}),(E,R)=>(de(),et("div",{class:"vue-notification-group",style:ll(c.value)},[(de(),ke(qb(l.value),{name:E.animationName,onEnter:m,onLeave:_,onAfterLeave:T},{default:q(()=>[(de(!0),et(Fe,null,zn(u.value,D=>(de(),et("div",{key:D.id,class:"vue-notification-wrapper",style:ll(A(D)),"data-id":D.id,onMouseenter:g,onMouseleave:v},[fv(E.$slots,"body",{class:ri([E.classes,D.type]),item:D,close:()=>I(D)},()=>[He("div",{class:ri(w(D)),onClick:$=>h(D)},[E.dangerouslySetInnerHtml?(de(),et(Fe,{key:0},[D.title?(de(),et("div",{key:0,class:"notification-title",innerHTML:D.title},null,8,kI)):Je("",!0),He("div",{class:"notification-content",innerHTML:D.text},null,8,PI)],64)):(de(),et(Fe,{key:1},[D.title?(de(),et("div",DI,Ue(D.title),1)):Je("",!0),He("div",FI,Ue(D.text),1)],64))],10,RI)])],44,II))),128))]),_:3},40,["name"]))],4))}}),Sv=e=>{typeof e=="string"&&(e={title:"",text:e}),typeof e=="object"&&ic.emit("add",e)};Sv.close=e=>{ic.emit("close",e)};const NI=()=>({notify:Sv});function $I(e,t={}){Object.entries(t).forEach(r=>cS.set(...r));const n=t.name||"notify";e.config.globalProperties["$"+n]=Sv,e.component(t.componentName||"Notifications",OI)}const MI={install:$I};class kr{constructor(t){this.adion=qi();const n=new fI;this.notification=NI(),this.debug=n.debug}static getInstance(t){return this.instance||(this.instance=new this(t)),this.instance}success(t,n="Parfait !"){this.notification.notify({title:n,text:t,type:"success",duration:5e3})}error(t,n=0,r="Erreur"){this.notification.notify({title:r,text:(n>0?"Code "+n+": ":"")+t,type:"error",duration:1e4})}warning(t,n="Attention"){this.notification.notify({title:n,text:t,type:"warn",duration:5e3})}info(t,n="Information"){this.notification.notify({title:n,text:t,type:"info",duration:5e3})}normalizeString(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}}var VI=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let dS;const Qc=e=>dS=e,fS=Symbol();function Hh(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Wo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Wo||(Wo={}));function BI(){const e=Ml(!0),t=e.run(()=>ne({}));let n=[],r=[];const i=jc({install(s){Qc(i),i._a=s,s.provide(fS,i),s.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(s){return!this._a&&!VI?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const hS=()=>{};function E0(e,t,n,r=hS){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&cb()&&In(i),i}function _a(e,...t){e.slice().forEach(n=>{n(...t)})}const LI=e=>e();function jh(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,r)=>e.set(r,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Hh(i)&&Hh(r)&&e.hasOwnProperty(n)&&!kt(r)&&!cs(r)?e[n]=jh(i,r):e[n]=r}return e}const HI=Symbol();function jI(e){return!Hh(e)||!e.hasOwnProperty(HI)}const{assign:ts}=Object;function qI(e){return!!(kt(e)&&e.effect)}function UI(e,t,n,r){const{state:i,actions:s,getters:a}=t,o=n.state.value[e];let l;function u(){o||(n.state.value[e]=i?i():{});const f=Bl(n.state.value[e]);return ts(f,s,Object.keys(a||{}).reduce((c,d)=>(c[d]=jc(F(()=>{Qc(n);const h=n._s.get(e);return a[d].call(h,h)})),c),{}))}return l=gS(e,u,t,n,r,!0),l}function gS(e,t,n={},r,i,s){let a;const o=ts({actions:{}},n),l={deep:!0};let u,f,c=[],d=[],h;const g=r.state.value[e];!s&&!g&&(r.state.value[e]={}),ne({});let v;function p(m){let _;u=f=!1,typeof m=="function"?(m(r.state.value[e]),_={type:Wo.patchFunction,storeId:e,events:h}):(jh(r.state.value[e],m),_={type:Wo.patchObject,payload:m,storeId:e,events:h});const T=v=Symbol();ht().then(()=>{v===T&&(u=!0)}),f=!0,_a(c,_,r.state.value[e])}const y=s?function(){const{state:_}=n,T=_?_():{};this.$patch(E=>{ts(E,T)})}:hS;function w(){a.stop(),c=[],d=[],r._s.delete(e)}function A(m,_){return function(){Qc(r);const T=Array.from(arguments),E=[],R=[];function D(O){E.push(O)}function $(O){R.push(O)}_a(d,{args:T,name:m,store:k,after:D,onError:$});let M;try{M=_.apply(this&&this.$id===e?this:k,T)}catch(O){throw _a(R,O),O}return M instanceof Promise?M.then(O=>(_a(E,O),O)).catch(O=>(_a(R,O),Promise.reject(O))):(_a(E,M),M)}}const I={_p:r,$id:e,$onAction:E0.bind(null,d),$patch:p,$reset:y,$subscribe(m,_={}){const T=E0(c,m,_.detached,()=>E()),E=a.run(()=>Re(()=>r.state.value[e],R=>{(_.flush==="sync"?f:u)&&m({storeId:e,type:Wo.direct,events:h},R)},ts({},l,_)));return T},$dispose:w},k=bn(I);r._s.set(e,k);const C=(r._a&&r._a.runWithContext||LI)(()=>r._e.run(()=>(a=Ml()).run(t)));for(const m in C){const _=C[m];if(kt(_)&&!qI(_)||cs(_))s||(g&&jI(_)&&(kt(_)?_.value=g[m]:jh(_,g[m])),r.state.value[e][m]=_);else if(typeof _=="function"){const T=A(m,_);C[m]=T,o.actions[m]=_}}return ts(k,C),ts(st(k),C),Object.defineProperty(k,"$state",{get:()=>r.state.value[e],set:m=>{p(_=>{ts(_,m)})}}),r._p.forEach(m=>{ts(k,a.run(()=>m({store:k,app:r._a,pinia:r,options:o})))}),g&&s&&n.hydrate&&n.hydrate(k.$state,g),u=!0,f=!0,k}function ys(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function a(o,l){const u=sA();return o=o||(u?it(fS,null):null),o&&Qc(o),o=dS,o._s.has(r)||(s?gS(r,t,i,o):UI(r,i,o)),o._s.get(r)}return a.$id=r,a}const vo=ys("UserStore",()=>{const e=ne([]),t=ne(""),n=ne(""),r=ne(null),i=ne({}),s=ne(null),a=ne({username:"yzp6784a",password:"159753852",host:"uc.adion-voip.eu",port:"443"}),o=ne([]);return{acls:e,key:t,secret:n,connected:r,me:i,navigatorPermissionsGranted:s,sip:a,callLog:o}},{persist:!0});var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rr(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var wv={exports:{}},vS=function(t,n){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return t.apply(n,i)}},zI=vS,na=Object.prototype.toString;function xv(e){return na.call(e)==="[object Array]"}function qh(e){return typeof e>"u"}function KI(e){return e!==null&&!qh(e)&&e.constructor!==null&&!qh(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function GI(e){return na.call(e)==="[object ArrayBuffer]"}function WI(e){return typeof FormData<"u"&&e instanceof FormData}function YI(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function JI(e){return typeof e=="string"}function XI(e){return typeof e=="number"}function mS(e){return e!==null&&typeof e=="object"}function Nu(e){if(na.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ZI(e){return na.call(e)==="[object Date]"}function QI(e){return na.call(e)==="[object File]"}function eR(e){return na.call(e)==="[object Blob]"}function pS(e){return na.call(e)==="[object Function]"}function tR(e){return mS(e)&&pS(e.pipe)}function nR(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function rR(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function iR(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Cv(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),xv(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function Uh(){var e={};function t(i,s){Nu(e[s])&&Nu(i)?e[s]=Uh(e[s],i):Nu(i)?e[s]=Uh({},i):xv(i)?e[s]=i.slice():e[s]=i}for(var n=0,r=arguments.length;n<r;n++)Cv(arguments[n],t);return e}function sR(e,t,n){return Cv(t,function(i,s){n&&typeof i=="function"?e[s]=zI(i,n):e[s]=i}),e}function aR(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var dr={isArray:xv,isArrayBuffer:GI,isBuffer:KI,isFormData:WI,isArrayBufferView:YI,isString:JI,isNumber:XI,isObject:mS,isPlainObject:Nu,isUndefined:qh,isDate:ZI,isFile:QI,isBlob:eR,isFunction:pS,isStream:tR,isURLSearchParams:nR,isStandardBrowserEnv:iR,forEach:Cv,merge:Uh,extend:sR,trim:rR,stripBOM:aR},wa=dr;function T0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var yS=function(t,n,r){if(!n)return t;var i;if(r)i=r(n);else if(wa.isURLSearchParams(n))i=n.toString();else{var s=[];wa.forEach(n,function(l,u){l===null||typeof l>"u"||(wa.isArray(l)?u=u+"[]":l=[l],wa.forEach(l,function(c){wa.isDate(c)?c=c.toISOString():wa.isObject(c)&&(c=JSON.stringify(c)),s.push(T0(u)+"="+T0(c))}))}),i=s.join("&")}if(i){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},oR=dr;function ed(){this.handlers=[]}ed.prototype.use=function(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};ed.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ed.prototype.forEach=function(t){oR.forEach(this.handlers,function(r){r!==null&&t(r)})};var lR=ed,uR=dr,cR=function(t,n){uR.forEach(t,function(i,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(t[n]=i,delete t[s])})},bS=function(t,n,r,i,s){return t.config=n,r&&(t.code=r),t.request=i,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Mf,A0;function SS(){if(A0)return Mf;A0=1;var e=bS;return Mf=function(n,r,i,s,a){var o=new Error(n);return e(o,r,i,s,a)},Mf}var Vf,I0;function dR(){if(I0)return Vf;I0=1;var e=SS();return Vf=function(n,r,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?n(i):r(e("Request failed with status code "+i.status,i.config,null,i.request,i))},Vf}var Bf,R0;function fR(){if(R0)return Bf;R0=1;var e=dr;return Bf=e.isStandardBrowserEnv()?function(){return{write:function(r,i,s,a,o,l){var u=[];u.push(r+"="+encodeURIComponent(i)),e.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),e.isString(a)&&u.push("path="+a),e.isString(o)&&u.push("domain="+o),l===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Bf}var Lf,k0;function hR(){return k0||(k0=1,Lf=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),Lf}var Hf,P0;function gR(){return P0||(P0=1,Hf=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),Hf}var jf,D0;function vR(){if(D0)return jf;D0=1;var e=hR(),t=gR();return jf=function(r,i){return r&&!e(i)?t(r,i):i},jf}var qf,F0;function mR(){if(F0)return qf;F0=1;var e=dr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return qf=function(r){var i={},s,a,o;return r&&e.forEach(r.split(`
`),function(u){if(o=u.indexOf(":"),s=e.trim(u.substr(0,o)).toLowerCase(),a=e.trim(u.substr(o+1)),s){if(i[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([a]):i[s]=i[s]?i[s]+", "+a:a}}),i},qf}var Uf,O0;function pR(){if(O0)return Uf;O0=1;var e=dr;return Uf=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function s(a){var o=a;return n&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=s(window.location.href),function(o){var l=e.isString(o)?s(o):o;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Uf}var zf,N0;function $0(){if(N0)return zf;N0=1;var e=dr,t=dR(),n=fR(),r=yS,i=vR(),s=mR(),a=pR(),o=SS();return zf=function(u){return new Promise(function(c,d){var h=u.data,g=u.headers,v=u.responseType;e.isFormData(h)&&delete g["Content-Type"];var p=new XMLHttpRequest;if(u.auth){var y=u.auth.username||"",w=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";g.Authorization="Basic "+btoa(y+":"+w)}var A=i(u.baseURL,u.url);p.open(u.method.toUpperCase(),r(A,u.params,u.paramsSerializer),!0),p.timeout=u.timeout;function I(){if(p){var x="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,C=!v||v==="text"||v==="json"?p.responseText:p.response,m={data:C,status:p.status,statusText:p.statusText,headers:x,config:u,request:p};t(c,d,m),p=null}}if("onloadend"in p?p.onloadend=I:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(I)},p.onabort=function(){p&&(d(o("Request aborted",u,"ECONNABORTED",p)),p=null)},p.onerror=function(){d(o("Network Error",u,null,p)),p=null},p.ontimeout=function(){var C="timeout of "+u.timeout+"ms exceeded";u.timeoutErrorMessage&&(C=u.timeoutErrorMessage),d(o(C,u,u.transitional&&u.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},e.isStandardBrowserEnv()){var k=(u.withCredentials||a(A))&&u.xsrfCookieName?n.read(u.xsrfCookieName):void 0;k&&(g[u.xsrfHeaderName]=k)}"setRequestHeader"in p&&e.forEach(g,function(C,m){typeof h>"u"&&m.toLowerCase()==="content-type"?delete g[m]:p.setRequestHeader(m,C)}),e.isUndefined(u.withCredentials)||(p.withCredentials=!!u.withCredentials),v&&v!=="json"&&(p.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&p.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",u.onUploadProgress),u.cancelToken&&u.cancelToken.promise.then(function(C){p&&(p.abort(),d(C),p=null)}),h||(h=null),p.send(h)})},zf}var An=dr,M0=cR,yR=bS,bR={"Content-Type":"application/x-www-form-urlencoded"};function V0(e,t){!An.isUndefined(e)&&An.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function SR(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=$0()),e}function _R(e,t,n){if(An.isString(e))try{return(t||JSON.parse)(e),An.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var td={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:SR(),transformRequest:[function(t,n){return M0(n,"Accept"),M0(n,"Content-Type"),An.isFormData(t)||An.isArrayBuffer(t)||An.isBuffer(t)||An.isStream(t)||An.isFile(t)||An.isBlob(t)?t:An.isArrayBufferView(t)?t.buffer:An.isURLSearchParams(t)?(V0(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):An.isObject(t)||n&&n["Content-Type"]==="application/json"?(V0(n,"application/json"),_R(t)):t}],transformResponse:[function(t){var n=this.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,s=!r&&this.responseType==="json";if(s||i&&An.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(s)throw a.name==="SyntaxError"?yR(a,this,"E_JSON_PARSE"):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};td.headers={common:{Accept:"application/json, text/plain, */*"}};An.forEach(["delete","get","head"],function(t){td.headers[t]={}});An.forEach(["post","put","patch"],function(t){td.headers[t]=An.merge(bR)});var Ev=td,wR=dr,xR=Ev,CR=function(t,n,r){var i=this||xR;return wR.forEach(r,function(a){t=a.call(i,t,n)}),t},Kf,B0;function _S(){return B0||(B0=1,Kf=function(t){return!!(t&&t.__CANCEL__)}),Kf}var L0=dr,Gf=CR,ER=_S(),TR=Ev;function Wf(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var AR=function(t){Wf(t),t.headers=t.headers||{},t.data=Gf.call(t,t.data,t.headers,t.transformRequest),t.headers=L0.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),L0.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var n=t.adapter||TR.adapter;return n(t).then(function(i){return Wf(t),i.data=Gf.call(t,i.data,i.headers,t.transformResponse),i},function(i){return ER(i)||(Wf(t),i&&i.response&&(i.response.data=Gf.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Pn=dr,wS=function(t,n){n=n||{};var r={},i=["url","method","data"],s=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(d,h){return Pn.isPlainObject(d)&&Pn.isPlainObject(h)?Pn.merge(d,h):Pn.isPlainObject(h)?Pn.merge({},h):Pn.isArray(h)?h.slice():h}function u(d){Pn.isUndefined(n[d])?Pn.isUndefined(t[d])||(r[d]=l(void 0,t[d])):r[d]=l(t[d],n[d])}Pn.forEach(i,function(h){Pn.isUndefined(n[h])||(r[h]=l(void 0,n[h]))}),Pn.forEach(s,u),Pn.forEach(a,function(h){Pn.isUndefined(n[h])?Pn.isUndefined(t[h])||(r[h]=l(void 0,t[h])):r[h]=l(void 0,n[h])}),Pn.forEach(o,function(h){h in n?r[h]=l(t[h],n[h]):h in t&&(r[h]=l(void 0,t[h]))});var f=i.concat(s).concat(a).concat(o),c=Object.keys(t).concat(Object.keys(n)).filter(function(h){return f.indexOf(h)===-1});return Pn.forEach(c,u),r};const IR="axios",RR="0.21.4",kR="Promise based HTTP client for the browser and node.js",PR="index.js",DR={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},FR={type:"git",url:"https://github.com/axios/axios.git"},OR=["xhr","http","ajax","promise","node"],NR="Matt Zabriskie",$R="MIT",MR={url:"https://github.com/axios/axios/issues"},VR="https://axios-http.com",BR={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},LR={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},HR="dist/axios.min.js",jR="dist/axios.min.js",qR="./index.d.ts",UR={"follow-redirects":"^1.14.0"},zR=[{path:"./dist/axios.min.js",threshold:"5kB"}],KR={name:IR,version:RR,description:kR,main:PR,scripts:DR,repository:FR,keywords:OR,author:NR,license:$R,bugs:MR,homepage:VR,devDependencies:BR,browser:LR,jsdelivr:HR,unpkg:jR,typings:qR,dependencies:UR,bundlesize:zR};var xS=KR,Tv={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Tv[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var H0={},GR=xS.version.split(".");function CS(e,t){for(var n=t?t.split("."):GR,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}Tv.transitional=function(t,n,r){var i=n&&CS(n);function s(a,o){return"[Axios v"+xS.version+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return function(a,o,l){if(t===!1)throw new Error(s(o," has been removed in "+n));return i&&!H0[o]&&(H0[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,l):!0}};function WR(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var s=r[i],a=t[s];if(a){var o=e[s],l=o===void 0||a(o,s,e);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+s)}}var YR={isOlderVersion:CS,assertOptions:WR,validators:Tv},ES=dr,JR=yS,j0=lR,q0=AR,nd=wS,TS=YR,xa=TS.validators;function Hl(e){this.defaults=e,this.interceptors={request:new j0,response:new j0}}Hl.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=nd(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&TS.assertOptions(n,{silentJSONParsing:xa.transitional(xa.boolean,"1.0.0"),forcedJSONParsing:xa.transitional(xa.boolean,"1.0.0"),clarifyTimeoutError:xa.transitional(xa.boolean,"1.0.0")},!1);var r=[],i=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(i=i&&d.synchronous,r.unshift(d.fulfilled,d.rejected))});var s=[];this.interceptors.response.forEach(function(d){s.push(d.fulfilled,d.rejected)});var a;if(!i){var o=[q0,void 0];for(Array.prototype.unshift.apply(o,r),o=o.concat(s),a=Promise.resolve(t);o.length;)a=a.then(o.shift(),o.shift());return a}for(var l=t;r.length;){var u=r.shift(),f=r.shift();try{l=u(l)}catch(c){f(c);break}}try{a=q0(l)}catch(c){return Promise.reject(c)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Hl.prototype.getUri=function(t){return t=nd(this.defaults,t),JR(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};ES.forEach(["delete","get","head","options"],function(t){Hl.prototype[t]=function(n,r){return this.request(nd(r||{},{method:t,url:n,data:(r||{}).data}))}});ES.forEach(["post","put","patch"],function(t){Hl.prototype[t]=function(n,r,i){return this.request(nd(i||{},{method:t,url:n,data:r}))}});var XR=Hl,Yf,U0;function AS(){if(U0)return Yf;U0=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Yf=e,Yf}var Jf,z0;function ZR(){if(z0)return Jf;z0=1;var e=AS();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(a){r=a});var i=this;n(function(a){i.reason||(i.reason=new e(a),r(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var r,i=new t(function(a){r=a});return{token:i,cancel:r}},Jf=t,Jf}var Xf,K0;function QR(){return K0||(K0=1,Xf=function(t){return function(r){return t.apply(null,r)}}),Xf}var Zf,G0;function ek(){return G0||(G0=1,Zf=function(t){return typeof t=="object"&&t.isAxiosError===!0}),Zf}var W0=dr,tk=vS,$u=XR,nk=wS,rk=Ev;function IS(e){var t=new $u(e),n=tk($u.prototype.request,t);return W0.extend(n,$u.prototype,t),W0.extend(n,t),n}var qr=IS(rk);qr.Axios=$u;qr.create=function(t){return IS(nk(qr.defaults,t))};qr.Cancel=AS();qr.CancelToken=ZR();qr.isCancel=_S();qr.all=function(t){return Promise.all(t)};qr.spread=QR();qr.isAxiosError=ek();wv.exports=qr;wv.exports.default=qr;var ik=wv.exports,sk=ik;const ak=_v(sk);class RS extends kr{constructor(t){super(t),this.user=vo(),this.api=ak.create({baseURL:"https://"+Qa.API_URL,headers:{"Content-Type":"application/json",Accept:"application/json","X-Api-Ak":Qa.API_AK}}),this.api.interceptors.request.use(n=>(this.user.key.length>0&&this.user.secret.length>0&&(n.headers["X-Api-Ck"]=this.user.key,n.headers["X-Api-Sk"]=this.user.secret),n),n=>Promise.reject(n)),console.debug("ApiController initialized")}handleError(t){throw t.response.data.message}async get(t,n=null){const r={params:n};return await this.api.get(t,r).then(i=>i.data).catch(i=>{this.handleError(i)})}async post(t,n=null){return await this.api.post(t,n).then(r=>r.data).catch(r=>{this.handleError(r)})}async put(t,n=null){return await this.api.put(t,n).then(r=>r.data).catch(r=>{this.handleError(r)})}async delete(t,n=null){return await this.api.delete(t,n).then(r=>r.data).catch(r=>{this.handleError(r)})}}$p(RS,"instance",null);class ok extends kr{constructor(t){super(t),this.api=this.adion.api,this.websocket=this.adion.websocket,this.user=vo(),this.config=Qa,this.check(),console.debug("AuthController initialized")}get connected(){return this.user.connected}async logout(){this.api.delete("/auth/login").then(()=>{this.user.connected=!1,this.websocket.reset()})}async login(t,n){const{key:r,secret:i,acls:s}=await this.api.post("/auth/login",{email:t,password:n,realm:this.config.UC_REALM});Object.assign(this.user,{key:r,secret:i,acls:s,connected:!0}),this.websocket.reset()}async check(){this.api.get("/auth/login").then(t=>{this.user.connected=t})}async refresh(t=3600){return this.api.post("/auth/renew",{expiration:t})}}class lk extends kr{constructor(t){super(t),this.user=vo(),this.request(),console.debug("NavigatorPermissionController initialized")}get permissionsGranted(){return this.user.navigatorPermissionsGranted}request(){return this.requestMediaPermission().then(()=>this.requestNotificationPermission()).then(()=>this.requestLocationPermission()).then(()=>{this.user.navigatorPermissionsGranted=!0}).catch(t=>{console.error(t.message||"Une erreur est survenue lors de la demande de permissions."),this.user.navigatorPermissionsGranted=!1})}requestMediaPermission(){return navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).catch(()=>{throw new Error("Permission refusée pour l'accès aux médias.")})}requestLocationPermission(){}requestClipboardPermission(){return navigator.clipboard?navigator.permissions.query({name:"clipboard-read"}).then(()=>navigator.clipboard.readText()).catch(()=>{throw new Error("Permission refusée pour l'accès au presse-papiers.")}):Promise.reject(new Error("L'accès au presse-papiers n'est pas disponible."))}requestNotificationPermission(){return"Notification"in window?Notification.requestPermission().then(t=>{if(t!=="granted")throw new Error("Permission refusée pour les notifications.")}):Promise.reject(new Error("Les notifications ne sont pas prises en charge par ce navigateur."))}}class uk extends kr{constructor(t){super(t),this.api=this.adion.api,this.user=vo(),this.user.connected&&this.getUserDetails(),console.debug("UserController initialized")}get me(){return this.user.me}async getUserDetails(){this.push(await this.api.get("/me")),this.user.me.avatar=this.me.avatar||`https://ui-avatars.com/api/?color=fff&background=random&name=${this.me.firstname}+${this.me.lastname}`}push(t){this.user.me={...this.user.me,...t}}}const Av=ys("CallStore",()=>{const e=["incoming","talking","hold","transfer","conference"],t=bn({incoming:[],talking:[],hold:[],transfer:[],conference:[]}),n=ne([]);return{categories:e,active:t,log:n}},{persist:!0}),ck=ys("WebRTCStore",()=>{const e=ne(null),t=ne(null),n=ne([]);return{client:e,phone:t,sessions:n}},{persist:{storage:localStorage,paths:["sessions"]}});var kS={};let PS=!0,DS=!0;function Mu(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function ra(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(a,o){if(a!==t)return i.apply(this,arguments);const l=u=>{const f=n(u);f&&(o.handleEvent?o.handleEvent(f):o(f))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(o,l),i.apply(this,[a,l])};const s=r.removeEventListener;r.removeEventListener=function(a,o){if(a!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(o))return s.apply(this,arguments);const l=this._eventMap[t].get(o);return this._eventMap[t].delete(o),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[a,l])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(a){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),a&&this.addEventListener(t,this["_on"+t]=a)},enumerable:!0,configurable:!0})}function dk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(PS=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function fk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(DS=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function FS(){if(typeof window=="object"){if(PS)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Iv(e,t){DS&&console.warn(e+" is deprecated, please use "+t+" instead.")}function hk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Mu(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Mu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Mu(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function Y0(e){return Object.prototype.toString.call(e)==="[object Object]"}function OS(e){return Y0(e)?Object.keys(e).reduce(function(t,n){const r=Y0(e[n]),i=r?OS(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function zh(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?zh(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{zh(e,e.get(i),n)})}))}function J0(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===t.id&&s.push(a)}),s.forEach(a=>{e.forEach(o=>{o.type===r&&o.trackId===a.id&&zh(e,o,i)})}),i}const X0=FS;function NS(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const l={};return Object.keys(o).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const f=typeof o[u]=="object"?o[u]:{ideal:o[u]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const c=function(d,h){return d?d+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(f.ideal!==void 0){l.optional=l.optional||[];let d={};typeof f.ideal=="number"?(d[c("min",u)]=f.ideal,l.optional.push(d),d={},d[c("max",u)]=f.ideal,l.optional.push(d)):(d[c("",u)]=f.ideal,l.optional.push(d))}f.exact!==void 0&&typeof f.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[c("",u)]=f.exact):["min","max"].forEach(d=>{f[d]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[c(d,u)]=f[d])})}),o.advanced&&(l.optional=(l.optional||[]).concat(o.advanced)),l},i=function(o,l){if(t.version>=61)return l(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const u=function(f,c,d){c in f&&!(d in f)&&(f[d]=f[c],delete f[c])};o=JSON.parse(JSON.stringify(o)),u(o.audio,"autoGainControl","googAutoGainControl"),u(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=r(o.audio)}if(o&&typeof o.video=="object"){let u=o.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const f=t.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete o.video.facingMode;let c;if(u.exact==="environment"||u.ideal==="environment"?c=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(c=["front"]),c)return n.mediaDevices.enumerateDevices().then(d=>{d=d.filter(g=>g.kind==="videoinput");let h=d.find(g=>c.some(v=>g.label.toLowerCase().includes(v)));return!h&&d.length&&c.includes("back")&&(h=d[d.length-1]),h&&(o.video.deviceId=u.exact?{exact:h.deviceId}:{ideal:h.deviceId}),o.video=r(o.video),X0("chrome: "+JSON.stringify(o)),l(o)})}o.video=r(o.video)}return X0("chrome: "+JSON.stringify(o)),l(o)},s=function(o){return t.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(o,l,u){i(o,f=>{n.webkitGetUserMedia(f,l,c=>{u&&u(s(c))})})};if(n.getUserMedia=a.bind(n),n.mediaDevices.getUserMedia){const o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,u=>o(u).then(f=>{if(u.audio&&!f.getAudioTracks().length||u.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(c=>{c.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(s(f))))}}}function gk(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const s=r.video&&r.video.width,a=r.video&&r.video.height,o=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:o||3}},s&&(r.video.mandatory.maxWidth=s),a&&(r.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(r)})}}}function $S(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function MS(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===i.track.id):s={track:i.track};const a=new Event("track");a.track=i.track,a.receiver=s,a.transceiver={receiver:s},a.streams=[r.stream],this.dispatchEvent(a)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===i.id):s={track:i};const a=new Event("track");a.track=i,a.receiver=s,a.transceiver={receiver:s},a.streams=[r.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ra(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function VS(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,l){let u=i.apply(this,arguments);return u||(u=t(this,o),this._senders.push(u)),u};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){s.apply(this,arguments);const l=this._senders.indexOf(o);l!==-1&&this._senders.splice(l,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(a=>{this._senders.push(t(this,a))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(a=>{const o=this._senders.find(l=>l.track===a);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function BS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);const a=function(l){const u={};return l.result().forEach(c=>{const d={id:c.id,timestamp:c.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[c.type]||c.type};c.names().forEach(h=>{d[h]=c.stat(h)}),u[d.id]=d}),u},o=function(l){return new Map(Object.keys(l).map(u=>[u,l[u]]))};if(arguments.length>=2){const l=function(u){i(o(a(u)))};return t.apply(this,[l,r])}return new Promise((l,u)=>{t.apply(this,[function(f){l(o(a(f)))},u])}).then(i,s)}}function LS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>J0(a,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),ra(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>J0(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,a;return this.getSenders().forEach(o=>{o.track===r&&(i?a=!0:i=o)}),this.getReceivers().forEach(o=>(o.track===r&&(s?a=!0:s=o),o.track===r)),a||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function HS(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,o){if(!o)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=t.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(l)===-1&&this._shimmedLocalStreams[o.id].push(l):this._shimmedLocalStreams[o.id]=[o,l],l};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(u=>{if(this.getSenders().find(c=>c.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(u=>o.indexOf(u)===-1);this._shimmedLocalStreams[a.id]=[a].concat(l)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const l=this._shimmedLocalStreams[o].indexOf(a);l!==-1&&this._shimmedLocalStreams[o].splice(l,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),i.apply(this,arguments)}}function jS(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return HS(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const f=n.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(c=>this._reverseStreams[c.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(c=>{if(this.getSenders().find(h=>h.track===c))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const c=new e.MediaStream(f.getTracks());this._streams[f.id]=c,this._reverseStreams[c.id]=f,f=c}r.apply(this,[f])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},e.RTCPeerConnection.prototype.addTrack=function(f,c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(v=>v===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[c.id];if(g)g.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new e.MediaStream([f]);this._streams[c.id]=v,this._reverseStreams[v.id]=c,this.addStream(v)}return this.getSenders().find(v=>v.track===f)};function s(u,f){let c=f.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const h=u._reverseStreams[d],g=u._streams[h.id];c=c.replace(new RegExp(g.id,"g"),h.id)}),new RTCSessionDescription({type:f.type,sdp:c})}function a(u,f){let c=f.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const h=u._reverseStreams[d],g=u._streams[h.id];c=c.replace(new RegExp(h.id,"g"),g.id)}),new RTCSessionDescription({type:f.type,sdp:c})}["createOffer","createAnswer"].forEach(function(u){const f=e.RTCPeerConnection.prototype[u],c={[u](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[g=>{const v=s(this,g);d[0].apply(null,[v])},g=>{d[1]&&d[1].apply(null,g)},arguments[2]]):f.apply(this,arguments).then(g=>s(this,g))}};e.RTCPeerConnection.prototype[u]=c[u]});const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=a(this,arguments[0]),o.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const u=l.get.apply(this);return u.type===""?u:s(this,u)}}),e.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(v=>f.track===v)&&(d=this._streams[h])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Kh(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function qS(e,t){ra(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Z0=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:qS,shimAddTrackRemoveTrack:jS,shimAddTrackRemoveTrackWithNative:HS,shimGetDisplayMedia:gk,shimGetSendersWithDtmf:VS,shimGetStats:BS,shimGetUserMedia:NS,shimMediaStream:$S,shimOnTrack:MS,shimPeerConnection:Kh,shimSenderReceiverGetStats:LS},Symbol.toStringTag,{value:"Module"}));function US(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,a){Iv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,a)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(a,o,l){o in a&&!(l in a)&&(a[l]=a[o],delete a[o])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a.audio,"autoGainControl","mozAutoGainControl"),i(a.audio,"noiseSuppression","mozNoiseSuppression")),s(a)},r&&r.prototype.getSettings){const a=r.prototype.getSettings;r.prototype.getSettings=function(){const o=a.apply(this,arguments);return i(o,"mozAutoGainControl","autoGainControl"),i(o,"mozNoiseSuppression","noiseSuppression"),o}}if(r&&r.prototype.applyConstraints){const a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o,"autoGainControl","mozAutoGainControl"),i(o,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[o])}}}}function vk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function zS(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Gh(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],a={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=a[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,a,o]=arguments;return r.apply(this,[s||null]).then(l=>{if(t.version<53&&!a)try{l.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;l.forEach((f,c)=>{l.set(c,Object.assign({},f,{type:n[f.type]||f.type}))})}return l}).then(a,o)}}function KS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function GS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),ra(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function WS(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Iv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function YS(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function JS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:a}=s,o=a.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=r,a.sendEncodings=r,this.setParametersPromises.push(a.setParameters(o).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return s})}function XS(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function ZS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function QS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Q0=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:JS,shimCreateAnswer:QS,shimCreateOffer:ZS,shimGetDisplayMedia:vk,shimGetParameters:XS,shimGetUserMedia:US,shimOnTrack:zS,shimPeerConnection:Gh,shimRTCDataChannel:YS,shimReceiverGetStats:GS,shimRemoveStream:WS,shimSenderGetStats:KS},Symbol.toStringTag,{value:"Module"}));function e_(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function t_(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,r.dispatchEvent(a)})}),t.apply(r,arguments)}}}function n_(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(u,f){const c=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[c]);return f?(d.then(u,f),Promise.resolve()):d},t.createAnswer=function(u,f){const c=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[c]);return f?(d.then(u,f),Promise.resolve()):d};let o=function(l,u,f){const c=i.apply(this,[l]);return f?(c.then(u,f),Promise.resolve()):c};t.setLocalDescription=o,o=function(l,u,f){const c=s.apply(this,[l]);return f?(c.then(u,f),Promise.resolve()):c},t.setRemoteDescription=o,o=function(l,u,f){const c=a.apply(this,[l]);return f?(c.then(u,f),Promise.resolve()):c},t.addIceCandidate=o}function r_(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(i_(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function i_(e){return e&&e.video!==void 0?Object.assign({},e,{video:OS(e.video)}):e}function s_(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let a=0;a<r.iceServers.length;a++){let o=r.iceServers[a];o.urls===void 0&&o.url?(Iv("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,s.push(o)):s.push(r.iceServers[a])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function a_(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function o_(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function l_(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const ey=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:l_,shimCallbacksAPI:n_,shimConstraints:i_,shimCreateOfferLegacy:o_,shimGetUserMedia:r_,shimLocalStreamsAPI:e_,shimRTCIceServerUrls:s_,shimRemoteStreamsAPI:t_,shimTrackEventTransceiver:a_},Symbol.toStringTag,{value:"Module"}));var u_={exports:{}};(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let a=0;a<s.length;a++)i=s[a].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(a=>{n.parameters[a]!==void 0?s.push(a+"="+n.parameters[a]):s.push(a)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let o=3;o<s.length;o++){const l=s[o],u=t.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(u){const f=t.parseRtpMap(u),c=t.matchPrefix(n,"a=fmtp:"+l+" ");switch(f.parameters=c.length?t.parseFmtp(c[0]):{},f.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),r.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(f.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(o=>{r.headerExtensions.push(t.parseExtmap(o))});const a=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(o=>{a.forEach(l=>{o.rtcpFeedback.find(f=>f.type===l.type&&f.parameter===l.parameter)||o.rtcpFeedback.push(l)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(a=>{i+=t.writeRtpMap(a),i+=t.writeFmtp(a),i+=t.writeRtcpFb(a)});let s=0;return r.codecs.forEach(a=>{a.maxptime>s&&(s=a.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(a=>{i+=t.writeExtmap(a)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,a=i.fecMechanisms.indexOf("ULPFEC")!==-1,o=t.matchPrefix(n,"a=ssrc:").map(d=>t.parseSsrcMedia(d)).filter(d=>d.attribute==="cname"),l=o.length>0&&o[0].ssrc;let u;const f=t.matchPrefix(n,"a=ssrc-group:FID").map(d=>d.substring(17).split(" ").map(g=>parseInt(g,10)));f.length>0&&f[0].length>1&&f[0][0]===l&&(u=f[0][1]),i.codecs.forEach(d=>{if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){let h={ssrc:l,codecPayloadType:parseInt(d.parameters.apt,10)};l&&u&&(h.rtx={ssrc:u}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:l,mechanism:a?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&l&&r.push({ssrc:l});let c=t.matchPrefix(n,"b=");return c.length&&(c[0].indexOf("b=TIAS:")===0?c=parseInt(c[0].substring(7),10):c[0].indexOf("b=AS:")===0?c=parseInt(c[0].substring(5),10)*1e3*.95-50*40*8:c=void 0,r.forEach(d=>{d.maxBitrate=c})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const a=t.matchPrefix(n,"a=rtcp-mux");return r.mux=a.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const a=t.matchPrefix(n,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const o=t.matchPrefix(n,"a=sctpmap:");if(o.length>0){const l=o[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const a=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(u_);var c_=u_.exports;const qa=_v(c_),mk=$2({__proto__:null,default:qa},[c_]);function Vu(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=qa.parseCandidate(r.candidate);for(const a in s)a in i||Object.defineProperty(i,a,{value:s[a]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,ra(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Wh(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||ra(e,"icecandidate",t=>{if(t.candidate){const n=qa.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Bu(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(o){if(!o||!o.sdp)return!1;const l=qa.splitSections(o.sdp);return l.shift(),l.some(u=>{const f=qa.parseMLine(u);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},r=function(o){const l=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const u=parseInt(l[1],10);return u!==u?-1:u},i=function(o){let l=65536;return t.browser==="firefox"&&(t.version<57?o===-1?l=16384:l=2147483637:t.version<60?l=t.version===57?65535:65536:l=2147483637),l},s=function(o,l){let u=65536;t.browser==="firefox"&&t.version===57&&(u=65535);const f=qa.matchPrefix(o.sdp,"a=max-message-size:");return f.length>0?u=parseInt(f[0].substring(19),10):t.browser==="firefox"&&l!==-1&&(u=2147483637),u},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),u=i(l),f=s(arguments[0],l);let c;u===0&&f===0?c=Number.POSITIVE_INFINITY:u===0||f===0?c=Math.max(u,f):c=Math.min(u,f);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return c}}),this._sctp=d}return a.apply(this,arguments)}}function Lu(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const o=arguments[0],l=o.length||o.size||o.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},ra(e,"datachannel",r=>(t(r.channel,r.target),r))}function Yh(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const a=new Event("connectionstatechange",i);s.dispatchEvent(a)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Jh(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Hu(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ju(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>n.apply(this,[a]))})}const pk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Jh,shimAddIceCandidateNullOrEmpty:Hu,shimConnectionState:Yh,shimMaxMessageSize:Bu,shimParameterlessSetLocalDescription:ju,shimRTCIceCandidate:Vu,shimRTCIceCandidateRelayProtocol:Wh,shimSendThrowTypeError:Lu},Symbol.toStringTag,{value:"Module"}));function yk({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=FS,r=hk(e),i={browserDetails:r,commonShim:pk,extractVersion:Mu,disableLog:dk,disableWarnings:fk,sdp:mk};switch(r.browser){case"chrome":if(!Z0||!Kh||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Z0,Hu(e,r),ju(e),NS(e,r),$S(e),Kh(e,r),MS(e),jS(e,r),VS(e),BS(e),LS(e),qS(e,r),Vu(e),Wh(e),Yh(e),Bu(e,r),Lu(e),Jh(e,r);break;case"firefox":if(!Q0||!Gh||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Q0,Hu(e,r),ju(e),US(e,r),Gh(e,r),zS(e),WS(e),KS(e),GS(e),YS(e),JS(e),XS(e),ZS(e),QS(e),Vu(e),Yh(e),Bu(e,r),Lu(e);break;case"safari":if(!ey||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=ey,Hu(e,r),ju(e),s_(e),o_(e),n_(e),e_(e),t_(e),a_(e),r_(e),l_(e),Vu(e),Wh(e),Bu(e,r),Lu(e),Jh(e,r);break;default:n("Unsupported browser!");break}return i}yk({window:typeof window>"u"?void 0:window});var cn;(function(e){e.Started="Started",e.Stopped="Stopped"})(cn=cn||(cn={}));const bk=Object.freeze(Object.defineProperty({__proto__:null,get UserAgentState(){return cn}},Symbol.toStringTag,{value:"Module"})),Sk=rr(bk);class d_{constructor(t){this.parameters={};for(const n in t)t.hasOwnProperty(n)&&this.setParam(n,t[n])}setParam(t,n){t&&(this.parameters[t.toLowerCase()]=typeof n>"u"||n===null?null:n.toString())}getParam(t){if(t)return this.parameters[t.toLowerCase()]}hasParam(t){return!!(t&&this.parameters[t.toLowerCase()]!==void 0)}deleteParam(t){if(t=t.toLowerCase(),this.hasParam(t)){const n=this.parameters[t];return delete this.parameters[t],n}}clearParams(){this.parameters={}}}class Xn extends d_{constructor(t,n,r){super(r),this.uri=t,this._displayName=n}get friendlyName(){return this.displayName||this.uri.aor}get displayName(){return this._displayName}set displayName(t){this._displayName=t}clone(){return new Xn(this.uri.clone(),this._displayName,JSON.parse(JSON.stringify(this.parameters)))}toString(){let t=this.displayName||this.displayName==="0"?'"'+this.displayName+'" ':"";t+="<"+this.uri.toString()+">";for(const n in this.parameters)this.parameters.hasOwnProperty(n)&&(t+=";"+n,this.parameters[n]!==null&&(t+="="+this.parameters[n]));return t}}class Lr extends d_{constructor(t="sip",n,r,i,s,a){if(super(s||{}),this.headers={},!r)throw new TypeError('missing or invalid "host" parameter');for(const o in a)a.hasOwnProperty(o)&&this.setHeader(o,a[o]);this.raw={scheme:t,user:n,host:r,port:i},this.normal={scheme:t.toLowerCase(),user:n,host:r.toLowerCase(),port:i}}get scheme(){return this.normal.scheme}set scheme(t){this.raw.scheme=t,this.normal.scheme=t.toLowerCase()}get user(){return this.normal.user}set user(t){this.normal.user=this.raw.user=t}get host(){return this.normal.host}set host(t){this.raw.host=t,this.normal.host=t.toLowerCase()}get aor(){return this.normal.user+"@"+this.normal.host}get port(){return this.normal.port}set port(t){this.normal.port=this.raw.port=t}setHeader(t,n){this.headers[this.headerize(t)]=n instanceof Array?n:[n]}getHeader(t){if(t)return this.headers[this.headerize(t)]}hasHeader(t){return!!t&&!!this.headers.hasOwnProperty(this.headerize(t))}deleteHeader(t){if(t=this.headerize(t),this.headers.hasOwnProperty(t)){const n=this.headers[t];return delete this.headers[t],n}}clearHeaders(){this.headers={}}clone(){return new Lr(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))}toRaw(){return this._toString(this._raw)}toString(){return this._toString(this._normal)}get _normal(){return this.normal}get _raw(){return this.raw}_toString(t){let n=t.scheme+":";t.scheme.toLowerCase().match("^sips?$")||(n+="//"),t.user&&(n+=this.escapeUser(t.user)+"@"),n+=t.host,(t.port||t.port===0)&&(n+=":"+t.port);for(const i in this.parameters)this.parameters.hasOwnProperty(i)&&(n+=";"+i,this.parameters[i]!==null&&(n+="="+this.parameters[i]));const r=[];for(const i in this.headers)if(this.headers.hasOwnProperty(i))for(const s in this.headers[i])this.headers[i].hasOwnProperty(s)&&r.push(i+"="+this.headers[i][s]);return r.length>0&&(n+="?"+r.join("&")),n}escapeUser(t){let n;try{n=decodeURIComponent(t)}catch(r){throw r}return encodeURIComponent(n).replace(/%3A/ig,":").replace(/%2B/ig,"+").replace(/%3F/ig,"?").replace(/%2F/ig,"/")}headerize(t){const n={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=t.toLowerCase().replace(/_/g,"-").split("-"),i=r.length;let s="";for(let a=0;a<i;a++)a!==0&&(s+="-"),s+=r[a].charAt(0).toUpperCase()+r[a].substring(1);return n[s]&&(s=n[s]),s}}function Xh(e,t){if(e.scheme!==t.scheme||e.user!==t.user||e.host!==t.host||e.port!==t.port)return!1;function n(s,a){const o=Object.keys(s.parameters),l=Object.keys(a.parameters);return!(!o.filter(f=>l.includes(f)).every(f=>s.parameters[f]===a.parameters[f])||!["user","ttl","method","transport"].every(f=>s.hasParam(f)&&a.hasParam(f)||!s.hasParam(f)&&!a.hasParam(f))||!["maddr"].every(f=>s.hasParam(f)&&a.hasParam(f)||!s.hasParam(f)&&!a.hasParam(f)))}if(!n(e,t))return!1;const r=Object.keys(e.headers),i=Object.keys(t.headers);if(r.length!==0||i.length!==0){if(r.length!==i.length)return!1;const s=r.filter(a=>i.includes(a));if(s.length!==i.length||!s.every(a=>e.headers[a].length&&t.headers[a].length&&e.headers[a][0]===t.headers[a][0]))return!1}return!0}const _k=Object.freeze(Object.defineProperty({__proto__:null,URI:Lr,equivalentURI:Xh},Symbol.toStringTag,{value:"Module"}));function Qf(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}class Ua extends Error{constructor(t,n,r,i){super(),this.message=t,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,Ua.prototype):this.__proto__=Ua.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ua)}static buildMessage(t,n){function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function i(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function s(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,f=>"\\x0"+r(f)).replace(/[\x10-\x1F\x7F-\x9F]/g,f=>"\\x"+r(f))}function a(u){switch(u.type){case"literal":return'"'+i(u.text)+'"';case"class":const f=u.parts.map(c=>Array.isArray(c)?s(c[0])+"-"+s(c[1]):s(c));return"["+(u.inverted?"^":"")+f+"]";case"any":return"any character";case"end":return"end of input";case"other":return u.description}}function o(u){const f=u.map(a);let c,d;if(f.sort(),f.length>0){for(c=1,d=1;c<f.length;c++)f[c-1]!==f[c]&&(f[d]=f[c],d++);f.length=d}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function l(u){return u?'"'+i(u)+'"':"end of input"}return"Expected "+o(t)+" but "+l(n)+" found."}format(t){let n="Error: "+this.message;if(this.location){let r=null,i;for(i=0;i<t.length;i++)if(t[i].source===this.location.source){r=t[i].text.split(/\r\n|\n|\r/g);break}let s=this.location.start,a=this.location.source+":"+s.line+":"+s.column;if(r){let o=this.location.end,l=Qf("",s.line.toString().length," "),u=r[s.line-1],f=s.line===o.line?o.column:u.length+1;n+=`
 --> `+a+`
`+l+` |
`+s.line+" | "+u+`
`+l+" | "+Qf("",s.column-1," ")+Qf("",f-s.column,"^")}else n+=`
 at `+a}return n}}function wk(e,t){t=t!==void 0?t:{};const n={},r=t.grammarSource,i={Contact:119,Name_Addr_Header:156,Record_Route:176,Request_Response:81,SIP_URI:45,Subscription_State:186,Supported:191,Require:182,Via:194,absoluteURI:84,Call_ID:118,Content_Disposition:130,Content_Length:135,Content_Type:136,CSeq:146,displayName:122,Event:149,From:151,host:52,Max_Forwards:154,Min_SE:213,Proxy_Authenticate:157,quoted_string:40,Refer_To:178,Replaces:179,Session_Expires:210,stun_URI:217,To:192,turn_URI:223,uuid:226,WWW_Authenticate:209,challenge:158,sipfrag:230,Referred_By:231};let s=119;const a=[`\r
`,y(`\r
`,!1),/^[0-9]/,w([["0","9"]],!1,!1),/^[a-zA-Z]/,w([["a","z"],["A","Z"]],!1,!1),/^[0-9a-fA-F]/,w([["0","9"],["a","f"],["A","F"]],!1,!1),/^[\0-\xFF]/,w([["\0","ÿ"]],!1,!1),/^["]/,w(['"'],!1,!1)," ",y(" ",!1),"	",y("	",!1),/^[a-zA-Z0-9]/,w([["a","z"],["A","Z"],["0","9"]],!1,!1),";",y(";",!1),"/",y("/",!1),"?",y("?",!1),":",y(":",!1),"@",y("@",!1),"&",y("&",!1),"=",y("=",!1),"+",y("+",!1),"$",y("$",!1),",",y(",",!1),"-",y("-",!1),"_",y("_",!1),".",y(".",!1),"!",y("!",!1),"~",y("~",!1),"*",y("*",!1),"'",y("'",!1),"(",y("(",!1),")",y(")",!1),"%",y("%",!1),function(){return" "},function(){return":"},/^[!-~]/,w([["!","~"]],!1,!1),/^[\x80-\uFFFF]/,w([["","￿"]],!1,!1),/^[\x80-\xBF]/,w([["","¿"]],!1,!1),/^[a-f]/,w([["a","f"]],!1,!1),"`",y("`",!1),"<",y("<",!1),">",y(">",!1),"\\",y("\\",!1),"[",y("[",!1),"]",y("]",!1),"{",y("{",!1),"}",y("}",!1),function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return'"'},/^[!-']/,w([["!","'"]],!1,!1),/^[*-[]/,w([["*","["]],!1,!1),/^[\]-~]/,w([["]","~"]],!1,!1),function(E){return E},/^[#-[]/,w([["#","["]],!1,!1),/^[\0-\t]/,w([["\0","	"]],!1,!1),/^[\v-\f]/,w([["\v","\f"]],!1,!1),/^[\x0E-\x7F]/,w([["",""]],!1,!1),function(){t=t||{data:{}},t.data.uri=new Lr(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},function(){t=t||{data:{}},t.data.uri=new Lr(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,t.startRule==="SIP_URI"&&(t.data=t.data.uri)},"sips",y("sips",!0),"sip",y("sip",!0),function(E){t=t||{data:{}},t.data.scheme=E},function(){t=t||{data:{}},t.data.user=decodeURIComponent(v().slice(0,-1))},function(){t=t||{data:{}},t.data.password=v()},function(){return t=t||{data:{}},t.data.host=v(),t.data.host},function(){return t=t||{data:{}},t.data.host_type="domain",v()},/^[a-zA-Z0-9_\-]/,w([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),/^[a-zA-Z0-9\-]/,w([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),function(){return t=t||{data:{}},t.data.host_type="IPv6",v()},"::",y("::",!1),function(){return t=t||{data:{}},t.data.host_type="IPv6",v()},function(){return t=t||{data:{}},t.data.host_type="IPv4",v()},"25",y("25",!1),/^[0-5]/,w([["0","5"]],!1,!1),"2",y("2",!1),/^[0-4]/,w([["0","4"]],!1,!1),"1",y("1",!1),/^[1-9]/,w([["1","9"]],!1,!1),function(E){return t=t||{data:{}},E=parseInt(E.join("")),t.data.port=E,E},"transport=",y("transport=",!0),"udp",y("udp",!0),"tcp",y("tcp",!0),"sctp",y("sctp",!0),"tls",y("tls",!0),function(E){t=t||{data:{}},t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=E.toLowerCase()},"user=",y("user=",!0),"phone",y("phone",!0),"ip",y("ip",!0),function(E){t=t||{data:{}},t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=E.toLowerCase()},"method=",y("method=",!0),function(E){t=t||{data:{}},t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=E},"ttl=",y("ttl=",!0),function(E){t=t||{data:{}},t.data.params||(t.data.params={}),t.data.params.ttl=E},"maddr=",y("maddr=",!0),function(E){t=t||{data:{}},t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=E},"lr",y("lr",!0),function(){t=t||{data:{}},t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},function(E,R){t=t||{data:{}},t.data.uri_params||(t.data.uri_params={}),R===null?R=void 0:R=R[1],t.data.uri_params[E.toLowerCase()]=R},function(E,R){E=E.join("").toLowerCase(),R=R.join(""),t=t||{data:{}},t.data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[E]?t.data.uri_headers[E].push(R):t.data.uri_headers[E]=[R]},function(){t=t||{data:{}},t.startRule==="Refer_To"&&(t.data.uri=new Lr(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},"//",y("//",!1),function(){t=t||{data:{}},t.data.scheme=v()},y("SIP",!0),function(){t=t||{data:{}},t.data.sip_version=v()},"INVITE",y("INVITE",!1),"ACK",y("ACK",!1),"VXACH",y("VXACH",!1),"OPTIONS",y("OPTIONS",!1),"BYE",y("BYE",!1),"CANCEL",y("CANCEL",!1),"REGISTER",y("REGISTER",!1),"SUBSCRIBE",y("SUBSCRIBE",!1),"NOTIFY",y("NOTIFY",!1),"REFER",y("REFER",!1),"PUBLISH",y("PUBLISH",!1),function(){return t=t||{data:{}},t.data.method=v(),t.data.method},function(E){t=t||{data:{}},t.data.status_code=parseInt(E.join(""))},function(){t=t||{data:{}},t.data.reason_phrase=v()},function(){t=t||{data:{}},t.data=v()},function(){var E,R;for(t=t||{data:{}},R=t.data.multi_header.length,E=0;E<R;E++)if(t.data.multi_header[E].parsed===null){t.data=null;break}t.data!==null?t.data=t.data.multi_header:t.data=-1},function(){var E;t=t||{data:{}},t.data.multi_header||(t.data.multi_header=[]);try{E=new Xn(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch{E=null}t.data.multi_header.push({position:l,offset:p().start.offset,parsed:E})},function(E){E=v().trim(),E[0]==='"'&&(E=E.substring(1,E.length-1)),t=t||{data:{}},t.data.displayName=E},"q",y("q",!0),function(E){t=t||{data:{}},t.data.params||(t.data.params={}),t.data.params.q=E},"expires",y("expires",!0),function(E){t=t||{data:{}},t.data.params||(t.data.params={}),t.data.params.expires=E},function(E){return parseInt(E.join(""))},"0",y("0",!1),function(){return parseFloat(v())},function(E,R){t=t||{data:{}},t.data.params||(t.data.params={}),R===null?R=void 0:R=R[1],t.data.params[E.toLowerCase()]=R},"render",y("render",!0),"session",y("session",!0),"icon",y("icon",!0),"alert",y("alert",!0),function(){t=t||{data:{}},t.startRule==="Content_Disposition"&&(t.data.type=v().toLowerCase())},"handling",y("handling",!0),"optional",y("optional",!0),"required",y("required",!0),function(E){t=t||{data:{}},t.data=parseInt(E.join(""))},function(){t=t||{data:{}},t.data=v()},"text",y("text",!0),"image",y("image",!0),"audio",y("audio",!0),"video",y("video",!0),"application",y("application",!0),"message",y("message",!0),"multipart",y("multipart",!0),"x-",y("x-",!0),function(E){t=t||{data:{}},t.data.value=parseInt(E.join(""))},function(E){t=t||{data:{}},t.data=E},function(E){t=t||{data:{}},t.data.event=E.toLowerCase()},function(){t=t||{data:{}};var E=t.data.tag;t.data=new Xn(t.data.uri,t.data.displayName,t.data.params),E&&t.data.setParam("tag",E)},"tag",y("tag",!0),function(E){t=t||{data:{}},t.data.tag=E},function(E){t=t||{data:{}},t.data=parseInt(E.join(""))},function(E){t=t||{data:{}},t.data=E},function(){t=t||{data:{}},t.data=new Xn(t.data.uri,t.data.displayName,t.data.params)},"digest",y("Digest",!0),"realm",y("realm",!0),function(E){t=t||{data:{}},t.data.realm=E},"domain",y("domain",!0),"nonce",y("nonce",!0),function(E){t=t||{data:{}},t.data.nonce=E},"opaque",y("opaque",!0),function(E){t=t||{data:{}},t.data.opaque=E},"stale",y("stale",!0),"true",y("true",!0),function(){t=t||{data:{}},t.data.stale=!0},"false",y("false",!0),function(){t=t||{data:{}},t.data.stale=!1},"algorithm",y("algorithm",!0),"md5",y("MD5",!0),"md5-sess",y("MD5-sess",!0),function(E){t=t||{data:{}},t.data.algorithm=E.toUpperCase()},"qop",y("qop",!0),"auth-int",y("auth-int",!0),"auth",y("auth",!0),function(E){t=t||{data:{}},t.data.qop||(t.data.qop=[]),t.data.qop.push(E.toLowerCase())},function(E){t=t||{data:{}},t.data.value=parseInt(E.join(""))},function(){var E,R;for(t=t||{data:{}},R=t.data.multi_header.length,E=0;E<R;E++)if(t.data.multi_header[E].parsed===null){t.data=null;break}t.data!==null?t.data=t.data.multi_header:t.data=-1},function(){var E;t=t||{data:{}},t.data.multi_header||(t.data.multi_header=[]);try{E=new Xn(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch{E=null}t.data.multi_header.push({position:l,offset:p().start.offset,parsed:E})},function(){t=t||{data:{}},t.data=new Xn(t.data.uri,t.data.displayName,t.data.params)},function(){t=t||{data:{}},t.data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},function(){t=t||{data:{}},t.data={call_id:t.data}},"from-tag",y("from-tag",!0),function(E){t=t||{data:{}},t.data.replaces_from_tag=E},"to-tag",y("to-tag",!0),function(E){t=t||{data:{}},t.data.replaces_to_tag=E},"early-only",y("early-only",!0),function(){t=t||{data:{}},t.data.early_only=!0},function(E,R){return R},function(E,R){return T(E,R)},function(E){t=t||{data:{}},t.startRule==="Require"&&(t.data=E||[])},function(E){t=t||{data:{}},t.data.value=parseInt(E.join(""))},"active",y("active",!0),"pending",y("pending",!0),"terminated",y("terminated",!0),function(){t=t||{data:{}},t.data.state=v()},"reason",y("reason",!0),function(E){t=t||{data:{}},typeof E<"u"&&(t.data.reason=E)},function(E){t=t||{data:{}},typeof E<"u"&&(t.data.expires=E)},"retry_after",y("retry_after",!0),function(E){t=t||{data:{}},typeof E<"u"&&(t.data.retry_after=E)},"deactivated",y("deactivated",!0),"probation",y("probation",!0),"rejected",y("rejected",!0),"timeout",y("timeout",!0),"giveup",y("giveup",!0),"noresource",y("noresource",!0),"invariant",y("invariant",!0),function(E){t=t||{data:{}},t.startRule==="Supported"&&(t.data=E||[])},function(){t=t||{data:{}};var E=t.data.tag;t.data=new Xn(t.data.uri,t.data.displayName,t.data.params),E&&t.data.setParam("tag",E)},"ttl",y("ttl",!0),function(E){t=t||{data:{}},t.data.ttl=E},"maddr",y("maddr",!0),function(E){t=t||{data:{}},t.data.maddr=E},"received",y("received",!0),function(E){t=t||{data:{}},t.data.received=E},"branch",y("branch",!0),function(E){t=t||{data:{}},t.data.branch=E},"rport",y("rport",!0),function(E){t=t||{data:{}},typeof E<"u"&&(t.data.rport=E.join(""))},function(E){t=t||{data:{}},t.data.protocol=E},y("UDP",!0),y("TCP",!0),y("TLS",!0),y("SCTP",!0),function(E){t=t||{data:{}},t.data.transport=E},function(){t=t||{data:{}},t.data.host=v()},function(E){t=t||{data:{}},t.data.port=parseInt(E.join(""))},function(E){return parseInt(E.join(""))},function(E){t=t||{data:{}},t.startRule==="Session_Expires"&&(t.data.deltaSeconds=E)},"refresher",y("refresher",!1),"uas",y("uas",!1),"uac",y("uac",!1),function(E){t=t||{data:{}},t.startRule==="Session_Expires"&&(t.data.refresher=E)},function(E){t=t||{data:{}},t.startRule==="Min_SE"&&(t.data=E)},"stuns",y("stuns",!0),"stun",y("stun",!0),function(E){t=t||{data:{}},t.data.scheme=E},function(E){t=t||{data:{}},t.data.host=E},"?transport=",y("?transport=",!1),"turns",y("turns",!0),"turn",y("turn",!0),function(E){t=t||{data:{}},t.data.transport=E},function(){t=t||{data:{}},t.data=v()},"Referred-By",y("Referred-By",!1),"b",y("b",!1),"cid",y("cid",!1)],o=[m('2 ""6 7!'),m('4"""5!7#'),m('4$""5!7%'),m(`4&""5!7'`),m(";'.# &;("),m('4(""5!7)'),m('4*""5!7+'),m('2,""6,7-'),m('2.""6.7/'),m('40""5!71'),m('22""6273. &24""6475.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(";).# &;,"),m('2F""6F7G.} &2H""6H7I.q &2J""6J7K.e &2L""6L7M.Y &2N""6N7O.M &2P""6P7Q.A &2R""6R7S.5 &2T""6T7U.) &2V""6V7W'),m(`%%2X""6X7Y/5#;#/,$;#/#$+#)(#'#("'#&'#/"!&,)`),m(`%%$;$0#*;$&/,#; /#$+")("'#&'#." &"/=#$;$/&#0#*;$&&&#/'$8":Z" )("'#&'#`),m(';.." &"'),m(`%$;'.# &;(0)*;'.# &;(&/?#28""6879/0$;//'$8#:[# )(#'#("'#&'#`),m(`%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+")("'#&'#0=*%$;.0#*;.&/,#;2/#$+")("'#&'#&/#$+")("'#&'#/"!&,)`),m('4\\""5!7].# &;3'),m('4^""5!7_'),m('4`""5!7a'),m(';!.) &4b""5!7c'),m('%$;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),m('%$;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),m(`2T""6T7U.ã &2V""6V7W.× &2f""6f7g.Ë &2h""6h7i.¿ &2:""6:7;.³ &2D""6D7E.§ &22""6273. &28""6879. &2j""6j7k. &;&.} &24""6475.q &2l""6l7m.e &2n""6n7o.Y &26""6677.M &2>""6>7?.A &2p""6p7q.5 &2r""6r7s.) &;'.# &;(`),m('%$;).ī &2F""6F7G.ğ &2J""6J7K.ē &2L""6L7M.ć &2X""6X7Y.û &2P""6P7Q.ï &2H""6H7I.ã &2@""6@7A.× &2d""6d7e.Ë &2R""6R7S.¿ &2N""6N7O.³ &2T""6T7U.§ &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s/Ĵ#0ı*;).ī &2F""6F7G.ğ &2J""6J7K.ē &2L""6L7M.ć &2X""6X7Y.û &2P""6P7Q.ï &2H""6H7I.ã &2@""6@7A.× &2d""6d7e.Ë &2R""6R7S.¿ &2N""6N7O.³ &2T""6T7U.§ &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s&&&#/"!&,)'),m(`%;//?#2P""6P7Q/0$;//'$8#:t# )(#'#("'#&'#`),m(`%;//?#24""6475/0$;//'$8#:u# )(#'#("'#&'#`),m(`%;//?#2>""6>7?/0$;//'$8#:v# )(#'#("'#&'#`),m(`%;//?#2T""6T7U/0$;//'$8#:w# )(#'#("'#&'#`),m(`%;//?#2V""6V7W/0$;//'$8#:x# )(#'#("'#&'#`),m(`%2h""6h7i/0#;//'$8":y" )("'#&'#`),m(`%;//6#2f""6f7g/'$8":z" )("'#&'#`),m(`%;//?#2D""6D7E/0$;//'$8#:{# )(#'#("'#&'#`),m(`%;//?#22""6273/0$;//'$8#:|# )(#'#("'#&'#`),m(`%;//?#28""6879/0$;//'$8#:}# )(#'#("'#&'#`),m(`%;//0#;&/'$8":~" )("'#&'#`),m(`%;&/0#;//'$8":~" )("'#&'#`),m(`%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#("'#&'#`),m('4""5!7.A &4""5!7.5 &4""5!7.) &;3.# &;.'),m(`%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#("'#&'#/"!&,)`),m(`%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/"!&,)/1$;&/($8$:$!!)($'#(#'#("'#&'#`),m(';..G &2L""6L7M.; &4""5!7./ &4""5!7.# &;3'),m(`%2j""6j7k/J#4""5!7.5 &4""5!7.) &4""5!7/#$+")("'#&'#`),m(`%;N/M#28""6879/>$;O." &"/0$;S/'$8$:$ )($'#(#'#("'#&'#`),m(`%;N/d#28""6879/U$;O." &"/G$;S/>$;_/5$;l." &"/'$8&:& )(&'#(%'#($'#(#'#("'#&'#`),m(`%3""5$7.) &3""5#7/' 8!:!! )`),m(`%;P/]#%28""6879/,#;R/#$+")("'#&'#." &"/6$2:""6:7;/'$8#:# )(#'#("'#&'#`),m("$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#"),m('2<""6<7=.q &2>""6>7?.e &2@""6@7A.Y &2B""6B7C.M &2D""6D7E.A &22""6273.5 &26""6677.) &24""6475'),m('%$;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E0e*;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E&/& 8!:! )'),m(`%;T/J#%28""6879/,#;^/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;U.) &;\\.# &;X/& 8!:! )"),m(`%$%;V/2#2J""6J7K/#$+")("'#&'#0<*%;V/2#2J""6J7K/#$+")("'#&'#&/D#;W/;$2J""6J7K." &"/'$8#:# )(#'#("'#&'#`),m('$4""5!7/,#0)*4""5!7&&&#'),m(`%4$""5!7%/?#$4""5!70)*4""5!7&/#$+")("'#&'#`),m(`%2l""6l7m/?#;Y/6$2n""6n7o/'$8#:# )(#'#("'#&'#`),m(`%%;Z/³#28""6879/¤$;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+-)(-'#(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#.ސ &%2""67/¤#;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+,)(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#.۹ &%2""67/#;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#.ٺ &%2""67/t#;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#.ؓ &%2""67/\\#;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+&)(&'#(%'#($'#(#'#("'#&'#.ׄ &%2""67/D#;Z/;$28""6879/,$;[/#$+$)($'#(#'#("'#&'#.֍ &%2""67/,#;[/#$+")("'#&'#.ծ &%2""67/,#;Z/#$+")("'#&'#.Տ &%;Z/#2""67/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$++)(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#.Ӈ &%;Z/ª#%28""6879/,#;Z/#$+")("'#&'#." &"/$2""67/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#.а &%;Z/¹#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/k$2""67/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+))()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#.Ί &%;Z/È#%28""6879/,#;Z/#$+")("'#&'#." &"/¡$%28""6879/,#;Z/#$+")("'#&'#." &"/z$%28""6879/,#;Z/#$+")("'#&'#." &"/S$2""67/D$;Z/;$28""6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#.˕ &%;Z/×#%28""6879/,#;Z/#$+")("'#&'#." &"/°$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/b$%28""6879/,#;Z/#$+")("'#&'#." &"/;$2""67/,$;[/#$+')(''#(&'#(%'#($'#(#'#("'#&'#.ȑ &%;Z/þ#%28""6879/,#;Z/#$+")("'#&'#." &"/×$%28""6879/,#;Z/#$+")("'#&'#." &"/°$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/b$%28""6879/,#;Z/#$+")("'#&'#." &"/;$2""67/,$;Z/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#.Ħ &%;Z/Ĝ#%28""6879/,#;Z/#$+")("'#&'#." &"/õ$%28""6879/,#;Z/#$+")("'#&'#." &"/Î$%28""6879/,#;Z/#$+")("'#&'#." &"/§$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/Y$%28""6879/,#;Z/#$+")("'#&'#." &"/2$2""67/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#/& 8!: ! )`),m(`%;#/M#;#." &"/?$;#." &"/1$;#." &"/#$+$)($'#(#'#("'#&'#`),m(`%;Z/;#28""6879/,$;Z/#$+#)(#'#("'#&'#.# &;\\`),m(`%;]/o#2J""6J7K/\`$;]/W$2J""6J7K/H$;]/?$2J""6J7K/0$;]/'$8':¡' )(''#(&'#(%'#($'#(#'#("'#&'#`),m(`%2¢""6¢7£/2#4¤""5!7¥/#$+")("'#&'#. &%2¦""6¦7§/;#4¨""5!7©/,$;!/#$+#)(#'#("'#&'#.j &%2ª""6ª7«/5#;!/,$;!/#$+#)(#'#("'#&'#.B &%4¬""5!7­/,#;!/#$+")("'#&'#.# &;!`),m(`%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%'#($'#(#'#("'#&'#/' 8!:®!! )`),m(`$%22""6273/,#;\`/#$+")("'#&'#0<*%22""6273/,#;\`/#$+")("'#&'#&`),m(";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g"),m(`%3¯""5*7°/a#3±""5#7².G &3³""5#7´.; &3µ""5$7¶./ &3·""5#7¸.# &;6/($8":¹"! )("'#&'#`),m(`%3º""5%7»/I#3¼""5%7½./ &3¾""5"7¿.# &;6/($8":À"! )("'#&'#`),m(`%3Á""5'7Â/1#;/($8":Ã"! )("'#&'#`),m(`%3Ä""5$7Å/1#;ð/($8":Æ"! )("'#&'#`),m(`%3Ç""5&7È/1#;T/($8":É"! )("'#&'#`),m(`%3Ê""5"7Ë/N#%2>""6>7?/,#;6/#$+")("'#&'#." &"/'$8":Ì" )("'#&'#`),m(`%;h/P#%2>""6>7?/,#;i/#$+")("'#&'#." &"/)$8":Í""! )("'#&'#`),m('%$;j/&#0#*;j&&&#/"!&,)'),m('%$;j/&#0#*;j&&&#/"!&,)'),m(";k.) &;+.# &;-"),m('2l""6l7m.e &2n""6n7o.Y &24""6475.M &28""6879.A &2<""6<7=.5 &2@""6@7A.) &2B""6B7C'),m(`%26""6677/n#;m/e$$%2<""6<7=/,#;m/#$+")("'#&'#0<*%2<""6<7=/,#;m/#$+")("'#&'#&/#$+#)(#'#("'#&'#`),m(`%;n/A#2>""6>7?/2$;o/)$8#:Î#"" )(#'#("'#&'#`),m("$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#"),m("$;p.) &;+.# &;-0/*;p.) &;+.# &;-&"),m('2l""6l7m.e &2n""6n7o.Y &24""6475.M &26""6677.A &28""6879.5 &2@""6@7A.) &2B""6B7C'),m(";.# &;r"),m(`%;/G#;'/>$;s/5$;'/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m(";M.# &;t"),m(`%;/E#28""6879/6$;u.# &;x/'$8#:Ï# )(#'#("'#&'#`),m(`%;v.# &;w/J#%26""6677/,#;/#$+")("'#&'#." &"/#$+")("'#&'#`),m(`%2Ð""6Ð7Ñ/:#;/1$;w." &"/#$+#)(#'#("'#&'#`),m(`%24""6475/,#;{/#$+")("'#&'#`),m(`%;z/3#$;y0#*;y&/#$+")("'#&'#`),m(";*.) &;+.# &;-"),m(';+. &;-. &22""6273.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(`%;|/e#$%24""6475/,#;|/#$+")("'#&'#0<*%24""6475/,#;|/#$+")("'#&'#&/#$+")("'#&'#`),m(`%$;~0#*;~&/e#$%22""6273/,#;}/#$+")("'#&'#0<*%22""6273/,#;}/#$+")("'#&'#&/#$+")("'#&'#`),m("$;~0#*;~&"),m(';+.w &;-.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(`%%;"/#$;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K0M*;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K&/#$+")("'#&'#/& 8!:Ò! )`),m(";.# &;"),m(`%%;O/2#2:""6:7;/#$+")("'#&'#." &"/,#;S/#$+")("'#&'#." &"`),m('$;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A/#0*;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A&&&#'),m("$;y0#*;y&"),m(`%3""5#7Ó/q#24""6475/b$$;!/&#0#*;!&&&#/L$2J""6J7K/=$$;!/&#0#*;!&&&#/'$8%:Ô% )(%'#($'#(#'#("'#&'#`),m('2Õ""6Õ7Ö'),m('2×""6×7Ø'),m('2Ù""6Ù7Ú'),m('2Û""6Û7Ü'),m('2Ý""6Ý7Þ'),m('2ß""6ß7à'),m('2á""6á7â'),m('2ã""6ã7ä'),m('2å""6å7æ'),m('2ç""6ç7è'),m('2é""6é7ê'),m("%;.Y &;.S &;.M &;.G &;.A &;.; &;.5 &;./ &;.) &;.# &;6/& 8!:ë! )"),m(`%;/G#;'/>$;/5$;'/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m("%;/' 8!:ì!! )"),m(`%;!/5#;!/,$;!/#$+#)(#'#("'#&'#`),m("%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:í! )"),m(`%;¶/Y#$%;A/,#;¶/#$+")("'#&'#06*%;A/,#;¶/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;9/N#%2:""6:7;/,#;9/#$+")("'#&'#." &"/'$8":î" )("'#&'#`),m(`%;:.c &%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#/& 8!:ï! )`),m(`%;L.# &;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":ð" )("'#&'#`),m(`%;." &"/>#;@/5$;M/,$;?/#$+$)($'#(#'#("'#&'#`),m(`%%;6/Y#$%;./,#;6/#$+")("'#&'#06*%;./,#;6/#$+")("'#&'#&/#$+")("'#&'#.# &;H/' 8!:ñ!! )`),m(";.) &;.# &; "),m(`%3ò""5!7ó/:#;</1$;/($8#:ô#! )(#'#("'#&'#`),m(`%3õ""5'7ö/:#;</1$;/($8#:÷#! )(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:ø!! )"),m(`%2ù""6ù7ú/o#%2J""6J7K/M#;!." &"/?$;!." &"/1$;!." &"/#$+$)($'#(#'#("'#&'#." &"/'$8":û" )("'#&'#`),m(`%;6/J#%;</,#;¡/#$+")("'#&'#." &"/)$8":ü""! )("'#&'#`),m(";6.) &;T.# &;H"),m(`%;£/Y#$%;B/,#;¤/#$+")("'#&'#06*%;B/,#;¤/#$+")("'#&'#&/#$+")("'#&'#`),m(`%3ý""5&7þ.G &3ÿ""5'7Ā.; &3ā""5$7Ă./ &3ă""5%7Ą.# &;6/& 8!:ą! )`),m(";¥.# &; "),m(`%3Ć""5(7ć/M#;</D$3Ĉ""5(7ĉ./ &3Ċ""5(7ċ.# &;6/#$+#)(#'#("'#&'#`),m(`%;6/Y#$%;A/,#;6/#$+")("'#&'#06*%;A/,#;6/#$+")("'#&'#&/#$+")("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:Č!! )"),m("%;©/& 8!:č! )"),m(`%;ª/k#;;/b$;¯/Y$$%;B/,#;°/#$+")("'#&'#06*%;B/,#;°/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";«.# &;¬"),m('3Ď""5$7ď.S &3Đ""5%7đ.G &3Ē""5%7ē.; &3Ĕ""5%7ĕ./ &3Ė""5+7ė.# &;­'),m(`3Ę""5'7ę./ &3Ě""5)7ě.# &;­`),m(";6.# &;®"),m(`%3Ĝ""5"7ĝ/,#;6/#$+")("'#&'#`),m(";­.# &;6"),m(`%;6/5#;</,$;±/#$+#)(#'#("'#&'#`),m(";6.# &;H"),m(`%;³/5#;./,$;/#$+#)(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:Ğ!! )"),m("%;/' 8!:ğ!! )"),m(`%;¶/^#$%;B/,#; /#$+")("'#&'#06*%;B/,#; /#$+")("'#&'#&/($8":Ġ"!!)("'#&'#`),m(`%%;7/e#$%2J""6J7K/,#;7/#$+")("'#&'#0<*%2J""6J7K/,#;7/#$+")("'#&'#&/#$+")("'#&'#/"!&,)`),m(`%;L.# &;/]#$%;B/,#;¸/#$+")("'#&'#06*%;B/,#;¸/#$+")("'#&'#&/'$8":ġ" )("'#&'#`),m(";¹.# &; "),m(`%3Ģ""5#7ģ/:#;</1$;6/($8#:Ĥ#! )(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:ĥ!! )"),m("%;/' 8!:Ħ!! )"),m(`%$;0#*;&/x#;@/o$;M/f$;?/]$$%;B/,#; /#$+")("'#&'#06*%;B/,#; /#$+")("'#&'#&/'$8%:ħ% )(%'#($'#(#'#("'#&'#`),m(";¾"),m(`%3Ĩ""5&7ĩ/k#;./b$;Á/Y$$%;A/,#;Á/#$+")("'#&'#06*%;A/,#;Á/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#.# &;¿`),m(`%;6/k#;./b$;À/Y$$%;A/,#;À/#$+")("'#&'#06*%;A/,#;À/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(`%;6/;#;</2$;6.# &;H/#$+#)(#'#("'#&'#`),m(";Â.G &;Ä.A &;Æ.; &;È.5 &;É./ &;Ê.) &;Ë.# &;À"),m(`%3Ī""5%7ī/5#;</,$;Ã/#$+#)(#'#("'#&'#`),m("%;I/' 8!:Ĭ!! )"),m(`%3ĭ""5&7Į/#;</$;D/$;Å/|$$%$;'/&#0#*;'&&&#/,#;Å/#$+")("'#&'#0C*%$;'/&#0#*;'&&&#/,#;Å/#$+")("'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#("'#&'#`),m(";t.# &;w"),m(`%3į""5%7İ/5#;</,$;Ç/#$+#)(#'#("'#&'#`),m("%;I/' 8!:ı!! )"),m(`%3Ĳ""5&7ĳ/:#;</1$;I/($8#:Ĵ#! )(#'#("'#&'#`),m(`%3ĵ""5%7Ķ/]#;</T$%3ķ""5$7ĸ/& 8!:Ĺ! ).4 &%3ĺ""5%7Ļ/& 8!:ļ! )/#$+#)(#'#("'#&'#`),m(`%3Ľ""5)7ľ/R#;</I$3Ŀ""5#7ŀ./ &3Ł""5(7ł.# &;6/($8#:Ń#! )(#'#("'#&'#`),m(`%3ń""5#7Ņ/#;</$;D/$%;Ì/e#$%2D""6D7E/,#;Ì/#$+")("'#&'#0<*%2D""6D7E/,#;Ì/#$+")("'#&'#&/#$+")("'#&'#/,$;E/#$+%)(%'#($'#(#'#("'#&'#`),m(`%3ņ""5(7Ň./ &3ň""5$7ŉ.# &;6/' 8!:Ŋ!! )`),m(`%;6/Y#$%;A/,#;6/#$+")("'#&'#06*%;A/,#;6/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;Ï/G#;./>$;Ï/5$;./,$;/#$+%)(%'#($'#(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:ŋ!! )"),m(`%;Ñ/]#$%;A/,#;Ñ/#$+")("'#&'#06*%;A/,#;Ñ/#$+")("'#&'#&/'$8":Ō" )("'#&'#`),m(`%;/]#$%;B/,#; /#$+")("'#&'#06*%;B/,#; /#$+")("'#&'#&/'$8":ō" )("'#&'#`),m(`%;L.O &;.I &%;@." &"/:#;t/1$;?." &"/#$+#)(#'#("'#&'#/]#$%;B/,#; /#$+")("'#&'#06*%;B/,#; /#$+")("'#&'#&/'$8":Ŏ" )("'#&'#`),m(`%;Ô/]#$%;B/,#;Õ/#$+")("'#&'#06*%;B/,#;Õ/#$+")("'#&'#&/'$8":ŏ" )("'#&'#`),m("%;/& 8!:Ő! )"),m(`%3ő""5(7Œ/:#;</1$;6/($8#:œ#! )(#'#("'#&'#.g &%3Ŕ""5&7ŕ/:#;</1$;6/($8#:Ŗ#! )(#'#("'#&'#.: &%3ŗ""5*7Ř/& 8!:ř! ).# &; `),m(`%%;6/k#$%;A/2#;6/)$8":Ś""$ )("'#&'#0<*%;A/2#;6/)$8":Ś""$ )("'#&'#&/)$8":ś""! )("'#&'#." &"/' 8!:Ŝ!! )`),m(`%;Ø/Y#$%;A/,#;Ø/#$+")("'#&'#06*%;A/,#;Ø/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;/Y#$%;B/,#; /#$+")("'#&'#06*%;B/,#; /#$+")("'#&'#&/#$+")("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:ŝ!! )"),m(`%;Û/Y#$%;B/,#;Ü/#$+")("'#&'#06*%;B/,#;Ü/#$+")("'#&'#&/#$+")("'#&'#`),m(`%3Ş""5&7ş.; &3Š""5'7š./ &3Ţ""5*7ţ.# &;6/& 8!:Ť! )`),m(`%3ť""5&7Ŧ/:#;</1$;Ý/($8#:ŧ#! )(#'#("'#&'#.} &%3õ""5'7ö/:#;</1$;/($8#:Ũ#! )(#'#("'#&'#.P &%3ũ""5+7Ū/:#;</1$;/($8#:ū#! )(#'#("'#&'#.# &; `),m(`3Ŭ""5+7ŭ.k &3Ů""5)7ů._ &3Ű""5(7ű.S &3Ų""5'7ų.G &3Ŵ""5&7ŵ.; &3Ŷ""5*7ŷ./ &3Ÿ""5)7Ź.# &;6`),m(';1." &"'),m(`%%;6/k#$%;A/2#;6/)$8":Ś""$ )("'#&'#0<*%;A/2#;6/)$8":Ś""$ )("'#&'#&/)$8":ś""! )("'#&'#." &"/' 8!:ź!! )`),m(`%;L.# &;/]#$%;B/,#;á/#$+")("'#&'#06*%;B/,#;á/#$+")("'#&'#&/'$8":Ż" )("'#&'#`),m(";¹.# &; "),m(`%;ã/Y#$%;A/,#;ã/#$+")("'#&'#06*%;A/,#;ã/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;ê/k#;./b$;í/Y$$%;B/,#;ä/#$+")("'#&'#06*%;B/,#;ä/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";å.; &;æ.5 &;ç./ &;è.) &;é.# &; "),m(`%3ż""5#7Ž/:#;</1$;ð/($8#:ž#! )(#'#("'#&'#`),m(`%3ſ""5%7ƀ/:#;</1$;T/($8#:Ɓ#! )(#'#("'#&'#`),m(`%3Ƃ""5(7ƃ/F#;</=$;\\.) &;Y.# &;X/($8#:Ƅ#! )(#'#("'#&'#`),m(`%3ƅ""5&7Ɔ/:#;</1$;6/($8#:Ƈ#! )(#'#("'#&'#`),m(`%3ƈ""5%7Ɖ/A#;</8$$;!0#*;!&/($8#:Ɗ#! )(#'#("'#&'#`),m(`%;ë/G#;;/>$;6/5$;;/,$;ì/#$+%)(%'#($'#(#'#("'#&'#`),m(`%3""5#7Ó.# &;6/' 8!:Ƌ!! )`),m(`%3±""5#7ƌ.G &3³""5#7ƍ.; &3·""5#7Ǝ./ &3µ""5$7Ə.# &;6/' 8!:Ɛ!! )`),m(`%;î/D#%;C/,#;ï/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;U.) &;\\.# &;X/& 8!:Ƒ! )"),m(`%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%'#($'#(#'#("'#&'#/' 8!:ƒ!! )`),m(`%%;!/?#;!." &"/1$;!." &"/#$+#)(#'#("'#&'#/' 8!:Ɠ!! )`),m(";¾"),m(`%;/^#$%;B/,#;ó/#$+")("'#&'#06*%;B/,#;ó/#$+")("'#&'#&/($8":Ɣ"!!)("'#&'#`),m(";ô.# &; "),m(`%2ƕ""6ƕ7Ɩ/L#;</C$2Ɨ""6Ɨ7Ƙ.) &2ƙ""6ƙ7ƚ/($8#:ƛ#! )(#'#("'#&'#`),m(`%;/^#$%;B/,#; /#$+")("'#&'#06*%;B/,#; /#$+")("'#&'#&/($8":Ɯ"!!)("'#&'#`),m(`%;6/5#;0/,$;÷/#$+#)(#'#("'#&'#`),m("$;2.) &;4.# &;.0/*;2.) &;4.# &;.&"),m("$;%0#*;%&"),m(`%;ú/;#28""6879/,$;û/#$+#)(#'#("'#&'#`),m(`%3Ɲ""5%7ƞ.) &3Ɵ""5$7Ơ/' 8!:ơ!! )`),m(`%;ü/J#%28""6879/,#;^/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;\\.) &;X.# &;/' 8!:Ƣ!! )"),m(';".S &;!.M &2F""6F7G.A &2J""6J7K.5 &2H""6H7I.) &2N""6N7O'),m('2L""6L7M. &2B""6B7C. &2<""6<7=.} &2R""6R7S.q &2T""6T7U.e &2V""6V7W.Y &2P""6P7Q.M &2@""6@7A.A &2D""6D7E.5 &22""6273.) &2>""6>7?'),m(`%;Ā/b#28""6879/S$;û/J$%2ƣ""6ƣ7Ƥ/,#;ì/#$+")("'#&'#." &"/#$+$)($'#(#'#("'#&'#`),m(`%3ƥ""5%7Ʀ.) &3Ƨ""5$7ƨ/' 8!:ơ!! )`),m(`%3±""5#7².6 &3³""5#7´.* &$;+0#*;+&/' 8!:Ʃ!! )`),m(`%;Ą/#2F""6F7G/x$;ă/o$2F""6F7G/\`$;ă/W$2F""6F7G/H$;ă/?$2F""6F7G/0$;ą/'$8):ƪ) )()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#`),m(`%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#("'#&'#`),m(`%;ă/,#;ă/#$+")("'#&'#`),m(`%;ă/5#;ă/,$;ă/#$+#)(#'#("'#&'#`),m(`%;q/T#$;m0#*;m&/D$%; /,#;ø/#$+")("'#&'#." &"/#$+#)(#'#("'#&'#`),m(`%2ƫ""6ƫ7Ƭ.) &2ƭ""6ƭ7Ʈ/w#;0/n$;Ĉ/e$$%;B/2#;ĉ.# &; /#$+")("'#&'#0<*%;B/2#;ĉ.# &; /#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";.# &;L"),m(`%2Ư""6Ư7ư/5#;</,$;Ċ/#$+#)(#'#("'#&'#`),m(`%;D/S#;,/J$2:""6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#("'#&'#`)];let l=0,u=0;const f=[{line:1,column:1}];let c=0,d=[],h=0,g;if(t.startRule!==void 0){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');s=i[t.startRule]}function v(){return e.substring(u,l)}function p(){return k(u,l)}function y(E,R){return{type:"literal",text:E,ignoreCase:R}}function w(E,R,D){return{type:"class",parts:E,inverted:R,ignoreCase:D}}function A(){return{type:"end"}}function I(E){let R=f[E],D;if(R)return R;for(D=E-1;!f[D];)D--;for(R=f[D],R={line:R.line,column:R.column};D<E;)e.charCodeAt(D)===10?(R.line++,R.column=1):R.column++,D++;return f[E]=R,R}function k(E,R){const D=I(E),$=I(R);return{source:r,start:{offset:E,line:D.line,column:D.column},end:{offset:R,line:$.line,column:$.column}}}function x(E){l<c||(l>c&&(c=l,d=[]),d.push(E))}function C(E,R,D){return new Ua(Ua.buildMessage(E,R),E,R,D)}function m(E){return E.split("").map(R=>R.charCodeAt(0)-32)}function _(E){const R=o[E];let D=0;const $=[];let M=R.length;const O=[],L=[];let W;for(;;){for(;D<M;)switch(R[D]){case 0:L.push(a[R[D+1]]),D+=2;break;case 1:L.push(void 0),D++;break;case 2:L.push(null),D++;break;case 3:L.push(n),D++;break;case 4:L.push([]),D++;break;case 5:L.push(l),D++;break;case 6:L.pop(),D++;break;case 7:l=L.pop(),D++;break;case 8:L.length-=R[D+1],D+=2;break;case 9:L.splice(-2,1),D++;break;case 10:L[L.length-2].push(L.pop()),D++;break;case 11:L.push(L.splice(L.length-R[D+1],R[D+1])),D+=2;break;case 12:L.push(e.substring(L.pop(),l)),D++;break;case 13:O.push(M),$.push(D+3+R[D+1]+R[D+2]),L[L.length-1]?(M=D+3+R[D+1],D+=3):(M=D+3+R[D+1]+R[D+2],D+=3+R[D+1]);break;case 14:O.push(M),$.push(D+3+R[D+1]+R[D+2]),L[L.length-1]===n?(M=D+3+R[D+1],D+=3):(M=D+3+R[D+1]+R[D+2],D+=3+R[D+1]);break;case 15:O.push(M),$.push(D+3+R[D+1]+R[D+2]),L[L.length-1]!==n?(M=D+3+R[D+1],D+=3):(M=D+3+R[D+1]+R[D+2],D+=3+R[D+1]);break;case 16:L[L.length-1]!==n?(O.push(M),$.push(D),M=D+2+R[D+1],D+=2):D+=2+R[D+1];break;case 17:O.push(M),$.push(D+3+R[D+1]+R[D+2]),e.length>l?(M=D+3+R[D+1],D+=3):(M=D+3+R[D+1]+R[D+2],D+=3+R[D+1]);break;case 18:O.push(M),$.push(D+4+R[D+2]+R[D+3]),e.substr(l,a[R[D+1]].length)===a[R[D+1]]?(M=D+4+R[D+2],D+=4):(M=D+4+R[D+2]+R[D+3],D+=4+R[D+2]);break;case 19:O.push(M),$.push(D+4+R[D+2]+R[D+3]),e.substr(l,a[R[D+1]].length).toLowerCase()===a[R[D+1]]?(M=D+4+R[D+2],D+=4):(M=D+4+R[D+2]+R[D+3],D+=4+R[D+2]);break;case 20:O.push(M),$.push(D+4+R[D+2]+R[D+3]),a[R[D+1]].test(e.charAt(l))?(M=D+4+R[D+2],D+=4):(M=D+4+R[D+2]+R[D+3],D+=4+R[D+2]);break;case 21:L.push(e.substr(l,R[D+1])),l+=R[D+1],D+=2;break;case 22:L.push(a[R[D+1]]),l+=a[R[D+1]].length,D+=2;break;case 23:L.push(n),h===0&&x(a[R[D+1]]),D+=2;break;case 24:u=L[L.length-1-R[D+1]],D+=2;break;case 25:u=l,D++;break;case 26:W=R.slice(D+4,D+4+R[D+3]).map(function(te){return L[L.length-1-te]}),L.splice(L.length-R[D+2],R[D+2],a[R[D+1]].apply(null,W)),D+=4+R[D+3];break;case 27:L.push(_(R[D+1])),D+=2;break;case 28:h++,D++;break;case 29:h--,D++;break;default:throw new Error("Invalid opcode: "+R[D]+".")}if(O.length>0)M=O.pop(),D=$.pop();else break}return L[0]}t.data={};function T(E,R){return[E].concat(R)}if(g=_(s),g!==n&&l===e.length)return g;throw g!==n&&l<e.length&&x(A()),C(d,c<e.length?e.charAt(c):null,c<e.length?k(c,c+1):k(c,c))}const xk=wk;var Xt;(function(e){function t(i,s){const a={startRule:s};try{xk(i,a)}catch{a.data=-1}return a.data}e.parse=t;function n(i){const s=e.parse(i,"Name_Addr_Header");return s!==-1?s:void 0}e.nameAddrHeaderParse=n;function r(i){const s=e.parse(i,"SIP_URI");return s!==-1?s:void 0}e.URIParse=r})(Xt=Xt||(Xt={}));const Ck={100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"};function Ms(e,t=32){let n="";for(let r=0;r<e;r++){const i=Math.floor(Math.random()*t);n+=i.toString(t)}return n}function rd(e){return Ck[e]||""}function id(){return Ms(10)}function Zr(e){const t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},n=e.toLowerCase().replace(/_/g,"-").split("-"),r=n.length;let i="";for(let s=0;s<r;s++)s!==0&&(i+="-"),i+=n[s].charAt(0).toUpperCase()+n[s].substring(1);return t[i]&&(i=t[i]),i}function yl(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length}class f_{constructor(){this.headers={}}addHeader(t,n){const r={raw:n};t=Zr(t),this.headers[t]?this.headers[t].push(r):this.headers[t]=[r]}getHeader(t){const n=this.headers[Zr(t)];if(n){if(n[0])return n[0].raw}else return}getHeaders(t){const n=this.headers[Zr(t)],r=[];if(!n)return[];for(const i of n)r.push(i.raw);return r}hasHeader(t){return!!this.headers[Zr(t)]}parseHeader(t,n=0){if(t=Zr(t),this.headers[t]){if(n>=this.headers[t].length)return}else return;const r=this.headers[t][n],i=r.raw;if(r.parsed)return r.parsed;const s=Xt.parse(i,t.replace(/-/g,"_"));if(s===-1){this.headers[t].splice(n,1);return}else return r.parsed=s,s}s(t,n=0){return this.parseHeader(t,n)}setHeader(t,n){this.headers[Zr(t)]=[{raw:n}]}toString(){return this.data}}class za extends f_{constructor(){super()}}class vs extends f_{constructor(){super()}}var Yo;(function(e){function t(i,s){let a=s,o=0,l=0;if(i.substring(a,a+2).match(/(^\r\n)/))return-2;for(;o===0;){if(l=i.indexOf(`\r
`,a),l===-1)return l;!i.substring(l+2,l+4).match(/(^\r\n)/)&&i.charAt(l+2).match(/(^\s+)/)?a=l+2:o=l}return o}e.getHeader=t;function n(i,s,a,o){const l=s.indexOf(":",a),u=s.substring(a,l).trim(),f=s.substring(l+1,o).trim();let c;switch(u.toLowerCase()){case"via":case"v":i.addHeader("via",f),i.getHeaders("via").length===1?(c=i.parseHeader("Via"),c&&(i.via=c,i.viaBranch=c.branch)):c=0;break;case"from":case"f":i.setHeader("from",f),c=i.parseHeader("from"),c&&(i.from=c,i.fromTag=c.getParam("tag"));break;case"to":case"t":i.setHeader("to",f),c=i.parseHeader("to"),c&&(i.to=c,i.toTag=c.getParam("tag"));break;case"record-route":if(c=Xt.parse(f,"Record_Route"),c===-1){c=void 0;break}if(!(c instanceof Array)){c=void 0;break}c.forEach(d=>{i.addHeader("record-route",f.substring(d.position,d.offset)),i.headers["Record-Route"][i.getHeaders("record-route").length-1].parsed=d.parsed});break;case"call-id":case"i":i.setHeader("call-id",f),c=i.parseHeader("call-id"),c&&(i.callId=f);break;case"contact":case"m":if(c=Xt.parse(f,"Contact"),c===-1){c=void 0;break}if(!(c instanceof Array)){c=void 0;break}c.forEach(d=>{i.addHeader("contact",f.substring(d.position,d.offset)),i.headers.Contact[i.getHeaders("contact").length-1].parsed=d.parsed});break;case"content-length":case"l":i.setHeader("content-length",f),c=i.parseHeader("content-length");break;case"content-type":case"c":i.setHeader("content-type",f),c=i.parseHeader("content-type");break;case"cseq":i.setHeader("cseq",f),c=i.parseHeader("cseq"),c&&(i.cseq=c.value),i instanceof vs&&(i.method=c.method);break;case"max-forwards":i.setHeader("max-forwards",f),c=i.parseHeader("max-forwards");break;case"www-authenticate":i.setHeader("www-authenticate",f),c=i.parseHeader("www-authenticate");break;case"proxy-authenticate":i.setHeader("proxy-authenticate",f),c=i.parseHeader("proxy-authenticate");break;case"refer-to":case"r":i.setHeader("refer-to",f),c=i.parseHeader("refer-to"),c&&(i.referTo=c);break;default:i.addHeader(u.toLowerCase(),f),c=0}return c===void 0?{error:"error parsing header '"+u+"'"}:!0}e.parseHeader=n;function r(i,s){let a=0,o=i.indexOf(`\r
`);if(o===-1){s.warn("no CRLF found, not a SIP message, discarded");return}const l=i.substring(0,o),u=Xt.parse(l,"Request_Response");let f;if(u===-1){s.warn('error parsing first line of SIP message: "'+l+'"');return}else u.status_code?(f=new vs,f.statusCode=u.status_code,f.reasonPhrase=u.reason_phrase):(f=new za,f.method=u.method,f.ruri=u.uri);f.data=i,a=o+2;let c;for(;;){if(o=t(i,a),o===-2){c=a+2;break}else if(o===-1){s.error("malformed message");return}const d=n(f,i,a,o);if(d&&d!==!0){s.error(d.error);return}a=o+2}return f.hasHeader("content-length")?f.body=i.substr(c,Number(f.getHeader("content-length"))):f.body=i.substring(c),f}e.parseMessage=r})(Yo=Yo||(Yo={}));const Ek=Object.freeze(Object.defineProperty({__proto__:null,get Parser(){return Yo}},Symbol.toStringTag,{value:"Module"})),Tk=rr(Ek);var Ve;(function(e){e.ACK="ACK",e.BYE="BYE",e.CANCEL="CANCEL",e.INFO="INFO",e.INVITE="INVITE",e.MESSAGE="MESSAGE",e.NOTIFY="NOTIFY",e.OPTIONS="OPTIONS",e.REGISTER="REGISTER",e.UPDATE="UPDATE",e.SUBSCRIBE="SUBSCRIBE",e.PUBLISH="PUBLISH",e.REFER="REFER",e.PRACK="PRACK"})(Ve=Ve||(Ve={}));const Ak=Object.freeze(Object.defineProperty({__proto__:null,get C(){return Ve}},Symbol.toStringTag,{value:"Module"})),Ik=rr(Ak),Rk=rr(_k);class nn{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(t,n=!1){return this.onePassHasher.start().appendStr(t).end(n)}static hashAsciiStr(t,n=!1){return this.onePassHasher.start().appendAsciiStr(t).end(n)}static _hex(t){const n=nn.hexChars,r=nn.hexOut;let i,s,a,o;for(o=0;o<4;o+=1)for(s=o*8,i=t[o],a=0;a<8;a+=2)r[s+1+a]=n.charAt(i&15),i>>>=4,r[s+0+a]=n.charAt(i&15),i>>>=4;return r.join("")}static _md5cycle(t,n){let r=t[0],i=t[1],s=t[2],a=t[3];r+=(i&s|~i&a)+n[0]-680876936|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+n[1]-389564586|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+n[2]+606105819|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+n[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+n[4]-176418897|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+n[5]+1200080426|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+n[6]-1473231341|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+n[7]-45705983|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+n[8]+1770035416|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+n[9]-1958414417|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+n[10]-42063|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+n[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+n[12]+1804603682|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+n[13]-40341101|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+n[14]-1502002290|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+n[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,r+=(i&a|s&~a)+n[1]-165796510|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+n[6]-1069501632|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+n[11]+643717713|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+n[0]-373897302|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+n[5]-701558691|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+n[10]+38016083|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+n[15]-660478335|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+n[4]-405537848|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+n[9]+568446438|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+n[14]-1019803690|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+n[3]-187363961|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+n[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+n[13]-1444681467|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+n[2]-51403784|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+n[7]+1735328473|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+n[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,r+=(i^s^a)+n[5]-378558|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+n[8]-2022574463|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+n[11]+1839030562|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+n[14]-35309556|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+n[1]-1530992060|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+n[4]+1272893353|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+n[7]-155497632|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+n[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+n[13]+681279174|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+n[0]-358537222|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+n[3]-722521979|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+n[6]+76029189|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+n[9]-640364487|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+n[12]-421815835|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+n[15]+530742520|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+n[2]-995338651|0,i=(i<<23|i>>>9)+s|0,r+=(s^(i|~a))+n[0]-198630844|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+n[7]+1126891415|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+n[14]-1416354905|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+n[5]-57434055|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+n[12]+1700485571|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+n[3]-1894986606|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+n[10]-1051523|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+n[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+n[8]+1873313359|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+n[15]-30611744|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+n[6]-1560198380|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+n[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+n[4]-145523070|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+n[11]-1120210379|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+n[2]+718787259|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+n[9]-343485551|0,i=(i<<21|i>>>11)+s|0,t[0]=r+t[0]|0,t[1]=i+t[1]|0,t[2]=s+t[2]|0,t[3]=a+t[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(nn.stateIdentity),this}appendStr(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,s,a;for(a=0;a<t.length;a+=1){if(s=t.charCodeAt(a),s<128)n[i++]=s;else if(s<2048)n[i++]=(s>>>6)+192,n[i++]=s&63|128;else if(s<55296||s>56319)n[i++]=(s>>>12)+224,n[i++]=s>>>6&63|128,n[i++]=s&63|128;else{if(s=(s-55296)*1024+(t.charCodeAt(++a)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[i++]=(s>>>18)+240,n[i++]=s>>>12&63|128,n[i++]=s>>>6&63|128,n[i++]=s&63|128}i>=64&&(this._dataLength+=64,nn._md5cycle(this._state,r),i-=64,r[0]=r[16])}return this._bufferLength=i,this}appendAsciiStr(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,s,a=0;for(;;){for(s=Math.min(t.length-a,64-i);s--;)n[i++]=t.charCodeAt(a++);if(i<64)break;this._dataLength+=64,nn._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}appendByteArray(t){const n=this._buffer8,r=this._buffer32;let i=this._bufferLength,s,a=0;for(;;){for(s=Math.min(t.length-a,64-i);s--;)n[i++]=t[a++];if(i<64)break;this._dataLength+=64,nn._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}getState(){const t=this,n=t._state;return{buffer:String.fromCharCode.apply(null,t._buffer8),buflen:t._bufferLength,length:t._dataLength,state:[n[0],n[1],n[2],n[3]]}}setState(t){const n=t.buffer,r=t.state,i=this._state;let s;for(this._dataLength=t.length,this._bufferLength=t.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],s=0;s<n.length;s+=1)this._buffer8[s]=n.charCodeAt(s)}end(t=!1){const n=this._bufferLength,r=this._buffer8,i=this._buffer32,s=(n>>2)+1;let a;if(this._dataLength+=n,r[n]=128,r[n+1]=r[n+2]=r[n+3]=0,i.set(nn.buffer32Identity.subarray(s),s),n>55&&(nn._md5cycle(this._state,i),i.set(nn.buffer32Identity)),a=this._dataLength*8,a<=4294967295)i[14]=a;else{const o=a.toString(16).match(/(.*?)(.{0,8})$/);if(o===null)return;const l=parseInt(o[2],16),u=parseInt(o[1],16)||0;i[14]=l,i[15]=u}return nn._md5cycle(this._state,i),t?this._state:nn._hex(this._state)}}nn.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);nn.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);nn.hexChars="0123456789abcdef";nn.hexOut=[];nn.onePassHasher=new nn;nn.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592"&&console.error("Md5 self test failed.");function Xi(e){return nn.hashStr(e)}class kk{constructor(t,n,r,i){this.logger=t.getLogger("sipjs.digestauthentication"),this.username=r,this.password=i,this.ha1=n,this.nc=0,this.ncHex="00000000"}authenticate(t,n,r){if(this.algorithm=n.algorithm,this.realm=n.realm,this.nonce=n.nonce,this.opaque=n.opaque,this.stale=n.stale,this.algorithm){if(this.algorithm!=="MD5")return this.logger.warn("challenge with Digest algorithm different than 'MD5', authentication aborted"),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(n.qop)if(n.qop.indexOf("auth")>-1)this.qop="auth";else if(n.qop.indexOf("auth-int")>-1)this.qop="auth-int";else return this.logger.warn("challenge without Digest qop different than 'auth' or 'auth-int', authentication aborted"),!1;else this.qop=void 0;return this.method=t.method,this.uri=t.ruri,this.cnonce=Ms(12),this.nc+=1,this.updateNcHex(),this.nc===4294967296&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(r),!0}toString(){const t=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return t.push("algorithm="+this.algorithm),t.push('username="'+this.username+'"'),t.push('realm="'+this.realm+'"'),t.push('nonce="'+this.nonce+'"'),t.push('uri="'+this.uri+'"'),t.push('response="'+this.response+'"'),this.opaque&&t.push('opaque="'+this.opaque+'"'),this.qop&&(t.push("qop="+this.qop),t.push('cnonce="'+this.cnonce+'"'),t.push("nc="+this.ncHex)),"Digest "+t.join(", ")}updateNcHex(){const t=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-t.length)+t}calculateResponse(t){let n,r;n=this.ha1,(n===""||n===void 0)&&(n=Xi(this.username+":"+this.realm+":"+this.password)),this.qop==="auth"?(r=Xi(this.method+":"+this.uri),this.response=Xi(n+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+r)):this.qop==="auth-int"?(r=Xi(this.method+":"+this.uri+":"+Xi(t||"")),this.response=Xi(n+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+r)):this.qop===void 0&&(r=Xi(this.method+":"+this.uri),this.response=Xi(n+":"+this.nonce+":"+r))}}var pn;(function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.log=2]="log",e[e.debug=3]="debug"})(pn=pn||(pn={}));class ty{constructor(t,n,r){this.logger=t,this.category=n,this.label=r}error(t){this.genericLog(pn.error,t)}warn(t){this.genericLog(pn.warn,t)}log(t){this.genericLog(pn.log,t)}debug(t){this.genericLog(pn.debug,t)}genericLog(t,n){this.logger.genericLog(t,this.category,this.label,n)}get level(){return this.logger.level}set level(t){this.logger.level=t}}class Pk{constructor(){this.builtinEnabled=!0,this._level=pn.log,this.loggers={},this.logger=this.getLogger("sip:loggerfactory")}get level(){return this._level}set level(t){t>=0&&t<=3?this._level=t:t>3?this._level=3:pn.hasOwnProperty(t)?this._level=t:this.logger.error("invalid 'level' parameter value: "+JSON.stringify(t))}get connector(){return this._connector}set connector(t){t?typeof t=="function"?this._connector=t:this.logger.error("invalid 'connector' parameter value: "+JSON.stringify(t)):this._connector=void 0}getLogger(t,n){if(n&&this.level===3)return new ty(this,t,n);if(this.loggers[t])return this.loggers[t];{const r=new ty(this,t);return this.loggers[t]=r,r}}genericLog(t,n,r,i){this.level>=t&&this.builtinEnabled&&this.print(t,n,r,i),this.connector&&this.connector(pn[t],n,r,i)}print(t,n,r,i){if(typeof i=="string"){const s=[new Date,n];r&&s.push(r),i=s.concat(i).join(" | ")}switch(t){case pn.error:console.error(i);break;case pn.warn:console.warn(i);break;case pn.log:console.log(i);break;case pn.debug:console.debug(i);break}}}class Us{constructor(t,n,r,i,s,a,o){this.headers={},this.extraHeaders=[],this.options=Us.getDefaultOptions(),s&&(this.options=Object.assign(Object.assign({},this.options),s),this.options.optionTags&&this.options.optionTags.length&&(this.options.optionTags=this.options.optionTags.slice()),this.options.routeSet&&this.options.routeSet.length&&(this.options.routeSet=this.options.routeSet.slice())),a&&a.length&&(this.extraHeaders=a.slice()),o&&(this.body={body:o.content,contentType:o.contentType}),this.method=t,this.ruri=n.clone(),this.fromURI=r.clone(),this.fromTag=this.options.fromTag?this.options.fromTag:id(),this.from=Us.makeNameAddrHeader(this.fromURI,this.options.fromDisplayName,this.fromTag),this.toURI=i.clone(),this.toTag=this.options.toTag,this.to=Us.makeNameAddrHeader(this.toURI,this.options.toDisplayName,this.toTag),this.callId=this.options.callId?this.options.callId:this.options.callIdPrefix+Ms(15),this.cseq=this.options.cseq,this.setHeader("route",this.options.routeSet),this.setHeader("via",""),this.setHeader("to",this.to.toString()),this.setHeader("from",this.from.toString()),this.setHeader("cseq",this.cseq+" "+this.method),this.setHeader("call-id",this.callId),this.setHeader("max-forwards","70")}static getDefaultOptions(){return{callId:"",callIdPrefix:"",cseq:1,toDisplayName:"",toTag:"",fromDisplayName:"",fromTag:"",forceRport:!1,hackViaTcp:!1,optionTags:["outbound"],routeSet:[],userAgentString:"sip.js",viaHost:""}}static makeNameAddrHeader(t,n,r){const i={};return r&&(i.tag=r),new Xn(t,n,i)}getHeader(t){const n=this.headers[Zr(t)];if(n){if(n[0])return n[0]}else{const r=new RegExp("^\\s*"+t+"\\s*:","i");for(const i of this.extraHeaders)if(r.test(i))return i.substring(i.indexOf(":")+1).trim()}}getHeaders(t){const n=[],r=this.headers[Zr(t)];if(r)for(const i of r)n.push(i);else{const i=new RegExp("^\\s*"+t+"\\s*:","i");for(const s of this.extraHeaders)i.test(s)&&n.push(s.substring(s.indexOf(":")+1).trim())}return n}hasHeader(t){if(this.headers[Zr(t)])return!0;{const n=new RegExp("^\\s*"+t+"\\s*:","i");for(const r of this.extraHeaders)if(n.test(r))return!0}return!1}setHeader(t,n){this.headers[Zr(t)]=n instanceof Array?n:[n]}setViaHeader(t,n){this.options.hackViaTcp&&(n="TCP");let r="SIP/2.0/"+n;r+=" "+this.options.viaHost+";branch="+t,this.options.forceRport&&(r+=";rport"),this.setHeader("via",r),this.branch=t}toString(){let t="";t+=this.method+" "+this.ruri.toRaw()+` SIP/2.0\r
`;for(const n in this.headers)if(this.headers[n])for(const r of this.headers[n])t+=n+": "+r+`\r
`;for(const n of this.extraHeaders)t+=n.trim()+`\r
`;return t+="Supported: "+this.options.optionTags.join(", ")+`\r
`,t+="User-Agent: "+this.options.userAgentString+`\r
`,this.body?typeof this.body=="string"?(t+="Content-Length: "+yl(this.body)+`\r
\r
`,t+=this.body):this.body.body&&this.body.contentType?(t+="Content-Type: "+this.body.contentType+`\r
`,t+="Content-Length: "+yl(this.body.body)+`\r
\r
`,t+=this.body.body):t+=`Content-Length: 0\r
\r
`:t+=`Content-Length: 0\r
\r
`,t}}function h_(e,t){const n=`\r
`;if(t.statusCode<100||t.statusCode>699)throw new TypeError("Invalid statusCode: "+t.statusCode);const r=t.reasonPhrase?t.reasonPhrase:rd(t.statusCode);let i="SIP/2.0 "+t.statusCode+" "+r+n;t.statusCode>=100&&t.statusCode<200,t.statusCode;const s="From: "+e.getHeader("From")+n,a="Call-ID: "+e.callId+n,o="CSeq: "+e.cseq+" "+e.method+n,l=e.getHeaders("via").reduce((h,g)=>h+"Via: "+g+n,"");let u="To: "+e.getHeader("to");if(t.statusCode>100&&!e.parseHeader("to").hasParam("tag")){let h=t.toTag;h||(h=id()),u+=";tag="+h}u+=n;let f="";t.supported&&(f="Supported: "+t.supported.join(", ")+n);let c="";t.userAgent&&(c="User-Agent: "+t.userAgent+n);let d="";return t.extraHeaders&&(d=t.extraHeaders.reduce((h,g)=>h+g.trim()+n,"")),i+=l,i+=s,i+=u,i+=o,i+=a,i+=f,i+=c,i+=d,t.body?(i+="Content-Type: "+t.body.contentType+n,i+="Content-Length: "+yl(t.body.content)+n+n,i+=t.body.content):i+="Content-Length: 0"+n+n,{message:i}}const yi=500,Dk=4e3,eh=5e3,wn={T1:yi,T2:Dk,T4:eh,TIMER_B:64*yi,TIMER_D:0*yi,TIMER_F:64*yi,TIMER_H:64*yi,TIMER_I:0*eh,TIMER_J:0*yi,TIMER_K:0*eh,TIMER_L:64*yi,TIMER_M:64*yi,TIMER_N:64*yi,PROVISIONAL_RESPONSE_INTERVAL:6e4};class ia extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class th extends ia{constructor(t){super(t||"Unspecified transport error.")}}class g_{constructor(t,n,r,i,s){this._transport=t,this._user=n,this._id=r,this._state=i,this.listeners=new Array,this.logger=n.loggerFactory.getLogger(s,r),this.logger.debug(`Constructing ${this.typeToString()} with id ${this.id}.`)}dispose(){this.logger.debug(`Destroyed ${this.typeToString()} with id ${this.id}.`)}get id(){return this._id}get kind(){throw new Error("Invalid kind.")}get state(){return this._state}get transport(){return this._transport}addStateChangeListener(t,n){const r=()=>{this.removeStateChangeListener(r),t()};(n==null?void 0:n.once)===!0?this.listeners.push(r):this.listeners.push(t)}notifyStateChangeListeners(){this.listeners.slice().forEach(t=>t())}removeStateChangeListener(t){this.listeners=this.listeners.filter(n=>n!==t)}logTransportError(t,n){this.logger.error(t.message),this.logger.error(`Transport error occurred in ${this.typeToString()} with id ${this.id}.`),this.logger.error(n)}send(t){return this.transport.send(t).catch(n=>{if(n instanceof th)throw this.onTransportError(n),n;let r;throw n&&typeof n.message=="string"?r=new th(n.message):r=new th,this.onTransportError(r),r})}setState(t){this.logger.debug(`State change to "${t}" on ${this.typeToString()} with id ${this.id}.`),this._state=t,this._user.onStateChange&&this._user.onStateChange(t),this.notifyStateChangeListeners()}typeToString(){return"UnknownType"}}class v_ extends g_{constructor(t,n,r,i,s){super(n,r,t.viaBranch,i,s),this._request=t,this.user=r}get request(){return this._request}}var ue;(function(e){e.Accepted="Accepted",e.Calling="Calling",e.Completed="Completed",e.Confirmed="Confirmed",e.Proceeding="Proceeding",e.Terminated="Terminated",e.Trying="Trying"})(ue=ue||(ue={}));class Zn extends v_{constructor(t,n,r){super(t,n,r,ue.Proceeding,"sip.transaction.ist")}dispose(){this.stopProgressExtensionTimer(),this.H&&(clearTimeout(this.H),this.H=void 0),this.I&&(clearTimeout(this.I),this.I=void 0),this.L&&(clearTimeout(this.L),this.L=void 0),super.dispose()}get kind(){return"ist"}receiveRequest(t){switch(this.state){case ue.Proceeding:if(t.method===Ve.INVITE){this.lastProvisionalResponse&&this.send(this.lastProvisionalResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of provisional response.")});return}break;case ue.Accepted:if(t.method===Ve.INVITE)return;break;case ue.Completed:if(t.method===Ve.INVITE){if(!this.lastFinalResponse)throw new Error("Last final response undefined.");this.send(this.lastFinalResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of final response.")});return}if(t.method===Ve.ACK){this.stateTransition(ue.Confirmed);return}break;case ue.Confirmed:if(t.method===Ve.INVITE||t.method===Ve.ACK)return;break;case ue.Terminated:if(t.method===Ve.INVITE||t.method===Ve.ACK)return;break;default:throw new Error(`Invalid state ${this.state}`)}const n=`INVITE server transaction received unexpected ${t.method} request while in state ${this.state}.`;this.logger.warn(n)}receiveResponse(t,n){if(t<100||t>699)throw new Error(`Invalid status code ${t}`);switch(this.state){case ue.Proceeding:if(t>=100&&t<=199){this.lastProvisionalResponse=n,t>100&&this.startProgressExtensionTimer(),this.send(n).catch(i=>{this.logTransportError(i,"Failed to send 1xx response.")});return}if(t>=200&&t<=299){this.lastFinalResponse=n,this.stateTransition(ue.Accepted),this.send(n).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});return}if(t>=300&&t<=699){this.lastFinalResponse=n,this.stateTransition(ue.Completed),this.send(n).catch(i=>{this.logTransportError(i,"Failed to send non-2xx final response.")});return}break;case ue.Accepted:if(t>=200&&t<=299){this.send(n).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});return}break;case ue.Completed:break;case ue.Confirmed:break;case ue.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const r=`INVITE server transaction received unexpected ${t} response from TU while in state ${this.state}.`;throw this.logger.error(r),new Error(r)}retransmitAcceptedResponse(){this.state===ue.Accepted&&this.lastFinalResponse&&this.send(this.lastFinalResponse).catch(t=>{this.logTransportError(t,"Failed to send 2xx response.")})}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t)}typeToString(){return"INVITE server transaction"}stateTransition(t){const n=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case ue.Proceeding:n();break;case ue.Accepted:case ue.Completed:this.state!==ue.Proceeding&&n();break;case ue.Confirmed:this.state!==ue.Completed&&n();break;case ue.Terminated:this.state!==ue.Accepted&&this.state!==ue.Completed&&this.state!==ue.Confirmed&&n();break;default:n()}this.stopProgressExtensionTimer(),t===ue.Accepted&&(this.L=setTimeout(()=>this.timerL(),wn.TIMER_L)),t===ue.Completed&&(this.H=setTimeout(()=>this.timerH(),wn.TIMER_H)),t===ue.Confirmed&&(this.I=setTimeout(()=>this.timerI(),wn.TIMER_I)),t===ue.Terminated&&this.dispose(),this.setState(t)}startProgressExtensionTimer(){this.progressExtensionTimer===void 0&&(this.progressExtensionTimer=setInterval(()=>{if(this.logger.debug(`Progress extension timer expired for INVITE server transaction ${this.id}.`),!this.lastProvisionalResponse)throw new Error("Last provisional response undefined.");this.send(this.lastProvisionalResponse).catch(t=>{this.logTransportError(t,"Failed to send retransmission of provisional response.")})},wn.PROVISIONAL_RESPONSE_INTERVAL))}stopProgressExtensionTimer(){this.progressExtensionTimer!==void 0&&(clearInterval(this.progressExtensionTimer),this.progressExtensionTimer=void 0)}timerG(){}timerH(){this.logger.debug(`Timer H expired for INVITE server transaction ${this.id}.`),this.state===ue.Completed&&(this.logger.warn("ACK to negative final response was never received, terminating transaction."),this.stateTransition(ue.Terminated))}timerI(){this.logger.debug(`Timer I expired for INVITE server transaction ${this.id}.`),this.stateTransition(ue.Terminated)}timerL(){this.logger.debug(`Timer L expired for INVITE server transaction ${this.id}.`),this.state===ue.Accepted&&this.stateTransition(ue.Terminated)}}class sd extends g_{constructor(t,n,r,i,s){super(n,r,sd.makeId(t),i,s),this._request=t,this.user=r,t.setViaHeader(this.id,n.protocol)}static makeId(t){if(t.method==="CANCEL"){if(!t.branch)throw new Error("Outgoing CANCEL request without a branch.");return t.branch}else return"z9hG4bK"+Math.floor(Math.random()*1e7)}get request(){return this._request}onRequestTimeout(){this.user.onRequestTimeout&&this.user.onRequestTimeout()}}class cr extends sd{constructor(t,n,r){super(t,n,r,ue.Trying,"sip.transaction.nict"),this.F=setTimeout(()=>this.timerF(),wn.TIMER_F),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.F&&(clearTimeout(this.F),this.F=void 0),this.K&&(clearTimeout(this.K),this.K=void 0),super.dispose()}get kind(){return"nict"}receiveResponse(t){const n=t.statusCode;if(!n||n<100||n>699)throw new Error(`Invalid status code ${n}`);switch(this.state){case ue.Trying:if(n>=100&&n<=199){this.stateTransition(ue.Proceeding),this.user.receiveResponse&&this.user.receiveResponse(t);return}if(n>=200&&n<=699){if(this.stateTransition(ue.Completed),n===408){this.onRequestTimeout();return}this.user.receiveResponse&&this.user.receiveResponse(t);return}break;case ue.Proceeding:if(n>=100&&n<=199&&this.user.receiveResponse)return this.user.receiveResponse(t);if(n>=200&&n<=699){if(this.stateTransition(ue.Completed),n===408){this.onRequestTimeout();return}this.user.receiveResponse&&this.user.receiveResponse(t);return}break;case ue.Completed:return;case ue.Terminated:return;default:throw new Error(`Invalid state ${this.state}`)}const r=`Non-INVITE client transaction received unexpected ${n} response while in state ${this.state}.`;this.logger.warn(r)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(ue.Terminated,!0)}typeToString(){return"non-INVITE client transaction"}stateTransition(t,n=!1){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case ue.Trying:r();break;case ue.Proceeding:this.state!==ue.Trying&&r();break;case ue.Completed:this.state!==ue.Trying&&this.state!==ue.Proceeding&&r();break;case ue.Terminated:this.state!==ue.Trying&&this.state!==ue.Proceeding&&this.state!==ue.Completed&&(n||r());break;default:r()}t===ue.Completed&&(this.F&&(clearTimeout(this.F),this.F=void 0),this.K=setTimeout(()=>this.timerK(),wn.TIMER_K)),t===ue.Terminated&&this.dispose(),this.setState(t)}timerF(){this.logger.debug(`Timer F expired for non-INVITE client transaction ${this.id}.`),(this.state===ue.Trying||this.state===ue.Proceeding)&&(this.onRequestTimeout(),this.stateTransition(ue.Terminated))}timerK(){this.state===ue.Completed&&this.stateTransition(ue.Terminated)}}class eo{constructor(t,n){this.core=t,this.dialogState=n,this.core.dialogs.set(this.id,this)}static initialDialogStateForUserAgentClient(t,n){const i=n.getHeaders("record-route").reverse(),s=n.parseHeader("contact");if(!s)throw new Error("Contact undefined.");if(!(s instanceof Xn))throw new Error("Contact not instance of NameAddrHeader.");const a=s.uri,o=t.cseq,l=void 0,u=t.callId,f=t.fromTag,c=n.toTag;if(!u)throw new Error("Call id undefined.");if(!f)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!t.from)throw new Error("From undefined.");if(!t.to)throw new Error("To undefined.");const d=t.from.uri,h=t.to.uri;if(!n.statusCode)throw new Error("Incoming response status code undefined.");const g=n.statusCode<200;return{id:u+f+c,early:g,callId:u,localTag:f,remoteTag:c,localSequenceNumber:o,remoteSequenceNumber:l,localURI:d,remoteURI:h,remoteTarget:a,routeSet:i,secure:!1}}static initialDialogStateForUserAgentServer(t,n,r=!1){const s=t.getHeaders("record-route"),a=t.parseHeader("contact");if(!a)throw new Error("Contact undefined.");if(!(a instanceof Xn))throw new Error("Contact not instance of NameAddrHeader.");const o=a.uri,l=t.cseq,u=void 0,f=t.callId,c=n,d=t.fromTag,h=t.from.uri,g=t.to.uri;return{id:f+c+d,early:r,callId:f,localTag:c,remoteTag:d,localSequenceNumber:u,remoteSequenceNumber:l,localURI:g,remoteURI:h,remoteTarget:o,routeSet:s,secure:!1}}dispose(){this.core.dialogs.delete(this.id)}get id(){return this.dialogState.id}get early(){return this.dialogState.early}get callId(){return this.dialogState.callId}get localTag(){return this.dialogState.localTag}get remoteTag(){return this.dialogState.remoteTag}get localSequenceNumber(){return this.dialogState.localSequenceNumber}get remoteSequenceNumber(){return this.dialogState.remoteSequenceNumber}get localURI(){return this.dialogState.localURI}get remoteURI(){return this.dialogState.remoteURI}get remoteTarget(){return this.dialogState.remoteTarget}get routeSet(){return this.dialogState.routeSet}get secure(){return this.dialogState.secure}get userAgentCore(){return this.core}confirm(){this.dialogState.early=!1}receiveRequest(t){if(t.method!==Ve.ACK){if(this.remoteSequenceNumber){if(t.cseq<=this.remoteSequenceNumber)throw new Error("Out of sequence in dialog request. Did you forget to call sequenceGuard()?");this.dialogState.remoteSequenceNumber=t.cseq}this.remoteSequenceNumber||(this.dialogState.remoteSequenceNumber=t.cseq)}}recomputeRouteSet(t){this.dialogState.routeSet=t.getHeaders("record-route").reverse()}createOutgoingRequestMessage(t,n){const r=this.remoteURI,i=this.remoteTag,s=this.localURI,a=this.localTag,o=this.callId;let l;n&&n.cseq?l=n.cseq:this.dialogState.localSequenceNumber?l=this.dialogState.localSequenceNumber+=1:l=this.dialogState.localSequenceNumber=1;const u=this.remoteTarget,f=this.routeSet,c=n&&n.extraHeaders,d=n&&n.body;return this.userAgentCore.makeOutgoingRequestMessage(t,u,s,r,{callId:o,cseq:l,fromTag:a,toTag:i,routeSet:f},c,d)}incrementLocalSequenceNumber(){if(!this.dialogState.localSequenceNumber)throw new Error("Local sequence number undefined.");this.dialogState.localSequenceNumber+=1}sequenceGuard(t){return t.method===Ve.ACK?!0:this.remoteSequenceNumber&&t.cseq<=this.remoteSequenceNumber?(this.core.replyStateless(t,{statusCode:500}),!1):!0}}function m_(e){return e==="application/sdp"?"session":"render"}function to(e){const t=typeof e=="string"?e:e.body,n=typeof e=="string"?"application/sdp":e.contentType;return{contentDisposition:m_(n),contentType:n,content:t}}function p_(e){return e&&typeof e.content=="string"&&typeof e.contentType=="string"&&e.contentDisposition===void 0?!0:typeof e.contentDisposition=="string"}function Jo(e){let t,n,r;if(e instanceof za&&e.body){const i=e.parseHeader("Content-Disposition");t=i?i.type:void 0,n=e.parseHeader("Content-Type"),r=e.body}if(e instanceof vs&&e.body){const i=e.parseHeader("Content-Disposition");t=i?i.type:void 0,n=e.parseHeader("Content-Type"),r=e.body}if(e instanceof Us&&e.body)if(t=e.getHeader("Content-Disposition"),n=e.getHeader("Content-Type"),typeof e.body=="string"){if(!n)throw new Error("Header content type header does not equal body content type.");r=e.body}else{if(n&&n!==e.body.contentType)throw new Error("Header content type header does not equal body content type.");n=e.body.contentType,r=e.body.body}if(p_(e)&&(t=e.contentDisposition,n=e.contentType,r=e.content),!!r){if(n&&!t&&(t=m_(n)),!t)throw new Error("Content disposition undefined.");if(!n)throw new Error("Content type undefined.");return{contentDisposition:t,contentType:n,content:r}}}var _r;(function(e){e.Initial="Initial",e.Early="Early",e.AckWait="AckWait",e.Confirmed="Confirmed",e.Terminated="Terminated"})(_r=_r||(_r={}));var Me;(function(e){e.Initial="Initial",e.HaveLocalOffer="HaveLocalOffer",e.HaveRemoteOffer="HaveRemoteOffer",e.Stable="Stable",e.Closed="Closed"})(Me=Me||(Me={}));class ss extends sd{constructor(t,n,r){super(t,n,r,ue.Calling,"sip.transaction.ict"),this.ackRetransmissionCache=new Map,this.B=setTimeout(()=>this.timerB(),wn.TIMER_B),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.B&&(clearTimeout(this.B),this.B=void 0),this.D&&(clearTimeout(this.D),this.D=void 0),this.M&&(clearTimeout(this.M),this.M=void 0),super.dispose()}get kind(){return"ict"}ackResponse(t){const n=t.toTag;if(!n)throw new Error("To tag undefined.");const r="z9hG4bK"+Math.floor(Math.random()*1e7);t.setViaHeader(r,this.transport.protocol),this.ackRetransmissionCache.set(n,t),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send ACK to 2xx response.")})}receiveResponse(t){const n=t.statusCode;if(!n||n<100||n>699)throw new Error(`Invalid status code ${n}`);switch(this.state){case ue.Calling:if(n>=100&&n<=199){this.stateTransition(ue.Proceeding),this.user.receiveResponse&&this.user.receiveResponse(t);return}if(n>=200&&n<=299){this.ackRetransmissionCache.set(t.toTag,void 0),this.stateTransition(ue.Accepted),this.user.receiveResponse&&this.user.receiveResponse(t);return}if(n>=300&&n<=699){this.stateTransition(ue.Completed),this.ack(t),this.user.receiveResponse&&this.user.receiveResponse(t);return}break;case ue.Proceeding:if(n>=100&&n<=199){this.user.receiveResponse&&this.user.receiveResponse(t);return}if(n>=200&&n<=299){this.ackRetransmissionCache.set(t.toTag,void 0),this.stateTransition(ue.Accepted),this.user.receiveResponse&&this.user.receiveResponse(t);return}if(n>=300&&n<=699){this.stateTransition(ue.Completed),this.ack(t),this.user.receiveResponse&&this.user.receiveResponse(t);return}break;case ue.Accepted:if(n>=200&&n<=299){if(!this.ackRetransmissionCache.has(t.toTag)){this.ackRetransmissionCache.set(t.toTag,void 0),this.user.receiveResponse&&this.user.receiveResponse(t);return}const i=this.ackRetransmissionCache.get(t.toTag);if(i){this.send(i.toString()).catch(s=>{this.logTransportError(s,"Failed to send retransmission of ACK to 2xx response.")});return}return}break;case ue.Completed:if(n>=300&&n<=699){this.ack(t);return}break;case ue.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const r=`Received unexpected ${n} response while in state ${this.state}.`;this.logger.warn(r)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(ue.Terminated,!0)}typeToString(){return"INVITE client transaction"}ack(t){const n=this.request.ruri,r=this.request.callId,i=this.request.cseq,s=this.request.getHeader("from"),a=t.getHeader("to"),o=this.request.getHeader("via"),l=this.request.getHeader("route");if(!s)throw new Error("From undefined.");if(!a)throw new Error("To undefined.");if(!o)throw new Error("Via undefined.");let u=`ACK ${n} SIP/2.0\r
`;l&&(u+=`Route: ${l}\r
`),u+=`Via: ${o}\r
`,u+=`To: ${a}\r
`,u+=`From: ${s}\r
`,u+=`Call-ID: ${r}\r
`,u+=`CSeq: ${i} ACK\r
`,u+=`Max-Forwards: 70\r
`,u+=`Content-Length: 0\r
\r
`,this.send(u).catch(f=>{this.logTransportError(f,"Failed to send ACK to non-2xx response.")})}stateTransition(t,n=!1){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case ue.Calling:r();break;case ue.Proceeding:this.state!==ue.Calling&&r();break;case ue.Accepted:case ue.Completed:this.state!==ue.Calling&&this.state!==ue.Proceeding&&r();break;case ue.Terminated:this.state!==ue.Calling&&this.state!==ue.Accepted&&this.state!==ue.Completed&&(n||r());break;default:r()}this.B&&(clearTimeout(this.B),this.B=void 0),ue.Proceeding,t===ue.Completed&&(this.D=setTimeout(()=>this.timerD(),wn.TIMER_D)),t===ue.Accepted&&(this.M=setTimeout(()=>this.timerM(),wn.TIMER_M)),t===ue.Terminated&&this.dispose(),this.setState(t)}timerA(){}timerB(){this.logger.debug(`Timer B expired for INVITE client transaction ${this.id}.`),this.state===ue.Calling&&(this.onRequestTimeout(),this.stateTransition(ue.Terminated))}timerD(){this.logger.debug(`Timer D expired for INVITE client transaction ${this.id}.`),this.state===ue.Completed&&this.stateTransition(ue.Terminated)}timerM(){this.logger.debug(`Timer M expired for INVITE client transaction ${this.id}.`),this.state===ue.Accepted&&this.stateTransition(ue.Terminated)}}class $n{constructor(t,n,r,i){this.transactionConstructor=t,this.core=n,this.message=r,this.delegate=i,this.challenged=!1,this.stale=!1,this.logger=this.loggerFactory.getLogger("sip.user-agent-client"),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}cancel(t,n={}){if(!this.transaction)throw new Error("Transaction undefined.");if(!this.message.to)throw new Error("To undefined.");if(!this.message.from)throw new Error("From undefined.");const r=this.core.makeOutgoingRequestMessage(Ve.CANCEL,this.message.ruri,this.message.from.uri,this.message.to.uri,{toTag:this.message.toTag,fromTag:this.message.fromTag,callId:this.message.callId,cseq:this.message.cseq},n.extraHeaders);return r.branch=this.message.branch,this.message.headers.Route&&(r.headers.Route=this.message.headers.Route),t&&r.setHeader("Reason",t),this.transaction.state===ue.Proceeding?new $n(cr,this.core,r):this.transaction.addStateChangeListener(()=>{this.transaction&&this.transaction.state===ue.Proceeding&&new $n(cr,this.core,r)},{once:!0}),r}authenticationGuard(t,n){const r=t.statusCode;if(!r)throw new Error("Response status code undefined.");if(r!==401&&r!==407)return!0;let i,s;if(r===401?(i=t.parseHeader("www-authenticate"),s="authorization"):(i=t.parseHeader("proxy-authenticate"),s="proxy-authorization"),!i)return this.logger.warn(r+" with wrong or missing challenge, cannot authenticate"),!0;if(this.challenged&&(this.stale||i.stale!==!0))return this.logger.warn(r+" apparently in authentication loop, cannot authenticate"),!0;if(!this.credentials&&(this.credentials=this.core.configuration.authenticationFactory(),!this.credentials))return this.logger.warn("Unable to obtain credentials, cannot authenticate"),!0;if(!this.credentials.authenticate(this.message,i))return!0;this.challenged=!0,i.stale&&(this.stale=!0);let a=this.message.cseq+=1;return n&&n.localSequenceNumber&&(n.incrementLocalSequenceNumber(),a=this.message.cseq=n.localSequenceNumber),this.message.setHeader("cseq",a+" "+this.message.method),this.message.setHeader(s,this.credentials.toString()),this.init(),!1}onRequestTimeout(){this.logger.warn("User agent client request timed out. Generating internal 408 Request Timeout.");const t=new vs;t.statusCode=408,t.reasonPhrase="Request Timeout",this.receiveResponse(t)}onTransportError(t){this.logger.error(t.message),this.logger.error("User agent client request transport error. Generating internal 503 Service Unavailable.");const n=new vs;n.statusCode=503,n.reasonPhrase="Service Unavailable",this.receiveResponse(n)}receiveResponse(t){if(!this.authenticationGuard(t))return;const n=t.statusCode?t.statusCode.toString():"";if(!n)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(n):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t});break;case/^1[0-9]{2}$/.test(n):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t});break;case/^2[0-9]{2}$/.test(n):this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:t});break;case/^3[0-9]{2}$/.test(n):this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t});break;case/^[4-6][0-9]{2}$/.test(n):this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t});break;default:throw new Error(`Invalid status code ${n}`)}}init(){const t={loggerFactory:this.loggerFactory,onRequestTimeout:()=>this.onRequestTimeout(),onStateChange:i=>{i===ue.Terminated&&(this.core.userAgentClients.delete(r),n===this._transaction&&this.dispose())},onTransportError:i=>this.onTransportError(i),receiveResponse:i=>this.receiveResponse(i)},n=new this.transactionConstructor(this.message,this.core.transport,t);this._transaction=n;const r=n.id+n.request.method;this.core.userAgentClients.set(r,this)}}class Fk extends $n{constructor(t,n,r){const i=t.createOutgoingRequestMessage(Ve.BYE,r);super(cr,t.userAgentCore,i,n),t.dispose()}}class or extends v_{constructor(t,n,r){super(t,n,r,ue.Trying,"sip.transaction.nist")}dispose(){this.J&&(clearTimeout(this.J),this.J=void 0),super.dispose()}get kind(){return"nist"}receiveRequest(t){switch(this.state){case ue.Trying:break;case ue.Proceeding:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(n=>{this.logTransportError(n,"Failed to send retransmission of provisional response.")});break;case ue.Completed:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(n=>{this.logTransportError(n,"Failed to send retransmission of final response.")});break;case ue.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}}receiveResponse(t,n){if(t<100||t>699)throw new Error(`Invalid status code ${t}`);if(t>100&&t<=199)throw new Error("Provisional response other than 100 not allowed.");switch(this.state){case ue.Trying:if(this.lastResponse=n,t>=100&&t<200){this.stateTransition(ue.Proceeding),this.send(n).catch(i=>{this.logTransportError(i,"Failed to send provisional response.")});return}if(t>=200&&t<=699){this.stateTransition(ue.Completed),this.send(n).catch(i=>{this.logTransportError(i,"Failed to send final response.")});return}break;case ue.Proceeding:if(this.lastResponse=n,t>=200&&t<=699){this.stateTransition(ue.Completed),this.send(n).catch(i=>{this.logTransportError(i,"Failed to send final response.")});return}break;case ue.Completed:return;case ue.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const r=`Non-INVITE server transaction received unexpected ${t} response from TU while in state ${this.state}.`;throw this.logger.error(r),new Error(r)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(ue.Terminated,!0)}typeToString(){return"non-INVITE server transaction"}stateTransition(t,n=!1){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case ue.Trying:r();break;case ue.Proceeding:this.state!==ue.Trying&&r();break;case ue.Completed:this.state!==ue.Trying&&this.state!==ue.Proceeding&&r();break;case ue.Terminated:this.state!==ue.Proceeding&&this.state!==ue.Completed&&(n||r());break;default:r()}t===ue.Completed&&(this.J=setTimeout(()=>this.timerJ(),wn.TIMER_J)),t===ue.Terminated&&this.dispose(),this.setState(t)}timerJ(){this.logger.debug(`Timer J expired for NON-INVITE server transaction ${this.id}.`),this.state===ue.Completed&&this.stateTransition(ue.Terminated)}}class is extends ia{constructor(t){super(t||"Transaction state error.")}}class di{constructor(t,n,r,i){this.transactionConstructor=t,this.core=n,this.message=r,this.delegate=i,this.logger=this.loggerFactory.getLogger("sip.user-agent-server"),this.toTag=r.toTag?r.toTag:id(),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}accept(t={statusCode:200}){if(!this.acceptable)throw new is(`${this.message.method} not acceptable in state ${this.transaction.state}.`);const n=t.statusCode;if(n<200||n>299)throw new TypeError(`Invalid statusCode: ${n}`);return this.reply(t)}progress(t={statusCode:180}){if(!this.progressable)throw new is(`${this.message.method} not progressable in state ${this.transaction.state}.`);const n=t.statusCode;if(n<101||n>199)throw new TypeError(`Invalid statusCode: ${n}`);return this.reply(t)}redirect(t,n={statusCode:302}){if(!this.redirectable)throw new is(`${this.message.method} not redirectable in state ${this.transaction.state}.`);const r=n.statusCode;if(r<300||r>399)throw new TypeError(`Invalid statusCode: ${r}`);const i=new Array;return t.forEach(a=>i.push(`Contact: ${a.toString()}`)),n.extraHeaders=(n.extraHeaders||[]).concat(i),this.reply(n)}reject(t={statusCode:480}){if(!this.rejectable)throw new is(`${this.message.method} not rejectable in state ${this.transaction.state}.`);const n=t.statusCode;if(n<400||n>699)throw new TypeError(`Invalid statusCode: ${n}`);return this.reply(t)}trying(t){if(!this.tryingable)throw new is(`${this.message.method} not tryingable in state ${this.transaction.state}.`);return this.reply({statusCode:100})}receiveCancel(t){this.delegate&&this.delegate.onCancel&&this.delegate.onCancel(t)}get acceptable(){if(this.transaction instanceof Zn)return this.transaction.state===ue.Proceeding||this.transaction.state===ue.Accepted;if(this.transaction instanceof or)return this.transaction.state===ue.Trying||this.transaction.state===ue.Proceeding;throw new Error("Unknown transaction type.")}get progressable(){if(this.transaction instanceof Zn)return this.transaction.state===ue.Proceeding;if(this.transaction instanceof or)return!1;throw new Error("Unknown transaction type.")}get redirectable(){if(this.transaction instanceof Zn)return this.transaction.state===ue.Proceeding;if(this.transaction instanceof or)return this.transaction.state===ue.Trying||this.transaction.state===ue.Proceeding;throw new Error("Unknown transaction type.")}get rejectable(){if(this.transaction instanceof Zn)return this.transaction.state===ue.Proceeding;if(this.transaction instanceof or)return this.transaction.state===ue.Trying||this.transaction.state===ue.Proceeding;throw new Error("Unknown transaction type.")}get tryingable(){if(this.transaction instanceof Zn)return this.transaction.state===ue.Proceeding;if(this.transaction instanceof or)return this.transaction.state===ue.Trying;throw new Error("Unknown transaction type.")}reply(t){!t.toTag&&t.statusCode!==100&&(t.toTag=this.toTag),t.userAgent=t.userAgent||this.core.configuration.userAgentHeaderFieldValue,t.supported=t.supported||this.core.configuration.supportedOptionTagsResponse;const n=h_(this.message,t);return this.transaction.receiveResponse(t.statusCode,n.message),n}init(){const t={loggerFactory:this.loggerFactory,onStateChange:i=>{i===ue.Terminated&&(this.core.userAgentServers.delete(r),this.dispose())},onTransportError:i=>{this.logger.error(i.message),this.delegate&&this.delegate.onTransportError?this.delegate.onTransportError(i):this.logger.error("User agent server response transport error.")}},n=new this.transactionConstructor(this.message,this.core.transport,t);this._transaction=n;const r=n.id;this.core.userAgentServers.set(n.id,this)}}class Ok extends di{constructor(t,n,r){super(or,t.userAgentCore,n,r)}}class Nk extends $n{constructor(t,n,r){const i=t.createOutgoingRequestMessage(Ve.INFO,r);super(cr,t.userAgentCore,i,n)}}class $k extends di{constructor(t,n,r){super(or,t.userAgentCore,n,r)}}class y_ extends $n{constructor(t,n,r){super(cr,t,n,r)}}class b_ extends di{constructor(t,n,r){super(or,t,n,r)}}class Mk extends $n{constructor(t,n,r){const i=t.createOutgoingRequestMessage(Ve.NOTIFY,r);super(cr,t.userAgentCore,i,n)}}function Vk(e){return e.userAgentCore!==void 0}class sc extends di{constructor(t,n,r){const i=Vk(t)?t.userAgentCore:t;super(or,i,n,r)}}class Bk extends $n{constructor(t,n,r){const i=t.createOutgoingRequestMessage(Ve.PRACK,r);super(cr,t.userAgentCore,i,n),t.signalingStateTransition(i)}}class Lk extends di{constructor(t,n,r){super(or,t.userAgentCore,n,r),t.signalingStateTransition(n),this.dialog=t}accept(t={statusCode:200}){return t.body&&this.dialog.signalingStateTransition(t.body),super.accept(t)}}class Hk extends $n{constructor(t,n,r){const i=t.createOutgoingRequestMessage(Ve.INVITE,r);super(ss,t.userAgentCore,i,n),this.delegate=n,t.signalingStateTransition(i),t.reinviteUserAgentClient=this,this.dialog=t}receiveResponse(t){if(!this.authenticationGuard(t,this.dialog))return;const n=t.statusCode?t.statusCode.toString():"";if(!n)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(n):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t});break;case/^1[0-9]{2}$/.test(n):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t,session:this.dialog,prack:r=>{throw new Error("Unimplemented.")}});break;case/^2[0-9]{2}$/.test(n):this.dialog.signalingStateTransition(t),this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:t,session:this.dialog,ack:r=>this.dialog.ack(r)});break;case/^3[0-9]{2}$/.test(n):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t});break;case/^[4-6][0-9]{2}$/.test(n):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t});break;default:throw new Error(`Invalid status code ${n}`)}}}class jk extends di{constructor(t,n,r){super(Zn,t.userAgentCore,n,r),t.reinviteUserAgentServer=this,this.dialog=t}accept(t={statusCode:200}){t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(this.dialog.routeSet.map(s=>`Record-Route: ${s}`));const n=super.accept(t),r=this.dialog,i=Object.assign(Object.assign({},n),{session:r});return t.body&&this.dialog.signalingStateTransition(t.body),this.dialog.reConfirm(),i}progress(t={statusCode:180}){const n=super.progress(t),r=this.dialog,i=Object.assign(Object.assign({},n),{session:r});return t.body&&this.dialog.signalingStateTransition(t.body),i}redirect(t,n={statusCode:302}){throw this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,new Error("Unimplemented.")}reject(t={statusCode:488}){return this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,super.reject(t)}}class qk extends $n{constructor(t,n,r){const i=t.createOutgoingRequestMessage(Ve.REFER,r);super(cr,t.userAgentCore,i,n)}}function Uk(e){return e.userAgentCore!==void 0}class S_ extends di{constructor(t,n,r){const i=Uk(t)?t.userAgentCore:t;super(or,i,n,r)}}class ac extends eo{constructor(t,n,r,i){super(n,r),this.initialTransaction=t,this._signalingState=Me.Initial,this.ackWait=!1,this.ackProcessing=!1,this.delegate=i,t instanceof Zn&&(this.ackWait=!0),this.early||this.start2xxRetransmissionTimer(),this.signalingStateTransition(t.request),this.logger=n.loggerFactory.getLogger("sip.invite-dialog"),this.logger.log(`INVITE dialog ${this.id} constructed`)}dispose(){super.dispose(),this._signalingState=Me.Closed,this._offer=void 0,this._answer=void 0,this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.logger.log(`INVITE dialog ${this.id} destroyed`)}get sessionState(){return this.early?_r.Early:this.ackWait?_r.AckWait:this._signalingState===Me.Closed?_r.Terminated:_r.Confirmed}get signalingState(){return this._signalingState}get offer(){return this._offer}get answer(){return this._answer}confirm(){this.early&&this.start2xxRetransmissionTimer(),super.confirm()}reConfirm(){this.reinviteUserAgentServer&&this.startReInvite2xxRetransmissionTimer()}ack(t={}){this.logger.log(`INVITE dialog ${this.id} sending ACK request`);let n;if(this.reinviteUserAgentClient){if(!(this.reinviteUserAgentClient.transaction instanceof ss))throw new Error("Transaction not instance of InviteClientTransaction.");n=this.reinviteUserAgentClient.transaction,this.reinviteUserAgentClient=void 0}else{if(!(this.initialTransaction instanceof ss))throw new Error("Initial transaction not instance of InviteClientTransaction.");n=this.initialTransaction}const r=this.createOutgoingRequestMessage(Ve.ACK,{cseq:n.request.cseq,extraHeaders:t.extraHeaders,body:t.body});return n.ackResponse(r),this.signalingStateTransition(r),{message:r}}bye(t,n){if(this.logger.log(`INVITE dialog ${this.id} sending BYE request`),this.initialTransaction instanceof Zn){if(this.early)throw new Error("UAS MUST NOT send a BYE on early dialogs.");if(this.ackWait&&this.initialTransaction.state!==ue.Terminated)throw new Error("UAS MUST NOT send a BYE on a confirmed dialog until it has received an ACK for its 2xx response or until the server transaction times out.")}return new Fk(this,t,n)}info(t,n){if(this.logger.log(`INVITE dialog ${this.id} sending INFO request`),this.early)throw new Error("Dialog not confirmed.");return new Nk(this,t,n)}invite(t,n){if(this.logger.log(`INVITE dialog ${this.id} sending INVITE request`),this.early)throw new Error("Dialog not confirmed.");if(this.reinviteUserAgentClient)throw new Error("There is an ongoing re-INVITE client transaction.");if(this.reinviteUserAgentServer)throw new Error("There is an ongoing re-INVITE server transaction.");return new Hk(this,t,n)}message(t,n){if(this.logger.log(`INVITE dialog ${this.id} sending MESSAGE request`),this.early)throw new Error("Dialog not confirmed.");const r=this.createOutgoingRequestMessage(Ve.MESSAGE,n);return new y_(this.core,r,t)}notify(t,n){if(this.logger.log(`INVITE dialog ${this.id} sending NOTIFY request`),this.early)throw new Error("Dialog not confirmed.");return new Mk(this,t,n)}prack(t,n){return this.logger.log(`INVITE dialog ${this.id} sending PRACK request`),new Bk(this,t,n)}refer(t,n){if(this.logger.log(`INVITE dialog ${this.id} sending REFER request`),this.early)throw new Error("Dialog not confirmed.");return new qk(this,t,n)}receiveRequest(t){if(this.logger.log(`INVITE dialog ${this.id} received ${t.method} request`),t.method===Ve.ACK){if(this.ackWait){if(this.initialTransaction instanceof ss){this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);return}if(this.initialTransaction.request.cseq!==t.cseq){this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);return}this.ackWait=!1}else{if(!this.reinviteUserAgentServer){this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);return}if(this.reinviteUserAgentServer.transaction.request.cseq!==t.cseq){this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);return}this.reinviteUserAgentServer=void 0}if(this.signalingStateTransition(t),this.delegate&&this.delegate.onAck){const n=this.delegate.onAck({message:t});n instanceof Promise&&(this.ackProcessing=!0,n.then(()=>this.ackProcessing=!1).catch(()=>this.ackProcessing=!1))}return}if(!this.sequenceGuard(t)){this.logger.log(`INVITE dialog ${this.id} rejected out of order ${t.method} request.`);return}if(super.receiveRequest(t),t.method===Ve.INVITE){const n=()=>{const s=this.ackWait?"waiting for initial ACK":"processing initial ACK";this.logger.warn(`INVITE dialog ${this.id} received re-INVITE while ${s}`);let a="RFC 5407 suggests the following to avoid this race condition... ";a+=" Note: Implementation issues are outside the scope of this document,",a+=" but the following tip is provided for avoiding race conditions of",a+=" this type.  The caller can delay sending re-INVITE F6 for some period",a+=" of time (2 seconds, perhaps), after which the caller can reasonably",a+=" assume that its ACK has been received.  Implementors can decouple the",a+=" actions of the user (e.g., pressing the hold button) from the actions",a+=" of the protocol (the sending of re-INVITE F6), so that the UA can",a+=" behave like this.  In this case, it is the implementor's choice as to",a+=" how long to wait.  In most cases, such an implementation may be",a+=" useful to prevent the type of race condition shown in this section.",a+=" This document expresses no preference about whether or not they",a+=" should wait for an ACK to be delivered.  After considering the impact",a+=" on user experience, implementors should decide whether or not to wait",a+=" for a while, because the user experience depends on the",a+=" implementation and has no direct bearing on protocol behavior.",this.logger.warn(a)},i=[`Retry-After: ${Math.floor(Math.random()*10)+1}`];if(this.ackProcessing){this.core.replyStateless(t,{statusCode:500,extraHeaders:i}),n();return}if(this.ackWait&&this.signalingState!==Me.Stable){this.core.replyStateless(t,{statusCode:500,extraHeaders:i}),n();return}if(this.reinviteUserAgentServer){this.core.replyStateless(t,{statusCode:500,extraHeaders:i});return}if(this.reinviteUserAgentClient){this.core.replyStateless(t,{statusCode:491});return}}if(t.method===Ve.INVITE){const n=t.parseHeader("contact");if(!n)throw new Error("Contact undefined.");if(!(n instanceof Xn))throw new Error("Contact not instance of NameAddrHeader.");this.dialogState.remoteTarget=n.uri}switch(t.method){case Ve.BYE:{const n=new Ok(this,t);this.delegate&&this.delegate.onBye?this.delegate.onBye(n):n.accept(),this.dispose()}break;case Ve.INFO:{const n=new $k(this,t);this.delegate&&this.delegate.onInfo?this.delegate.onInfo(n):n.reject({statusCode:469,extraHeaders:["Recv-Info:"]})}break;case Ve.INVITE:{const n=new jk(this,t);this.signalingStateTransition(t),this.delegate&&this.delegate.onInvite?this.delegate.onInvite(n):n.reject({statusCode:488})}break;case Ve.MESSAGE:{const n=new b_(this.core,t);this.delegate&&this.delegate.onMessage?this.delegate.onMessage(n):n.accept()}break;case Ve.NOTIFY:{const n=new sc(this,t);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(n):n.accept()}break;case Ve.PRACK:{const n=new Lk(this,t);this.delegate&&this.delegate.onPrack?this.delegate.onPrack(n):n.accept()}break;case Ve.REFER:{const n=new S_(this,t);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(n):n.reject()}break;default:this.logger.log(`INVITE dialog ${this.id} received unimplemented ${t.method} request`),this.core.replyStateless(t,{statusCode:501});break}}reliableSequenceGuard(t){const n=t.statusCode;if(!n)throw new Error("Status code undefined");if(n>100&&n<200){const r=t.getHeader("require"),i=t.getHeader("rseq"),s=r&&r.includes("100rel")&&i?Number(i):void 0;if(s){if(this.rseq&&this.rseq+1!==s)return!1;this.rseq=this.rseq?this.rseq+1:s}}return!0}signalingStateRollback(){(this._signalingState===Me.HaveLocalOffer||this.signalingState===Me.HaveRemoteOffer)&&this._rollbackOffer&&this._rollbackAnswer&&(this._signalingState=Me.Stable,this._offer=this._rollbackOffer,this._answer=this._rollbackAnswer)}signalingStateTransition(t){const n=Jo(t);if(!(!n||n.contentDisposition!=="session")){if(this._signalingState===Me.Stable&&(this._rollbackOffer=this._offer,this._rollbackAnswer=this._answer),t instanceof za)switch(this._signalingState){case Me.Initial:case Me.Stable:this._signalingState=Me.HaveRemoteOffer,this._offer=n,this._answer=void 0;break;case Me.HaveLocalOffer:this._signalingState=Me.Stable,this._answer=n;break;case Me.HaveRemoteOffer:break;case Me.Closed:break;default:throw new Error("Unexpected signaling state.")}if(t instanceof vs)switch(this._signalingState){case Me.Initial:case Me.Stable:this._signalingState=Me.HaveRemoteOffer,this._offer=n,this._answer=void 0;break;case Me.HaveLocalOffer:this._signalingState=Me.Stable,this._answer=n;break;case Me.HaveRemoteOffer:break;case Me.Closed:break;default:throw new Error("Unexpected signaling state.")}if(t instanceof Us)switch(this._signalingState){case Me.Initial:case Me.Stable:this._signalingState=Me.HaveLocalOffer,this._offer=n,this._answer=void 0;break;case Me.HaveLocalOffer:break;case Me.HaveRemoteOffer:this._signalingState=Me.Stable,this._answer=n;break;case Me.Closed:break;default:throw new Error("Unexpected signaling state.")}if(p_(t))switch(this._signalingState){case Me.Initial:case Me.Stable:this._signalingState=Me.HaveLocalOffer,this._offer=n,this._answer=void 0;break;case Me.HaveLocalOffer:break;case Me.HaveRemoteOffer:this._signalingState=Me.Stable,this._answer=n;break;case Me.Closed:break;default:throw new Error("Unexpected signaling state.")}}}start2xxRetransmissionTimer(){if(this.initialTransaction instanceof Zn){const t=this.initialTransaction;let n=wn.T1;const r=()=>{if(!this.ackWait){this.invite2xxTimer=void 0;return}this.logger.log("No ACK for 2xx response received, attempting retransmission"),t.retransmitAcceptedResponse(),n=Math.min(n*2,wn.T2),this.invite2xxTimer=setTimeout(r,n)};this.invite2xxTimer=setTimeout(r,n);const i=()=>{t.state===ue.Terminated&&(t.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.ackWait&&(this.delegate&&this.delegate.onAckTimeout?this.delegate.onAckTimeout():this.bye()))};t.addStateChangeListener(i)}}startReInvite2xxRetransmissionTimer(){if(this.reinviteUserAgentServer&&this.reinviteUserAgentServer.transaction instanceof Zn){const t=this.reinviteUserAgentServer.transaction;let n=wn.T1;const r=()=>{if(!this.reinviteUserAgentServer){this.invite2xxTimer=void 0;return}this.logger.log("No ACK for 2xx response received, attempting retransmission"),t.retransmitAcceptedResponse(),n=Math.min(n*2,wn.T2),this.invite2xxTimer=setTimeout(r,n)};this.invite2xxTimer=setTimeout(r,n);const i=()=>{t.state===ue.Terminated&&(t.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.reinviteUserAgentServer)};t.addStateChangeListener(i)}}}class zk extends $n{constructor(t,n,r){super(ss,t,n,r),this.confirmedDialogAcks=new Map,this.confirmedDialogs=new Map,this.earlyDialogs=new Map,this.delegate=r}dispose(){this.earlyDialogs.forEach(t=>t.dispose()),this.earlyDialogs.clear(),super.dispose()}onTransportError(t){if(this.transaction.state===ue.Calling)return super.onTransportError(t);this.logger.error(t.message),this.logger.error("User agent client request transport error while sending ACK.")}receiveResponse(t){if(!this.authenticationGuard(t))return;const n=t.statusCode?t.statusCode.toString():"";if(!n)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(n):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t});return;case/^1[0-9]{2}$/.test(n):{if(!t.toTag){this.logger.warn("Non-100 1xx INVITE response received without a to tag, dropping.");return}if(!t.parseHeader("contact")){this.logger.error("Non-100 1xx INVITE response received without a Contact header field, dropping.");return}const i=eo.initialDialogStateForUserAgentClient(this.message,t);let s=this.earlyDialogs.get(i.id);if(!s){const o=this.transaction;if(!(o instanceof ss))throw new Error("Transaction not instance of InviteClientTransaction.");s=new ac(o,this.core,i),this.earlyDialogs.set(s.id,s)}if(!s.reliableSequenceGuard(t)){this.logger.warn("1xx INVITE reliable response received out of order or is a retransmission, dropping.");return}(s.signalingState===Me.Initial||s.signalingState===Me.HaveLocalOffer)&&s.signalingStateTransition(t);const a=s;this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t,session:a,prack:o=>a.prack(void 0,o)})}return;case/^2[0-9]{2}$/.test(n):{if(!t.toTag){this.logger.error("2xx INVITE response received without a to tag, dropping.");return}if(!t.parseHeader("contact")){this.logger.error("2xx INVITE response received without a Contact header field, dropping.");return}const i=eo.initialDialogStateForUserAgentClient(this.message,t);let s=this.confirmedDialogs.get(i.id);if(s){const o=this.confirmedDialogAcks.get(i.id);if(o){const l=this.transaction;if(!(l instanceof ss))throw new Error("Client transaction not instance of InviteClientTransaction.");l.ackResponse(o.message)}return}if(s=this.earlyDialogs.get(i.id),s)s.confirm(),s.recomputeRouteSet(t),this.earlyDialogs.delete(s.id),this.confirmedDialogs.set(s.id,s);else{const o=this.transaction;if(!(o instanceof ss))throw new Error("Transaction not instance of InviteClientTransaction.");s=new ac(o,this.core,i),this.confirmedDialogs.set(s.id,s)}(s.signalingState===Me.Initial||s.signalingState===Me.HaveLocalOffer)&&s.signalingStateTransition(t);const a=s;if(this.delegate&&this.delegate.onAccept)this.delegate.onAccept({message:t,session:a,ack:o=>{const l=a.ack(o);return this.confirmedDialogAcks.set(a.id,l),l}});else{const o=a.ack();this.confirmedDialogAcks.set(a.id,o)}}return;case/^3[0-9]{2}$/.test(n):this.earlyDialogs.forEach(r=>r.dispose()),this.earlyDialogs.clear(),this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t});return;case/^[4-6][0-9]{2}$/.test(n):this.earlyDialogs.forEach(r=>r.dispose()),this.earlyDialogs.clear(),this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t});return;default:throw new Error(`Invalid status code ${n}`)}}}const Ti=[Ve.ACK,Ve.BYE,Ve.CANCEL,Ve.INFO,Ve.INVITE,Ve.MESSAGE,Ve.NOTIFY,Ve.OPTIONS,Ve.PRACK,Ve.REFER,Ve.REGISTER,Ve.SUBSCRIBE];class nh extends di{constructor(t,n,r){super(Zn,t,n,r),this.core=t}dispose(){this.earlyDialog&&this.earlyDialog.dispose(),super.dispose()}accept(t={statusCode:200}){if(!this.acceptable)throw new is(`${this.message.method} not acceptable in state ${this.transaction.state}.`);if(!this.confirmedDialog)if(this.earlyDialog)this.earlyDialog.confirm(),this.confirmedDialog=this.earlyDialog,this.earlyDialog=void 0;else{const l=this.transaction;if(!(l instanceof Zn))throw new Error("Transaction not instance of InviteClientTransaction.");const u=eo.initialDialogStateForUserAgentServer(this.message,this.toTag);this.confirmedDialog=new ac(l,this.core,u)}const n=this.message.getHeaders("record-route").map(l=>`Record-Route: ${l}`),r=`Contact: ${this.core.configuration.contact.toString()}`,i="Allow: "+Ti.toString();if(!t.body){if(this.confirmedDialog.signalingState===Me.Stable)t.body=this.confirmedDialog.answer;else if(this.confirmedDialog.signalingState===Me.Initial||this.confirmedDialog.signalingState===Me.HaveRemoteOffer)throw new Error("Response must have a body.")}t.statusCode=t.statusCode||200,t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(n),t.extraHeaders.push(i),t.extraHeaders.push(r);const s=super.accept(t),a=this.confirmedDialog,o=Object.assign(Object.assign({},s),{session:a});return t.body&&this.confirmedDialog.signalingState!==Me.Stable&&this.confirmedDialog.signalingStateTransition(t.body),o}progress(t={statusCode:180}){if(!this.progressable)throw new is(`${this.message.method} not progressable in state ${this.transaction.state}.`);if(!this.earlyDialog){const o=this.transaction;if(!(o instanceof Zn))throw new Error("Transaction not instance of InviteClientTransaction.");const l=eo.initialDialogStateForUserAgentServer(this.message,this.toTag,!0);this.earlyDialog=new ac(o,this.core,l)}const n=this.message.getHeaders("record-route").map(o=>`Record-Route: ${o}`),r=`Contact: ${this.core.configuration.contact}`;t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(n),t.extraHeaders.push(r);const i=super.progress(t),s=this.earlyDialog,a=Object.assign(Object.assign({},i),{session:s});return t.body&&this.earlyDialog.signalingState!==Me.Stable&&this.earlyDialog.signalingStateTransition(t.body),a}redirect(t,n={statusCode:302}){return super.redirect(t,n)}reject(t={statusCode:486}){return super.reject(t)}}class Kk extends $n{constructor(t,n,r){super(cr,t,n,r)}}class Gk extends $n{constructor(t,n,r){super(cr,t,n,r)}}class Wk extends di{constructor(t,n,r){super(or,t,n,r),this.core=t}}var nt;(function(e){e.Initial="Initial",e.NotifyWait="NotifyWait",e.Pending="Pending",e.Active="Active",e.Terminated="Terminated"})(nt=nt||(nt={}));class Yk extends $n{constructor(t,n,r){const i=t.createOutgoingRequestMessage(Ve.SUBSCRIBE,r);super(cr,t.userAgentCore,i,n),this.dialog=t}waitNotifyStop(){}receiveResponse(t){if(t.statusCode&&t.statusCode>=200&&t.statusCode<300){const n=t.getHeader("Expires");if(!n)this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE");else{const r=Number(n);this.dialog.subscriptionExpires>r&&(this.dialog.subscriptionExpires=r)}}t.statusCode&&t.statusCode>=400&&t.statusCode<700&&[404,405,410,416,480,481,482,483,484,485,489,501,604].includes(t.statusCode)&&this.dialog.terminate(),super.receiveResponse(t)}}class ny extends eo{constructor(t,n,r,i,s,a){super(i,s),this.delegate=a,this._autoRefresh=!1,this._subscriptionEvent=t,this._subscriptionExpires=n,this._subscriptionExpiresInitial=n,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this._subscriptionState=r,this.logger=i.loggerFactory.getLogger("sip.subscribe-dialog"),this.logger.log(`SUBSCRIBE dialog ${this.id} constructed`)}static initialDialogStateForSubscription(t,n){const i=n.getHeaders("record-route"),s=n.parseHeader("contact");if(!s)throw new Error("Contact undefined.");if(!(s instanceof Xn))throw new Error("Contact not instance of NameAddrHeader.");const a=s.uri,o=t.cseq,l=void 0,u=t.callId,f=t.fromTag,c=n.fromTag;if(!u)throw new Error("Call id undefined.");if(!f)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!t.from)throw new Error("From undefined.");if(!t.to)throw new Error("To undefined.");const d=t.from.uri,h=t.to.uri,g=!1;return{id:u+f+c,early:g,callId:u,localTag:f,remoteTag:c,localSequenceNumber:o,remoteSequenceNumber:l,localURI:d,remoteURI:h,remoteTarget:a,routeSet:i,secure:!1}}dispose(){super.dispose(),this.N&&(clearTimeout(this.N),this.N=void 0),this.refreshTimerClear(),this.logger.log(`SUBSCRIBE dialog ${this.id} destroyed`)}get autoRefresh(){return this._autoRefresh}set autoRefresh(t){this._autoRefresh=!0,this.refreshTimerSet()}get subscriptionEvent(){return this._subscriptionEvent}get subscriptionExpires(){const t=Math.floor(Date.now()/1e3)-this._subscriptionExpiresLastSet,n=this._subscriptionExpires-t;return Math.max(n,0)}set subscriptionExpires(t){if(t<0)throw new Error("Expires must be greater than or equal to zero.");if(this._subscriptionExpires=t,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this.autoRefresh){const n=this.subscriptionRefresh;(n===void 0||n>=t)&&this.refreshTimerSet()}}get subscriptionExpiresInitial(){return this._subscriptionExpiresInitial}get subscriptionRefresh(){if(this._subscriptionRefresh===void 0||this._subscriptionRefreshLastSet===void 0)return;const t=Math.floor(Date.now()/1e3)-this._subscriptionRefreshLastSet,n=this._subscriptionRefresh-t;return Math.max(n,0)}get subscriptionState(){return this._subscriptionState}receiveRequest(t){if(this.logger.log(`SUBSCRIBE dialog ${this.id} received ${t.method} request`),!this.sequenceGuard(t)){this.logger.log(`SUBSCRIBE dialog ${this.id} rejected out of order ${t.method} request.`);return}switch(super.receiveRequest(t),t.method){case Ve.NOTIFY:this.onNotify(t);break;default:this.logger.log(`SUBSCRIBE dialog ${this.id} received unimplemented ${t.method} request`),this.core.replyStateless(t,{statusCode:501});break}}refresh(){const t="Allow: "+Ti.toString(),n={};return n.extraHeaders=(n.extraHeaders||[]).slice(),n.extraHeaders.push(t),n.extraHeaders.push("Event: "+this.subscriptionEvent),n.extraHeaders.push("Expires: "+this.subscriptionExpiresInitial),n.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,n)}subscribe(t,n={}){var r;if(this.subscriptionState!==nt.Pending&&this.subscriptionState!==nt.Active)throw new Error(`Invalid state ${this.subscriptionState}. May only re-subscribe while in state "pending" or "active".`);this.logger.log(`SUBSCRIBE dialog ${this.id} sending SUBSCRIBE request`);const i=new Yk(this,t,n);return this.N&&(clearTimeout(this.N),this.N=void 0),!((r=n.extraHeaders)===null||r===void 0)&&r.includes("Expires: 0")||(this.N=setTimeout(()=>this.timerN(),wn.TIMER_N)),i}terminate(){this.stateTransition(nt.Terminated),this.onTerminated()}unsubscribe(){const t="Allow: "+Ti.toString(),n={};return n.extraHeaders=(n.extraHeaders||[]).slice(),n.extraHeaders.push(t),n.extraHeaders.push("Event: "+this.subscriptionEvent),n.extraHeaders.push("Expires: 0"),n.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,n)}onNotify(t){const n=t.parseHeader("Event").event;if(!n||n!==this.subscriptionEvent){this.core.replyStateless(t,{statusCode:489});return}this.N&&(clearTimeout(this.N),this.N=void 0);const r=t.parseHeader("Subscription-State");if(!r||!r.state){this.core.replyStateless(t,{statusCode:489});return}const i=r.state,s=r.expires?Math.max(r.expires,0):void 0;switch(i){case"pending":this.stateTransition(nt.Pending,s);break;case"active":this.stateTransition(nt.Active,s);break;case"terminated":this.stateTransition(nt.Terminated,s);break;default:this.logger.warn("Unrecognized subscription state.");break}const a=new sc(this,t);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(a):a.accept()}onRefresh(t){this.delegate&&this.delegate.onRefresh&&this.delegate.onRefresh(t)}onTerminated(){this.delegate&&this.delegate.onTerminated&&this.delegate.onTerminated()}refreshTimerClear(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=void 0)}refreshTimerSet(){if(this.refreshTimerClear(),this.autoRefresh&&this.subscriptionExpires>0){const t=this.subscriptionExpires*900;this._subscriptionRefresh=Math.floor(t/1e3),this._subscriptionRefreshLastSet=Math.floor(Date.now()/1e3),this.refreshTimer=setTimeout(()=>{this.refreshTimer=void 0,this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this.onRefresh(this.refresh())},t)}}stateTransition(t,n){const r=()=>{this.logger.warn(`Invalid subscription state transition from ${this.subscriptionState} to ${t}`)};switch(t){case nt.Initial:r();return;case nt.NotifyWait:r();return;case nt.Pending:if(this.subscriptionState!==nt.NotifyWait&&this.subscriptionState!==nt.Pending){r();return}break;case nt.Active:if(this.subscriptionState!==nt.NotifyWait&&this.subscriptionState!==nt.Pending&&this.subscriptionState!==nt.Active){r();return}break;case nt.Terminated:if(this.subscriptionState!==nt.NotifyWait&&this.subscriptionState!==nt.Pending&&this.subscriptionState!==nt.Active){r();return}break;default:r();return}t===nt.Pending&&n&&(this.subscriptionExpires=n),t===nt.Active&&n&&(this.subscriptionExpires=n),t===nt.Terminated&&this.dispose(),this._subscriptionState=t}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE dialog. Timed out waiting for NOTIFY."),this.subscriptionState!==nt.Terminated&&(this.stateTransition(nt.Terminated),this.onTerminated())}}class Jk extends $n{constructor(t,n,r){const i=n.getHeader("Event");if(!i)throw new Error("Event undefined");const s=n.getHeader("Expires");if(!s)throw new Error("Expires undefined");super(cr,t,n,r),this.delegate=r,this.subscriberId=n.callId+n.fromTag+i,this.subscriptionExpiresRequested=this.subscriptionExpires=Number(s),this.subscriptionEvent=i,this.subscriptionState=nt.NotifyWait,this.waitNotifyStart()}dispose(){super.dispose()}onNotify(t){const n=t.message.parseHeader("Event").event;if(!n||n!==this.subscriptionEvent){this.logger.warn("Failed to parse event."),t.reject({statusCode:489});return}const r=t.message.parseHeader("Subscription-State");if(!r||!r.state){this.logger.warn("Failed to parse subscription state."),t.reject({statusCode:489});return}const i=r.state;switch(i){case"pending":break;case"active":break;case"terminated":break;default:this.logger.warn(`Invalid subscription state ${i}`),t.reject({statusCode:489});return}if(i!=="terminated"&&!t.message.parseHeader("contact")){this.logger.warn("Failed to parse contact."),t.reject({statusCode:489});return}if(this.dialog)throw new Error("Dialog already created. This implementation only supports install of single subscriptions.");switch(this.waitNotifyStop(),this.subscriptionExpires=r.expires?Math.min(this.subscriptionExpires,Math.max(r.expires,0)):this.subscriptionExpires,i){case"pending":this.subscriptionState=nt.Pending;break;case"active":this.subscriptionState=nt.Active;break;case"terminated":this.subscriptionState=nt.Terminated;break;default:throw new Error(`Unrecognized state ${i}.`)}if(this.subscriptionState!==nt.Terminated){const s=ny.initialDialogStateForSubscription(this.message,t.message);this.dialog=new ny(this.subscriptionEvent,this.subscriptionExpires,this.subscriptionState,this.core,s)}if(this.delegate&&this.delegate.onNotify){const s=t,a=this.dialog;this.delegate.onNotify({request:s,subscription:a})}else t.accept()}waitNotifyStart(){this.N||(this.core.subscribers.set(this.subscriberId,this),this.N=setTimeout(()=>this.timerN(),wn.TIMER_N))}waitNotifyStop(){this.N&&(this.core.subscribers.delete(this.subscriberId),clearTimeout(this.N),this.N=void 0)}receiveResponse(t){if(this.authenticationGuard(t)){if(t.statusCode&&t.statusCode>=200&&t.statusCode<300){const n=t.getHeader("Expires");if(!n)this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE");else{const r=Number(n);r>this.subscriptionExpiresRequested&&this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),r<this.subscriptionExpires&&(this.subscriptionExpires=r)}this.dialog&&this.dialog.subscriptionExpires>this.subscriptionExpires&&(this.dialog.subscriptionExpires=this.subscriptionExpires)}t.statusCode&&t.statusCode>=300&&t.statusCode<700&&this.waitNotifyStop(),super.receiveResponse(t)}}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE user agent client. Timed out waiting for NOTIFY."),this.waitNotifyStop(),this.delegate&&this.delegate.onNotifyTimeout&&this.delegate.onNotifyTimeout()}}class Xk extends di{constructor(t,n,r){super(or,t,n,r),this.core=t}}const ry=["application/sdp","application/dtmf-relay"];class Zk{constructor(t,n={}){this.userAgentClients=new Map,this.userAgentServers=new Map,this.configuration=t,this.delegate=n,this.dialogs=new Map,this.subscribers=new Map,this.logger=t.loggerFactory.getLogger("sip.user-agent-core")}dispose(){this.reset()}reset(){this.dialogs.forEach(t=>t.dispose()),this.dialogs.clear(),this.subscribers.forEach(t=>t.dispose()),this.subscribers.clear(),this.userAgentClients.forEach(t=>t.dispose()),this.userAgentClients.clear(),this.userAgentServers.forEach(t=>t.dispose()),this.userAgentServers.clear()}get loggerFactory(){return this.configuration.loggerFactory}get transport(){const t=this.configuration.transportAccessor();if(!t)throw new Error("Transport undefined.");return t}invite(t,n){return new zk(this,t,n)}message(t,n){return new y_(this,t,n)}publish(t,n){return new Kk(this,t,n)}register(t,n){return new Gk(this,t,n)}subscribe(t,n){return new Jk(this,t,n)}request(t,n){return new $n(cr,this,t,n)}makeOutgoingRequestMessage(t,n,r,i,s,a,o){const l=this.configuration.sipjsId,u=this.configuration.displayName,f=this.configuration.viaForceRport,c=this.configuration.hackViaTcp,d=this.configuration.supportedOptionTags.slice();t===Ve.REGISTER&&d.push("path","gruu"),t===Ve.INVITE&&(this.configuration.contact.pubGruu||this.configuration.contact.tempGruu)&&d.push("gruu");const h=this.configuration.routeSet,g=this.configuration.userAgentHeaderFieldValue,v=this.configuration.viaHost,y=Object.assign(Object.assign({},{callIdPrefix:l,forceRport:f,fromDisplayName:u,hackViaTcp:c,optionTags:d,routeSet:h,userAgentString:g,viaHost:v}),s);return new Us(t,n,r,i,y,a,o)}receiveIncomingRequestFromTransport(t){this.receiveRequestFromTransport(t)}receiveIncomingResponseFromTransport(t){this.receiveResponseFromTransport(t)}replyStateless(t,n){const r=this.configuration.userAgentHeaderFieldValue,i=this.configuration.supportedOptionTagsResponse;n=Object.assign(Object.assign({},n),{userAgent:r,supported:i});const s=h_(t,n);return this.transport.send(s.message).catch(a=>{a instanceof Error&&this.logger.error(a.message),this.logger.error(`Transport error occurred sending stateless reply to ${t.method} request.`)}),s}receiveRequestFromTransport(t){const n=t.viaBranch,r=this.userAgentServers.get(n);if(t.method===Ve.ACK&&r&&r.transaction.state===ue.Accepted&&r instanceof nh){this.logger.warn(`Discarding out of dialog ACK after 2xx response sent on transaction ${n}.`);return}if(t.method===Ve.CANCEL){r?(this.replyStateless(t,{statusCode:200}),r.transaction instanceof Zn&&r.transaction.state===ue.Proceeding&&r instanceof nh&&r.receiveCancel(t)):this.replyStateless(t,{statusCode:481});return}if(r){r.transaction.receiveRequest(t);return}this.receiveRequest(t)}receiveRequest(t){if(!Ti.includes(t.method)){const i="Allow: "+Ti.toString();this.replyStateless(t,{statusCode:405,extraHeaders:[i]});return}if(!t.ruri)throw new Error("Request-URI undefined.");if(t.ruri.scheme!=="sip"){this.replyStateless(t,{statusCode:416});return}const n=t.ruri,r=i=>!!i&&i.user===n.user;if(!r(this.configuration.aor)&&!(r(this.configuration.contact.uri)||r(this.configuration.contact.pubGruu)||r(this.configuration.contact.tempGruu))){this.logger.warn("Request-URI does not point to us."),t.method!==Ve.ACK&&this.replyStateless(t,{statusCode:404});return}if(t.method===Ve.INVITE&&!t.hasHeader("Contact")){this.replyStateless(t,{statusCode:400,reasonPhrase:"Missing Contact Header"});return}if(!t.toTag){const i=t.viaBranch;if(!this.userAgentServers.has(i)&&Array.from(this.userAgentServers.values()).some(a=>a.transaction.request.fromTag===t.fromTag&&a.transaction.request.callId===t.callId&&a.transaction.request.cseq===t.cseq)){this.replyStateless(t,{statusCode:482});return}}t.toTag?this.receiveInsideDialogRequest(t):this.receiveOutsideDialogRequest(t)}receiveInsideDialogRequest(t){if(t.method===Ve.NOTIFY){const i=t.parseHeader("Event");if(!i||!i.event){this.replyStateless(t,{statusCode:489});return}const s=t.callId+t.toTag+i.event,a=this.subscribers.get(s);if(a){const o=new sc(this,t);a.onNotify(o);return}}const n=t.callId+t.toTag+t.fromTag,r=this.dialogs.get(n);if(r){if(t.method===Ve.OPTIONS){const i="Allow: "+Ti.toString(),s="Accept: "+ry.toString();this.replyStateless(t,{statusCode:200,extraHeaders:[i,s]});return}r.receiveRequest(t);return}t.method!==Ve.ACK&&this.replyStateless(t,{statusCode:481})}receiveOutsideDialogRequest(t){switch(t.method){case Ve.ACK:break;case Ve.BYE:this.replyStateless(t,{statusCode:481});break;case Ve.CANCEL:throw new Error(`Unexpected out of dialog request method ${t.method}.`);case Ve.INFO:this.replyStateless(t,{statusCode:405});break;case Ve.INVITE:{const n=new nh(this,t);this.delegate.onInvite?this.delegate.onInvite(n):n.reject()}break;case Ve.MESSAGE:{const n=new b_(this,t);this.delegate.onMessage?this.delegate.onMessage(n):n.accept()}break;case Ve.NOTIFY:{const n=new sc(this,t);this.delegate.onNotify?this.delegate.onNotify(n):n.reject({statusCode:405})}break;case Ve.OPTIONS:{const n="Allow: "+Ti.toString(),r="Accept: "+ry.toString();this.replyStateless(t,{statusCode:200,extraHeaders:[n,r]})}break;case Ve.REFER:{const n=new S_(this,t);this.delegate.onRefer?this.delegate.onRefer(n):n.reject({statusCode:405})}break;case Ve.REGISTER:{const n=new Wk(this,t);this.delegate.onRegister?this.delegate.onRegister(n):n.reject({statusCode:405})}break;case Ve.SUBSCRIBE:{const n=new Xk(this,t);this.delegate.onSubscribe?this.delegate.onSubscribe(n):n.reject({statusCode:480})}break;default:throw new Error(`Unexpected out of dialog request method ${t.method}.`)}}receiveResponseFromTransport(t){if(t.getHeaders("via").length>1){this.logger.warn("More than one Via header field present in the response, dropping");return}const n=t.viaBranch+t.method,r=this.userAgentClients.get(n);r?r.transaction.receiveResponse(t):this.logger.warn(`Discarding unmatched ${t.statusCode} response to ${t.method} ${n}.`)}}function Qk(){return e=>!e.audio&&!e.video?Promise.resolve(new MediaStream):navigator.mediaDevices===void 0?Promise.reject(new Error("Media devices not available in insecure contexts.")):navigator.mediaDevices.getUserMedia.call(navigator.mediaDevices,e)}function __(){return{bundlePolicy:"balanced",certificates:void 0,iceCandidatePoolSize:0,iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",rtcpMuxPolicy:"require"}}const eP=Object.freeze(Object.defineProperty({__proto__:null,defaultPeerConnectionConfiguration:__},Symbol.toStringTag,{value:"Module"}));class Jr{constructor(t,n,r){t.debug("SessionDescriptionHandler.constructor"),this.logger=t,this.mediaStreamFactory=n,this.sessionDescriptionHandlerConfiguration=r,this._localMediaStream=new MediaStream,this._remoteMediaStream=new MediaStream,this._peerConnection=new RTCPeerConnection(r==null?void 0:r.peerConnectionConfiguration),this.initPeerConnectionEventHandlers()}get localMediaStream(){return this._localMediaStream}get remoteMediaStream(){return this._remoteMediaStream}get dataChannel(){return this._dataChannel}get peerConnection(){return this._peerConnection}get peerConnectionDelegate(){return this._peerConnectionDelegate}set peerConnectionDelegate(t){this._peerConnectionDelegate=t}static dispatchAddTrackEvent(t,n){t.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:n}))}static dispatchRemoveTrackEvent(t,n){t.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:n}))}close(){this.logger.debug("SessionDescriptionHandler.close"),this._peerConnection!==void 0&&(this._peerConnection.getReceivers().forEach(t=>{t.track&&t.track.stop()}),this._peerConnection.getSenders().forEach(t=>{t.track&&t.track.stop()}),this._dataChannel&&this._dataChannel.close(),this._peerConnection.close(),this._peerConnection=void 0)}enableReceiverTracks(t){const n=this.peerConnection;if(!n)throw new Error("Peer connection closed.");n.getReceivers().forEach(r=>{r.track&&(r.track.enabled=t)})}enableSenderTracks(t){const n=this.peerConnection;if(!n)throw new Error("Peer connection closed.");n.getSenders().forEach(r=>{r.track&&(r.track.enabled=t)})}getDescription(t,n){var r,i;if(this.logger.debug("SessionDescriptionHandler.getDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=t==null?void 0:t.onDataChannel;const s=(r=t==null?void 0:t.offerOptions)===null||r===void 0?void 0:r.iceRestart,a=(t==null?void 0:t.iceGatheringTimeout)===void 0?(i=this.sessionDescriptionHandlerConfiguration)===null||i===void 0?void 0:i.iceGatheringTimeout:t==null?void 0:t.iceGatheringTimeout;return this.getLocalMediaStream(t).then(()=>this.updateDirection(t)).then(()=>this.createDataChannel(t)).then(()=>this.createLocalOfferOrAnswer(t)).then(o=>this.applyModifiers(o,n)).then(o=>this.setLocalSessionDescription(o)).then(()=>this.waitForIceGatheringComplete(s,a)).then(()=>this.getLocalSessionDescription()).then(o=>({body:o.sdp,contentType:"application/sdp"})).catch(o=>{throw this.logger.error("SessionDescriptionHandler.getDescription failed - "+o),o})}hasDescription(t){return this.logger.debug("SessionDescriptionHandler.hasDescription"),t==="application/sdp"}iceGatheringComplete(){this.logger.debug("SessionDescriptionHandler.iceGatheringComplete"),this.iceGatheringCompleteTimeoutId!==void 0&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - clearing timeout"),clearTimeout(this.iceGatheringCompleteTimeoutId),this.iceGatheringCompleteTimeoutId=void 0),this.iceGatheringCompletePromise!==void 0&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - resolving promise"),this.iceGatheringCompleteResolve&&this.iceGatheringCompleteResolve(),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0)}sendDtmf(t,n){if(this.logger.debug("SessionDescriptionHandler.sendDtmf"),this._peerConnection===void 0)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - peer connection closed"),!1;const r=this._peerConnection.getSenders();if(r.length===0)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no senders"),!1;const i=r[0].dtmf;if(!i)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no DTMF sender"),!1;const s=n==null?void 0:n.duration,a=n==null?void 0:n.interToneGap;try{i.insertDTMF(t,s,a)}catch(o){return this.logger.error(o.toString()),!1}return this.logger.log("SessionDescriptionHandler.sendDtmf sent via RTP: "+t.toString()),!0}setDescription(t,n,r){if(this.logger.debug("SessionDescriptionHandler.setDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=n==null?void 0:n.onDataChannel;const i=this._peerConnection.signalingState==="have-local-offer"?"answer":"offer";return this.getLocalMediaStream(n).then(()=>this.applyModifiers({sdp:t,type:i},r)).then(s=>this.setRemoteSessionDescription(s)).catch(s=>{throw this.logger.error("SessionDescriptionHandler.setDescription failed - "+s),s})}applyModifiers(t,n){return this.logger.debug("SessionDescriptionHandler.applyModifiers"),!n||n.length===0?Promise.resolve(t):n.reduce((r,i)=>r.then(i),Promise.resolve(t)).then(r=>{if(this.logger.debug("SessionDescriptionHandler.applyModifiers - modified sdp"),!r.sdp||!r.type)throw new Error("Invalid SDP.");return{sdp:r.sdp,type:r.type}})}createDataChannel(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));if((t==null?void 0:t.dataChannel)!==!0||this._dataChannel)return Promise.resolve();switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.createDataChannel - creating data channel");try{return this._dataChannel=this._peerConnection.createDataChannel((t==null?void 0:t.dataChannelLabel)||"",t==null?void 0:t.dataChannelOptions),this.onDataChannel&&this.onDataChannel(this._dataChannel),Promise.resolve()}catch(n){return Promise.reject(n)}case"have-remote-offer":return Promise.resolve();case"have-local-offer":case"have-local-pranswer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}createLocalOfferOrAnswer(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP offer"),this._peerConnection.createOffer(t==null?void 0:t.offerOptions);case"have-remote-offer":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP answer"),this._peerConnection.createAnswer(t==null?void 0:t.answerOptions);case"have-local-offer":case"have-local-pranswer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}getLocalMediaStream(t){if(this.logger.debug("SessionDescriptionHandler.getLocalMediaStream"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));let n=Object.assign({},t==null?void 0:t.constraints);if(this.localMediaStreamConstraints){if(n.audio=n.audio||this.localMediaStreamConstraints.audio,n.video=n.video||this.localMediaStreamConstraints.video,JSON.stringify(this.localMediaStreamConstraints.audio)===JSON.stringify(n.audio)&&JSON.stringify(this.localMediaStreamConstraints.video)===JSON.stringify(n.video))return Promise.resolve()}else n.audio===void 0&&n.video===void 0&&(n={audio:!0});return this.localMediaStreamConstraints=n,this.mediaStreamFactory(n,this,t).then(r=>this.setLocalMediaStream(r))}setLocalMediaStream(t){if(this.logger.debug("SessionDescriptionHandler.setLocalMediaStream"),!this._peerConnection)throw new Error("Peer connection undefined.");const n=this._peerConnection,r=this._localMediaStream,i=[],s=l=>{const u=l.kind;if(u!=="audio"&&u!=="video")throw new Error(`Unknown new track kind ${u}.`);const f=n.getSenders().find(c=>c.track&&c.track.kind===u);f?i.push(new Promise(c=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - replacing sender ${u} track`),c()}).then(()=>f.replaceTrack(l).then(()=>{const c=r.getTracks().find(d=>d.kind===u);c&&(c.stop(),r.removeTrack(c),Jr.dispatchRemoveTrackEvent(r,c)),r.addTrack(l),Jr.dispatchAddTrackEvent(r,l)}).catch(c=>{throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to replace sender ${u} track`),c}))):i.push(new Promise(c=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - adding sender ${u} track`),c()}).then(()=>{try{n.addTrack(l,r)}catch(c){throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to add sender ${u} track`),c}r.addTrack(l),Jr.dispatchAddTrackEvent(r,l)}))},a=t.getAudioTracks();a.length&&s(a[0]);const o=t.getVideoTracks();return o.length&&s(o[0]),i.reduce((l,u)=>l.then(()=>u),Promise.resolve())}getLocalSessionDescription(){if(this.logger.debug("SessionDescriptionHandler.getLocalSessionDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));const t=this._peerConnection.localDescription;return t?Promise.resolve(t):Promise.reject(new Error("Failed to get local session description"))}setLocalSessionDescription(t){return this.logger.debug("SessionDescriptionHandler.setLocalSessionDescription"),this._peerConnection===void 0?Promise.reject(new Error("Peer connection closed.")):this._peerConnection.setLocalDescription(t)}setRemoteSessionDescription(t){if(this.logger.debug("SessionDescriptionHandler.setRemoteSessionDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));const n=t.sdp;let r;switch(this._peerConnection.signalingState){case"stable":r="offer";break;case"have-local-offer":r="answer";break;case"have-local-pranswer":case"have-remote-offer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return n?this._peerConnection.setRemoteDescription({sdp:n,type:r}):(this.logger.error("SessionDescriptionHandler.setRemoteSessionDescription failed - cannot set null sdp"),Promise.reject(new Error("SDP is undefined")))}setRemoteTrack(t){this.logger.debug("SessionDescriptionHandler.setRemoteTrack");const n=this._remoteMediaStream;n.getTrackById(t.id)?this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - have remote ${t.kind} track`):t.kind==="audio"?(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${t.kind} track`),n.getAudioTracks().forEach(r=>{r.stop(),n.removeTrack(r),Jr.dispatchRemoveTrackEvent(n,r)}),n.addTrack(t),Jr.dispatchAddTrackEvent(n,t)):t.kind==="video"&&(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${t.kind} track`),n.getVideoTracks().forEach(r=>{r.stop(),n.removeTrack(r),Jr.dispatchRemoveTrackEvent(n,r)}),n.addTrack(t),Jr.dispatchAddTrackEvent(n,t))}updateDirection(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.updateDirection - setting offer direction");{const n=r=>{switch(r){case"inactive":return t!=null&&t.hold?"inactive":"recvonly";case"recvonly":return t!=null&&t.hold?"inactive":"recvonly";case"sendonly":return t!=null&&t.hold?"sendonly":"sendrecv";case"sendrecv":return t!=null&&t.hold?"sendonly":"sendrecv";case"stopped":return"stopped";default:throw new Error("Should never happen")}};this._peerConnection.getTransceivers().forEach(r=>{if(r.direction){const i=n(r.direction);r.direction!==i&&(r.direction=i)}})}break;case"have-remote-offer":this.logger.debug("SessionDescriptionHandler.updateDirection - setting answer direction");{const n=(()=>{const i=this._peerConnection.remoteDescription;if(!i)throw new Error("Failed to read remote offer");const s=/a=sendrecv\r\n|a=sendonly\r\n|a=recvonly\r\n|a=inactive\r\n/.exec(i.sdp);if(s)switch(s[0]){case`a=inactive\r
`:return"inactive";case`a=recvonly\r
`:return"recvonly";case`a=sendonly\r
`:return"sendonly";case`a=sendrecv\r
`:return"sendrecv";default:throw new Error("Should never happen")}return"sendrecv"})(),r=(()=>{switch(n){case"inactive":return"inactive";case"recvonly":return"sendonly";case"sendonly":return t!=null&&t.hold?"inactive":"recvonly";case"sendrecv":return t!=null&&t.hold?"sendonly":"sendrecv";default:throw new Error("Should never happen")}})();this._peerConnection.getTransceivers().forEach(i=>{i.direction&&i.direction!=="stopped"&&i.direction!==r&&(i.direction=r)})}break;case"have-local-offer":case"have-local-pranswer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return Promise.resolve()}waitForIceGatheringComplete(t=!1,n=0){return this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete"),this._peerConnection===void 0?Promise.reject("Peer connection closed."):!t&&this._peerConnection.iceGatheringState==="complete"?(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - already complete"),Promise.resolve()):(this.iceGatheringCompletePromise!==void 0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - rejecting prior waiting promise"),this.iceGatheringCompleteReject&&this.iceGatheringCompleteReject(new Error("Promise superseded.")),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0),this.iceGatheringCompletePromise=new Promise((r,i)=>{this.iceGatheringCompleteResolve=r,this.iceGatheringCompleteReject=i,n>0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout in "+n),this.iceGatheringCompleteTimeoutId=setTimeout(()=>{this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout"),this.iceGatheringComplete()},n))}),this.iceGatheringCompletePromise)}initPeerConnectionEventHandlers(){if(this.logger.debug("SessionDescriptionHandler.initPeerConnectionEventHandlers"),!this._peerConnection)throw new Error("Peer connection undefined.");const t=this._peerConnection;t.onconnectionstatechange=n=>{var r;const i=t.connectionState;this.logger.debug(`SessionDescriptionHandler.onconnectionstatechange ${i}`),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.onconnectionstatechange&&this._peerConnectionDelegate.onconnectionstatechange(n)},t.ondatachannel=n=>{var r;this.logger.debug("SessionDescriptionHandler.ondatachannel"),this._dataChannel=n.channel,this.onDataChannel&&this.onDataChannel(this._dataChannel),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.ondatachannel&&this._peerConnectionDelegate.ondatachannel(n)},t.onicecandidate=n=>{var r;this.logger.debug("SessionDescriptionHandler.onicecandidate"),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.onicecandidate&&this._peerConnectionDelegate.onicecandidate(n)},t.onicecandidateerror=n=>{var r;this.logger.debug("SessionDescriptionHandler.onicecandidateerror"),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.onicecandidateerror&&this._peerConnectionDelegate.onicecandidateerror(n)},t.oniceconnectionstatechange=n=>{var r;const i=t.iceConnectionState;this.logger.debug(`SessionDescriptionHandler.oniceconnectionstatechange ${i}`),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.oniceconnectionstatechange&&this._peerConnectionDelegate.oniceconnectionstatechange(n)},t.onicegatheringstatechange=n=>{var r;const i=t.iceGatheringState;this.logger.debug(`SessionDescriptionHandler.onicegatheringstatechange ${i}`),i==="complete"&&this.iceGatheringComplete(),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.onicegatheringstatechange&&this._peerConnectionDelegate.onicegatheringstatechange(n)},t.onnegotiationneeded=n=>{var r;this.logger.debug("SessionDescriptionHandler.onnegotiationneeded"),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.onnegotiationneeded&&this._peerConnectionDelegate.onnegotiationneeded(n)},t.onsignalingstatechange=n=>{var r;const i=t.signalingState;this.logger.debug(`SessionDescriptionHandler.onsignalingstatechange ${i}`),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.onsignalingstatechange&&this._peerConnectionDelegate.onsignalingstatechange(n)},t.ontrack=n=>{var r;const i=n.track.kind,s=n.track.enabled?"enabled":"disabled";this.logger.debug(`SessionDescriptionHandler.ontrack ${i} ${s}`),this.setRemoteTrack(n.track),!((r=this._peerConnectionDelegate)===null||r===void 0)&&r.ontrack&&this._peerConnectionDelegate.ontrack(n)}}}const tP=Object.freeze(Object.defineProperty({__proto__:null,SessionDescriptionHandler:Jr},Symbol.toStringTag,{value:"Module"}));function nP(e){return(t,n)=>{e===void 0&&(e=Qk());const i={iceGatheringTimeout:(n==null?void 0:n.iceGatheringTimeout)!==void 0?n==null?void 0:n.iceGatheringTimeout:5e3,peerConnectionConfiguration:Object.assign(Object.assign({},__()),n==null?void 0:n.peerConnectionConfiguration)},s=t.userAgent.getLogger("sip.SessionDescriptionHandler");return new Jr(s,e,i)}}class ms{constructor(){this.listeners=new Array}addListener(t,n){const r=i=>{this.removeListener(r),t(i)};(n==null?void 0:n.once)===!0?this.listeners.push(r):this.listeners.push(t)}emit(t){this.listeners.slice().forEach(n=>n(t))}removeAllListeners(){this.listeners=[]}removeListener(t){this.listeners=this.listeners.filter(n=>n!==t)}on(t){return this.addListener(t)}off(t){return this.removeListener(t)}once(t){return this.addListener(t,{once:!0})}}class Fa extends ia{constructor(t){super(t||"An error occurred during state transition.")}}var Qe;(function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Disconnected="Disconnected"})(Qe=Qe||(Qe={}));const rP=Object.freeze(Object.defineProperty({__proto__:null,get TransportState(){return Qe}},Symbol.toStringTag,{value:"Module"}));class ad{constructor(t,n){if(this._state=Qe.Disconnected,this.transitioningState=!1,this._stateEventEmitter=new ms,this.logger=t,n){const s=n,a=s==null?void 0:s.wsServers,o=s==null?void 0:s.maxReconnectionAttempts;if(a!==void 0){const l='The transport option "wsServers" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(l)}if(o!==void 0){const l='The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(l)}a&&!n.server&&(typeof a=="string"&&(n.server=a),a instanceof Array&&(n.server=a[0]))}this.configuration=Object.assign(Object.assign({},ad.defaultOptions),n);const r=this.configuration.server,i=Xt.parse(r,"absoluteURI");if(i===-1)throw this.logger.error(`Invalid WebSocket Server URL "${r}"`),new Error("Invalid WebSocket Server URL");if(!["wss","ws","udp"].includes(i.scheme))throw this.logger.error(`Invalid scheme in WebSocket Server URL "${r}"`),new Error("Invalid scheme in WebSocket Server URL");this._protocol=i.scheme.toUpperCase()}dispose(){return this.disconnect()}get protocol(){return this._protocol}get server(){return this.configuration.server}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get ws(){return this._ws}connect(){return this._connect()}disconnect(){return this._disconnect()}isConnected(){return this.state===Qe.Connected}send(t){return this._send(t)}_connect(){switch(this.logger.log(`Connecting ${this.server}`),this.state){case Qe.Connecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Qe.Connecting));if(!this.connectPromise)throw new Error("Connect promise must be defined.");return this.connectPromise;case Qe.Connected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Qe.Connecting));if(this.connectPromise)throw new Error("Connect promise must not be defined.");return Promise.resolve();case Qe.Disconnecting:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(Qe.Connecting)}catch(n){if(n instanceof Fa)return Promise.reject(n);throw n}break;case Qe.Disconnected:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(Qe.Connecting)}catch(n){if(n instanceof Fa)return Promise.reject(n);throw n}break;default:throw new Error("Unknown state")}let t;try{t=new WebSocket(this.server,"sip"),t.binaryType="arraybuffer",t.addEventListener("close",n=>this.onWebSocketClose(n,t)),t.addEventListener("error",n=>this.onWebSocketError(n,t)),t.addEventListener("open",n=>this.onWebSocketOpen(n,t)),t.addEventListener("message",n=>this.onWebSocketMessage(n,t)),this._ws=t}catch(n){return this._ws=void 0,this.logger.error("WebSocket construction failed."),this.logger.error(n.toString()),new Promise((r,i)=>{this.connectResolve=r,this.connectReject=i,this.transitionState(Qe.Disconnected,n)})}return this.connectPromise=new Promise((n,r)=>{this.connectResolve=n,this.connectReject=r,this.connectTimeout=setTimeout(()=>{this.logger.warn("Connect timed out. Exceeded time set in configuration.connectionTimeout: "+this.configuration.connectionTimeout+"s."),t.close(1e3)},this.configuration.connectionTimeout*1e3)}),this.connectPromise}_disconnect(){switch(this.logger.log(`Disconnecting ${this.server}`),this.state){case Qe.Connecting:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(Qe.Disconnecting)}catch(n){if(n instanceof Fa)return Promise.reject(n);throw n}break;case Qe.Connected:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(Qe.Disconnecting)}catch(n){if(n instanceof Fa)return Promise.reject(n);throw n}break;case Qe.Disconnecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Qe.Disconnecting));if(!this.disconnectPromise)throw new Error("Disconnect promise must be defined.");return this.disconnectPromise;case Qe.Disconnected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(Qe.Disconnecting));if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");return Promise.resolve();default:throw new Error("Unknown state")}if(!this._ws)throw new Error("WebSocket must be defined.");const t=this._ws;return this.disconnectPromise=new Promise((n,r)=>{this.disconnectResolve=n,this.disconnectReject=r;try{t.close(1e3)}catch(i){throw this.logger.error("WebSocket close failed."),this.logger.error(i.toString()),i}}),this.disconnectPromise}_send(t){if(this.configuration.traceSip===!0&&this.logger.log(`Sending WebSocket message:

`+t+`
`),this._state!==Qe.Connected)return Promise.reject(new Error("Not connected."));if(!this._ws)throw new Error("WebSocket undefined.");try{this._ws.send(t)}catch(n){return n instanceof Error?Promise.reject(n):Promise.reject(new Error("WebSocket send failed."))}return Promise.resolve()}onWebSocketClose(t,n){if(n!==this._ws)return;const r=`WebSocket closed ${this.server} (code: ${t.code})`,i=this.disconnectPromise?void 0:new Error(r);i&&this.logger.warn("WebSocket closed unexpectedly"),this.logger.log(r),this._ws=void 0,this.transitionState(Qe.Disconnected,i)}onWebSocketError(t,n){n===this._ws&&this.logger.error("WebSocket error occurred.")}onWebSocketMessage(t,n){if(n!==this._ws)return;const r=t.data;let i;if(/^(\r\n)+$/.test(r)){this.clearKeepAliveTimeout(),this.configuration.traceSip===!0&&this.logger.log("Received WebSocket message with CRLF Keep Alive response");return}if(!r){this.logger.warn("Received empty message, discarding...");return}if(typeof r!="string"){try{i=new TextDecoder().decode(new Uint8Array(r))}catch(s){this.logger.error(s.toString()),this.logger.error("Received WebSocket binary message failed to be converted into string, message discarded");return}this.configuration.traceSip===!0&&this.logger.log(`Received WebSocket binary message:

`+i+`
`)}else i=r,this.configuration.traceSip===!0&&this.logger.log(`Received WebSocket text message:

`+i+`
`);if(this.state!==Qe.Connected){this.logger.warn("Received message while not connected, discarding...");return}if(this.onMessage)try{this.onMessage(i)}catch(s){throw this.logger.error(s.toString()),this.logger.error("Exception thrown by onMessage callback"),s}}onWebSocketOpen(t,n){n===this._ws&&this._state===Qe.Connecting&&(this.logger.log(`WebSocket opened ${this.server}`),this.transitionState(Qe.Connected))}transitionLoopDetectedError(t){let n="A state transition loop has been detected.";return n+=` An attempt to transition from ${this._state} to ${t} before the prior transition completed.`,n+=" Perhaps you are synchronously calling connect() or disconnect() from a callback or state change handler?",this.logger.error(n),new Fa("Loop detected.")}transitionState(t,n){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};if(this.transitioningState)throw this.transitionLoopDetectedError(t);switch(this.transitioningState=!0,this._state){case Qe.Connecting:t!==Qe.Connected&&t!==Qe.Disconnecting&&t!==Qe.Disconnected&&r();break;case Qe.Connected:t!==Qe.Disconnecting&&t!==Qe.Disconnected&&r();break;case Qe.Disconnecting:t!==Qe.Connecting&&t!==Qe.Disconnected&&r();break;case Qe.Disconnected:t!==Qe.Connecting&&r();break;default:throw new Error("Unknown state.")}const i=this._state;this._state=t;const s=this.connectResolve,a=this.connectReject;i===Qe.Connecting&&(this.connectPromise=void 0,this.connectResolve=void 0,this.connectReject=void 0);const o=this.disconnectResolve,l=this.disconnectReject;if(i===Qe.Disconnecting&&(this.disconnectPromise=void 0,this.disconnectResolve=void 0,this.disconnectReject=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.logger.log(`Transitioned from ${i} to ${this._state}`),this._stateEventEmitter.emit(this._state),t===Qe.Connected&&(this.startSendingKeepAlives(),this.onConnect))try{this.onConnect()}catch(u){throw this.logger.error(u.toString()),this.logger.error("Exception thrown by onConnect callback"),u}if(i===Qe.Connected&&(this.stopSendingKeepAlives(),this.onDisconnect))try{n?this.onDisconnect(n):this.onDisconnect()}catch(u){throw this.logger.error(u.toString()),this.logger.error("Exception thrown by onDisconnect callback"),u}if(i===Qe.Connecting){if(!s)throw new Error("Connect resolve undefined.");if(!a)throw new Error("Connect reject undefined.");t===Qe.Connected?s():a(n||new Error("Connect aborted."))}if(i===Qe.Disconnecting){if(!o)throw new Error("Disconnect resolve undefined.");if(!l)throw new Error("Disconnect reject undefined.");t===Qe.Disconnected?o():l(n||new Error("Disconnect aborted."))}this.transitioningState=!1}clearKeepAliveTimeout(){this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=void 0}sendKeepAlive(){return this.keepAliveDebounceTimeout?Promise.resolve():(this.keepAliveDebounceTimeout=setTimeout(()=>{this.clearKeepAliveTimeout()},this.configuration.keepAliveDebounce*1e3),this.send(`\r
\r
`))}startSendingKeepAlives(){const t=n=>{const r=n*.8;return 1e3*(Math.random()*(n-r)+r)};this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=setInterval(()=>{this.sendKeepAlive(),this.startSendingKeepAlives()},t(this.configuration.keepAliveInterval)))}stopSendingKeepAlives(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=void 0,this.keepAliveDebounceTimeout=void 0}}ad.defaultOptions={server:"",connectionTimeout:5,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!0};const iP="0.21.1";class w_{constructor(t){this.incomingCancelRequest=t}get request(){return this.incomingCancelRequest}}class oc extends ia{constructor(t){super(t||"Unsupported content type.")}}class x_ extends ia{constructor(t){super(t||"Unspecified session description handler error.")}}class qu extends ia{constructor(){super("The session has terminated.")}}class C_{constructor(t){this.incomingAckRequest=t}get request(){return this.incomingAckRequest.message}}class E_{constructor(t){this.incomingByeRequest=t}get request(){return this.incomingByeRequest.message}accept(t){return this.incomingByeRequest.accept(t),Promise.resolve()}reject(t){return this.incomingByeRequest.reject(t),Promise.resolve()}}class lc extends ia{constructor(t){super(t||"Request pending.")}}class T_{constructor(t){this.incomingInfoRequest=t}get request(){return this.incomingInfoRequest.message}accept(t){return this.incomingInfoRequest.accept(t),Promise.resolve()}reject(t){return this.incomingInfoRequest.reject(t),Promise.resolve()}}class Rv{constructor(t){this.incomingMessageRequest=t}get request(){return this.incomingMessageRequest.message}accept(t){return this.incomingMessageRequest.accept(t),Promise.resolve()}reject(t){return this.incomingMessageRequest.reject(t),Promise.resolve()}}let bl=class{constructor(t){this.incomingNotifyRequest=t}get request(){return this.incomingNotifyRequest.message}accept(t){return this.incomingNotifyRequest.accept(t),Promise.resolve()}reject(t){return this.incomingNotifyRequest.reject(t),Promise.resolve()}};class A_{constructor(t,n){this.incomingReferRequest=t,this.session=n}get referTo(){const t=this.incomingReferRequest.message.parseHeader("refer-to");if(!(t instanceof Xn))throw new Error("Failed to parse Refer-To header.");return t}get referredBy(){return this.incomingReferRequest.message.getHeader("referred-by")}get replaces(){const t=this.referTo.uri.getHeader("replaces");return t instanceof Array?t[0]:t}get request(){return this.incomingReferRequest.message}accept(t={statusCode:202}){return this.incomingReferRequest.accept(t),Promise.resolve()}reject(t){return this.incomingReferRequest.reject(t),Promise.resolve()}makeInviter(t){if(this.inviter)return this.inviter;const n=this.referTo.uri.clone();n.clearHeaders(),t=t||{};const r=(t.extraHeaders||[]).slice(),i=this.replaces;i&&r.push("Replaces: "+decodeURIComponent(i));const s=this.referredBy;return s&&r.push("Referred-By: "+s),t.extraHeaders=r,this.inviter=this.session.userAgent._makeInviter(n,t),this.inviter._referred=this.session,this.session._referral=this.inviter,this.inviter}}var be;(function(e){e.Initial="Initial",e.Establishing="Establishing",e.Established="Established",e.Terminating="Terminating",e.Terminated="Terminated"})(be=be||(be={}));const sP=Object.freeze(Object.defineProperty({__proto__:null,get SessionState(){return be}},Symbol.toStringTag,{value:"Module"}));let uc=class I_{constructor(t,n={}){this.pendingReinvite=!1,this.pendingReinviteAck=!1,this._state=be.Initial,this.delegate=n.delegate,this._stateEventEmitter=new ms,this._userAgent=t}dispose(){switch(this.logger.log(`Session ${this.id} in state ${this._state} is being disposed`),delete this.userAgent._sessions[this.id],this._sessionDescriptionHandler&&this._sessionDescriptionHandler.close(),this.state){case be.Initial:break;case be.Establishing:break;case be.Established:return new Promise(t=>{this._bye({onAccept:()=>t(),onRedirect:()=>t(),onReject:()=>t()})});case be.Terminating:break;case be.Terminated:break;default:throw new Error("Unknown state.")}return Promise.resolve()}get assertedIdentity(){return this._assertedIdentity}get dialog(){return this._dialog}get id(){return this._id}get replacee(){return this._replacee}get sessionDescriptionHandler(){return this._sessionDescriptionHandler}get sessionDescriptionHandlerFactory(){return this.userAgent.configuration.sessionDescriptionHandlerFactory}get sessionDescriptionHandlerModifiers(){return this._sessionDescriptionHandlerModifiers||[]}set sessionDescriptionHandlerModifiers(t){this._sessionDescriptionHandlerModifiers=t.slice()}get sessionDescriptionHandlerOptions(){return this._sessionDescriptionHandlerOptions||{}}set sessionDescriptionHandlerOptions(t){this._sessionDescriptionHandlerOptions=Object.assign({},t)}get sessionDescriptionHandlerModifiersReInvite(){return this._sessionDescriptionHandlerModifiersReInvite||[]}set sessionDescriptionHandlerModifiersReInvite(t){this._sessionDescriptionHandlerModifiersReInvite=t.slice()}get sessionDescriptionHandlerOptionsReInvite(){return this._sessionDescriptionHandlerOptionsReInvite||{}}set sessionDescriptionHandlerOptionsReInvite(t){this._sessionDescriptionHandlerOptionsReInvite=Object.assign({},t)}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get userAgent(){return this._userAgent}bye(t={}){let n="Session.bye() may only be called if established session.";switch(this.state){case be.Initial:typeof this.cancel=="function"?(n+=" However Inviter.invite() has not yet been called.",n+=" Perhaps you should have called Inviter.cancel()?"):typeof this.reject=="function"&&(n+=" However Invitation.accept() has not yet been called.",n+=" Perhaps you should have called Invitation.reject()?");break;case be.Establishing:typeof this.cancel=="function"?(n+=" However a dialog does not yet exist.",n+=" Perhaps you should have called Inviter.cancel()?"):typeof this.reject=="function"&&(n+=" However Invitation.accept() has not yet been called (or not yet resolved).",n+=" Perhaps you should have called Invitation.reject()?");break;case be.Established:{const r=t.requestDelegate,i=this.copyRequestOptions(t.requestOptions);return this._bye(r,i)}case be.Terminating:n+=" However this session is already terminating.",typeof this.cancel=="function"?n+=" Perhaps you have already called Inviter.cancel()?":typeof this.reject=="function"&&(n+=" Perhaps you have already called Session.bye()?");break;case be.Terminated:n+=" However this session is already terminated.";break;default:throw new Error("Unknown state")}return this.logger.error(n),Promise.reject(new Error(`Invalid session state ${this.state}`))}info(t={}){if(this.state!==be.Established){const i="Session.info() may only be called if established session.";return this.logger.error(i),Promise.reject(new Error(`Invalid session state ${this.state}`))}const n=t.requestDelegate,r=this.copyRequestOptions(t.requestOptions);return this._info(n,r)}invite(t={}){if(this.logger.log("Session.invite"),this.state!==be.Established)return Promise.reject(new Error(`Invalid session state ${this.state}`));if(this.pendingReinvite)return Promise.reject(new lc("Reinvite in progress. Please wait until complete, then try again."));this.pendingReinvite=!0,t.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiersReInvite=t.sessionDescriptionHandlerModifiers),t.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptionsReInvite=t.sessionDescriptionHandlerOptions);const n={onAccept:s=>{const a=Jo(s.message);if(!a){this.logger.error("Received 2xx response to re-INVITE without a session description"),this.ackAndBye(s,400,"Missing session description"),this.stateTransition(be.Terminated),this.pendingReinvite=!1;return}if(t.withoutSdp){const o={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setOfferAndGetAnswer(a,o).then(l=>{s.ack({body:l})}).catch(l=>{this.logger.error("Failed to handle offer in 2xx response to re-INVITE"),this.logger.error(l.message),this.state===be.Terminated?s.ack():(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(be.Terminated))}).then(()=>{this.pendingReinvite=!1,t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s)})}else{const o={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setAnswer(a,o).then(()=>{s.ack()}).catch(l=>{this.logger.error("Failed to handle answer in 2xx response to re-INVITE"),this.logger.error(l.message),this.state!==be.Terminated?(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(be.Terminated)):s.ack()}).then(()=>{this.pendingReinvite=!1,t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s)})}},onProgress:s=>{},onRedirect:s=>{},onReject:s=>{this.logger.warn("Received a non-2xx response to re-INVITE"),this.pendingReinvite=!1,t.withoutSdp?t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s):this.rollbackOffer().catch(a=>{if(this.logger.error("Failed to rollback offer on non-2xx response to re-INVITE"),this.logger.error(a.message),this.state!==be.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const o=[];o.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:o}),this.stateTransition(be.Terminated)}}).then(()=>{t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s)})},onTrying:s=>{}},r=t.requestOptions||{};if(r.extraHeaders=(r.extraHeaders||[]).slice(),r.extraHeaders.push("Allow: "+Ti.toString()),r.extraHeaders.push("Contact: "+this._contact),t.withoutSdp){if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return Promise.resolve(this.dialog.invite(n,r))}const i={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};return this.getOffer(i).then(s=>{if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return r.body=s,this.dialog.invite(n,r)}).catch(s=>{throw this.logger.error(s.message),this.logger.error("Failed to send re-INVITE"),this.pendingReinvite=!1,s})}message(t={}){if(this.state!==be.Established){const i="Session.message() may only be called if established session.";return this.logger.error(i),Promise.reject(new Error(`Invalid session state ${this.state}`))}const n=t.requestDelegate,r=this.copyRequestOptions(t.requestOptions);return this._message(n,r)}refer(t,n={}){if(this.state!==be.Established){const s="Session.refer() may only be called if established session.";return this.logger.error(s),Promise.reject(new Error(`Invalid session state ${this.state}`))}if(t instanceof I_&&!t.dialog){const s="Session.refer() may only be called with session which is established. You are perhaps attempting to attended transfer to a target for which there is not dialog yet established. Perhaps you are attempting a 'semi-attended' tansfer? Regardless, this is not supported. The recommended approached is to check to see if the target Session is in the Established state before calling refer(); if the state is not Established you may proceed by falling back using a URI as the target (blind transfer).";return this.logger.error(s),Promise.reject(new Error(`Invalid session state ${this.state}`))}const r=n.requestDelegate,i=this.copyRequestOptions(n.requestOptions);return i.extraHeaders=i.extraHeaders?i.extraHeaders.concat(this.referExtraHeaders(this.referToString(t))):this.referExtraHeaders(this.referToString(t)),this._refer(n.onNotify,r,i)}_bye(t,n){if(!this.dialog)return Promise.reject(new Error("Session dialog undefined."));const r=this.dialog;switch(r.sessionState){case _r.Initial:throw new Error(`Invalid dialog state ${r.sessionState}`);case _r.Early:throw new Error(`Invalid dialog state ${r.sessionState}`);case _r.AckWait:return this.stateTransition(be.Terminating),new Promise(i=>{r.delegate={onAck:()=>{const s=r.bye(t,n);return this.stateTransition(be.Terminated),i(s),Promise.resolve()},onAckTimeout:()=>{const s=r.bye(t,n);this.stateTransition(be.Terminated),i(s)}}});case _r.Confirmed:{const i=r.bye(t,n);return this.stateTransition(be.Terminated),Promise.resolve(i)}case _r.Terminated:throw new Error(`Invalid dialog state ${r.sessionState}`);default:throw new Error("Unrecognized state.")}}_info(t,n){return this.dialog?Promise.resolve(this.dialog.info(t,n)):Promise.reject(new Error("Session dialog undefined."))}_message(t,n){return this.dialog?Promise.resolve(this.dialog.message(t,n)):Promise.reject(new Error("Session dialog undefined."))}_refer(t,n,r){return this.dialog?(this.onNotify=t,Promise.resolve(this.dialog.refer(n,r))):Promise.reject(new Error("Session dialog undefined."))}ackAndBye(t,n,r){t.ack();const i=[];n&&i.push("Reason: "+this.getReasonHeaderValue(n,r)),t.session.bye(void 0,{extraHeaders:i})}onAckRequest(t){if(this.logger.log("Session.onAckRequest"),this.state!==be.Established&&this.state!==be.Terminating)return this.logger.error(`ACK received while in state ${this.state}, dropping request`),Promise.resolve();const n=this.dialog;if(!n)throw new Error("Dialog undefined.");const r={sessionDescriptionHandlerOptions:this.pendingReinviteAck?this.sessionDescriptionHandlerOptionsReInvite:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.pendingReinviteAck?this._sessionDescriptionHandlerModifiersReInvite:this._sessionDescriptionHandlerModifiers};if(this.delegate&&this.delegate.onAck){const i=new C_(t);this.delegate.onAck(i)}switch(this.pendingReinviteAck=!1,n.signalingState){case Me.Initial:{this.logger.error(`Invalid signaling state ${n.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return n.bye(void 0,{extraHeaders:i}),this.stateTransition(be.Terminated),Promise.resolve()}case Me.Stable:{const i=Jo(t.message);return i?i.contentDisposition==="render"?(this._renderbody=i.content,this._rendertype=i.contentType,Promise.resolve()):i.contentDisposition!=="session"?Promise.resolve():this.setAnswer(i,r).catch(s=>{this.logger.error(s.message);const a=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];n.bye(void 0,{extraHeaders:a}),this.stateTransition(be.Terminated)}):Promise.resolve()}case Me.HaveLocalOffer:{this.logger.error(`Invalid signaling state ${n.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return n.bye(void 0,{extraHeaders:i}),this.stateTransition(be.Terminated),Promise.resolve()}case Me.HaveRemoteOffer:{this.logger.error(`Invalid signaling state ${n.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return n.bye(void 0,{extraHeaders:i}),this.stateTransition(be.Terminated),Promise.resolve()}case Me.Closed:throw new Error(`Invalid signaling state ${n.signalingState}.`);default:throw new Error(`Invalid signaling state ${n.signalingState}.`)}}onByeRequest(t){if(this.logger.log("Session.onByeRequest"),this.state!==be.Established){this.logger.error(`BYE received while in state ${this.state}, dropping request`);return}if(this.delegate&&this.delegate.onBye){const n=new E_(t);this.delegate.onBye(n)}else t.accept();this.stateTransition(be.Terminated)}onInfoRequest(t){if(this.logger.log("Session.onInfoRequest"),this.state!==be.Established){this.logger.error(`INFO received while in state ${this.state}, dropping request`);return}if(this.delegate&&this.delegate.onInfo){const n=new T_(t);this.delegate.onInfo(n)}else t.accept()}onInviteRequest(t){if(this.logger.log("Session.onInviteRequest"),this.state!==be.Established){this.logger.error(`INVITE received while in state ${this.state}, dropping request`);return}this.pendingReinviteAck=!0;const n=["Contact: "+this._contact];if(t.message.hasHeader("P-Asserted-Identity")){const i=t.message.getHeader("P-Asserted-Identity");if(!i)throw new Error("Header undefined.");this._assertedIdentity=Xt.nameAddrHeaderParse(i)}const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.generateResponseOfferAnswerInDialog(r).then(i=>{const s=t.accept({statusCode:200,extraHeaders:n,body:i});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,200)}).catch(i=>{if(this.logger.error(i.message),this.logger.error("Failed to handle to re-INVITE request"),!this.dialog)throw new Error("Dialog undefined.");if(this.logger.error(this.dialog.signalingState),this.dialog.signalingState===Me.Stable){const s=t.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,488);return}this.rollbackOffer().then(()=>{const s=t.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,488)}).catch(s=>{this.logger.error(s.message),this.logger.error("Failed to rollback offer on re-INVITE request");const a=t.reject({statusCode:488});if(this.state!==be.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const o=[];o.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:o}),this.stateTransition(be.Terminated)}this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,a.message,488)})})}onMessageRequest(t){if(this.logger.log("Session.onMessageRequest"),this.state!==be.Established){this.logger.error(`MESSAGE received while in state ${this.state}, dropping request`);return}if(this.delegate&&this.delegate.onMessage){const n=new Rv(t);this.delegate.onMessage(n)}else t.accept()}onNotifyRequest(t){if(this.logger.log("Session.onNotifyRequest"),this.state!==be.Established){this.logger.error(`NOTIFY received while in state ${this.state}, dropping request`);return}if(this.onNotify){const n=new bl(t);this.onNotify(n);return}if(this.delegate&&this.delegate.onNotify){const n=new bl(t);this.delegate.onNotify(n)}else t.accept()}onPrackRequest(t){if(this.logger.log("Session.onPrackRequest"),this.state!==be.Established){this.logger.error(`PRACK received while in state ${this.state}, dropping request`);return}throw new Error("Unimplemented.")}onReferRequest(t){if(this.logger.log("Session.onReferRequest"),this.state!==be.Established){this.logger.error(`REFER received while in state ${this.state}, dropping request`);return}if(!t.message.hasHeader("refer-to")){this.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting."),t.reject();return}const n=new A_(t,this);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(n):(this.logger.log("No delegate available to handle REFER, automatically accepting and following."),n.accept().then(()=>n.makeInviter(this._referralInviterOptions).invite()).catch(r=>{this.logger.error(r.message)}))}generateResponseOfferAnswer(t,n){if(this.dialog)return this.generateResponseOfferAnswerInDialog(n);const r=Jo(t.message);return!r||r.contentDisposition!=="session"?this.getOffer(n):this.setOfferAndGetAnswer(r,n)}generateResponseOfferAnswerInDialog(t){if(!this.dialog)throw new Error("Dialog undefined.");switch(this.dialog.signalingState){case Me.Initial:return this.getOffer(t);case Me.HaveLocalOffer:return Promise.resolve(void 0);case Me.HaveRemoteOffer:if(!this.dialog.offer)throw new Error(`Session offer undefined in signaling state ${this.dialog.signalingState}.`);return this.setOfferAndGetAnswer(this.dialog.offer,t);case Me.Stable:return this.state!==be.Established?Promise.resolve(void 0):this.getOffer(t);case Me.Closed:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}getOffer(t){const n=this.setupSessionDescriptionHandler(),r=t.sessionDescriptionHandlerOptions,i=t.sessionDescriptionHandlerModifiers;try{return n.getDescription(r,i).then(s=>to(s)).catch(s=>{this.logger.error("Session.getOffer: SDH getDescription rejected...");const a=s instanceof Error?s:new Error("Session.getOffer unknown error.");throw this.logger.error(a.message),a})}catch(s){this.logger.error("Session.getOffer: SDH getDescription threw...");const a=s instanceof Error?s:new Error(s);return this.logger.error(a.message),Promise.reject(a)}}rollbackOffer(){const t=this.setupSessionDescriptionHandler();if(t.rollbackDescription===void 0)return Promise.resolve();try{return t.rollbackDescription().catch(n=>{this.logger.error("Session.rollbackOffer: SDH rollbackDescription rejected...");const r=n instanceof Error?n:new Error("Session.rollbackOffer unknown error.");throw this.logger.error(r.message),r})}catch(n){this.logger.error("Session.rollbackOffer: SDH rollbackDescription threw...");const r=n instanceof Error?n:new Error(n);return this.logger.error(r.message),Promise.reject(r)}}setAnswer(t,n){const r=this.setupSessionDescriptionHandler(),i=n.sessionDescriptionHandlerOptions,s=n.sessionDescriptionHandlerModifiers;try{if(!r.hasDescription(t.contentType))return Promise.reject(new oc)}catch(a){this.logger.error("Session.setAnswer: SDH hasDescription threw...");const o=a instanceof Error?a:new Error(a);return this.logger.error(o.message),Promise.reject(o)}try{return r.setDescription(t.content,i,s).catch(a=>{this.logger.error("Session.setAnswer: SDH setDescription rejected...");const o=a instanceof Error?a:new Error("Session.setAnswer unknown error.");throw this.logger.error(o.message),o})}catch(a){this.logger.error("Session.setAnswer: SDH setDescription threw...");const o=a instanceof Error?a:new Error(a);return this.logger.error(o.message),Promise.reject(o)}}setOfferAndGetAnswer(t,n){const r=this.setupSessionDescriptionHandler(),i=n.sessionDescriptionHandlerOptions,s=n.sessionDescriptionHandlerModifiers;try{if(!r.hasDescription(t.contentType))return Promise.reject(new oc)}catch(a){this.logger.error("Session.setOfferAndGetAnswer: SDH hasDescription threw...");const o=a instanceof Error?a:new Error(a);return this.logger.error(o.message),Promise.reject(o)}try{return r.setDescription(t.content,i,s).then(()=>r.getDescription(i,s)).then(a=>to(a)).catch(a=>{this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription rejected...");const o=a instanceof Error?a:new Error("Session.setOfferAndGetAnswer unknown error.");throw this.logger.error(o.message),o})}catch(a){this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription threw...");const o=a instanceof Error?a:new Error(a);return this.logger.error(o.message),Promise.reject(o)}}setSessionDescriptionHandler(t){if(this._sessionDescriptionHandler)throw new Error("Session description handler defined.");this._sessionDescriptionHandler=t}setupSessionDescriptionHandler(){var t;return this._sessionDescriptionHandler?this._sessionDescriptionHandler:(this._sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions),!((t=this.delegate)===null||t===void 0)&&t.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(this._sessionDescriptionHandler,!1),this._sessionDescriptionHandler)}stateTransition(t){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case be.Initial:t!==be.Establishing&&t!==be.Established&&t!==be.Terminating&&t!==be.Terminated&&n();break;case be.Establishing:t!==be.Established&&t!==be.Terminating&&t!==be.Terminated&&n();break;case be.Established:t!==be.Terminating&&t!==be.Terminated&&n();break;case be.Terminating:t!==be.Terminated&&n();break;case be.Terminated:n();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Session ${this.id} transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===be.Terminated&&this.dispose()}copyRequestOptions(t={}){const n=t.extraHeaders?t.extraHeaders.slice():void 0,r=t.body?{contentDisposition:t.body.contentDisposition||"render",contentType:t.body.contentType||"text/plain",content:t.body.content||""}:void 0;return{extraHeaders:n,body:r}}getReasonHeaderValue(t,n){const r=t;let i=rd(t);return!i&&n&&(i=n),"SIP;cause="+r+';text="'+i+'"'}referExtraHeaders(t){const n=[];return n.push("Referred-By: <"+this.userAgent.configuration.uri+">"),n.push("Contact: "+this._contact),n.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),n.push("Refer-To: "+t),n}referToString(t){let n;if(t instanceof Lr)n=t.toString();else{if(!t.dialog)throw new Error("Dialog undefined.");const r=t.remoteIdentity.friendlyName,i=t.dialog.remoteTarget.toString(),s=t.dialog.callId,a=t.dialog.remoteTag,o=t.dialog.localTag,l=encodeURIComponent(`${s};to-tag=${a};from-tag=${o}`);n=`"${r}" <${i}?Replaces=${l}>`}return n}};var wr;(function(e){e.Required="Required",e.Supported="Supported",e.Unsupported="Unsupported"})(wr=wr||(wr={}));const R_={"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0};class k_ extends uc{constructor(t,n){super(t),this.incomingInviteRequest=n,this.disposed=!1,this.expiresTimer=void 0,this.isCanceled=!1,this.rel100="none",this.rseq=Math.floor(Math.random()*1e4),this.userNoAnswerTimer=void 0,this.waitingForPrack=!1,this.logger=t.getLogger("sip.Invitation");const r=this.incomingInviteRequest.message,i=r.getHeader("require");i&&i.toLowerCase().includes("100rel")&&(this.rel100="required");const s=r.getHeader("supported");if(s&&s.toLowerCase().includes("100rel")&&(this.rel100="supported"),r.toTag=n.toTag,typeof r.toTag!="string")throw new TypeError("toTag should have been a string.");if(this.userNoAnswerTimer=setTimeout(()=>{n.reject({statusCode:480}),this.stateTransition(be.Terminated)},this.userAgent.configuration.noAnswerTimeout?this.userAgent.configuration.noAnswerTimeout*1e3:6e4),r.hasHeader("expires")){const l=Number(r.getHeader("expires")||0)*1e3;this.expiresTimer=setTimeout(()=>{this.state===be.Initial&&(n.reject({statusCode:487}),this.stateTransition(be.Terminated))},l)}const a=this.request.getHeader("P-Asserted-Identity");a&&(this._assertedIdentity=Xt.nameAddrHeaderParse(a)),this._contact=this.userAgent.contact.toString();const o=r.parseHeader("Content-Disposition");o&&o.type==="render"&&(this._renderbody=r.body,this._rendertype=r.getHeader("Content-Type")),this._id=r.callId+r.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.expiresTimer&&(clearTimeout(this.expiresTimer),this.expiresTimer=void 0),this.userNoAnswerTimer&&(clearTimeout(this.userNoAnswerTimer),this.userNoAnswerTimer=void 0),this.prackNeverArrived(),this.state){case be.Initial:return this.reject().then(()=>super.dispose());case be.Establishing:return this.reject().then(()=>super.dispose());case be.Established:return super.dispose();case be.Terminating:return super.dispose();case be.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get autoSendAnInitialProvisionalResponse(){return this.rel100!=="required"&&this.userAgent.configuration.sendInitialProvisionalResponse}get body(){return this.incomingInviteRequest.message.body}get localIdentity(){return this.request.to}get remoteIdentity(){return this.request.from}get request(){return this.incomingInviteRequest.message}accept(t={}){if(this.logger.log("Invitation.accept"),this.state!==be.Initial){const n=new Error(`Invalid session state ${this.state}`);return this.logger.error(n.message),Promise.reject(n)}return t.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=t.sessionDescriptionHandlerModifiers),t.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=t.sessionDescriptionHandlerOptions),this.stateTransition(be.Establishing),this.sendAccept(t).then(({message:n,session:r})=>{r.delegate={onAck:i=>this.onAckRequest(i),onAckTimeout:()=>this.onAckTimeout(),onBye:i=>this.onByeRequest(i),onInfo:i=>this.onInfoRequest(i),onInvite:i=>this.onInviteRequest(i),onMessage:i=>this.onMessageRequest(i),onNotify:i=>this.onNotifyRequest(i),onPrack:i=>this.onPrackRequest(i),onRefer:i=>this.onReferRequest(i)},this._dialog=r,this.stateTransition(be.Established),this._replacee&&this._replacee._bye()}).catch(n=>this.handleResponseError(n))}progress(t={}){if(this.logger.log("Invitation.progress"),this.state!==be.Initial){const r=new Error(`Invalid session state ${this.state}`);return this.logger.error(r.message),Promise.reject(r)}const n=t.statusCode||180;if(n<100||n>199)throw new TypeError("Invalid statusCode: "+n);return t.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=t.sessionDescriptionHandlerModifiers),t.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=t.sessionDescriptionHandlerOptions),this.waitingForPrack?(this.logger.warn("Unexpected call for progress while waiting for prack, ignoring"),Promise.resolve()):t.statusCode===100?this.sendProgressTrying().then(()=>{}).catch(r=>this.handleResponseError(r)):this.rel100!=="required"&&!(this.rel100==="supported"&&t.rel100)&&!(this.rel100==="supported"&&this.userAgent.configuration.sipExtension100rel===wr.Required)?this.sendProgress(t).then(()=>{}).catch(r=>this.handleResponseError(r)):this.sendProgressReliableWaitForPrack(t).then(()=>{}).catch(r=>this.handleResponseError(r))}reject(t={}){if(this.logger.log("Invitation.reject"),this.state!==be.Initial&&this.state!==be.Establishing){const a=new Error(`Invalid session state ${this.state}`);return this.logger.error(a.message),Promise.reject(a)}const n=t.statusCode||480,r=t.reasonPhrase?t.reasonPhrase:rd(n),i=t.extraHeaders||[];if(n<300||n>699)throw new TypeError("Invalid statusCode: "+n);const s=t.body?to(t.body):void 0;return n<400?this.incomingInviteRequest.redirect([],{statusCode:n,reasonPhrase:r,extraHeaders:i,body:s}):this.incomingInviteRequest.reject({statusCode:n,reasonPhrase:r,extraHeaders:i,body:s}),this.stateTransition(be.Terminated),Promise.resolve()}_onCancel(t){if(this.logger.log("Invitation._onCancel"),this.state!==be.Initial&&this.state!==be.Establishing){this.logger.error(`CANCEL received while in state ${this.state}, dropping request`);return}if(this.delegate&&this.delegate.onCancel){const n=new w_(t);this.delegate.onCancel(n)}this.isCanceled=!0,this.incomingInviteRequest.reject({statusCode:487}),this.stateTransition(be.Terminated)}handlePrackOfferAnswer(t){if(!this.dialog)throw new Error("Dialog undefined.");const n=Jo(t.message);if(!n||n.contentDisposition!=="session")return Promise.resolve(void 0);const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers};switch(this.dialog.signalingState){case Me.Initial:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case Me.Stable:return this.setAnswer(n,r).then(()=>{});case Me.HaveLocalOffer:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case Me.HaveRemoteOffer:return this.setOfferAndGetAnswer(n,r);case Me.Closed:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}handleResponseError(t){let n=480;if(t instanceof Error?this.logger.error(t.message):this.logger.error(t),t instanceof oc?(this.logger.error("A session description handler occurred while sending response (content type unsupported"),n=415):t instanceof x_?this.logger.error("A session description handler occurred while sending response"):t instanceof qu?this.logger.error("Session ended before response could be formulated and sent (while waiting for PRACK)"):t instanceof is&&this.logger.error("Session changed state before response could be formulated and sent"),this.state===be.Initial||this.state===be.Establishing)try{this.incomingInviteRequest.reject({statusCode:n}),this.stateTransition(be.Terminated)}catch(r){throw this.logger.error("An error occurred attempting to reject the request while handling another error"),r}if(this.isCanceled){this.logger.warn("An error occurred while attempting to formulate and send a response to an incoming INVITE. However a CANCEL was received and processed while doing so which can (and often does) result in errors occurring as the session terminates in the meantime. Said error is being ignored.");return}throw t}onAckTimeout(){if(this.logger.log("Invitation.onAckTimeout"),!this.dialog)throw new Error("Dialog undefined.");this.logger.log("No ACK received for an extended period of time, terminating session"),this.dialog.bye(),this.stateTransition(be.Terminated)}sendAccept(t={}){const n={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=t.extraHeaders||[];return this.waitingForPrack?this.waitForArrivalOfPrack().then(()=>clearTimeout(this.userNoAnswerTimer)).then(()=>this.generateResponseOfferAnswer(this.incomingInviteRequest,n)).then(i=>this.incomingInviteRequest.accept({statusCode:200,body:i,extraHeaders:r})):(clearTimeout(this.userNoAnswerTimer),this.generateResponseOfferAnswer(this.incomingInviteRequest,n).then(i=>this.incomingInviteRequest.accept({statusCode:200,body:i,extraHeaders:r})))}sendProgress(t={}){const n=t.statusCode||180,r=t.reasonPhrase,i=(t.extraHeaders||[]).slice(),s=t.body?to(t.body):void 0;if(n===183&&!s)return this.sendProgressWithSDP(t);try{const a=this.incomingInviteRequest.progress({statusCode:n,reasonPhrase:r,extraHeaders:i,body:s});return this._dialog=a.session,Promise.resolve(a)}catch(a){return Promise.reject(a)}}sendProgressWithSDP(t={}){const n={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=t.statusCode||183,i=t.reasonPhrase,s=(t.extraHeaders||[]).slice();return this.generateResponseOfferAnswer(this.incomingInviteRequest,n).then(a=>this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:i,extraHeaders:s,body:a})).then(a=>(this._dialog=a.session,a))}sendProgressReliable(t={}){return t.extraHeaders=(t.extraHeaders||[]).slice(),t.extraHeaders.push("Require: 100rel"),t.extraHeaders.push("RSeq: "+Math.floor(Math.random()*1e4)),this.sendProgressWithSDP(t)}sendProgressReliableWaitForPrack(t={}){const n={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=t.statusCode||183,i=t.reasonPhrase,s=(t.extraHeaders||[]).slice();s.push("Require: 100rel"),s.push("RSeq: "+this.rseq++);let a;return new Promise((o,l)=>{this.waitingForPrack=!0,this.generateResponseOfferAnswer(this.incomingInviteRequest,n).then(u=>(a=u,this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:i,extraHeaders:s,body:a}))).then(u=>{this._dialog=u.session;let f,c;u.session.delegate={onPrack:y=>{f=y,clearTimeout(h),clearTimeout(p),this.waitingForPrack&&(this.waitingForPrack=!1,this.handlePrackOfferAnswer(f).then(w=>{try{c=f.accept({statusCode:200,body:w}),this.prackArrived(),o({prackRequest:f,prackResponse:c,progressResponse:u})}catch(A){l(A)}}).catch(w=>l(w)))}};const h=setTimeout(()=>{this.waitingForPrack&&(this.waitingForPrack=!1,this.logger.warn("No PRACK received, rejecting INVITE."),clearTimeout(p),this.reject({statusCode:504}).then(()=>l(new qu)).catch(y=>l(y)))},wn.T1*64),g=()=>{try{this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:i,extraHeaders:s,body:a})}catch(y){this.waitingForPrack=!1,l(y);return}p=setTimeout(g,v*=2)};let v=wn.T1,p=setTimeout(g,v)}).catch(u=>{this.waitingForPrack=!1,l(u)})})}sendProgressTrying(){try{const t=this.incomingInviteRequest.trying();return Promise.resolve(t)}catch(t){return Promise.reject(t)}}waitForArrivalOfPrack(){if(this.waitingForPrackPromise)throw new Error("Already waiting for PRACK");return this.waitingForPrackPromise=new Promise((t,n)=>{this.waitingForPrackResolve=t,this.waitingForPrackReject=n}),this.waitingForPrackPromise}prackArrived(){this.waitingForPrackResolve&&this.waitingForPrackResolve(),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}prackNeverArrived(){this.waitingForPrackReject&&this.waitingForPrackReject(new qu),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}}class P_ extends uc{constructor(t,n,r={}){super(t,r),this.disposed=!1,this.earlyMedia=!1,this.earlyMediaSessionDescriptionHandlers=new Map,this.isCanceled=!1,this.inviteWithoutSdp=!1,this.logger=t.getLogger("sip.Inviter"),this.earlyMedia=r.earlyMedia!==void 0?r.earlyMedia:this.earlyMedia,this.fromTag=id(),this.inviteWithoutSdp=r.inviteWithoutSdp!==void 0?r.inviteWithoutSdp:this.inviteWithoutSdp;const i=Object.assign({},r);i.params=Object.assign({},r.params);const s=r.anonymous||!1,a=t.contact.toString({anonymous:s,outbound:s?!t.contact.tempGruu:!t.contact.pubGruu});s&&t.configuration.uri&&(i.params.fromDisplayName="Anonymous",i.params.fromUri="sip:anonymous@anonymous.invalid");let o=t.userAgentCore.configuration.aor;if(i.params.fromUri&&(o=typeof i.params.fromUri=="string"?Xt.URIParse(i.params.fromUri):i.params.fromUri),!o)throw new TypeError("Invalid from URI: "+i.params.fromUri);let l=n;if(i.params.toUri&&(l=typeof i.params.toUri=="string"?Xt.URIParse(i.params.toUri):i.params.toUri),!l)throw new TypeError("Invalid to URI: "+i.params.toUri);const u=Object.assign({},i.params);u.fromTag=this.fromTag;const f=(i.extraHeaders||[]).slice();s&&t.configuration.uri&&(f.push("P-Preferred-Identity: "+t.configuration.uri.toString()),f.push("Privacy: id")),f.push("Contact: "+a),f.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),t.configuration.sipExtension100rel===wr.Required&&f.push("Require: 100rel"),t.configuration.sipExtensionReplaces===wr.Required&&f.push("Require: replaces"),i.extraHeaders=f;const c=void 0;this.outgoingRequestMessage=t.userAgentCore.makeOutgoingRequestMessage(Ve.INVITE,n,o,l,u,f,c),this._contact=a,this._referralInviterOptions=i,this._renderbody=r.renderbody,this._rendertype=r.rendertype,r.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=r.sessionDescriptionHandlerModifiers),r.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=r.sessionDescriptionHandlerOptions),r.sessionDescriptionHandlerModifiersReInvite&&(this.sessionDescriptionHandlerModifiersReInvite=r.sessionDescriptionHandlerModifiersReInvite),r.sessionDescriptionHandlerOptionsReInvite&&(this.sessionDescriptionHandlerOptionsReInvite=r.sessionDescriptionHandlerOptionsReInvite),this._id=this.outgoingRequestMessage.callId+this.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.disposeEarlyMedia(),this.state){case be.Initial:return this.cancel().then(()=>super.dispose());case be.Establishing:return this.cancel().then(()=>super.dispose());case be.Established:return super.dispose();case be.Terminating:return super.dispose();case be.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get body(){return this.outgoingRequestMessage.body}get localIdentity(){return this.outgoingRequestMessage.from}get remoteIdentity(){return this.outgoingRequestMessage.to}get request(){return this.outgoingRequestMessage}cancel(t={}){if(this.logger.log("Inviter.cancel"),this.state!==be.Initial&&this.state!==be.Establishing){const r=new Error(`Invalid session state ${this.state}`);return this.logger.error(r.message),Promise.reject(r)}this.isCanceled=!0,this.stateTransition(be.Terminating);function n(r,i){if(r&&r<200||r>699)throw new TypeError("Invalid statusCode: "+r);if(r){const s=r,a=rd(r)||i;return"SIP;cause="+s+';text="'+a+'"'}}if(this.outgoingInviteRequest){let r;t.statusCode&&t.reasonPhrase&&(r=n(t.statusCode,t.reasonPhrase)),this.outgoingInviteRequest.cancel(r,t)}else this.logger.warn("Canceled session before INVITE was sent"),this.stateTransition(be.Terminated);return Promise.resolve()}invite(t={}){if(this.logger.log("Inviter.invite"),this.state!==be.Initial)return super.invite(t);if(t.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=t.sessionDescriptionHandlerModifiers),t.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=t.sessionDescriptionHandlerOptions),t.withoutSdp||this.inviteWithoutSdp)return this._renderbody&&this._rendertype&&(this.outgoingRequestMessage.body={contentType:this._rendertype,body:this._renderbody}),this.stateTransition(be.Establishing),Promise.resolve(this.sendInvite(t));const n={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.getOffer(n).then(r=>(this.outgoingRequestMessage.body={body:r.content,contentType:r.contentType},this.stateTransition(be.Establishing),this.sendInvite(t))).catch(r=>{throw this.logger.log(r.message),this.state!==be.Terminated&&this.stateTransition(be.Terminated),r})}sendInvite(t={}){return this.outgoingInviteRequest=this.userAgent.userAgentCore.invite(this.outgoingRequestMessage,{onAccept:n=>{if(this.dialog){this.logger.log("Additional confirmed dialog, sending ACK and BYE"),this.ackAndBye(n);return}if(this.isCanceled){this.logger.log("Canceled session accepted, sending ACK and BYE"),this.ackAndBye(n),this.stateTransition(be.Terminated);return}this.notifyReferer(n),this.onAccept(n).then(()=>{this.disposeEarlyMedia()}).catch(()=>{this.disposeEarlyMedia()}).then(()=>{t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(n)})},onProgress:n=>{this.isCanceled||(this.notifyReferer(n),this.onProgress(n).catch(()=>{this.disposeEarlyMedia()}).then(()=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(n)}))},onRedirect:n=>{this.notifyReferer(n),this.onRedirect(n),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(n)},onReject:n=>{this.notifyReferer(n),this.onReject(n),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(n)},onTrying:n=>{this.notifyReferer(n),this.onTrying(n),t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(n)}}),this.outgoingInviteRequest}disposeEarlyMedia(){this.earlyMediaSessionDescriptionHandlers.forEach(t=>{t.close()}),this.earlyMediaSessionDescriptionHandlers.clear()}notifyReferer(t){if(!this._referred)return;if(!(this._referred instanceof uc))throw new Error("Referred session not instance of session");if(!this._referred.dialog)return;if(!t.message.statusCode)throw new Error("Status code undefined.");if(!t.message.reasonPhrase)throw new Error("Reason phrase undefined.");const n=t.message.statusCode,r=t.message.reasonPhrase,i=`SIP/2.0 ${n} ${r}`.trim(),s=this._referred.dialog.notify(void 0,{extraHeaders:["Event: refer","Subscription-State: terminated"],body:{contentDisposition:"render",contentType:"message/sipfrag",content:i}});s.delegate={onReject:()=>{this._referred=void 0}}}onAccept(t){if(this.logger.log("Inviter.onAccept"),this.state!==be.Establishing)return this.logger.error(`Accept received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));const n=t.message,r=t.session;switch(n.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=Xt.nameAddrHeaderParse(n.getHeader("P-Asserted-Identity"))),r.delegate={onAck:i=>this.onAckRequest(i),onBye:i=>this.onByeRequest(i),onInfo:i=>this.onInfoRequest(i),onInvite:i=>this.onInviteRequest(i),onMessage:i=>this.onMessageRequest(i),onNotify:i=>this.onNotifyRequest(i),onPrack:i=>this.onPrackRequest(i),onRefer:i=>this.onReferRequest(i)},this._dialog=r,r.signalingState){case Me.Initial:return this.logger.error("Received 2xx response to INVITE without a session description"),this.ackAndBye(t,400,"Missing session description"),this.stateTransition(be.Terminated),Promise.reject(new Error("Bad Media Description"));case Me.HaveLocalOffer:return this.logger.error("Received 2xx response to INVITE without a session description"),this.ackAndBye(t,400,"Missing session description"),this.stateTransition(be.Terminated),Promise.reject(new Error("Bad Media Description"));case Me.HaveRemoteOffer:{if(!this._dialog.offer)throw new Error(`Session offer undefined in signaling state ${this._dialog.signalingState}.`);const i={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setOfferAndGetAnswer(this._dialog.offer,i).then(s=>{t.ack({body:s}),this.stateTransition(be.Established)}).catch(s=>{throw this.ackAndBye(t,488,"Invalid session description"),this.stateTransition(be.Terminated),s})}case Me.Stable:{if(this.earlyMediaSessionDescriptionHandlers.size>0){const a=this.earlyMediaSessionDescriptionHandlers.get(r.id);if(!a)throw new Error("Session description handler undefined.");return this.setSessionDescriptionHandler(a),this.earlyMediaSessionDescriptionHandlers.delete(r.id),t.ack(),this.stateTransition(be.Established),Promise.resolve()}if(this.earlyMediaDialog){if(this.earlyMediaDialog!==r){if(this.earlyMedia){const o="You have set the 'earlyMedia' option to 'true' which requires that your INVITE requests do not fork and yet this INVITE request did in fact fork. Consequentially and not surprisingly the end point which accepted the INVITE (confirmed dialog) does not match the end point with which early media has been setup (early dialog) and thus this session is unable to proceed. In accordance with the SIP specifications, the SIP servers your end point is connected to determine if an INVITE forks and the forking behavior of those servers cannot be controlled by this library. If you wish to use early media with this library you must configure those servers accordingly. Alternatively you may set the 'earlyMedia' to 'false' which will allow this library to function with any INVITE requests which do fork.";this.logger.error(o)}const a=new Error("Early media dialog does not equal confirmed dialog, terminating session");return this.logger.error(a.message),this.ackAndBye(t,488,"Not Acceptable Here"),this.stateTransition(be.Terminated),Promise.reject(a)}return t.ack(),this.stateTransition(be.Established),Promise.resolve()}const i=r.answer;if(!i)throw new Error("Answer is undefined.");const s={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setAnswer(i,s).then(()=>{let a;this._renderbody&&this._rendertype&&(a={body:{contentDisposition:"render",contentType:this._rendertype,content:this._renderbody}}),t.ack(a),this.stateTransition(be.Established)}).catch(a=>{throw this.logger.error(a.message),this.ackAndBye(t,488,"Not Acceptable Here"),this.stateTransition(be.Terminated),a})}case Me.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onProgress(t){var n;if(this.logger.log("Inviter.onProgress"),this.state!==be.Establishing)return this.logger.error(`Progress received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));if(!this.outgoingInviteRequest)throw new Error("Outgoing INVITE request undefined.");const r=t.message,i=t.session;r.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=Xt.nameAddrHeaderParse(r.getHeader("P-Asserted-Identity")));const s=r.getHeader("require"),a=r.getHeader("rseq"),l=!!(s&&s.includes("100rel")&&a?Number(a):void 0),u=[];switch(l&&u.push("RAck: "+r.getHeader("rseq")+" "+r.getHeader("cseq")),i.signalingState){case Me.Initial:return l&&(this.logger.warn("First reliable provisional response received MUST contain an offer when INVITE does not contain an offer."),t.prack({extraHeaders:u})),Promise.resolve();case Me.HaveLocalOffer:return l&&t.prack({extraHeaders:u}),Promise.resolve();case Me.HaveRemoteOffer:if(!l)return this.logger.warn("Non-reliable provisional response MUST NOT contain an initial offer, discarding response."),Promise.resolve();{const f=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions||{});return!((n=this.delegate)===null||n===void 0)&&n.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(f,!0),this.earlyMediaSessionDescriptionHandlers.set(i.id,f),f.setDescription(r.body,this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers).then(()=>f.getDescription(this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers)).then(c=>{const d={contentDisposition:"session",contentType:c.contentType,content:c.body};t.prack({extraHeaders:u,body:d})}).catch(c=>{throw this.stateTransition(be.Terminated),c})}case Me.Stable:if(l&&t.prack({extraHeaders:u}),this.earlyMedia&&!this.earlyMediaDialog){this.earlyMediaDialog=i;const f=i.answer;if(!f)throw new Error("Answer is undefined.");const c={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setAnswer(f,c).catch(d=>{throw this.stateTransition(be.Terminated),d})}return Promise.resolve();case Me.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onRedirect(t){if(this.logger.log("Inviter.onRedirect"),this.state!==be.Establishing&&this.state!==be.Terminating){this.logger.error(`Redirect received while in state ${this.state}, dropping response`);return}this.stateTransition(be.Terminated)}onReject(t){if(this.logger.log("Inviter.onReject"),this.state!==be.Establishing&&this.state!==be.Terminating){this.logger.error(`Reject received while in state ${this.state}, dropping response`);return}this.stateTransition(be.Terminated)}onTrying(t){if(this.logger.log("Inviter.onTrying"),this.state!==be.Establishing){this.logger.error(`Trying received while in state ${this.state}, dropping response`);return}}}class Ka{constructor(t={}){if(this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this._state=cn.Stopped,this._stateEventEmitter=new ms,this.delegate=t.delegate,this.options=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ka.defaultOptions()),{sipjsId:Ms(5)}),{uri:new Lr("sip","anonymous."+Ms(6),"anonymous.invalid")}),{viaHost:Ms(12)+".invalid"}),Ka.stripUndefinedProperties(t)),this.options.hackIpInContact)if(typeof this.options.hackIpInContact=="boolean"&&this.options.hackIpInContact){const i=Math.floor(Math.random()*254+1);this.options.viaHost="192.0.2."+i}else this.options.hackIpInContact&&(this.options.viaHost=this.options.hackIpInContact);switch(this.loggerFactory=new Pk,this.logger=this.loggerFactory.getLogger("sip.UserAgent"),this.loggerFactory.builtinEnabled=this.options.logBuiltinEnabled,this.loggerFactory.connector=this.options.logConnector,this.options.logLevel){case"error":this.loggerFactory.level=pn.error;break;case"warn":this.loggerFactory.level=pn.warn;break;case"log":this.loggerFactory.level=pn.log;break;case"debug":this.loggerFactory.level=pn.debug;break}if(this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(n=>{const r=this.options[n];switch(n){case"uri":case"sessionDescriptionHandlerFactory":this.logger.log("· "+n+": "+r);break;case"authorizationPassword":this.logger.log("· "+n+": NOT SHOWN");break;case"transportConstructor":this.logger.log("· "+n+": "+r.name);break;default:this.logger.log("· "+n+": "+JSON.stringify(r))}})),this.options.transportOptions){const n=this.options.transportOptions,r=n.maxReconnectionAttempts,i=n.reconnectionTimeout;if(r!==void 0){const s='The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(s)}if(i!==void 0){const s='The transport option "reconnectionTimeout" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(s)}t.reconnectionDelay===void 0&&i!==void 0&&(this.options.reconnectionDelay=i),t.reconnectionAttempts===void 0&&r!==void 0&&(this.options.reconnectionAttempts=r)}if(t.reconnectionDelay!==void 0){const n='The user agent option "reconnectionDelay" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(n)}if(t.reconnectionAttempts!==void 0){const n='The user agent option "reconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.';this.logger.warn(n)}if(this._transport=new this.options.transportConstructor(this.getLogger("sip.Transport"),this.options.transportOptions),this.initTransportCallbacks(),this._contact=this.initContact(),this._instanceId=this.options.instanceId?this.options.instanceId:Ka.newUUID(),Xt.parse(this._instanceId,"uuid")===-1)throw new Error("Invalid instanceId.");this._userAgentCore=this.initCore()}static makeURI(t){return Xt.URIParse(t)}static defaultOptions(){return{allowLegacyNotifications:!1,authorizationHa1:"",authorizationPassword:"",authorizationUsername:"",delegate:{},contactName:"",contactParams:{transport:"ws"},displayName:"",forceRport:!1,gracefulShutdown:!0,hackAllowUnregisteredOptionTags:!1,hackIpInContact:!1,hackViaTcp:!1,instanceId:"",instanceIdAlwaysAdded:!1,logBuiltinEnabled:!0,logConfiguration:!0,logConnector:()=>{},logLevel:"log",noAnswerTimeout:60,preloadedRouteSet:[],reconnectionAttempts:0,reconnectionDelay:4,sendInitialProvisionalResponse:!0,sessionDescriptionHandlerFactory:nP(),sessionDescriptionHandlerFactoryOptions:{},sipExtension100rel:wr.Unsupported,sipExtensionReplaces:wr.Unsupported,sipExtensionExtraSupported:[],sipjsId:"",transportConstructor:ad,transportOptions:{},uri:new Lr("sip","anonymous","anonymous.invalid"),userAgentString:"SIP.js/"+iP,viaHost:""}}static newUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const r=Math.floor(Math.random()*16);return(n==="x"?r:r%4+8).toString(16)})}static stripUndefinedProperties(t){return Object.keys(t).reduce((n,r)=>(t[r]!==void 0&&(n[r]=t[r]),n),{})}get configuration(){return this.options}get contact(){return this._contact}get instanceId(){return this._instanceId}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get transport(){return this._transport}get userAgentCore(){return this._userAgentCore}getLogger(t,n){return this.loggerFactory.getLogger(t,n)}getLoggerFactory(){return this.loggerFactory}isConnected(){return this.transport.isConnected()}reconnect(){return this.state===cn.Stopped?Promise.reject(new Error("User agent stopped.")):Promise.resolve().then(()=>this.transport.connect())}start(){return this.state===cn.Started?(this.logger.warn("User agent already started"),Promise.resolve()):(this.logger.log(`Starting ${this.configuration.uri}`),this.transitionState(cn.Started),this.transport.connect())}async stop(){if(this.state===cn.Stopped)return this.logger.warn("User agent already stopped"),Promise.resolve();if(this.logger.log(`Stopping ${this.configuration.uri}`),!this.options.gracefulShutdown)return this.logger.log("Dispose of transport"),this.transport.dispose().catch(o=>{throw this.logger.error(o.message),o}),this.logger.log("Dispose of core"),this.userAgentCore.dispose(),this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this.transitionState(cn.Stopped),Promise.resolve();const t=Object.assign({},this._publishers),n=Object.assign({},this._registerers),r=Object.assign({},this._sessions),i=Object.assign({},this._subscriptions),s=this.transport,a=this.userAgentCore;this.logger.log("Dispose of registerers");for(const o in n)n[o]&&await n[o].dispose().catch(l=>{throw this.logger.error(l.message),delete this._registerers[o],l});this.logger.log("Dispose of sessions");for(const o in r)r[o]&&await r[o].dispose().catch(l=>{throw this.logger.error(l.message),delete this._sessions[o],l});this.logger.log("Dispose of subscriptions");for(const o in i)i[o]&&await i[o].dispose().catch(l=>{throw this.logger.error(l.message),delete this._subscriptions[o],l});this.logger.log("Dispose of publishers");for(const o in t)t[o]&&await t[o].dispose().catch(l=>{throw this.logger.error(l.message),delete this._publishers[o],l});this.logger.log("Dispose of transport"),await s.dispose().catch(o=>{throw this.logger.error(o.message),o}),this.logger.log("Dispose of core"),a.dispose(),this.transitionState(cn.Stopped)}_makeInviter(t,n){return new P_(this,t,n)}attemptReconnection(t=1){const n=this.options.reconnectionAttempts,r=this.options.reconnectionDelay;if(t>n){this.logger.log("Maximum reconnection attempts reached");return}this.logger.log(`Reconnection attempt ${t} of ${n} - trying`),setTimeout(()=>{this.reconnect().then(()=>{this.logger.log(`Reconnection attempt ${t} of ${n} - succeeded`)}).catch(i=>{this.logger.error(i.message),this.logger.log(`Reconnection attempt ${t} of ${n} - failed`),this.attemptReconnection(++t)})},t===1?0:r*1e3)}initContact(){const t=this.options.contactName!==""?this.options.contactName:Ms(8),n=this.options.contactParams;return{pubGruu:void 0,tempGruu:void 0,uri:new Lr("sip",t,this.options.viaHost,void 0,n),toString:(i={})=>{const s=i.anonymous||!1,a=i.outbound||!1,o=i.register||!1;let l="<";return s?l+=this.contact.tempGruu||`sip:anonymous@anonymous.invalid;transport=${n.transport?n.transport:"ws"}`:o?l+=this.contact.uri:l+=this.contact.pubGruu||this.contact.uri,a&&(l+=";ob"),l+=">",this.options.instanceIdAlwaysAdded&&(l+=';+sip.instance="<urn:uuid:'+this._instanceId+'>"'),l}}}initCore(){let t=[];t.push("outbound"),this.options.sipExtension100rel===wr.Supported&&t.push("100rel"),this.options.sipExtensionReplaces===wr.Supported&&t.push("replaces"),this.options.sipExtensionExtraSupported&&t.push(...this.options.sipExtensionExtraSupported),this.options.hackAllowUnregisteredOptionTags||(t=t.filter(s=>R_[s])),t=Array.from(new Set(t));const n=t.slice();(this.contact.pubGruu||this.contact.tempGruu)&&n.push("gruu");const r={aor:this.options.uri,contact:this.contact,displayName:this.options.displayName,loggerFactory:this.loggerFactory,hackViaTcp:this.options.hackViaTcp,routeSet:this.options.preloadedRouteSet,supportedOptionTags:t,supportedOptionTagsResponse:n,sipjsId:this.options.sipjsId,userAgentHeaderFieldValue:this.options.userAgentString,viaForceRport:this.options.forceRport,viaHost:this.options.viaHost,authenticationFactory:()=>{const s=this.options.authorizationUsername?this.options.authorizationUsername:this.options.uri.user,a=this.options.authorizationPassword?this.options.authorizationPassword:void 0,o=this.options.authorizationHa1?this.options.authorizationHa1:void 0;return new kk(this.getLoggerFactory(),o,s,a)},transportAccessor:()=>this.transport},i={onInvite:s=>{var a;const o=new k_(this,s);if(s.delegate={onCancel:l=>{o._onCancel(l)},onTransportError:l=>{this.logger.error("A transport error has occurred while handling an incoming INVITE request.")}},s.trying(),this.options.sipExtensionReplaces!==wr.Unsupported){const u=s.message.parseHeader("replaces");if(u){const f=u.call_id;if(typeof f!="string")throw new Error("Type of call id is not string");const c=u.replaces_to_tag;if(typeof c!="string")throw new Error("Type of to tag is not string");const d=u.replaces_from_tag;if(typeof d!="string")throw new Error("type of from tag is not string");const h=f+c+d,g=this.userAgentCore.dialogs.get(h);if(!g){o.reject({statusCode:481});return}if(!g.early&&u.early_only===!0){o.reject({statusCode:486});return}const v=this._sessions[f+d]||this._sessions[f+c]||void 0;if(!v)throw new Error("Session does not exist.");o._replacee=v}}if(!((a=this.delegate)===null||a===void 0)&&a.onInvite){if(o.autoSendAnInitialProvisionalResponse){o.progress().then(()=>{var l;if(((l=this.delegate)===null||l===void 0?void 0:l.onInvite)===void 0)throw new Error("onInvite undefined.");this.delegate.onInvite(o)});return}this.delegate.onInvite(o);return}o.reject({statusCode:486})},onMessage:s=>{if(this.delegate&&this.delegate.onMessage){const a=new Rv(s);this.delegate.onMessage(a)}else s.accept()},onNotify:s=>{if(this.delegate&&this.delegate.onNotify){const a=new bl(s);this.delegate.onNotify(a)}else this.options.allowLegacyNotifications?s.accept():s.reject({statusCode:481})},onRefer:s=>{this.logger.warn("Received an out of dialog REFER request"),this.delegate&&this.delegate.onReferRequest?this.delegate.onReferRequest(s):s.reject({statusCode:405})},onRegister:s=>{this.logger.warn("Received an out of dialog REGISTER request"),this.delegate&&this.delegate.onRegisterRequest?this.delegate.onRegisterRequest(s):s.reject({statusCode:405})},onSubscribe:s=>{this.logger.warn("Received an out of dialog SUBSCRIBE request"),this.delegate&&this.delegate.onSubscribeRequest?this.delegate.onSubscribeRequest(s):s.reject({statusCode:405})}};return new Zk(r,i)}initTransportCallbacks(){this.transport.onConnect=()=>this.onTransportConnect(),this.transport.onDisconnect=t=>this.onTransportDisconnect(t),this.transport.onMessage=t=>this.onTransportMessage(t)}onTransportConnect(){this.state!==cn.Stopped&&this.delegate&&this.delegate.onConnect&&this.delegate.onConnect()}onTransportDisconnect(t){this.state!==cn.Stopped&&(this.delegate&&this.delegate.onDisconnect&&this.delegate.onDisconnect(t),t&&this.options.reconnectionAttempts>0&&this.attemptReconnection())}onTransportMessage(t){const n=Yo.parseMessage(t,this.getLogger("sip.Parser"));if(!n){this.logger.warn("Failed to parse incoming message. Dropping.");return}if(this.state===cn.Stopped&&n instanceof za){this.logger.warn(`Received ${n.method} request while stopped. Dropping.`);return}const r=()=>{const i=["from","to","call_id","cseq","via"];for(const s of i)if(!n.hasHeader(s))return this.logger.warn(`Missing mandatory header field : ${s}.`),!1;return!0};if(n instanceof za){if(!r()){this.logger.warn("Request missing mandatory header field. Dropping.");return}if(!n.toTag&&n.callId.substr(0,5)===this.options.sipjsId){this.userAgentCore.replyStateless(n,{statusCode:482});return}const i=yl(n.body),s=n.getHeader("content-length");if(s&&i<Number(s)){this.userAgentCore.replyStateless(n,{statusCode:400});return}}if(n instanceof vs){if(!r()){this.logger.warn("Response missing mandatory header field. Dropping.");return}if(n.getHeaders("via").length>1){this.logger.warn("More than one Via header field present in the response. Dropping.");return}if(n.via.host!==this.options.viaHost||n.via.port!==void 0){this.logger.warn("Via sent-by in the response does not match UA Via host value. Dropping.");return}const i=yl(n.body),s=n.getHeader("content-length");if(s&&i<Number(s)){this.logger.warn("Message body length is lower than the value in Content-Length header field. Dropping.");return}}if(n instanceof za){this.userAgentCore.receiveIncomingRequestFromTransport(n);return}if(n instanceof vs){this.userAgentCore.receiveIncomingResponseFromTransport(n);return}throw new Error("Invalid message type.")}transitionState(t,n){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case cn.Started:t!==cn.Stopped&&r();break;case cn.Stopped:t!==cn.Started&&r();break;default:throw new Error("Unknown state.")}this.logger.log(`Transitioned from ${this._state} to ${t}`),this._state=t,this._stateEventEmitter.emit(this._state)}}const aP=Object.freeze(Object.defineProperty({__proto__:null,UserAgent:Ka},Symbol.toStringTag,{value:"Module"})),oP=rr(aP),kv=(e,t)=>{const n=[],r=e.split(/\r\n/);let i;for(let s=0;s<r.length;){const a=r[s];if(/^m=(?:audio|video)/.test(a))i={index:s,stripped:[]},n.push(i);else if(i){const o=/^a=rtpmap:(\d+) ([^/]+)\//.exec(a);if(o&&t===o[2]){r.splice(s,1),i.stripped.push(o[1]);continue}}s++}for(const s of n){const a=r[s.index].split(" ");for(let o=3;o<a.length;){if(s.stripped.indexOf(a[o])!==-1){a.splice(o,1);continue}o++}r[s.index]=a.join(" ")}return r.join(`\r
`)},lP=(e,t)=>{const n=new RegExp("m="+t+".*$","gm"),r=new RegExp("^a=group:.*$","gm");if(n.test(e)){let i;e=e.split(/^m=/gm).filter(a=>{if(a.substr(0,t.length)===t){if(i=a.match(/^a=mid:.*$/gm),i){const o=i[0].match(/:.+$/g);o&&(i=o[0].substr(1))}return!1}return!0}).join("m=");const s=e.match(r);if(s&&s.length===1){let a=s[0];const o=new RegExp(" *"+i+"[^ ]*","g");a=a.replace(o,""),e=e.split(r).join(a)}}return e};function uP(e){return e.sdp=(e.sdp||"").replace(/^a=candidate:\d+ \d+ tcp .*?\r\n/img,""),Promise.resolve(e)}function cP(e){return e.sdp=kv(e.sdp||"","telephone-event"),Promise.resolve(e)}function dP(e){return e.sdp=(e.sdp||"").replace(/^(a=imageattr:.*?)(x|y)=\[0-/gm,"$1$2=[1:"),Promise.resolve(e)}function fP(e){return e.sdp=kv(e.sdp||"","G722"),Promise.resolve(e)}function hP(e){return t=>(t.sdp=kv(t.sdp||"",e),Promise.resolve(t))}function gP(e){return e.sdp=lP(e.sdp||"","video"),Promise.resolve(e)}function vP(e){let t=e.sdp||"";if(t.search(/^a=mid.*$/gm)===-1){const n=t.match(/^m=.*$/gm),r=t.split(/^m=.*$/gm);n&&n.forEach((i,s)=>{n[s]=i+`
a=mid:`+s}),r.forEach((i,s)=>{n&&n[s]&&(r[s]=i+n[s])}),t=r.join(""),e.sdp=t}return Promise.resolve(e)}function mP(e){if(!e.sdp||!e.type)throw new Error("Invalid SDP");let t=e.sdp;const n=e.type;return t&&(/a=(sendrecv|sendonly|recvonly|inactive)/.test(t)?(t=t.replace(/a=sendrecv\r\n/g,`a=sendonly\r
`),t=t.replace(/a=recvonly\r\n/g,`a=inactive\r
`)):t=t.replace(/(m=[^\r]*\r\n)/g,`$1a=sendonly\r
`)),Promise.resolve({sdp:t,type:n})}const pP=Object.freeze(Object.defineProperty({__proto__:null,addMidLines:vP,cleanJitsiSdpImageattr:dP,holdModifier:mP,stripG722:fP,stripRtpPayload:hP,stripTcpCandidates:uP,stripTelephoneEvent:cP,stripVideo:gP},Symbol.toStringTag,{value:"Module"})),yP=rr(pP);class D_{constructor(t,n,r,i="text/plain",s={}){this.logger=t.getLogger("sip.Messager"),s.params=s.params||{};let a=t.userAgentCore.configuration.aor;if(s.params.fromUri&&(a=typeof s.params.fromUri=="string"?Xt.URIParse(s.params.fromUri):s.params.fromUri),!a)throw new TypeError("Invalid from URI: "+s.params.fromUri);let o=n;if(s.params.toUri&&(o=typeof s.params.toUri=="string"?Xt.URIParse(s.params.toUri):s.params.toUri),!o)throw new TypeError("Invalid to URI: "+s.params.toUri);const l=s.params?Object.assign({},s.params):{},u=(s.extraHeaders||[]).slice(),c={contentDisposition:"render",contentType:i,content:r};this.request=t.userAgentCore.makeOutgoingRequestMessage(Ve.MESSAGE,n,a,o,l,u,c),this.userAgent=t}message(t={}){return this.userAgent.userAgentCore.request(this.request,t.requestDelegate),Promise.resolve()}}const bP=Object.freeze(Object.defineProperty({__proto__:null,Messager:D_},Symbol.toStringTag,{value:"Module"})),SP=rr(bP);var Ct;(function(e){e.Initial="Initial",e.Registered="Registered",e.Unregistered="Unregistered",e.Terminated="Terminated"})(Ct=Ct||(Ct={}));const _P=Object.freeze(Object.defineProperty({__proto__:null,get RegistererState(){return Ct}},Symbol.toStringTag,{value:"Module"})),wP=rr(_P),Pv=rr(sP),xP=rr(rP),CP=rr(eP);var F_={exports:{}};(function(e){var t=function(n,r,i){var s="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(m){m&&(typeof window<"u"||typeof Y>"u"||(Y.navigator={userAgent:s,getUserMedia:function(){}},Y.console||(Y.console={}),(typeof Y.console.log>"u"||typeof Y.console.error>"u")&&(Y.console.error=Y.console.log=Y.console.log||function(){console.log(arguments)}),typeof document>"u"&&(m.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var _={getContext:function(){return _},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return _},m.HTMLVideoElement=function(){}),typeof location>"u"&&(m.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(m.screen={width:0,height:0}),typeof URL>"u"&&(m.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),typeof MediaStreamTrack>"u"&&(m.MediaStreamTrack=function(){}),typeof a>"u"&&(m.RTCPeerConnection=function(){}),m.window=Y))})(typeof Y<"u"?Y:null);var a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;typeof MediaStreamTrack>"u"&&(MediaStreamTrack={});var o=((navigator.connection||{}).type||"unknown").toString().toLowerCase(),l={encryption:"sha-256",audio:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},video:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},bandwidth:{systemBandwidth:0,sentPerSecond:0,encodedPerSecond:0,helper:{audioBytesSent:0,videoBytestSent:0},speed:0},results:{},connectionType:{systemNetworkType:o,systemIpAddress:"192.168.1.2",local:{candidateType:[],transport:[],ipAddress:[],networkType:[]},remote:{candidateType:[],transport:[],ipAddress:[],networkType:[]}},resolutions:{send:{width:0,height:0},recv:{width:0,height:0}},internal:{audio:{send:{},recv:{}},video:{send:{},recv:{}},candidates:{},getSendrecvType:function(m){var _=m.id.split("_").pop();if("isRemote"in m)m.isRemote===!0&&(_="recv"),m.isRemote===!1&&(_="send");else{var T=m.type.split("-")[0];_=T==="outbound"?"send":T==="inbound"?"recv":null}return _}},nomore:function(){d=!0}},u={checkIfOfferer:function(m){m.type==="googLibjingleSession"&&(l.isOfferer=m.googInitiator)}},f=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c=this;if(!(arguments[0]instanceof a))throw"1st argument is not instance of RTCPeerConnection.";c=arguments[0],arguments[1]instanceof MediaStreamTrack&&(n=arguments[1],r=arguments[2],i=arguments[3]);var d=!1;function h(){g(function(m){if(!(!m||!m.forEach)){m.forEach(function(_){Object.keys(u).forEach(function(T){if(typeof u[T]=="function")try{u[T](_)}catch(E){console.error(E.message,E.stack,E)}})});try{c.iceConnectionState.search(/failed|closed|disconnected/gi)!==-1&&(d=!0)}catch{d=!0}d===!0&&(l.datachannel&&(l.datachannel.state="close"),l.ended=!0),l.results=m,l.audio&&l.video&&(l.bandwidth.speed=l.audio.bytesSent-l.bandwidth.helper.audioBytesSent+(l.video.bytesSent-l.bandwidth.helper.videoBytesSent),l.bandwidth.helper.audioBytesSent=l.audio.bytesSent,l.bandwidth.helper.videoBytesSent=l.video.bytesSent),r(l),d||typeof i!=null&&i&&setTimeout(h,i||1e3)}})}function g(m){c.getStats(window.mediaStreamTrack||null).then(function(_){var T=[];_.forEach(function(E){T.push(E)}),m(T)}).catch(m)}u.datachannel=function(m){m.type==="datachannel"&&(l.datachannel={state:m.state})},u.googCertificate=function(m){m.type=="googCertificate"&&(l.encryption=m.googFingerprintAlgorithm),m.type=="certificate"&&(l.encryption=m.fingerprintAlgorithm)},u.checkAudioTracks=function(m){if(m.mediaType==="audio"){var _=l.internal.getSendrecvType(m);if(_){if(l.audio[_].codecs.indexOf(m.googCodecName||"opus")===-1&&l.audio[_].codecs.push(m.googCodecName||"opus"),m.bytesSent){var T=0;l.internal.audio[_].prevBytesSent||(l.internal.audio[_].prevBytesSent=m.bytesSent);var E=m.bytesSent-l.internal.audio[_].prevBytesSent;l.internal.audio[_].prevBytesSent=m.bytesSent,T=E/1024,l.audio[_].availableBandwidth=T.toFixed(1),l.audio.bytesSent=T.toFixed(1)}if(m.bytesReceived){var T=0;l.internal.audio[_].prevBytesReceived||(l.internal.audio[_].prevBytesReceived=m.bytesReceived);var E=m.bytesReceived-l.internal.audio[_].prevBytesReceived;l.internal.audio[_].prevBytesReceived=m.bytesReceived,T=E/1024,l.audio.bytesReceived=T.toFixed(1)}if(m.googTrackId&&l.audio[_].tracks.indexOf(m.googTrackId)===-1&&l.audio[_].tracks.push(m.googTrackId),m.googCurrentDelayMs){var T=0;l.internal.audio.prevGoogCurrentDelayMs||(l.internal.audio.prevGoogCurrentDelayMs=m.googCurrentDelayMs);var E=m.googCurrentDelayMs-l.internal.audio.prevGoogCurrentDelayMs;l.internal.audio.prevGoogCurrentDelayMs=m.googCurrentDelayMs,l.audio.latency=E.toFixed(1),l.audio.latency<0&&(l.audio.latency=0)}if(m.packetsLost){var T=0;l.internal.audio.prevPacketsLost||(l.internal.audio.prevPacketsLost=m.packetsLost);var E=m.packetsLost-l.internal.audio.prevPacketsLost;l.internal.audio.prevPacketsLost=m.packetsLost,l.audio.packetsLost=E.toFixed(1),l.audio.packetsLost<0&&(l.audio.packetsLost=0)}}}},u.checkVideoTracks=function(m){if(m.mediaType==="video"){var _=l.internal.getSendrecvType(m);if(_){if(l.video[_].codecs.indexOf(m.googCodecName||"VP8")===-1&&l.video[_].codecs.push(m.googCodecName||"VP8"),m.bytesSent){var T=0;l.internal.video[_].prevBytesSent||(l.internal.video[_].prevBytesSent=m.bytesSent);var E=m.bytesSent-l.internal.video[_].prevBytesSent;l.internal.video[_].prevBytesSent=m.bytesSent,T=E/1024,l.video[_].availableBandwidth=T.toFixed(1),l.video.bytesSent=T.toFixed(1)}if(m.bytesReceived){var T=0;l.internal.video[_].prevBytesReceived||(l.internal.video[_].prevBytesReceived=m.bytesReceived);var E=m.bytesReceived-l.internal.video[_].prevBytesReceived;l.internal.video[_].prevBytesReceived=m.bytesReceived,T=E/1024,l.video.bytesReceived=T.toFixed(1)}if(m.googFrameHeightReceived&&m.googFrameWidthReceived&&(l.resolutions[_].width=m.googFrameWidthReceived,l.resolutions[_].height=m.googFrameHeightReceived),m.googFrameHeightSent&&m.googFrameWidthSent&&(l.resolutions[_].width=m.googFrameWidthSent,l.resolutions[_].height=m.googFrameHeightSent),m.googTrackId&&l.video[_].tracks.indexOf(m.googTrackId)===-1&&l.video[_].tracks.push(m.googTrackId),m.framerateMean){l.bandwidth.framerateMean=m.framerateMean;var T=0;l.internal.video[_].prevFramerateMean||(l.internal.video[_].prevFramerateMean=m.bitrateMean);var E=m.bytesSent-l.internal.video[_].prevFramerateMean;l.internal.video[_].prevFramerateMean=m.framerateMean,T=E/1024,l.video[_].framerateMean=E.toFixed(1)}if(m.bitrateMean){l.bandwidth.bitrateMean=m.bitrateMean;var T=0;l.internal.video[_].prevBitrateMean||(l.internal.video[_].prevBitrateMean=m.bitrateMean);var E=m.bytesSent-l.internal.video[_].prevBitrateMean;l.internal.video[_].prevBitrateMean=m.bitrateMean,T=E/1024,l.video[_].bitrateMean=E.toFixed(1)}if(m.googCurrentDelayMs){var T=0;l.internal.video.prevGoogCurrentDelayMs||(l.internal.video.prevGoogCurrentDelayMs=m.googCurrentDelayMs);var E=m.googCurrentDelayMs-l.internal.video.prevGoogCurrentDelayMs;l.internal.video.prevGoogCurrentDelayMs=m.googCurrentDelayMs,l.video.latency=E.toFixed(1),l.video.latency<0&&(l.video.latency=0)}if(m.packetsLost){var T=0;l.internal.video.prevPacketsLost||(l.internal.video.prevPacketsLost=m.packetsLost);var E=m.packetsLost-l.internal.video.prevPacketsLost;l.internal.video.prevPacketsLost=m.packetsLost,l.video.packetsLost=E.toFixed(1),l.video.packetsLost<0&&(l.video.packetsLost=0)}}}},u.bweforvideo=function(m){m.type==="VideoBwe"&&(l.bandwidth.availableSendBandwidth=m.googAvailableSendBandwidth,l.bandwidth.googActualEncBitrate=m.googActualEncBitrate,l.bandwidth.googAvailableSendBandwidth=m.googAvailableSendBandwidth,l.bandwidth.googAvailableReceiveBandwidth=m.googAvailableReceiveBandwidth,l.bandwidth.googRetransmitBitrate=m.googRetransmitBitrate,l.bandwidth.googTargetEncBitrate=m.googTargetEncBitrate,l.bandwidth.googBucketDelay=m.googBucketDelay,l.bandwidth.googTransmitBitrate=m.googTransmitBitrate)},u.candidatePair=function(m){if(!(m.type!=="googCandidatePair"&&m.type!=="candidate-pair"&&m.type!=="local-candidate"&&m.type!=="remote-candidate")){if(m.googActiveConnection=="true"){Object.keys(l.internal.candidates).forEach(function($){var M=l.internal.candidates[$];M.ipAddress.indexOf(m.googLocalAddress)!==-1&&(l.connectionType.local.candidateType=M.candidateType,l.connectionType.local.ipAddress=M.ipAddress,l.connectionType.local.networkType=M.networkType,l.connectionType.local.transport=M.transport),M.ipAddress.indexOf(m.googRemoteAddress)!==-1&&(l.connectionType.remote.candidateType=M.candidateType,l.connectionType.remote.ipAddress=M.ipAddress,l.connectionType.remote.networkType=M.networkType,l.connectionType.remote.transport=M.transport)}),l.connectionType.transport=m.googTransportType;var _=l.internal.candidates[m.localCandidateId];_&&_.ipAddress&&(l.connectionType.systemIpAddress=_.ipAddress);var T=l.internal.candidates[m.remoteCandidateId];T&&T.ipAddress&&(l.connectionType.systemIpAddress=T.ipAddress)}if(m.type==="candidate-pair"&&m.selected===!0&&m.nominated===!0&&m.state==="succeeded")var _=l.internal.candidates[m.remoteCandidateId],T=l.internal.candidates[m.remoteCandidateId];if(m.type==="local-candidate"&&(l.connectionType.local.candidateType=m.candidateType,l.connectionType.local.ipAddress=m.ipAddress,l.connectionType.local.networkType=m.networkType,l.connectionType.local.transport=m.mozLocalTransport||m.transport),m.type==="remote-candidate"&&(l.connectionType.remote.candidateType=m.candidateType,l.connectionType.remote.ipAddress=m.ipAddress,l.connectionType.remote.networkType=m.networkType,l.connectionType.remote.transport=m.mozRemoteTransport||m.transport),f){var E=m.localCandidateId?"send":"recv";if(!E)return;if(m.bytesSent){var R=0;l.internal.video[E].prevBytesSent||(l.internal.video[E].prevBytesSent=m.bytesSent);var D=m.bytesSent-l.internal.video[E].prevBytesSent;l.internal.video[E].prevBytesSent=m.bytesSent,R=D/1024,l.video[E].availableBandwidth=R.toFixed(1),l.video.bytesSent=R.toFixed(1)}if(m.bytesReceived){var R=0;l.internal.video[E].prevBytesReceived||(l.internal.video[E].prevBytesReceived=m.bytesReceived);var D=m.bytesReceived-l.internal.video[E].prevBytesReceived;l.internal.video[E].prevBytesReceived=m.bytesReceived,R=D/1024,l.video.bytesReceived=R.toFixed(1)}if(m.availableOutgoingBitrate){var R=0;l.internal.video[E].prevAvailableOutgoingBitrate||(l.internal.video[E].prevAvailableOutgoingBitrate=m.availableOutgoingBitrate);var D=m.availableOutgoingBitrate-l.internal.video[E].prevAvailableOutgoingBitrate;l.internal.video[E].prevAvailableOutgoingBitrate=m.availableOutgoingBitrate,R=D/1024,l.video.availableOutgoingBitrate=R.toFixed(1)}if(m.availableIncomingBitrate){var R=0;l.internal.video[E].prevAvailableIncomingBitrate||(l.internal.video[E].prevAvailableIncomingBitrate=m.availableIncomingBitrate);var D=m.availableIncomingBitrate-l.internal.video[E].prevAvailableIncomingBitrate;l.internal.video[E].prevAvailableIncomingBitrate=m.availableIncomingBitrate,R=D/1024,l.video.availableIncomingBitrate=R.toFixed(1)}}}};var v={},p={},y={},w={};u.localcandidate=function(m){m.type!=="localcandidate"&&m.type!=="local-candidate"||m.id&&(v[m.id]||(v[m.id]=[]),p[m.id]||(p[m.id]=[]),y[m.id]||(y[m.id]=[]),w[m.id]||(w[m.id]=[]),m.candidateType&&v[m.id].indexOf(m.candidateType)===-1&&v[m.id].push(m.candidateType),m.transport&&p[m.id].indexOf(m.transport)===-1&&p[m.id].push(m.transport),m.ipAddress&&y[m.id].indexOf(m.ipAddress+":"+m.portNumber)===-1&&y[m.id].push(m.ipAddress+":"+m.portNumber),m.networkType&&w[m.id].indexOf(m.networkType)===-1&&w[m.id].push(m.networkType),l.internal.candidates[m.id]={candidateType:v[m.id],ipAddress:y[m.id],portNumber:m.portNumber,networkType:w[m.id],priority:m.priority,transport:p[m.id],timestamp:m.timestamp,id:m.id,type:m.type},l.connectionType.local.candidateType=v[m.id],l.connectionType.local.ipAddress=y[m.id],l.connectionType.local.networkType=w[m.id],l.connectionType.local.transport=p[m.id])};var A={},I={},k={},x={};u.remotecandidate=function(m){m.type!=="remotecandidate"&&m.type!=="remote-candidate"||m.id&&(A[m.id]||(A[m.id]=[]),I[m.id]||(I[m.id]=[]),k[m.id]||(k[m.id]=[]),x[m.id]||(x[m.id]=[]),m.candidateType&&A[m.id].indexOf(m.candidateType)===-1&&A[m.id].push(m.candidateType),m.transport&&I[m.id].indexOf(m.transport)===-1&&I[m.id].push(m.transport),m.ipAddress&&k[m.id].indexOf(m.ipAddress+":"+m.portNumber)===-1&&k[m.id].push(m.ipAddress+":"+m.portNumber),m.networkType&&x[m.id].indexOf(m.networkType)===-1&&x[m.id].push(m.networkType),l.internal.candidates[m.id]={candidateType:A[m.id],ipAddress:k[m.id],portNumber:m.portNumber,networkType:x[m.id],priority:m.priority,transport:I[m.id],timestamp:m.timestamp,id:m.id,type:m.type},l.connectionType.remote.candidateType=A[m.id],l.connectionType.remote.ipAddress=k[m.id],l.connectionType.remote.networkType=x[m.id],l.connectionType.remote.transport=I[m.id])},u.dataSentReceived=function(m){!m.googCodecName||m.mediaType!=="video"&&m.mediaType!=="audio"||(m.bytesSent&&(l[m.mediaType].bytesSent=parseInt(m.bytesSent)),m.bytesReceived&&(l[m.mediaType].bytesReceived=parseInt(m.bytesReceived)))},u.inboundrtp=function(m){if(f&&m.type==="inbound-rtp"){var _=m.mediaType||"audio",T=m.isRemote?"recv":"send";if(T){if(m.bytesSent){var E=0;l.internal[_][T].prevBytesSent||(l.internal[_][T].prevBytesSent=m.bytesSent);var R=m.bytesSent-l.internal[_][T].prevBytesSent;l.internal[_][T].prevBytesSent=m.bytesSent,E=R/1024,l[_][T].availableBandwidth=E.toFixed(1),l[_].bytesSent=E.toFixed(1)}if(m.bytesReceived){var E=0;l.internal[_][T].prevBytesReceived||(l.internal[_][T].prevBytesReceived=m.bytesReceived);var R=m.bytesReceived-l.internal[_][T].prevBytesReceived;l.internal[_][T].prevBytesReceived=m.bytesReceived,E=R/1024,l[_].bytesReceived=E.toFixed(1)}}}},u.outboundrtp=function(m){if(f&&m.type==="outbound-rtp"){var _=m.mediaType||"audio",T=m.isRemote?"recv":"send";if(T){if(m.bytesSent){var E=0;l.internal[_][T].prevBytesSent||(l.internal[_][T].prevBytesSent=m.bytesSent);var R=m.bytesSent-l.internal[_][T].prevBytesSent;l.internal[_][T].prevBytesSent=m.bytesSent,E=R/1024,l[_][T].availableBandwidth=E.toFixed(1),l[_].bytesSent=E.toFixed(1)}if(m.bytesReceived){var E=0;l.internal[_][T].prevBytesReceived||(l.internal[_][T].prevBytesReceived=m.bytesReceived);var R=m.bytesReceived-l.internal[_][T].prevBytesReceived;l.internal[_][T].prevBytesReceived=m.bytesReceived,E=R/1024,l[_].bytesReceived=E.toFixed(1)}}}},u.track=function(m){if(f&&m.type==="track"){var _=m.remoteSource===!0?"send":"recv";m.frameWidth&&m.frameHeight&&(l.resolutions[_].width=m.frameWidth,l.resolutions[_].height=m.frameHeight)}};var C={audio:{send:[],recv:[]},video:{send:[],recv:[]}};u.ssrc=function(m){if(!(!m.googCodecName||m.mediaType!=="video"&&m.mediaType!=="audio")&&m.type==="ssrc"){var _=m.id.split("_").pop();C[m.mediaType][_].indexOf(m.ssrc)===-1&&C[m.mediaType][_].push(m.ssrc),l[m.mediaType][_].streams=C[m.mediaType][_].length}},h()};e.exports=t})(F_);var EP=F_.exports,It;(function(e){e.Initial="Initial",e.Published="Published",e.Unpublished="Unpublished",e.Terminated="Terminated"})(It=It||(It={}));class TP{constructor(t,n,r,i={}){this.disposed=!1,this._state=It.Initial,this._stateEventEmitter=new ms,this.userAgent=t,i.extraHeaders=(i.extraHeaders||[]).slice(),i.contentType=i.contentType||"text/plain",typeof i.expires!="number"||i.expires%1!==0?i.expires=3600:i.expires=Number(i.expires),typeof i.unpublishOnClose!="boolean"&&(i.unpublishOnClose=!0),this.target=n,this.event=r,this.options=i,this.pubRequestExpires=i.expires,this.logger=t.getLogger("sip.Publisher");const s=i.params||{},a=s.fromUri?s.fromUri:t.userAgentCore.configuration.aor,o=s.toUri?s.toUri:n;let l;if(i.body&&i.contentType){const f="render",c=i.contentType,d=i.body;l={contentDisposition:f,contentType:c,content:d}}const u=(i.extraHeaders||[]).slice();this.request=t.userAgentCore.makeOutgoingRequestMessage(Ve.PUBLISH,n,a,o,s,u,l),this.id=this.target.toString()+":"+this.event,this.userAgent._publishers[this.id]=this}dispose(){return this.disposed?Promise.resolve():(this.disposed=!0,this.logger.log(`Publisher ${this.id} in state ${this.state} is being disposed`),delete this.userAgent._publishers[this.id],this.options.unpublishOnClose&&this.state===It.Published?this.unpublish():(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestExpires=0,this.pubRequestEtag=void 0,Promise.resolve()))}get state(){return this._state}get stateChange(){return this._stateEventEmitter}publish(t,n={}){if(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.options.body=t,this.pubRequestBody=this.options.body,this.pubRequestExpires===0){if(this.options.expires===void 0)throw new Error("Expires undefined.");this.pubRequestExpires=this.options.expires,this.pubRequestEtag=void 0}return this.sendPublishRequest(),Promise.resolve()}unpublish(t={}){return this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestExpires=0,this.pubRequestEtag!==void 0&&this.sendPublishRequest(),Promise.resolve()}receiveResponse(t){const n=t.statusCode||0;switch(!0){case/^1[0-9]{2}$/.test(n.toString()):break;case/^2[0-9]{2}$/.test(n.toString()):if(t.hasHeader("SIP-ETag")?this.pubRequestEtag=t.getHeader("SIP-ETag"):this.logger.warn("SIP-ETag header missing in a 200-class response to PUBLISH"),t.hasHeader("Expires")){const r=Number(t.getHeader("Expires"));typeof r=="number"&&r>=0&&r<=this.pubRequestExpires?this.pubRequestExpires=r:this.logger.warn("Bad Expires header in a 200-class response to PUBLISH")}else this.logger.warn("Expires header missing in a 200-class response to PUBLISH");this.pubRequestExpires!==0?(this.publishRefreshTimer=setTimeout(()=>this.refreshRequest(),this.pubRequestExpires*900),this._state!==It.Published&&this.stateTransition(It.Published)):this.stateTransition(It.Unpublished);break;case/^412$/.test(n.toString()):if(this.pubRequestEtag!==void 0&&this.pubRequestExpires!==0){if(this.logger.warn("412 response to PUBLISH, recovering"),this.pubRequestEtag=void 0,this.options.body===void 0)throw new Error("Body undefined.");this.publish(this.options.body)}else this.logger.warn("412 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.stateTransition(It.Unpublished),this.stateTransition(It.Terminated);break;case/^423$/.test(n.toString()):if(this.pubRequestExpires!==0&&t.hasHeader("Min-Expires")){const r=Number(t.getHeader("Min-Expires"));if(typeof r=="number"||r>this.pubRequestExpires){if(this.logger.warn("423 code in response to PUBLISH, adjusting the Expires value and trying to recover"),this.pubRequestExpires=r,this.options.body===void 0)throw new Error("Body undefined.");this.publish(this.options.body)}else this.logger.warn("Bad 423 response Min-Expires header received for PUBLISH"),this.pubRequestExpires=0,this.stateTransition(It.Unpublished),this.stateTransition(It.Terminated)}else this.logger.warn("423 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.stateTransition(It.Unpublished),this.stateTransition(It.Terminated);break;default:this.pubRequestExpires=0,this.stateTransition(It.Unpublished),this.stateTransition(It.Terminated);break}this.pubRequestExpires===0&&(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestEtag=void 0)}send(){return this.userAgent.userAgentCore.publish(this.request,{onAccept:t=>this.receiveResponse(t.message),onProgress:t=>this.receiveResponse(t.message),onRedirect:t=>this.receiveResponse(t.message),onReject:t=>this.receiveResponse(t.message),onTrying:t=>this.receiveResponse(t.message)})}refreshRequest(){if(this.publishRefreshTimer&&(clearTimeout(this.publishRefreshTimer),this.publishRefreshTimer=void 0),this.pubRequestBody=void 0,this.pubRequestEtag===void 0)throw new Error("Etag undefined");if(this.pubRequestExpires===0)throw new Error("Expires zero");this.sendPublishRequest()}sendPublishRequest(){const t=Object.assign({},this.options);t.extraHeaders=(this.options.extraHeaders||[]).slice(),t.extraHeaders.push("Event: "+this.event),t.extraHeaders.push("Expires: "+this.pubRequestExpires),this.pubRequestEtag!==void 0&&t.extraHeaders.push("SIP-If-Match: "+this.pubRequestEtag);const n=this.target,r=this.options.params||{};let i;if(this.pubRequestBody!==void 0){if(this.options.contentType===void 0)throw new Error("Content type undefined.");i={body:this.pubRequestBody,contentType:this.options.contentType}}let s;return i&&(s=to(i)),this.request=this.userAgent.userAgentCore.makeOutgoingRequestMessage(Ve.PUBLISH,n,r.fromUri?r.fromUri:this.userAgent.userAgentCore.configuration.aor,r.toUri?r.toUri:this.target,r,t.extraHeaders,s),this.send()}stateTransition(t){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case It.Initial:t!==It.Published&&t!==It.Unpublished&&t!==It.Terminated&&n();break;case It.Published:t!==It.Unpublished&&t!==It.Terminated&&n();break;case It.Unpublished:t!==It.Published&&t!==It.Terminated&&n();break;case It.Terminated:n();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Publication transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===It.Terminated&&this.dispose()}}class Qr{constructor(t,n={}){this.disposed=!1,this._contacts=[],this._retryAfter=void 0,this._state=Ct.Initial,this._waiting=!1,this._stateEventEmitter=new ms,this._waitingEventEmitter=new ms,this.userAgent=t;const r=t.configuration.uri.clone();if(r.user=void 0,this.options=Object.assign(Object.assign(Object.assign({},Qr.defaultOptions()),{registrar:r}),Qr.stripUndefinedProperties(n)),this.options.extraContactHeaderParams=(this.options.extraContactHeaderParams||[]).slice(),this.options.extraHeaders=(this.options.extraHeaders||[]).slice(),!this.options.registrar)throw new Error("Registrar undefined.");if(this.options.registrar=this.options.registrar.clone(),this.options.regId&&!this.options.instanceId?this.options.instanceId=this.userAgent.instanceId:!this.options.regId&&this.options.instanceId&&(this.options.regId=1),this.options.instanceId&&Xt.parse(this.options.instanceId,"uuid")===-1)throw new Error("Invalid instanceId.");if(this.options.regId&&this.options.regId<0)throw new Error("Invalid regId.");const i=this.options.registrar,s=this.options.params&&this.options.params.fromUri||t.userAgentCore.configuration.aor,a=this.options.params&&this.options.params.toUri||t.configuration.uri,o=this.options.params||{},l=(n.extraHeaders||[]).slice();if(this.request=t.userAgentCore.makeOutgoingRequestMessage(Ve.REGISTER,i,s,a,o,l,void 0),this.expires=this.options.expires||Qr.defaultExpires,this.expires<0)throw new Error("Invalid expires.");if(this.refreshFrequency=this.options.refreshFrequency||Qr.defaultRefreshFrequency,this.refreshFrequency<50||this.refreshFrequency>99)throw new Error("Invalid refresh frequency. The value represents a percentage of the expiration time and should be between 50 and 99.");this.logger=t.getLogger("sip.Registerer"),this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(u=>{const f=this.options[u];switch(u){case"registrar":this.logger.log("· "+u+": "+f);break;default:this.logger.log("· "+u+": "+JSON.stringify(f))}})),this.id=this.request.callId+this.request.from.parameters.tag,this.userAgent._registerers[this.id]=this}static defaultOptions(){return{expires:Qr.defaultExpires,extraContactHeaderParams:[],extraHeaders:[],logConfiguration:!0,instanceId:"",params:{},regId:0,registrar:new Lr("sip","anonymous","anonymous.invalid"),refreshFrequency:Qr.defaultRefreshFrequency}}static stripUndefinedProperties(t){return Object.keys(t).reduce((n,r)=>(t[r]!==void 0&&(n[r]=t[r]),n),{})}get contacts(){return this._contacts.slice()}get retryAfter(){return this._retryAfter}get state(){return this._state}get stateChange(){return this._stateEventEmitter}dispose(){return this.disposed?Promise.resolve():(this.disposed=!0,this.logger.log(`Registerer ${this.id} in state ${this.state} is being disposed`),delete this.userAgent._registerers[this.id],new Promise(t=>{const n=()=>{if(!this.waiting&&this._state===Ct.Registered){this.stateChange.addListener(()=>{this.terminated(),t()},{once:!0}),this.unregister();return}this.terminated(),t()};this.waiting?this.waitingChange.addListener(()=>{n()},{once:!0}):n()}))}register(t={}){if(this.state===Ct.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const i=new lc("REGISTER request already in progress, waiting for final response");return Promise.reject(i)}t.requestOptions&&(this.options=Object.assign(Object.assign({},this.options),t.requestOptions));const n=(this.options.extraHeaders||[]).slice();n.push("Contact: "+this.generateContactHeader(this.expires)),n.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.request.extraHeaders=n,this.waitingToggle(!0);const r=this.userAgent.userAgentCore.register(this.request,{onAccept:i=>{let s;i.message.hasHeader("expires")&&(s=Number(i.message.getHeader("expires"))),this._contacts=i.message.getHeaders("contact");let a=this._contacts.length;if(!a){this.logger.error("No Contact header in response to REGISTER, dropping response."),this.unregistered();return}let o;for(;a--;){if(o=i.message.parseHeader("contact",a),!o)throw new Error("Contact undefined");if(this.userAgent.contact.pubGruu&&Xh(o.uri,this.userAgent.contact.pubGruu)){s=Number(o.getParam("expires"));break}if(this.userAgent.configuration.contactName===""){if(o.uri.user===this.userAgent.contact.uri.user){s=Number(o.getParam("expires"));break}}else if(Xh(o.uri,this.userAgent.contact.uri)){s=Number(o.getParam("expires"));break}o=void 0}if(o===void 0){this.logger.error("No Contact header pointing to us, dropping response"),this.unregistered(),this.waitingToggle(!1);return}if(s===void 0){this.logger.error("Contact pointing to us is missing expires parameter, dropping response"),this.unregistered(),this.waitingToggle(!1);return}if(o.hasParam("temp-gruu")){const l=o.getParam("temp-gruu");l&&(this.userAgent.contact.tempGruu=Xt.URIParse(l.replace(/"/g,"")))}if(o.hasParam("pub-gruu")){const l=o.getParam("pub-gruu");l&&(this.userAgent.contact.pubGruu=Xt.URIParse(l.replace(/"/g,"")))}this.registered(s),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(i),this.waitingToggle(!1)},onProgress:i=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(i)},onRedirect:i=>{this.logger.error("Redirect received. Not supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(i),this.waitingToggle(!1)},onReject:i=>{if(i.message.statusCode===423){if(!i.message.hasHeader("min-expires")){this.logger.error("423 response received for REGISTER without Min-Expires, dropping response"),this.unregistered(),this.waitingToggle(!1);return}this.expires=Number(i.message.getHeader("min-expires")),this.waitingToggle(!1),this.register();return}this.logger.warn(`Failed to register, status code ${i.message.statusCode}`);let s=NaN;if(i.message.statusCode===500||i.message.statusCode===503){const a=i.message.getHeader("retry-after");a&&(s=Number.parseInt(a,void 0))}this._retryAfter=isNaN(s)?void 0:s,this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(i),this._retryAfter=void 0,this.waitingToggle(!1)},onTrying:i=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(i)}});return Promise.resolve(r)}unregister(t={}){if(this.state===Ct.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed&&this.state!==Ct.Registered)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const i=new lc("REGISTER request already in progress, waiting for final response");return Promise.reject(i)}this._state!==Ct.Registered&&!t.all&&this.logger.warn("Not currently registered, but sending an unregister anyway.");const n=(t.requestOptions&&t.requestOptions.extraHeaders||[]).slice();this.request.extraHeaders=n,t.all?(n.push("Contact: *"),n.push("Expires: 0")):n.push("Contact: "+this.generateContactHeader(0)),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.registrationTimer!==void 0&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.waitingToggle(!0);const r=this.userAgent.userAgentCore.register(this.request,{onAccept:i=>{this._contacts=i.message.getHeaders("contact"),this.unregistered(),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(i),this.waitingToggle(!1)},onProgress:i=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(i)},onRedirect:i=>{this.logger.error("Unregister redirected. Not currently supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(i),this.waitingToggle(!1)},onReject:i=>{this.logger.error(`Unregister rejected with status code ${i.message.statusCode}`),this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(i),this.waitingToggle(!1)},onTrying:i=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(i)}});return Promise.resolve(r)}clearTimers(){this.registrationTimer!==void 0&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.registrationExpiredTimer!==void 0&&(clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=void 0)}generateContactHeader(t){let n=this.userAgent.contact.toString({register:!0});return this.options.regId&&this.options.instanceId&&(n+=";reg-id="+this.options.regId,n+=';+sip.instance="<urn:uuid:'+this.options.instanceId+'>"'),this.options.extraContactHeaderParams&&this.options.extraContactHeaderParams.forEach(r=>{n+=";"+r}),n+=";expires="+t,n}registered(t){this.clearTimers(),this.registrationTimer=setTimeout(()=>{this.registrationTimer=void 0,this.register()},this.refreshFrequency/100*t*1e3),this.registrationExpiredTimer=setTimeout(()=>{this.logger.warn("Registration expired"),this.unregistered()},t*1e3),this._state!==Ct.Registered&&this.stateTransition(Ct.Registered)}unregistered(){this.clearTimers(),this._state!==Ct.Unregistered&&this.stateTransition(Ct.Unregistered)}terminated(){this.clearTimers(),this._state!==Ct.Terminated&&this.stateTransition(Ct.Terminated)}stateTransition(t){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case Ct.Initial:t!==Ct.Registered&&t!==Ct.Unregistered&&t!==Ct.Terminated&&n();break;case Ct.Registered:t!==Ct.Unregistered&&t!==Ct.Terminated&&n();break;case Ct.Unregistered:t!==Ct.Registered&&t!==Ct.Terminated&&n();break;case Ct.Terminated:n();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Registration transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===Ct.Terminated&&this.dispose()}get waiting(){return this._waiting}get waitingChange(){return this._waitingEventEmitter}waitingToggle(t){if(this._waiting===t)throw new Error(`Invalid waiting transition from ${this._waiting} to ${t}`);this._waiting=t,this.logger.log(`Waiting toggled to ${this._waiting}`),this._waitingEventEmitter.emit(this._waiting)}waitingWarning(){let t="An attempt was made to send a REGISTER request while a prior one was still in progress.";t+=" RFC 3261 requires UAs MUST NOT send a new registration until they have received a final response",t+=" from the registrar for the previous one or the previous REGISTER request has timed out.",t+=" Note that if the transport disconnects, you still must wait for the prior request to time out before",t+=" sending a new REGISTER request or alternatively dispose of the current Registerer and create a new Registerer.",this.logger.warn(t)}stateError(){let n=`An attempt was made to send a REGISTER request when the Registerer ${this.state===Ct.Terminated?"is in 'Terminated' state":"has been disposed"}.`;n+=" The Registerer transitions to 'Terminated' when Registerer.dispose() is called.",n+=" Perhaps you called UserAgent.stop() which dipsoses of all Registerers?",this.logger.error(n)}}Qr.defaultExpires=600;Qr.defaultRefreshFrequency=99;var Ut;(function(e){e.Initial="Initial",e.NotifyWait="NotifyWait",e.Subscribed="Subscribed",e.Terminated="Terminated"})(Ut=Ut||(Ut={}));let O_=class{constructor(t,n={}){this._disposed=!1,this._state=Ut.Initial,this._logger=t.getLogger("sip.Subscription"),this._stateEventEmitter=new ms,this._userAgent=t,this.delegate=n.delegate}dispose(){return this._disposed||(this._disposed=!0,this._stateEventEmitter.removeAllListeners()),Promise.resolve()}get dialog(){return this._dialog}get disposed(){return this._disposed}get state(){return this._state}get stateChange(){return this._stateEventEmitter}stateTransition(t){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case Ut.Initial:t!==Ut.NotifyWait&&t!==Ut.Terminated&&n();break;case Ut.NotifyWait:t!==Ut.Subscribed&&t!==Ut.Terminated&&n();break;case Ut.Subscribed:t!==Ut.Terminated&&n();break;case Ut.Terminated:n();break;default:throw new Error("Unrecognized state.")}this._state!==t&&(this._state=t,this._logger.log(`Subscription ${this._dialog?this._dialog.id:void 0} transitioned to ${this._state}`),this._stateEventEmitter.emit(this._state),t===Ut.Terminated&&this.dispose())}};class AP extends O_{constructor(t,n,r,i={}){super(t,i),this.body=void 0,this.logger=t.getLogger("sip.Subscriber"),i.body&&(this.body={body:i.body,contentType:i.contentType?i.contentType:"application/sdp"}),this.targetURI=n,this.event=r,i.expires===void 0?this.expires=3600:typeof i.expires!="number"?(this.logger.warn('Option "expires" must be a number. Using default of 3600.'),this.expires=3600):this.expires=i.expires,this.extraHeaders=(i.extraHeaders||[]).slice(),this.subscriberRequest=this.initSubscriberRequest(),this.outgoingRequestMessage=this.subscriberRequest.message,this.id=this.outgoingRequestMessage.callId+this.outgoingRequestMessage.from.parameters.tag+this.event,this._userAgent._subscriptions[this.id]=this}dispose(){return this.disposed?Promise.resolve():(this.logger.log(`Subscription ${this.id} in state ${this.state} is being disposed`),delete this._userAgent._subscriptions[this.id],this.retryAfterTimer&&(clearTimeout(this.retryAfterTimer),this.retryAfterTimer=void 0),this.subscriberRequest.dispose(),super.dispose().then(()=>{if(this.state===Ut.Subscribed){if(!this._dialog)throw new Error("Dialog undefined.");if(this._dialog.subscriptionState===nt.Pending||this._dialog.subscriptionState===nt.Active){const t=this._dialog;return new Promise((n,r)=>{t.delegate={onTerminated:()=>n()},t.unsubscribe()})}}}))}subscribe(t={}){switch(this.subscriberRequest.state){case nt.Initial:this.state===Ut.Initial&&this.stateTransition(Ut.NotifyWait),this.subscriberRequest.subscribe().then(n=>{n.success?(n.success.subscription&&(this._dialog=n.success.subscription,this._dialog.delegate={onNotify:r=>this.onNotify(r),onRefresh:r=>this.onRefresh(r),onTerminated:()=>{this.state!==Ut.Terminated&&this.stateTransition(Ut.Terminated)}}),this.onNotify(n.success.request)):n.failure&&this.unsubscribe()});break;case nt.NotifyWait:break;case nt.Pending:break;case nt.Active:if(this._dialog){const n=this._dialog.refresh();n.delegate={onAccept:r=>this.onAccepted(r),onRedirect:r=>this.unsubscribe(),onReject:r=>this.unsubscribe()}}break;case nt.Terminated:break}return Promise.resolve()}unsubscribe(t={}){if(this.disposed)return Promise.resolve();switch(this.subscriberRequest.state){case nt.Initial:break;case nt.NotifyWait:break;case nt.Pending:this._dialog&&this._dialog.unsubscribe();break;case nt.Active:this._dialog&&this._dialog.unsubscribe();break;case nt.Terminated:break;default:throw new Error("Unknown state.")}return this.stateTransition(Ut.Terminated),Promise.resolve()}_refresh(){return this.subscriberRequest.state===nt.Active?this.subscribe():Promise.resolve()}onAccepted(t){}onNotify(t){if(this.disposed){t.accept();return}if(this.state!==Ut.Subscribed&&this.stateTransition(Ut.Subscribed),this.delegate&&this.delegate.onNotify){const r=new bl(t);this.delegate.onNotify(r)}else t.accept();const n=t.message.parseHeader("Subscription-State");if(n&&n.state)switch(n.state){case"terminated":if(n.reason)switch(this.logger.log(`Terminated subscription with reason ${n.reason}`),n.reason){case"deactivated":case"timeout":this.initSubscriberRequest(),this.subscribe();return;case"probation":case"giveup":this.initSubscriberRequest(),n.params&&n.params["retry-after"]?this.retryAfterTimer=setTimeout(()=>{this.subscribe()},n.params["retry-after"]):this.subscribe();return}this.unsubscribe();break}}onRefresh(t){t.delegate={onAccept:n=>this.onAccepted(n)}}initSubscriberRequest(){const t={extraHeaders:this.extraHeaders,body:this.body?to(this.body):void 0};return this.subscriberRequest=new IP(this._userAgent.userAgentCore,this.targetURI,this.event,this.expires,t),this.subscriberRequest.delegate={onAccept:n=>this.onAccepted(n)},this.subscriberRequest}}class IP{constructor(t,n,r,i,s,a){this.core=t,this.target=n,this.event=r,this.expires=i,this.subscribed=!1,this.logger=t.loggerFactory.getLogger("sip.Subscriber"),this.delegate=a;const o="Allow: "+Ti.toString(),l=(s&&s.extraHeaders||[]).slice();l.push(o),l.push("Event: "+this.event),l.push("Expires: "+this.expires),l.push("Contact: "+this.core.configuration.contact.toString());const u=s&&s.body;this.message=t.makeOutgoingRequestMessage(Ve.SUBSCRIBE,this.target,this.core.configuration.aor,this.target,{},l,u)}dispose(){this.request&&(this.request.waitNotifyStop(),this.request.dispose(),this.request=void 0)}get state(){return this.subscription?this.subscription.subscriptionState:this.subscribed?nt.NotifyWait:nt.Initial}subscribe(){return this.subscribed?Promise.reject(new Error("Not in initial state. Did you call subscribe more than once?")):(this.subscribed=!0,new Promise(t=>{if(!this.message)throw new Error("Message undefined.");this.request=this.core.subscribe(this.message,{onAccept:n=>{this.delegate&&this.delegate.onAccept&&this.delegate.onAccept(n)},onNotify:n=>{this.subscription=n.subscription,this.subscription&&(this.subscription.autoRefresh=!0),t({success:n})},onNotifyTimeout:()=>{t({failure:{}})},onRedirect:n=>{t({failure:{response:n}})},onReject:n=>{t({failure:{response:n}})}})}))}}const RP=Object.freeze(Object.defineProperty({__proto__:null,Ack:C_,Bye:E_,Cancel:w_,ContentTypeUnsupportedError:oc,EmitterImpl:ms,Info:T_,Invitation:k_,Inviter:P_,Message:Rv,Messager:D_,Notification:bl,Publisher:TP,get PublisherState(){return It},Referral:A_,Registerer:Qr,get RegistererState(){return Ct},RequestPendingError:lc,get SIPExtension(){return wr},Session:uc,SessionDescriptionHandlerError:x_,get SessionState(){return be},SessionTerminatedError:qu,StateTransitionError:Fa,Subscriber:AP,Subscription:O_,get SubscriptionState(){return Ut},get TransportState(){return Qe},UserAgent:Ka,UserAgentRegisteredOptionTags:R_,get UserAgentState(){return cn}},Symbol.toStringTag,{value:"Module"})),N_=rr(RP);var jl={},Dv={exports:{}},Ga=typeof Reflect=="object"?Reflect:null,iy=Ga&&typeof Ga.apply=="function"?Ga.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Uu;Ga&&typeof Ga.ownKeys=="function"?Uu=Ga.ownKeys:Object.getOwnPropertySymbols?Uu=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Uu=function(t){return Object.getOwnPropertyNames(t)};function kP(e){console&&console.warn&&console.warn(e)}var $_=Number.isNaN||function(t){return t!==t};function Dt(){Dt.init.call(this)}Dv.exports=Dt;Dv.exports.once=OP;Dt.EventEmitter=Dt;Dt.prototype._events=void 0;Dt.prototype._eventsCount=0;Dt.prototype._maxListeners=void 0;var sy=10;function od(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Dt,"defaultMaxListeners",{enumerable:!0,get:function(){return sy},set:function(e){if(typeof e!="number"||e<0||$_(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");sy=e}});Dt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||$_(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function M_(e){return e._maxListeners===void 0?Dt.defaultMaxListeners:e._maxListeners}Dt.prototype.getMaxListeners=function(){return M_(this)};Dt.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[t];if(l===void 0)return!1;if(typeof l=="function")iy(l,this,n);else for(var u=l.length,f=j_(l,u),r=0;r<u;++r)iy(f[r],this,n);return!0};function V_(e,t,n,r){var i,s,a;if(od(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),a===void 0)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),i=M_(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,kP(o)}return e}Dt.prototype.addListener=function(t,n){return V_(this,t,n,!1)};Dt.prototype.on=Dt.prototype.addListener;Dt.prototype.prependListener=function(t,n){return V_(this,t,n,!0)};function PP(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B_(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=PP.bind(r);return i.listener=n,r.wrapFn=i,i}Dt.prototype.once=function(t,n){return od(n),this.on(t,B_(this,t,n)),this};Dt.prototype.prependOnceListener=function(t,n){return od(n),this.prependListener(t,B_(this,t,n)),this};Dt.prototype.removeListener=function(t,n){var r,i,s,a,o;if(od(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){o=r[a].listener,s=a;break}if(s<0)return this;s===0?r.shift():DP(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,o||n)}return this};Dt.prototype.off=Dt.prototype.removeListener;Dt.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function L_(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?FP(i):j_(i,i.length)}Dt.prototype.listeners=function(t){return L_(this,t,!0)};Dt.prototype.rawListeners=function(t){return L_(this,t,!1)};Dt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):H_.call(e,t)};Dt.prototype.listenerCount=H_;function H_(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Dt.prototype.eventNames=function(){return this._eventsCount>0?Uu(this._events):[]};function j_(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function DP(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function FP(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function OP(e,t){return new Promise(function(n,r){function i(a){e.removeListener(t,s),r(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}q_(e,t,s,{once:!0}),t!=="error"&&NP(e,i,{once:!0})})}function NP(e,t,n){typeof e.on=="function"&&q_(e,"error",t,n)}function q_(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var U_=Dv.exports;const $P=rr(tP);var yu={};//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var z_;function Le(){return z_.apply(null,arguments)}function MP(e){z_=e}function Ur(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function zs(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fv(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(bt(e,t))return!1;return!0}function Jn(e){return e===void 0}function Fi(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function ql(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function K_(e,t){var n=[],r,i=e.length;for(r=0;r<i;++r)n.push(t(e[r],r));return n}function as(e,t){for(var n in t)bt(t,n)&&(e[n]=t[n]);return bt(t,"toString")&&(e.toString=t.toString),bt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function fi(e,t,n,r){return mw(e,t,n,r,!0).utc()}function VP(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ot(e){return e._pf==null&&(e._pf=VP()),e._pf}var Zh;Array.prototype.some?Zh=Array.prototype.some:Zh=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function Ov(e){if(e._isValid==null){var t=ot(e),n=Zh.call(t.parsedDateParts,function(i){return i!=null}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r}return e._isValid}function ld(e){var t=fi(NaN);return e!=null?as(ot(t),e):ot(t).userInvalidated=!0,t}var ay=Le.momentProperties=[],rh=!1;function Nv(e,t){var n,r,i,s=ay.length;if(Jn(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Jn(t._i)||(e._i=t._i),Jn(t._f)||(e._f=t._f),Jn(t._l)||(e._l=t._l),Jn(t._strict)||(e._strict=t._strict),Jn(t._tzm)||(e._tzm=t._tzm),Jn(t._isUTC)||(e._isUTC=t._isUTC),Jn(t._offset)||(e._offset=t._offset),Jn(t._pf)||(e._pf=ot(t)),Jn(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)r=ay[n],i=t[r],Jn(i)||(e[r]=i);return e}function Ul(e){Nv(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),rh===!1&&(rh=!0,Le.updateOffset(this),rh=!1)}function zr(e){return e instanceof Ul||e!=null&&e._isAMomentObject!=null}function G_(e){Le.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Pr(e,t){var n=!0;return as(function(){if(Le.deprecationHandler!=null&&Le.deprecationHandler(null,e),n){var r=[],i,s,a,o=arguments.length;for(s=0;s<o;s++){if(i="",typeof arguments[s]=="object"){i+=`
[`+s+"] ";for(a in arguments[0])bt(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[s];r.push(i)}G_(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var oy={};function W_(e,t){Le.deprecationHandler!=null&&Le.deprecationHandler(e,t),oy[e]||(G_(t),oy[e]=!0)}Le.suppressDeprecationWarnings=!1;Le.deprecationHandler=null;function hi(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function BP(e){var t,n;for(n in e)bt(e,n)&&(t=e[n],hi(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Qh(e,t){var n=as({},e),r;for(r in t)bt(t,r)&&(zs(e[r])&&zs(t[r])?(n[r]={},as(n[r],e[r]),as(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)bt(e,r)&&!bt(t,r)&&zs(e[r])&&(n[r]=as({},n[r]));return n}function $v(e){e!=null&&this.set(e)}var eg;Object.keys?eg=Object.keys:eg=function(e){var t,n=[];for(t in e)bt(e,t)&&n.push(t);return n};var LP={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function HP(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return hi(r)?r.call(t,n):r}function si(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Mv=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,bu=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ih={},Wa={};function We(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(Wa[e]=i),t&&(Wa[t[0]]=function(){return si(i.apply(this,arguments),t[1],t[2])}),n&&(Wa[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function jP(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function qP(e){var t=e.match(Mv),n,r;for(n=0,r=t.length;n<r;n++)Wa[t[n]]?t[n]=Wa[t[n]]:t[n]=jP(t[n]);return function(i){var s="",a;for(a=0;a<r;a++)s+=hi(t[a])?t[a].call(i,e):t[a];return s}}function zu(e,t){return e.isValid()?(t=Y_(t,e.localeData()),ih[t]=ih[t]||qP(t),ih[t](e)):e.localeData().invalidDate()}function Y_(e,t){var n=5;function r(i){return t.longDateFormat(i)||i}for(bu.lastIndex=0;n>=0&&bu.test(e);)e=e.replace(bu,r),bu.lastIndex=0,n-=1;return e}var UP={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function zP(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(Mv).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var KP="Invalid date";function GP(){return this._invalidDate}var WP="%d",YP=/\d{1,2}/;function JP(e){return this._ordinal.replace("%d",e)}var XP={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ZP(e,t,n,r){var i=this._relativeTime[n];return hi(i)?i(e,t,n,r):i.replace(/%d/i,e)}function QP(e,t){var n=this._relativeTime[e>0?"future":"past"];return hi(n)?n(t):n.replace(/%s/i,t)}var Xo={};function Vn(e,t){var n=e.toLowerCase();Xo[n]=Xo[n+"s"]=Xo[t]=e}function Dr(e){return typeof e=="string"?Xo[e]||Xo[e.toLowerCase()]:void 0}function Vv(e){var t={},n,r;for(r in e)bt(e,r)&&(n=Dr(r),n&&(t[n]=e[r]));return t}var J_={};function Bn(e,t){J_[e]=t}function eD(e){var t=[],n;for(n in e)bt(e,n)&&t.push({unit:n,priority:J_[n]});return t.sort(function(r,i){return r.priority-i.priority}),t}function ud(e){return e%4===0&&e%100!==0||e%400===0}function Sr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ct(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Sr(t)),n}function mo(e,t){return function(n){return n!=null?(X_(this,e,n),Le.updateOffset(this,t),this):cc(this,e)}}function cc(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function X_(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&ud(e.year())&&e.month()===1&&e.date()===29?(n=ct(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),vd(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function tD(e){return e=Dr(e),hi(this[e])?this[e]():this}function nD(e,t){if(typeof e=="object"){e=Vv(e);var n=eD(e),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](e[n[r].unit])}else if(e=Dr(e),hi(this[e]))return this[e](t);return this}var Z_=/\d/,fr=/\d\d/,Q_=/\d{3}/,Bv=/\d{4}/,cd=/[+-]?\d{6}/,Lt=/\d\d?/,ew=/\d\d\d\d?/,tw=/\d\d\d\d\d\d?/,dd=/\d{1,3}/,Lv=/\d{1,4}/,fd=/[+-]?\d{1,6}/,po=/\d+/,hd=/[+-]?\d+/,rD=/Z|[+-]\d\d:?\d\d/gi,gd=/Z|[+-]\d\d(?::?\d\d)?/gi,iD=/[+-]?\d+(\.\d{1,3})?/,zl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,dc;dc={};function qe(e,t,n){dc[e]=hi(t)?t:function(r,i){return r&&n?n:t}}function sD(e,t){return bt(dc,e)?dc[e](t._strict,t._locale):new RegExp(aD(e))}function aD(e){return sr(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,i,s){return n||r||i||s}))}function sr(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tg={};function Ft(e,t){var n,r=t,i;for(typeof e=="string"&&(e=[e]),Fi(t)&&(r=function(s,a){a[t]=ct(s)}),i=e.length,n=0;n<i;n++)tg[e[n]]=r}function Kl(e,t){Ft(e,function(n,r,i,s){i._w=i._w||{},t(n,i._w,i,s)})}function oD(e,t,n){t!=null&&bt(tg,e)&&tg[e](t,n._a,n,e)}var On=0,Ai=1,ti=2,fn=3,Vr=4,Ii=5,Vs=6,lD=7,uD=8;function cD(e,t){return(e%t+t)%t}var Jt;Array.prototype.indexOf?Jt=Array.prototype.indexOf:Jt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function vd(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=cD(t,12);return e+=(t-n)/12,n===1?ud(e)?29:28:31-n%7%2}We("M",["MM",2],"Mo",function(){return this.month()+1});We("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});We("MMMM",0,0,function(e){return this.localeData().months(this,e)});Vn("month","M");Bn("month",8);qe("M",Lt);qe("MM",Lt,fr);qe("MMM",function(e,t){return t.monthsShortRegex(e)});qe("MMMM",function(e,t){return t.monthsRegex(e)});Ft(["M","MM"],function(e,t){t[Ai]=ct(e)-1});Ft(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[Ai]=i:ot(n).invalidMonth=e});var dD="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nw="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rw=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,fD=zl,hD=zl;function gD(e,t){return e?Ur(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rw).test(t)?"format":"standalone"][e.month()]:Ur(this._months)?this._months:this._months.standalone}function vD(e,t){return e?Ur(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rw.test(t)?"format":"standalone"][e.month()]:Ur(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function mD(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=fi([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?t==="MMM"?(i=Jt.call(this._shortMonthsParse,a),i!==-1?i:null):(i=Jt.call(this._longMonthsParse,a),i!==-1?i:null):t==="MMM"?(i=Jt.call(this._shortMonthsParse,a),i!==-1?i:(i=Jt.call(this._longMonthsParse,a),i!==-1?i:null)):(i=Jt.call(this._longMonthsParse,a),i!==-1?i:(i=Jt.call(this._shortMonthsParse,a),i!==-1?i:null))}function pD(e,t,n){var r,i,s;if(this._monthsParseExact)return mD.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=fi([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function iw(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=ct(t);else if(t=e.localeData().monthsParse(t),!Fi(t))return e}return n=Math.min(e.date(),vd(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function sw(e){return e!=null?(iw(this,e),Le.updateOffset(this,!0),this):cc(this,"Month")}function yD(){return vd(this.year(),this.month())}function bD(e){return this._monthsParseExact?(bt(this,"_monthsRegex")||aw.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(bt(this,"_monthsShortRegex")||(this._monthsShortRegex=fD),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function SD(e){return this._monthsParseExact?(bt(this,"_monthsRegex")||aw.call(this),e?this._monthsStrictRegex:this._monthsRegex):(bt(this,"_monthsRegex")||(this._monthsRegex=hD),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function aw(){function e(a,o){return o.length-a.length}var t=[],n=[],r=[],i,s;for(i=0;i<12;i++)s=fi([2e3,i]),t.push(this.monthsShort(s,"")),n.push(this.months(s,"")),r.push(this.months(s,"")),r.push(this.monthsShort(s,""));for(t.sort(e),n.sort(e),r.sort(e),i=0;i<12;i++)t[i]=sr(t[i]),n[i]=sr(n[i]);for(i=0;i<24;i++)r[i]=sr(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}We("Y",0,0,function(){var e=this.year();return e<=9999?si(e,4):"+"+e});We(0,["YY",2],0,function(){return this.year()%100});We(0,["YYYY",4],0,"year");We(0,["YYYYY",5],0,"year");We(0,["YYYYYY",6,!0],0,"year");Vn("year","y");Bn("year",1);qe("Y",hd);qe("YY",Lt,fr);qe("YYYY",Lv,Bv);qe("YYYYY",fd,cd);qe("YYYYYY",fd,cd);Ft(["YYYYY","YYYYYY"],On);Ft("YYYY",function(e,t){t[On]=e.length===2?Le.parseTwoDigitYear(e):ct(e)});Ft("YY",function(e,t){t[On]=Le.parseTwoDigitYear(e)});Ft("Y",function(e,t){t[On]=parseInt(e,10)});function Zo(e){return ud(e)?366:365}Le.parseTwoDigitYear=function(e){return ct(e)+(ct(e)>68?1900:2e3)};var ow=mo("FullYear",!0);function _D(){return ud(this.year())}function wD(e,t,n,r,i,s,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,i,s,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,i,s,a),o}function Sl(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function fc(e,t,n){var r=7+t-n,i=(7+Sl(e,0,r).getUTCDay()-t)%7;return-i+r-1}function lw(e,t,n,r,i){var s=(7+n-r)%7,a=fc(e,r,i),o=1+7*(t-1)+s+a,l,u;return o<=0?(l=e-1,u=Zo(l)+o):o>Zo(e)?(l=e+1,u=o-Zo(e)):(l=e,u=o),{year:l,dayOfYear:u}}function _l(e,t,n){var r=fc(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,a;return i<1?(a=e.year()-1,s=i+Ri(a,t,n)):i>Ri(e.year(),t,n)?(s=i-Ri(e.year(),t,n),a=e.year()+1):(a=e.year(),s=i),{week:s,year:a}}function Ri(e,t,n){var r=fc(e,t,n),i=fc(e+1,t,n);return(Zo(e)-r+i)/7}We("w",["ww",2],"wo","week");We("W",["WW",2],"Wo","isoWeek");Vn("week","w");Vn("isoWeek","W");Bn("week",5);Bn("isoWeek",5);qe("w",Lt);qe("ww",Lt,fr);qe("W",Lt);qe("WW",Lt,fr);Kl(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=ct(e)});function xD(e){return _l(e,this._week.dow,this._week.doy).week}var CD={dow:0,doy:6};function ED(){return this._week.dow}function TD(){return this._week.doy}function AD(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function ID(e){var t=_l(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}We("d",0,"do","day");We("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});We("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});We("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});We("e",0,0,"weekday");We("E",0,0,"isoWeekday");Vn("day","d");Vn("weekday","e");Vn("isoWeekday","E");Bn("day",11);Bn("weekday",11);Bn("isoWeekday",11);qe("d",Lt);qe("e",Lt);qe("E",Lt);qe("dd",function(e,t){return t.weekdaysMinRegex(e)});qe("ddd",function(e,t){return t.weekdaysShortRegex(e)});qe("dddd",function(e,t){return t.weekdaysRegex(e)});Kl(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:ot(n).invalidWeekday=e});Kl(["d","e","E"],function(e,t,n,r){t[r]=ct(e)});function RD(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function kD(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Hv(e,t){return e.slice(t,7).concat(e.slice(0,t))}var PD="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),uw="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),DD="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),FD=zl,OD=zl,ND=zl;function $D(e,t){var n=Ur(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Hv(n,this._week.dow):e?n[e.day()]:n}function MD(e){return e===!0?Hv(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function VD(e){return e===!0?Hv(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function BD(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=fi([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?t==="dddd"?(i=Jt.call(this._weekdaysParse,a),i!==-1?i:null):t==="ddd"?(i=Jt.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=Jt.call(this._minWeekdaysParse,a),i!==-1?i:null):t==="dddd"?(i=Jt.call(this._weekdaysParse,a),i!==-1||(i=Jt.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=Jt.call(this._minWeekdaysParse,a),i!==-1?i:null)):t==="ddd"?(i=Jt.call(this._shortWeekdaysParse,a),i!==-1||(i=Jt.call(this._weekdaysParse,a),i!==-1)?i:(i=Jt.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=Jt.call(this._minWeekdaysParse,a),i!==-1||(i=Jt.call(this._weekdaysParse,a),i!==-1)?i:(i=Jt.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function LD(e,t,n){var r,i,s;if(this._weekdaysParseExact)return BD.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=fi([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function HD(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=RD(e,this.localeData()),this.add(e-t,"d")):t}function jD(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function qD(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=kD(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function UD(e){return this._weekdaysParseExact?(bt(this,"_weekdaysRegex")||jv.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(bt(this,"_weekdaysRegex")||(this._weekdaysRegex=FD),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function zD(e){return this._weekdaysParseExact?(bt(this,"_weekdaysRegex")||jv.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(bt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=OD),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function KD(e){return this._weekdaysParseExact?(bt(this,"_weekdaysRegex")||jv.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(bt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ND),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function jv(){function e(f,c){return c.length-f.length}var t=[],n=[],r=[],i=[],s,a,o,l,u;for(s=0;s<7;s++)a=fi([2e3,1]).day(s),o=sr(this.weekdaysMin(a,"")),l=sr(this.weekdaysShort(a,"")),u=sr(this.weekdays(a,"")),t.push(o),n.push(l),r.push(u),i.push(o),i.push(l),i.push(u);t.sort(e),n.sort(e),r.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function qv(){return this.hours()%12||12}function GD(){return this.hours()||24}We("H",["HH",2],0,"hour");We("h",["hh",2],0,qv);We("k",["kk",2],0,GD);We("hmm",0,0,function(){return""+qv.apply(this)+si(this.minutes(),2)});We("hmmss",0,0,function(){return""+qv.apply(this)+si(this.minutes(),2)+si(this.seconds(),2)});We("Hmm",0,0,function(){return""+this.hours()+si(this.minutes(),2)});We("Hmmss",0,0,function(){return""+this.hours()+si(this.minutes(),2)+si(this.seconds(),2)});function cw(e,t){We(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}cw("a",!0);cw("A",!1);Vn("hour","h");Bn("hour",13);function dw(e,t){return t._meridiemParse}qe("a",dw);qe("A",dw);qe("H",Lt);qe("h",Lt);qe("k",Lt);qe("HH",Lt,fr);qe("hh",Lt,fr);qe("kk",Lt,fr);qe("hmm",ew);qe("hmmss",tw);qe("Hmm",ew);qe("Hmmss",tw);Ft(["H","HH"],fn);Ft(["k","kk"],function(e,t,n){var r=ct(e);t[fn]=r===24?0:r});Ft(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Ft(["h","hh"],function(e,t,n){t[fn]=ct(e),ot(n).bigHour=!0});Ft("hmm",function(e,t,n){var r=e.length-2;t[fn]=ct(e.substr(0,r)),t[Vr]=ct(e.substr(r)),ot(n).bigHour=!0});Ft("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[fn]=ct(e.substr(0,r)),t[Vr]=ct(e.substr(r,2)),t[Ii]=ct(e.substr(i)),ot(n).bigHour=!0});Ft("Hmm",function(e,t,n){var r=e.length-2;t[fn]=ct(e.substr(0,r)),t[Vr]=ct(e.substr(r))});Ft("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[fn]=ct(e.substr(0,r)),t[Vr]=ct(e.substr(r,2)),t[Ii]=ct(e.substr(i))});function WD(e){return(e+"").toLowerCase().charAt(0)==="p"}var YD=/[ap]\.?m?\.?/i,JD=mo("Hours",!0);function XD(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var fw={calendar:LP,longDateFormat:UP,invalidDate:KP,ordinal:WP,dayOfMonthOrdinalParse:YP,relativeTime:XP,months:dD,monthsShort:nw,week:CD,weekdays:PD,weekdaysMin:DD,weekdaysShort:uw,meridiemParse:YD},jt={},Fo={},wl;function ZD(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function ly(e){return e&&e.toLowerCase().replace("_","-")}function QD(e){for(var t=0,n,r,i,s;t<e.length;){for(s=ly(e[t]).split("-"),n=s.length,r=ly(e[t+1]),r=r?r.split("-"):null;n>0;){if(i=md(s.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&ZD(s,r)>=n-1)break;n--}t++}return wl}function e4(e){return e.match("^[^/\\\\]*$")!=null}function md(e){var t=null,n;if(jt[e]===void 0&&typeof Zu<"u"&&Zu&&Zu.exports&&e4(e))try{t=wl._abbr,n=require,n("./locale/"+e),fs(t)}catch{jt[e]=null}return jt[e]}function fs(e,t){var n;return e&&(Jn(t)?n=Bi(e):n=Uv(e,t),n?wl=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),wl._abbr}function Uv(e,t){if(t!==null){var n,r=fw;if(t.abbr=e,jt[e]!=null)W_("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=jt[e]._config;else if(t.parentLocale!=null)if(jt[t.parentLocale]!=null)r=jt[t.parentLocale]._config;else if(n=md(t.parentLocale),n!=null)r=n._config;else return Fo[t.parentLocale]||(Fo[t.parentLocale]=[]),Fo[t.parentLocale].push({name:e,config:t}),null;return jt[e]=new $v(Qh(r,t)),Fo[e]&&Fo[e].forEach(function(i){Uv(i.name,i.config)}),fs(e),jt[e]}else return delete jt[e],null}function t4(e,t){if(t!=null){var n,r,i=fw;jt[e]!=null&&jt[e].parentLocale!=null?jt[e].set(Qh(jt[e]._config,t)):(r=md(e),r!=null&&(i=r._config),t=Qh(i,t),r==null&&(t.abbr=e),n=new $v(t),n.parentLocale=jt[e],jt[e]=n),fs(e)}else jt[e]!=null&&(jt[e].parentLocale!=null?(jt[e]=jt[e].parentLocale,e===fs()&&fs(e)):jt[e]!=null&&delete jt[e]);return jt[e]}function Bi(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return wl;if(!Ur(e)){if(t=md(e),t)return t;e=[e]}return QD(e)}function n4(){return eg(jt)}function zv(e){var t,n=e._a;return n&&ot(e).overflow===-2&&(t=n[Ai]<0||n[Ai]>11?Ai:n[ti]<1||n[ti]>vd(n[On],n[Ai])?ti:n[fn]<0||n[fn]>24||n[fn]===24&&(n[Vr]!==0||n[Ii]!==0||n[Vs]!==0)?fn:n[Vr]<0||n[Vr]>59?Vr:n[Ii]<0||n[Ii]>59?Ii:n[Vs]<0||n[Vs]>999?Vs:-1,ot(e)._overflowDayOfYear&&(t<On||t>ti)&&(t=ti),ot(e)._overflowWeeks&&t===-1&&(t=lD),ot(e)._overflowWeekday&&t===-1&&(t=uD),ot(e).overflow=t),e}var r4=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,i4=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,s4=/Z|[+-]\d\d(?::?\d\d)?/,Su=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],sh=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],a4=/^\/?Date\((-?\d+)/i,o4=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,l4={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function hw(e){var t,n,r=e._i,i=r4.exec(r)||i4.exec(r),s,a,o,l,u=Su.length,f=sh.length;if(i){for(ot(e).iso=!0,t=0,n=u;t<n;t++)if(Su[t][1].exec(i[1])){a=Su[t][0],s=Su[t][2]!==!1;break}if(a==null){e._isValid=!1;return}if(i[3]){for(t=0,n=f;t<n;t++)if(sh[t][1].exec(i[3])){o=(i[2]||" ")+sh[t][0];break}if(o==null){e._isValid=!1;return}}if(!s&&o!=null){e._isValid=!1;return}if(i[4])if(s4.exec(i[4]))l="Z";else{e._isValid=!1;return}e._f=a+(o||"")+(l||""),Gv(e)}else e._isValid=!1}function u4(e,t,n,r,i,s){var a=[c4(e),nw.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}function c4(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function d4(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function f4(e,t,n){if(e){var r=uw.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i)return ot(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function h4(e,t,n){if(e)return l4[e];if(t)return 0;var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}function gw(e){var t=o4.exec(d4(e._i)),n;if(t){if(n=u4(t[4],t[3],t[2],t[5],t[6],t[7]),!f4(t[1],n,e))return;e._a=n,e._tzm=h4(t[8],t[9],t[10]),e._d=Sl.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),ot(e).rfc2822=!0}else e._isValid=!1}function g4(e){var t=a4.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(hw(e),e._isValid===!1)delete e._isValid;else return;if(gw(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Le.createFromInputFallback(e)}Le.createFromInputFallback=Pr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Oa(e,t,n){return e??t??n}function v4(e){var t=new Date(Le.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Kv(e){var t,n,r=[],i,s,a;if(!e._d){for(i=v4(e),e._w&&e._a[ti]==null&&e._a[Ai]==null&&m4(e),e._dayOfYear!=null&&(a=Oa(e._a[On],i[On]),(e._dayOfYear>Zo(a)||e._dayOfYear===0)&&(ot(e)._overflowDayOfYear=!0),n=Sl(a,0,e._dayOfYear),e._a[Ai]=n.getUTCMonth(),e._a[ti]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[fn]===24&&e._a[Vr]===0&&e._a[Ii]===0&&e._a[Vs]===0&&(e._nextDay=!0,e._a[fn]=0),e._d=(e._useUTC?Sl:wD).apply(null,r),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[fn]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==s&&(ot(e).weekdayMismatch=!0)}}function m4(e){var t,n,r,i,s,a,o,l,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,a=4,n=Oa(t.GG,e._a[On],_l(Vt(),1,4).year),r=Oa(t.W,1),i=Oa(t.E,1),(i<1||i>7)&&(l=!0)):(s=e._locale._week.dow,a=e._locale._week.doy,u=_l(Vt(),s,a),n=Oa(t.gg,e._a[On],u.year),r=Oa(t.w,u.week),t.d!=null?(i=t.d,(i<0||i>6)&&(l=!0)):t.e!=null?(i=t.e+s,(t.e<0||t.e>6)&&(l=!0)):i=s),r<1||r>Ri(n,s,a)?ot(e)._overflowWeeks=!0:l!=null?ot(e)._overflowWeekday=!0:(o=lw(n,r,i,s,a),e._a[On]=o.year,e._dayOfYear=o.dayOfYear)}Le.ISO_8601=function(){};Le.RFC_2822=function(){};function Gv(e){if(e._f===Le.ISO_8601){hw(e);return}if(e._f===Le.RFC_2822){gw(e);return}e._a=[],ot(e).empty=!0;var t=""+e._i,n,r,i,s,a,o=t.length,l=0,u,f;for(i=Y_(e._f,e._locale).match(Mv)||[],f=i.length,n=0;n<f;n++)s=i[n],r=(t.match(sD(s,e))||[])[0],r&&(a=t.substr(0,t.indexOf(r)),a.length>0&&ot(e).unusedInput.push(a),t=t.slice(t.indexOf(r)+r.length),l+=r.length),Wa[s]?(r?ot(e).empty=!1:ot(e).unusedTokens.push(s),oD(s,r,e)):e._strict&&!r&&ot(e).unusedTokens.push(s);ot(e).charsLeftOver=o-l,t.length>0&&ot(e).unusedInput.push(t),e._a[fn]<=12&&ot(e).bigHour===!0&&e._a[fn]>0&&(ot(e).bigHour=void 0),ot(e).parsedDateParts=e._a.slice(0),ot(e).meridiem=e._meridiem,e._a[fn]=p4(e._locale,e._a[fn],e._meridiem),u=ot(e).era,u!==null&&(e._a[On]=e._locale.erasConvertYear(u,e._a[On])),Kv(e),zv(e)}function p4(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function y4(e){var t,n,r,i,s,a,o=!1,l=e._f.length;if(l===0){ot(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<l;i++)s=0,a=!1,t=Nv({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],Gv(t),Ov(t)&&(a=!0),s+=ot(t).charsLeftOver,s+=ot(t).unusedTokens.length*10,ot(t).score=s,o?s<r&&(r=s,n=t):(r==null||s<r||a)&&(r=s,n=t,a&&(o=!0));as(e,n||t)}function b4(e){if(!e._d){var t=Vv(e._i),n=t.day===void 0?t.date:t.day;e._a=K_([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),Kv(e)}}function S4(e){var t=new Ul(zv(vw(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function vw(e){var t=e._i,n=e._f;return e._locale=e._locale||Bi(e._l),t===null||n===void 0&&t===""?ld({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),zr(t)?new Ul(zv(t)):(ql(t)?e._d=t:Ur(n)?y4(e):n?Gv(e):_4(e),Ov(e)||(e._d=null),e))}function _4(e){var t=e._i;Jn(t)?e._d=new Date(Le.now()):ql(t)?e._d=new Date(t.valueOf()):typeof t=="string"?g4(e):Ur(t)?(e._a=K_(t.slice(0),function(n){return parseInt(n,10)}),Kv(e)):zs(t)?b4(e):Fi(t)?e._d=new Date(t):Le.createFromInputFallback(e)}function mw(e,t,n,r,i){var s={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(zs(e)&&Fv(e)||Ur(e)&&e.length===0)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,S4(s)}function Vt(e,t,n,r){return mw(e,t,n,r,!1)}var w4=Pr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Vt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:ld()}),x4=Pr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Vt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:ld()});function pw(e,t){var n,r;if(t.length===1&&Ur(t[0])&&(t=t[0]),!t.length)return Vt();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function C4(){var e=[].slice.call(arguments,0);return pw("isBefore",e)}function E4(){var e=[].slice.call(arguments,0);return pw("isAfter",e)}var T4=function(){return Date.now?Date.now():+new Date},Oo=["year","quarter","month","week","day","hour","minute","second","millisecond"];function A4(e){var t,n=!1,r,i=Oo.length;for(t in e)if(bt(e,t)&&!(Jt.call(Oo,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<i;++r)if(e[Oo[r]]){if(n)return!1;parseFloat(e[Oo[r]])!==ct(e[Oo[r]])&&(n=!0)}return!0}function I4(){return this._isValid}function R4(){return Gr(NaN)}function pd(e){var t=Vv(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,f=t.millisecond||0;this._isValid=A4(t),this._milliseconds=+f+u*1e3+l*6e4+o*1e3*60*60,this._days=+a+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=Bi(),this._bubble()}function Ku(e){return e instanceof pd}function ng(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function k4(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,a;for(a=0;a<r;a++)(n&&e[a]!==t[a]||!n&&ct(e[a])!==ct(t[a]))&&s++;return s+i}function yw(e,t){We(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+si(~~(n/60),2)+t+si(~~n%60,2)})}yw("Z",":");yw("ZZ","");qe("Z",gd);qe("ZZ",gd);Ft(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Wv(gd,e)});var P4=/([\+\-]|\d\d)/gi;function Wv(e,t){var n=(t||"").match(e),r,i,s;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(P4)||["-",0,0],s=+(i[1]*60)+ct(i[2]),s===0?0:i[0]==="+"?s:-s)}function Yv(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(zr(e)||ql(e)?e.valueOf():Vt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Le.updateOffset(n,!1),n):Vt(e).local()}function rg(e){return-Math.round(e._d.getTimezoneOffset())}Le.updateOffset=function(){};function D4(e,t,n){var r=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Wv(gd,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(i=rg(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?_w(this,Gr(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Le.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:rg(this)}function F4(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function O4(e){return this.utcOffset(0,e)}function N4(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(rg(this),"m")),this}function $4(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Wv(rD,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function M4(e){return this.isValid()?(e=e?Vt(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function V4(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function B4(){if(!Jn(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Nv(e,this),e=vw(e),e._a?(t=e._isUTC?fi(e._a):Vt(e._a),this._isDSTShifted=this.isValid()&&k4(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function L4(){return this.isValid()?!this._isUTC:!1}function H4(){return this.isValid()?this._isUTC:!1}function bw(){return this.isValid()?this._isUTC&&this._offset===0:!1}var j4=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,q4=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Gr(e,t){var n=e,r=null,i,s,a;return Ku(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:Fi(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=j4.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:ct(r[ti])*i,h:ct(r[fn])*i,m:ct(r[Vr])*i,s:ct(r[Ii])*i,ms:ct(ng(r[Vs]*1e3))*i}):(r=q4.exec(e))?(i=r[1]==="-"?-1:1,n={y:Rs(r[2],i),M:Rs(r[3],i),w:Rs(r[4],i),d:Rs(r[5],i),h:Rs(r[6],i),m:Rs(r[7],i),s:Rs(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(a=U4(Vt(n.from),Vt(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),s=new pd(n),Ku(e)&&bt(e,"_locale")&&(s._locale=e._locale),Ku(e)&&bt(e,"_isValid")&&(s._isValid=e._isValid),s}Gr.fn=pd.prototype;Gr.invalid=R4;function Rs(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function uy(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function U4(e,t){var n;return e.isValid()&&t.isValid()?(t=Yv(t,e),e.isBefore(t)?n=uy(e,t):(n=uy(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Sw(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(W_(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),i=Gr(n,r),_w(this,i,e),this}}function _w(e,t,n,r){var i=t._milliseconds,s=ng(t._days),a=ng(t._months);e.isValid()&&(r=r??!0,a&&iw(e,cc(e,"Month")+a*n),s&&X_(e,"Date",cc(e,"Date")+s*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&Le.updateOffset(e,s||a))}var z4=Sw(1,"add"),K4=Sw(-1,"subtract");function ww(e){return typeof e=="string"||e instanceof String}function G4(e){return zr(e)||ql(e)||ww(e)||Fi(e)||Y4(e)||W4(e)||e===null||e===void 0}function W4(e){var t=zs(e)&&!Fv(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,a=r.length;for(i=0;i<a;i+=1)s=r[i],n=n||bt(e,s);return t&&n}function Y4(e){var t=Ur(e),n=!1;return t&&(n=e.filter(function(r){return!Fi(r)&&ww(e)}).length===0),t&&n}function J4(e){var t=zs(e)&&!Fv(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1)s=r[i],n=n||bt(e,s);return t&&n}function X4(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Z4(e,t){arguments.length===1&&(arguments[0]?G4(arguments[0])?(e=arguments[0],t=void 0):J4(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Vt(),r=Yv(n,this).startOf("day"),i=Le.calendarFormat(this,r)||"sameElse",s=t&&(hi(t[i])?t[i].call(this,n):t[i]);return this.format(s||this.localeData().calendar(i,this,Vt(n)))}function Q4(){return new Ul(this)}function e6(e,t){var n=zr(e)?e:Vt(e);return this.isValid()&&n.isValid()?(t=Dr(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function t6(e,t){var n=zr(e)?e:Vt(e);return this.isValid()&&n.isValid()?(t=Dr(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function n6(e,t,n,r){var i=zr(e)?e:Vt(e),s=zr(t)?t:Vt(t);return this.isValid()&&i.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function r6(e,t){var n=zr(e)?e:Vt(e),r;return this.isValid()&&n.isValid()?(t=Dr(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function i6(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function s6(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function a6(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(r=Yv(e,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,t=Dr(t),t){case"year":s=Gu(this,r)/12;break;case"month":s=Gu(this,r);break;case"quarter":s=Gu(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Sr(s)}function Gu(e,t){if(e.date()<t.date())return-Gu(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)||0}Le.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Le.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function o6(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function l6(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?zu(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):hi(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",zu(n,"Z")):zu(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function u6(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,i,s;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]',this.format(n+r+i+s)}function c6(e){e||(e=this.isUtc()?Le.defaultFormatUtc:Le.defaultFormat);var t=zu(this,e);return this.localeData().postformat(t)}function d6(e,t){return this.isValid()&&(zr(e)&&e.isValid()||Vt(e).isValid())?Gr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function f6(e){return this.from(Vt(),e)}function h6(e,t){return this.isValid()&&(zr(e)&&e.isValid()||Vt(e).isValid())?Gr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function g6(e){return this.to(Vt(),e)}function xw(e){var t;return e===void 0?this._locale._abbr:(t=Bi(e),t!=null&&(this._locale=t),this)}var Cw=Pr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Ew(){return this._locale}var hc=1e3,Ya=60*hc,gc=60*Ya,Tw=(365*400+97)*24*gc;function Ja(e,t){return(e%t+t)%t}function Aw(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Tw:new Date(e,t,n).valueOf()}function Iw(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Tw:Date.UTC(e,t,n)}function v6(e){var t,n;if(e=Dr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Iw:Aw,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Ja(t+(this._isUTC?0:this.utcOffset()*Ya),gc);break;case"minute":t=this._d.valueOf(),t-=Ja(t,Ya);break;case"second":t=this._d.valueOf(),t-=Ja(t,hc);break}return this._d.setTime(t),Le.updateOffset(this,!0),this}function m6(e){var t,n;if(e=Dr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Iw:Aw,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=gc-Ja(t+(this._isUTC?0:this.utcOffset()*Ya),gc)-1;break;case"minute":t=this._d.valueOf(),t+=Ya-Ja(t,Ya)-1;break;case"second":t=this._d.valueOf(),t+=hc-Ja(t,hc)-1;break}return this._d.setTime(t),Le.updateOffset(this,!0),this}function p6(){return this._d.valueOf()-(this._offset||0)*6e4}function y6(){return Math.floor(this.valueOf()/1e3)}function b6(){return new Date(this.valueOf())}function S6(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function _6(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function w6(){return this.isValid()?this.toISOString():null}function x6(){return Ov(this)}function C6(){return as({},ot(this))}function E6(){return ot(this).overflow}function T6(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}We("N",0,0,"eraAbbr");We("NN",0,0,"eraAbbr");We("NNN",0,0,"eraAbbr");We("NNNN",0,0,"eraName");We("NNNNN",0,0,"eraNarrow");We("y",["y",1],"yo","eraYear");We("y",["yy",2],0,"eraYear");We("y",["yyy",3],0,"eraYear");We("y",["yyyy",4],0,"eraYear");qe("N",Jv);qe("NN",Jv);qe("NNN",Jv);qe("NNNN",M6);qe("NNNNN",V6);Ft(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?ot(n).era=i:ot(n).invalidEra=e});qe("y",po);qe("yy",po);qe("yyy",po);qe("yyyy",po);qe("yo",B6);Ft(["y","yy","yyy","yyyy"],On);Ft(["yo"],function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[On]=n._locale.eraYearOrdinalParse(e,i):t[On]=parseInt(e,10)});function A6(e,t){var n,r,i,s=this._eras||Bi("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=Le(s[n].since).startOf("day"),s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=Le(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf();break}}return s}function I6(e,t,n){var r,i,s=this.eras(),a,o,l;for(e=e.toUpperCase(),r=0,i=s.length;r<i;++r)if(a=s[r].name.toUpperCase(),o=s[r].abbr.toUpperCase(),l=s[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return s[r];break;case"NNNN":if(a===e)return s[r];break;case"NNNNN":if(l===e)return s[r];break}else if([a,o,l].indexOf(e)>=0)return s[r]}function R6(e,t){var n=e.since<=e.until?1:-1;return t===void 0?Le(e.since).year():Le(e.since).year()+(t-e.offset)*n}function k6(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function P6(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function D6(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function F6(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return(this.year()-Le(i[e].since).year())*n+i[e].offset;return this.year()}function O6(e){return bt(this,"_erasNameRegex")||Xv.call(this),e?this._erasNameRegex:this._erasRegex}function N6(e){return bt(this,"_erasAbbrRegex")||Xv.call(this),e?this._erasAbbrRegex:this._erasRegex}function $6(e){return bt(this,"_erasNarrowRegex")||Xv.call(this),e?this._erasNarrowRegex:this._erasRegex}function Jv(e,t){return t.erasAbbrRegex(e)}function M6(e,t){return t.erasNameRegex(e)}function V6(e,t){return t.erasNarrowRegex(e)}function B6(e,t){return t._eraYearOrdinalRegex||po}function Xv(){var e=[],t=[],n=[],r=[],i,s,a=this.eras();for(i=0,s=a.length;i<s;++i)t.push(sr(a[i].name)),e.push(sr(a[i].abbr)),n.push(sr(a[i].narrow)),r.push(sr(a[i].name)),r.push(sr(a[i].abbr)),r.push(sr(a[i].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}We(0,["gg",2],0,function(){return this.weekYear()%100});We(0,["GG",2],0,function(){return this.isoWeekYear()%100});function yd(e,t){We(0,[e,e.length],0,t)}yd("gggg","weekYear");yd("ggggg","weekYear");yd("GGGG","isoWeekYear");yd("GGGGG","isoWeekYear");Vn("weekYear","gg");Vn("isoWeekYear","GG");Bn("weekYear",1);Bn("isoWeekYear",1);qe("G",hd);qe("g",hd);qe("GG",Lt,fr);qe("gg",Lt,fr);qe("GGGG",Lv,Bv);qe("gggg",Lv,Bv);qe("GGGGG",fd,cd);qe("ggggg",fd,cd);Kl(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=ct(e)});Kl(["gg","GG"],function(e,t,n,r){t[r]=Le.parseTwoDigitYear(e)});function L6(e){return Rw.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function H6(e){return Rw.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function j6(){return Ri(this.year(),1,4)}function q6(){return Ri(this.isoWeekYear(),1,4)}function U6(){var e=this.localeData()._week;return Ri(this.year(),e.dow,e.doy)}function z6(){var e=this.localeData()._week;return Ri(this.weekYear(),e.dow,e.doy)}function Rw(e,t,n,r,i){var s;return e==null?_l(this,r,i).year:(s=Ri(e,r,i),t>s&&(t=s),K6.call(this,e,t,n,r,i))}function K6(e,t,n,r,i){var s=lw(e,t,n,r,i),a=Sl(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}We("Q",0,"Qo","quarter");Vn("quarter","Q");Bn("quarter",7);qe("Q",Z_);Ft("Q",function(e,t){t[Ai]=(ct(e)-1)*3});function G6(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}We("D",["DD",2],"Do","date");Vn("date","D");Bn("date",9);qe("D",Lt);qe("DD",Lt,fr);qe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ft(["D","DD"],ti);Ft("Do",function(e,t){t[ti]=ct(e.match(Lt)[0])});var kw=mo("Date",!0);We("DDD",["DDDD",3],"DDDo","dayOfYear");Vn("dayOfYear","DDD");Bn("dayOfYear",4);qe("DDD",dd);qe("DDDD",Q_);Ft(["DDD","DDDD"],function(e,t,n){n._dayOfYear=ct(e)});function W6(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}We("m",["mm",2],0,"minute");Vn("minute","m");Bn("minute",14);qe("m",Lt);qe("mm",Lt,fr);Ft(["m","mm"],Vr);var Y6=mo("Minutes",!1);We("s",["ss",2],0,"second");Vn("second","s");Bn("second",15);qe("s",Lt);qe("ss",Lt,fr);Ft(["s","ss"],Ii);var J6=mo("Seconds",!1);We("S",0,0,function(){return~~(this.millisecond()/100)});We(0,["SS",2],0,function(){return~~(this.millisecond()/10)});We(0,["SSS",3],0,"millisecond");We(0,["SSSS",4],0,function(){return this.millisecond()*10});We(0,["SSSSS",5],0,function(){return this.millisecond()*100});We(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});We(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});We(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});We(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Vn("millisecond","ms");Bn("millisecond",16);qe("S",dd,Z_);qe("SS",dd,fr);qe("SSS",dd,Q_);var os,Pw;for(os="SSSS";os.length<=9;os+="S")qe(os,po);function X6(e,t){t[Vs]=ct(("0."+e)*1e3)}for(os="S";os.length<=9;os+="S")Ft(os,X6);Pw=mo("Milliseconds",!1);We("z",0,0,"zoneAbbr");We("zz",0,0,"zoneName");function Z6(){return this._isUTC?"UTC":""}function Q6(){return this._isUTC?"Coordinated Universal Time":""}var Ie=Ul.prototype;Ie.add=z4;Ie.calendar=Z4;Ie.clone=Q4;Ie.diff=a6;Ie.endOf=m6;Ie.format=c6;Ie.from=d6;Ie.fromNow=f6;Ie.to=h6;Ie.toNow=g6;Ie.get=tD;Ie.invalidAt=E6;Ie.isAfter=e6;Ie.isBefore=t6;Ie.isBetween=n6;Ie.isSame=r6;Ie.isSameOrAfter=i6;Ie.isSameOrBefore=s6;Ie.isValid=x6;Ie.lang=Cw;Ie.locale=xw;Ie.localeData=Ew;Ie.max=x4;Ie.min=w4;Ie.parsingFlags=C6;Ie.set=nD;Ie.startOf=v6;Ie.subtract=K4;Ie.toArray=S6;Ie.toObject=_6;Ie.toDate=b6;Ie.toISOString=l6;Ie.inspect=u6;typeof Symbol<"u"&&Symbol.for!=null&&(Ie[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Ie.toJSON=w6;Ie.toString=o6;Ie.unix=y6;Ie.valueOf=p6;Ie.creationData=T6;Ie.eraName=k6;Ie.eraNarrow=P6;Ie.eraAbbr=D6;Ie.eraYear=F6;Ie.year=ow;Ie.isLeapYear=_D;Ie.weekYear=L6;Ie.isoWeekYear=H6;Ie.quarter=Ie.quarters=G6;Ie.month=sw;Ie.daysInMonth=yD;Ie.week=Ie.weeks=AD;Ie.isoWeek=Ie.isoWeeks=ID;Ie.weeksInYear=U6;Ie.weeksInWeekYear=z6;Ie.isoWeeksInYear=j6;Ie.isoWeeksInISOWeekYear=q6;Ie.date=kw;Ie.day=Ie.days=HD;Ie.weekday=jD;Ie.isoWeekday=qD;Ie.dayOfYear=W6;Ie.hour=Ie.hours=JD;Ie.minute=Ie.minutes=Y6;Ie.second=Ie.seconds=J6;Ie.millisecond=Ie.milliseconds=Pw;Ie.utcOffset=D4;Ie.utc=O4;Ie.local=N4;Ie.parseZone=$4;Ie.hasAlignedHourOffset=M4;Ie.isDST=V4;Ie.isLocal=L4;Ie.isUtcOffset=H4;Ie.isUtc=bw;Ie.isUTC=bw;Ie.zoneAbbr=Z6;Ie.zoneName=Q6;Ie.dates=Pr("dates accessor is deprecated. Use date instead.",kw);Ie.months=Pr("months accessor is deprecated. Use month instead",sw);Ie.years=Pr("years accessor is deprecated. Use year instead",ow);Ie.zone=Pr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",F4);Ie.isDSTShifted=Pr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",B4);function e5(e){return Vt(e*1e3)}function t5(){return Vt.apply(null,arguments).parseZone()}function Dw(e){return e}var wt=$v.prototype;wt.calendar=HP;wt.longDateFormat=zP;wt.invalidDate=GP;wt.ordinal=JP;wt.preparse=Dw;wt.postformat=Dw;wt.relativeTime=ZP;wt.pastFuture=QP;wt.set=BP;wt.eras=A6;wt.erasParse=I6;wt.erasConvertYear=R6;wt.erasAbbrRegex=N6;wt.erasNameRegex=O6;wt.erasNarrowRegex=$6;wt.months=gD;wt.monthsShort=vD;wt.monthsParse=pD;wt.monthsRegex=SD;wt.monthsShortRegex=bD;wt.week=xD;wt.firstDayOfYear=TD;wt.firstDayOfWeek=ED;wt.weekdays=$D;wt.weekdaysMin=VD;wt.weekdaysShort=MD;wt.weekdaysParse=LD;wt.weekdaysRegex=UD;wt.weekdaysShortRegex=zD;wt.weekdaysMinRegex=KD;wt.isPM=WD;wt.meridiem=XD;function vc(e,t,n,r){var i=Bi(),s=fi().set(r,t);return i[n](s,e)}function Fw(e,t,n){if(Fi(e)&&(t=e,e=void 0),e=e||"",t!=null)return vc(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=vc(e,r,n,"month");return i}function Zv(e,t,n,r){typeof e=="boolean"?(Fi(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,Fi(t)&&(n=t,t=void 0),t=t||"");var i=Bi(),s=e?i._week.dow:0,a,o=[];if(n!=null)return vc(t,(n+s)%7,r,"day");for(a=0;a<7;a++)o[a]=vc(t,(a+s)%7,r,"day");return o}function n5(e,t){return Fw(e,t,"months")}function r5(e,t){return Fw(e,t,"monthsShort")}function i5(e,t,n){return Zv(e,t,n,"weekdays")}function s5(e,t,n){return Zv(e,t,n,"weekdaysShort")}function a5(e,t,n){return Zv(e,t,n,"weekdaysMin")}fs("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=ct(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Le.lang=Pr("moment.lang is deprecated. Use moment.locale instead.",fs);Le.langData=Pr("moment.langData is deprecated. Use moment.localeData instead.",Bi);var bi=Math.abs;function o5(){var e=this._data;return this._milliseconds=bi(this._milliseconds),this._days=bi(this._days),this._months=bi(this._months),e.milliseconds=bi(e.milliseconds),e.seconds=bi(e.seconds),e.minutes=bi(e.minutes),e.hours=bi(e.hours),e.months=bi(e.months),e.years=bi(e.years),this}function Ow(e,t,n,r){var i=Gr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function l5(e,t){return Ow(this,e,t,1)}function u5(e,t){return Ow(this,e,t,-1)}function cy(e){return e<0?Math.floor(e):Math.ceil(e)}function c5(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,a,o,l;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=cy(ig(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=Sr(e/1e3),r.seconds=i%60,s=Sr(i/60),r.minutes=s%60,a=Sr(s/60),r.hours=a%24,t+=Sr(a/24),l=Sr(Nw(t)),n+=l,t-=cy(ig(l)),o=Sr(n/12),n%=12,r.days=t,r.months=n,r.years=o,this}function Nw(e){return e*4800/146097}function ig(e){return e*146097/4800}function d5(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=Dr(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+Nw(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(ig(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function f5(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+ct(this._months/12)*31536e6:NaN}function Li(e){return function(){return this.as(e)}}var h5=Li("ms"),g5=Li("s"),v5=Li("m"),m5=Li("h"),p5=Li("d"),y5=Li("w"),b5=Li("M"),S5=Li("Q"),_5=Li("y");function w5(){return Gr(this)}function x5(e){return e=Dr(e),this.isValid()?this[e+"s"]():NaN}function sa(e){return function(){return this.isValid()?this._data[e]:NaN}}var C5=sa("milliseconds"),E5=sa("seconds"),T5=sa("minutes"),A5=sa("hours"),I5=sa("days"),R5=sa("months"),k5=sa("years");function P5(){return Sr(this.days()/7)}var Ci=Math.round,Ma={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function D5(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function F5(e,t,n,r){var i=Gr(e).abs(),s=Ci(i.as("s")),a=Ci(i.as("m")),o=Ci(i.as("h")),l=Ci(i.as("d")),u=Ci(i.as("M")),f=Ci(i.as("w")),c=Ci(i.as("y")),d=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(d=d||f<=1&&["w"]||f<n.w&&["ww",f]),d=d||u<=1&&["M"]||u<n.M&&["MM",u]||c<=1&&["y"]||["yy",c],d[2]=t,d[3]=+e>0,d[4]=r,D5.apply(null,d)}function O5(e){return e===void 0?Ci:typeof e=="function"?(Ci=e,!0):!1}function N5(e,t){return Ma[e]===void 0?!1:t===void 0?Ma[e]:(Ma[e]=t,e==="s"&&(Ma.ss=t-1),!0)}function $5(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Ma,i,s;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},Ma,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),i=this.localeData(),s=F5(this,!n,r,i),n&&(s=i.pastFuture(+this,s)),i.postformat(s)}var ah=Math.abs;function Ca(e){return(e>0)-(e<0)||+e}function bd(){if(!this.isValid())return this.localeData().invalidDate();var e=ah(this._milliseconds)/1e3,t=ah(this._days),n=ah(this._months),r,i,s,a,o=this.asSeconds(),l,u,f,c;return o?(r=Sr(e/60),i=Sr(r/60),e%=60,r%=60,s=Sr(n/12),n%=12,a=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=o<0?"-":"",u=Ca(this._months)!==Ca(o)?"-":"",f=Ca(this._days)!==Ca(o)?"-":"",c=Ca(this._milliseconds)!==Ca(o)?"-":"",l+"P"+(s?u+s+"Y":"")+(n?u+n+"M":"")+(t?f+t+"D":"")+(i||r||e?"T":"")+(i?c+i+"H":"")+(r?c+r+"M":"")+(e?c+a+"S":"")):"P0D"}var vt=pd.prototype;vt.isValid=I4;vt.abs=o5;vt.add=l5;vt.subtract=u5;vt.as=d5;vt.asMilliseconds=h5;vt.asSeconds=g5;vt.asMinutes=v5;vt.asHours=m5;vt.asDays=p5;vt.asWeeks=y5;vt.asMonths=b5;vt.asQuarters=S5;vt.asYears=_5;vt.valueOf=f5;vt._bubble=c5;vt.clone=w5;vt.get=x5;vt.milliseconds=C5;vt.seconds=E5;vt.minutes=T5;vt.hours=A5;vt.days=I5;vt.weeks=P5;vt.months=R5;vt.years=k5;vt.humanize=$5;vt.toISOString=bd;vt.toString=bd;vt.toJSON=bd;vt.locale=xw;vt.localeData=Ew;vt.toIsoString=Pr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",bd);vt.lang=Cw;We("X",0,0,"unix");We("x",0,0,"valueOf");qe("x",hd);qe("X",iD);Ft("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Ft("x",function(e,t,n){n._d=new Date(ct(e))});//! moment.js
Le.version="2.29.4";MP(Vt);Le.fn=Ie;Le.min=C4;Le.max=E4;Le.now=T4;Le.utc=fi;Le.unix=e5;Le.months=n5;Le.isDate=ql;Le.locale=fs;Le.invalid=ld;Le.duration=Gr;Le.isMoment=zr;Le.weekdays=i5;Le.parseZone=t5;Le.localeData=Bi;Le.isDuration=Ku;Le.monthsShort=r5;Le.weekdaysMin=a5;Le.defineLocale=Uv;Le.updateLocale=t4;Le.locales=n4;Le.weekdaysShort=s5;Le.normalizeUnits=Dr;Le.relativeTimeRounding=O5;Le.relativeTimeThreshold=N5;Le.calendarFormat=X4;Le.prototype=Ie;Le.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const M5=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"})),aa=rr(M5);function V5(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oh={},$w={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:typeof window<"u"?window:Y,function(){var n="3.7.5",r=n,i=typeof atob=="function",s=typeof btoa=="function",a=typeof Buffer=="function",o=typeof TextDecoder=="function"?new TextDecoder:void 0,l=typeof TextEncoder=="function"?new TextEncoder:void 0,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=Array.prototype.slice.call(u),c=function(B){var K={};return B.forEach(function(z,se){return K[z]=se}),K}(f),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,h=String.fromCharCode.bind(String),g=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(B){return new Uint8Array(Array.prototype.slice.call(B,0))},v=function(B){return B.replace(/=/g,"").replace(/[+\/]/g,function(K){return K=="+"?"-":"_"})},p=function(B){return B.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function(B){for(var K,z,se,Ee,V="",H=B.length%3,G=0;G<B.length;){if((z=B.charCodeAt(G++))>255||(se=B.charCodeAt(G++))>255||(Ee=B.charCodeAt(G++))>255)throw new TypeError("invalid character found");K=z<<16|se<<8|Ee,V+=f[K>>18&63]+f[K>>12&63]+f[K>>6&63]+f[K&63]}return H?V.slice(0,H-3)+"===".substring(H):V},w=s?function(B){return btoa(B)}:a?function(B){return Buffer.from(B,"binary").toString("base64")}:y,A=a?function(B){return Buffer.from(B).toString("base64")}:function(B){for(var K=4096,z=[],se=0,Ee=B.length;se<Ee;se+=K)z.push(h.apply(null,B.subarray(se,se+K)));return w(z.join(""))},I=function(B,K){return K===void 0&&(K=!1),K?v(A(B)):A(B)},k=function(B){if(B.length<2){var K=B.charCodeAt(0);return K<128?B:K<2048?h(192|K>>>6)+h(128|K&63):h(224|K>>>12&15)+h(128|K>>>6&63)+h(128|K&63)}else{var K=65536+(B.charCodeAt(0)-55296)*1024+(B.charCodeAt(1)-56320);return h(240|K>>>18&7)+h(128|K>>>12&63)+h(128|K>>>6&63)+h(128|K&63)}},x=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(B){return B.replace(x,k)},m=a?function(B){return Buffer.from(B,"utf8").toString("base64")}:l?function(B){return A(l.encode(B))}:function(B){return w(C(B))},_=function(B,K){return K===void 0&&(K=!1),K?v(m(B)):m(B)},T=function(B){return _(B,!0)},E=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,R=function(B){switch(B.length){case 4:var K=(7&B.charCodeAt(0))<<18|(63&B.charCodeAt(1))<<12|(63&B.charCodeAt(2))<<6|63&B.charCodeAt(3),z=K-65536;return h((z>>>10)+55296)+h((z&1023)+56320);case 3:return h((15&B.charCodeAt(0))<<12|(63&B.charCodeAt(1))<<6|63&B.charCodeAt(2));default:return h((31&B.charCodeAt(0))<<6|63&B.charCodeAt(1))}},D=function(B){return B.replace(E,R)},$=function(B){if(B=B.replace(/\s+/g,""),!d.test(B))throw new TypeError("malformed base64.");B+="==".slice(2-(B.length&3));for(var K,z="",se,Ee,V=0;V<B.length;)K=c[B.charAt(V++)]<<18|c[B.charAt(V++)]<<12|(se=c[B.charAt(V++)])<<6|(Ee=c[B.charAt(V++)]),z+=se===64?h(K>>16&255):Ee===64?h(K>>16&255,K>>8&255):h(K>>16&255,K>>8&255,K&255);return z},M=i?function(B){return atob(p(B))}:a?function(B){return Buffer.from(B,"base64").toString("binary")}:$,O=a?function(B){return g(Buffer.from(B,"base64"))}:function(B){return g(M(B).split("").map(function(K){return K.charCodeAt(0)}))},L=function(B){return O(te(B))},W=a?function(B){return Buffer.from(B,"base64").toString("utf8")}:o?function(B){return o.decode(O(B))}:function(B){return D(M(B))},te=function(B){return p(B.replace(/[-_]/g,function(K){return K=="-"?"+":"/"}))},ie=function(B){return W(te(B))},Q=function(B){if(typeof B!="string")return!1;var K=B.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(K)||!/[^\s0-9a-zA-Z\-_]/.test(K)},ee=function(B){return{value:B,enumerable:!1,writable:!0,configurable:!0}},ye=function(){var B=function(K,z){return Object.defineProperty(String.prototype,K,ee(z))};B("fromBase64",function(){return ie(this)}),B("toBase64",function(K){return _(this,K)}),B("toBase64URI",function(){return _(this,!0)}),B("toBase64URL",function(){return _(this,!0)}),B("toUint8Array",function(){return L(this)})},we=function(){var B=function(K,z){return Object.defineProperty(Uint8Array.prototype,K,ee(z))};B("toBase64",function(K){return I(this,K)}),B("toBase64URI",function(){return I(this,!0)}),B("toBase64URL",function(){return I(this,!0)})},$e=function(){ye(),we()},le={version:n,VERSION:r,atob:M,atobPolyfill:$,btoa:w,btoaPolyfill:y,fromBase64:ie,toBase64:_,encode:_,encodeURI:T,encodeURL:T,utob:C,btou:D,decode:ie,isValid:Q,fromUint8Array:I,toUint8Array:L,extendString:ye,extendUint8Array:we,extendBuiltins:$e};return le.Base64={},Object.keys(le).forEach(function(B){return le.Base64[B]=le[B]}),le})})($w);var B5=$w.exports,Mw={};const Qv=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!Qv)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Qv.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');Mw.AbortController=Qv.AbortController;var Sd={};Object.defineProperty(Sd,"__esModule",{value:!0});class mc extends Error{static fromResponse(t,n){return new mc(t.message||JSON.stringify(t),n,t.timestamp,t.error_id,t.details,t)}static fromText(t,n){return new mc(t,n)}constructor(t,n,r=null,i=null,s=null,a=null){super(t),this.timestamp=r,this.status=n,this.errorId=i,this.details=s,this.error=a}}Sd.default=mc;var em={},L5=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(em,"__esModule",{value:!0});const H5=L5(Sd);class pc extends H5.default{static fromResponse(t,n){return new pc(t.message||JSON.stringify(t),n,t.timestamp,t.error_id,t.details)}static fromText(t,n){return new pc(t,n)}}em.default=pc;var _d={};Object.defineProperty(_d,"__esModule",{value:!0});const j5=()=>typeof navigator<"u"&&navigator.product==="ReactNative";_d.default=j5;var dy;function gi(){return dy||(dy=1,function(e){var t=Y&&Y.__awaiter||function(g,v,p,y){function w(A){return A instanceof p?A:new p(function(I){I(A)})}return new(p||(p=Promise))(function(A,I){function k(m){try{C(y.next(m))}catch(_){I(_)}}function x(m){try{C(y.throw(m))}catch(_){I(_)}}function C(m){m.done?A(m.value):w(m.value).then(k,x)}C((y=y.apply(g,v||[])).next())})},n=Y&&Y.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.realFetch=void 0;const r=B5,i=Mw,s=n(Sd),a=n(em),o=n(_d),l=n(yo()),u=["head","get","post","put","delete","options"],f=l.default?l.default.loggerFor("api"):console,c=300*1e3,d=()=>{if(typeof fetch<"u")return fetch;if(typeof document<"u"&&window.fetch)return window.fetch;if((0,o.default)())return fetch;try{return V5(Math.random()>=0?"node-fetch/lib/index":"")}catch{return fetch}};e.realFetch=d;class h{static successResponseParser(v){return v.status===204||v.status===201||v.status===200}static defaultParser(v){return v.json().then(p=>Object.assign(Object.assign({},p),{_headers:v.headers}))}static getQueryString(v){return Object.keys(v).filter(p=>v[p]).map(p=>`${p}=${encodeURIComponent(v[p])}`).join("&")}static base64Encode(v){return typeof btoa<"u"?btoa(v):r.Base64.encode(v)}constructor({server:v,refreshTokenCallback:p,clientId:y,agent:w=null,token:A=null,fetchOptions:I,requestTimeout:k=c}){this.server=v,this.agent=w,this.clientId=y,this.refreshTokenCallback=p,this.refreshTokenPromise=null,this.fetchOptions=I||{},this.requestTimeout=k||c,A&&(this.token=A),this.shouldLogErrors=!0,u.forEach(x=>{this[x]=function(...m){return m.splice(1,0,x),this.call.call(this,...m)}})}setRequestTimeout(v){this.requestTimeout=v}setTenant(v){this.tenant=v}setToken(v){this.token=v}setFetchOptions(v){this.fetchOptions=v}disableErrorLogging(){this.shouldLogErrors=!1}enableErrorLogging(){this.shouldLogErrors=!0}call(v,p="get",y=null,w=null,A=h.defaultParser,I=!0){return t(this,void 0,void 0,function*(){const k=this.computeUrl(p,v,y),x=this.getHeaders(w);let C=p==="get"?null:y;C&&x["Content-Type"]==="application/json"&&(C=JSON.stringify(C));const m=p==="head",T=p==="delete"||m?h.successResponseParser:A,E=Object.assign({},this.fetchOptions||{}),R=typeof AbortController<"u"?new AbortController:new i.AbortController,D=E.headers||{};delete E.headers;const $=Object.assign({method:p,body:C,signal:R?R.signal:null,headers:Object.assign(Object.assign({},this.getHeaders(w)),D),agent:this.agent},E);this.refreshTokenPromise&&(f.info("A token is already refreshing, waiting ...",{url:k}),yield this.refreshTokenPromise);const M=new Date,O=(0,e.realFetch)()(k,$).then(W=>{const ie=(W.headers.get("content-type")||"").indexOf("application/json")!==-1;if(l.default.logRequest(k,$,W,M),m&&W.status>=500||!m&&W.status>=400){const Q=ie?W.json():W.text(),ee=W.status>=500?a.default:s.default;return Q.then(ye=>t(this,void 0,void 0,function*(){if(I&&this._checkTokenExpired(W,ye))return f.warn("token expired",{error:ye.reason}),this._replayWithNewToken(ye,v,p,y,w,A);const we=typeof ye=="string"?ee.fromText(ye,W.status):ee.fromResponse(ye,W.status);throw this.shouldLogErrors&&f.error("API error",we),we}))}return T(W,ie)}).catch(W=>{throw this.shouldLogErrors&&f.error("Fetch failed",{url:k,options:$,message:W.message,stack:W.stack}),W}),L=new Promise((W,te)=>{setTimeout(()=>{R.abort(),te(new Error(`Request timed out after ${this.requestTimeout} ms`))},this.requestTimeout)});return Promise.race([O,L])})}_checkTokenExpired(v,p){const y=v.status===404&&this._isTokenNotFound(p);return v.status===401||y}_isTokenNotFound(v){return v&&v.reason&&v.reason[0]==="No such token"}_replayWithNewToken(v,p,y,w=null,A=null,I){var k;const x=this._isTokenNotFound(v);let C=p;return f.info("refreshing token",{inProgress:!!this.refreshTokenPromise}),this.refreshTokenPromise=this.refreshTokenPromise||this.refreshTokenCallback(),(k=this.refreshTokenPromise)===null||k===void 0?void 0:k.then(()=>{if(this.refreshTokenPromise=null,f.info("token refreshed",{isTokenNotFound:x}),x){const m=p.split("/");m.pop(),m.push(this.token),C=m.join("/")}return this.call(C,y,w,A,I,!1)}).catch(m=>{throw this.refreshTokenPromise=null,m})}getHeaders(v){return v instanceof Object?v:Object.assign(Object.assign({"X-Auth-Token":this.token},this.tenant?{"Wazo-Tenant":this.tenant}:null),{Accept:"application/json","Content-Type":"application/json"})}computeUrl(v,p,y){const w=`${this.baseUrl}/${p}`;return v==="get"&&y&&Object.keys(y).length?`${w}?${h.getQueryString(y)}`:w}get baseUrl(){return`https://${this.server}/api`}}e.default=h}(oh)),oh}var fy;function yo(){if(fy)return yu;fy=1;var e=Y&&Y.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(yu,"__esModule",{value:!0});const t=e(aa),n=gi(),r=e(_d),i="trace",s="debug",a="info",o="log",l="warn",u="error",f=[a,o,l,u],c=[i,s,a,o,l,u],d="logger-category=",h=10,g=(y,w=!1)=>(y.TRACE=i,y.DEBUG=s,y.INFO=a,y.LOG=o,y.WARN=l,y.ERROR=u,w&&(y.trace=(...A)=>y.apply(null,[i,...A]),y.debug=(...A)=>y.apply(null,[s,...A]),y.info=(...A)=>y.apply(null,[a,...A]),y.log=(...A)=>y.apply(null,[o,...A]),y.warn=(...A)=>y.apply(null,[l,...A]),y.error=(...A)=>y.apply(null,[u,...A])),y),v=y=>{const w='{"message": "Not parsable JSON"}';try{return JSON.stringify(y)}catch{}return w};let p=class{constructor(){g(this),this.oldConsoleMethods=null,this.enabled=!1,this.remoteClientConfiguration=null,this.buffer=[],this.bufferTimeout=null,this._boundProcessBuffer=this._processBuffer.bind(this),this._boundParseLoggerBody=this._parseLoggerBody.bind(this),this._callback=null}init(){this._catchConsole()}setCallback(w){this._callback=w}configureRemoteClient(w={tag:"wazo-sdk",host:null,port:null,level:null,extra:{}}){this.remoteClientConfiguration=w}enable(){this.oldConsoleMethods||this.init(),this.enabled=!0}disable(){this.enabled=!1}loggerFor(w){return g((I,...k)=>{this.log.apply(this,[I,this._makeCategory(w),...k])},!0)}removeSlashes(w){return w.replace(/"/g,"'").replace(/\\/g,"")}log(w,...A){var I,k;if(!this.enabled)return;let x=null,C=!1,m={};A[0].indexOf(d)===0&&(x=A[0].split("=")[1],A.splice(0,1));const _=A[A.length-1];_&&(typeof _=="object"&&Object.keys(_).length||_ instanceof Error)&&(_ instanceof Error?m={errorMessage:_.message,errorStack:_.stack,errorType:_.constructor.name,skipSendToRemote:_.skipSendToRemote}:m=_,A.splice(1,1)),m.skipSendToRemote&&(C=!0,delete m.skipSendToRemote);const T=(0,t.default)().format("YYYY-MM-DD HH:mm:ss.SSS"),E=A.join(", ");let R=E;if(Object.keys(m).length){const M=v(m);R=`${R} (${M})`}x&&(R=`[${x}] ${R}`);const D=(0,r.default)()&&w==="error"?l:w,$=((I=this.oldConsoleMethods)===null||I===void 0?void 0:I[D])||((k=this.oldConsoleMethods)===null||k===void 0?void 0:k.log);$.apply($,[T,R]),this._callback&&this._callback(w,R),C||this._sendToRemoteLogger(w,Object.assign({date:T,message:E,category:x},m))}logRequest(w,A,I,k){if(!this.enabled)return;const{status:x}=I,C=+new Date-+k;let m=i;x>=400&&x<500?m=l:x>=500&&(m=u),this.log(m,this._makeCategory("http"),w,{status:x,body:this.removeSlashes(JSON.stringify(A.body)),method:A.method,headers:A.headers,duration:C})}getLogs(){return console.warn("IssueReporter's logs aren't stored anymore. Please use fluentd to store them"),[]}getParsedLogs(){return console.warn("IssueReporter's logs aren't stored anymore. Please use fluentd to store them"),[]}getReport(){return this.getParsedLogs().join(`\r
`)}_catchConsole(){this.oldConsoleMethods={},f.forEach(w=>{this.oldConsoleMethods&&(this.oldConsoleMethods[w]=console[w]);const A=typeof window<"u"?window:Y;A.console[w]=(...I)=>{try{this.log(w,I.join(" ")),this.oldConsoleMethods&&this.oldConsoleMethods[w].apply(null,I)}catch{}}})}_sendToRemoteLogger(w,A={}){if(!this.remoteClientConfiguration)return;const{level:I,bufferSize:k}=this.remoteClientConfiguration;if(!(!I||this._isLevelAbove(I,w))){if(A.level=w,k>0)return this._addToBuffer(A);this._sendDebugToGrafana(A)}}_parseLoggerBody(w){const{level:A}=w,{maxMessageSize:I,extra:k}=this.remoteClientConfiguration||{};return delete w.level,I&&typeof w.message=="string"&&w.message.length>I&&(w.message=`${w.message.substr(0,I)}...`),v(Object.assign(Object.assign({level:A},w),k))}_addToBuffer(w){this.bufferTimeout&&(clearTimeout(this.bufferTimeout),this.bufferTimeout=null),this.buffer.push(w);const{bufferSize:A,bufferTimeout:I}=this.remoteClientConfiguration;if(this.buffer.length>A)return this._processBuffer();I>0&&(this.bufferTimeout=setTimeout(this._boundProcessBuffer,I))}_processBuffer(){this._sendDebugToGrafana(this.buffer),this.buffer=[],this.bufferTimeout&&(clearTimeout(this.bufferTimeout),this.bufferTimeout=null)}_computeRetryDelay(w,A=1e3,I=5e4){const x=Math.min(A*Math.pow(1.5,w),I);return Math.max(A,Math.random()*x)}_sendDebugToGrafana(w,A=0){if(!this.remoteClientConfiguration||A>=h)return;const{tag:I,host:k,port:x}=this.remoteClientConfiguration,C=+x==443,m=`http${C?"s":""}://${k}${C?"":`:${x}`}/${I}`,_=Array.isArray(w)?`[${w.map(this._boundParseLoggerBody).join(",")}]`:this._parseLoggerBody(w);(0,n.realFetch)()(m,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:_}).catch(T=>{T.skipSendToRemote=!0,this.log("error",this._makeCategory("grafana"),"Sending log to grafana, error",T);const E=this._computeRetryDelay(A,1e3,5e4);setTimeout(()=>{Array.isArray(w)?w=w.map(R=>this._writeRetryCount(R,A+1)):w&&typeof w=="object"&&(w=this._writeRetryCount(w,A+1)),this._sendDebugToGrafana(w,A+1)},E)})}_writeRetryCount(w,A){return w&&typeof w=="object"&&(w._retry=A),w}_isLevelAbove(w,A){const I=c.indexOf(w),k=c.indexOf(A);return I===-1||k===-1?!1:I>k}_makeCategory(w){return`${d}${w}`}};return yu.default=new p,yu}var tm={},Hi={},Vw={},Bw={exports:{}},hy=Bw.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(hy).forEach(function(e){var t=hy[e];t.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var Lw=Bw.exports;(function(e){var t=function(o){return String(Number(o))===o?Number(o):o},n=function(o,l,u,f){if(f&&!u)l[f]=t(o[1]);else for(var c=0;c<u.length;c+=1)o[c+1]!=null&&(l[u[c]]=t(o[c+1]))},r=function(o,l,u){var f=o.name&&o.names;o.push&&!l[o.push]?l[o.push]=[]:f&&!l[o.name]&&(l[o.name]={});var c=o.push?{}:f?l[o.name]:l;n(u.match(o.reg),c,o.names,o.name),o.push&&l[o.push].push(c)},i=Lw,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(o){var l={},u=[],f=l;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(c){var d=c[0],h=c.slice(2);d==="m"&&(u.push({rtp:[],fmtp:[]}),f=u[u.length-1]);for(var g=0;g<(i[d]||[]).length;g+=1){var v=i[d][g];if(v.reg.test(h))return r(v,f,h)}}),l.media=u,l};var a=function(o,l){var u=l.split(/=(.+)/,2);return u.length===2?o[u[0]]=t(u[1]):u.length===1&&l.length>1&&(o[u[0]]=void 0),o};e.parseParams=function(o){return o.split(/;\s?/).reduce(a,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(o){return o.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(o){for(var l=[],u=o.split(" ").map(t),f=0;f<u.length;f+=3)l.push({component:u[f],ip:u[f+1],port:u[f+2]});return l},e.parseImageAttributes=function(o){return o.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(a,{})})},e.parseSimulcastStreamList=function(o){return o.split(";").map(function(l){return l.split(",").map(function(u){var f,c=!1;return u[0]!=="~"?f=t(u):(f=t(u.substring(1,u.length)),c=!0),{scid:f,paused:c}})})}})(Vw);var lh=Lw,q5=/%[sdv%]/g,U5=function(e){var t=1,n=arguments,r=n.length;return e.replace(q5,function(i){if(t>=r)return i;var s=n[t];switch(t+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},No=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,i=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var a=t.names[s];t.name?i.push(n[t.name][a]):i.push(n[t.names[s]])}else i.push(n[t.name]);return U5.apply(null,i)},z5=["v","o","s","i","u","e","p","c","b","t","r","z","a"],K5=["i","c","b","a"],G5=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=t.outerOrder||z5,r=t.innerOrder||K5,i=[];return n.forEach(function(s){lh[s].forEach(function(a){a.name in e&&e[a.name]!=null?i.push(No(s,a,e)):a.push in e&&e[a.push]!=null&&e[a.push].forEach(function(o){i.push(No(s,a,o))})})}),e.media.forEach(function(s){i.push(No("m",lh.m[0],s)),r.forEach(function(a){lh[a].forEach(function(o){o.name in s&&s[o.name]!=null?i.push(No(a,o,s)):o.push in s&&s[o.push]!=null&&s[o.push].forEach(function(l){i.push(No(a,o,l))})})})}),i.join(`\r
`)+`\r
`},oa=Vw,W5=G5;Hi.write=W5;Hi.parse=oa.parse;Hi.parseParams=oa.parseParams;Hi.parseFmtpConfig=oa.parseFmtpConfig;Hi.parsePayloads=oa.parsePayloads;Hi.parseRemoteCandidates=oa.parseRemoteCandidates;Hi.parseImageAttributes=oa.parseImageAttributes;Hi.parseSimulcastStreamList=oa.parseSimulcastStreamList;(function(e){var t=Y&&Y.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.addIcesInAllBundles=e.fixSdp=e.hasAnActiveVideo=e.activateVideoModifier=e.deactivateVideoModifier=e.getVideoDirection=e.toggleVideoDirection=e.fixBundle=e.isSdpValid=e.areCandidateValid=e.parseCandidate=e.getCandidates=void 0;const n=t(Hi),r=p=>{if(!p)return[];const y=n.default.parse(p);return!y||!y.media?[]:y.media.map(w=>w.candidates).flat().filter(w=>!!w)};e.getCandidates=r;const i=p=>{if(!p)return null;const y=n.default.parse(p.indexOf("a=")===0?p:`a=${p}`);return y.candidates?y.candidates[0]:null};e.parseCandidate=i;const s=p=>p.filter(y=>y&&(y.type==="srflx"||y.type==="relay")),a=p=>s(p).length>0;e.areCandidateValid=a;const o=p=>{const y=(0,e.getCandidates)(p);return(0,e.areCandidateValid)(y)};e.isSdpValid=o;const l=p=>{const y=n.default.parse(p),w=y.groups.findIndex(A=>A.type==="BUNDLE");return w!==-1&&(y.groups[w].mids=y.media.map((A,I)=>"mid"in A?A.mid:I).join(" ")),n.default.write(y)};e.fixBundle=l;const u=(p,y)=>{const w=n.default.parse(p);return w.media=w.media.map(A=>Object.assign(Object.assign({},A),A.type==="video"?{direction:y}:{})),n.default.write(w)};e.toggleVideoDirection=u;const f=p=>{const w=n.default.parse(p).media.find(A=>A.type==="video");return w?w.direction:null};e.getVideoDirection=f;const c=p=>{const y=p;return y.sdp=(0,e.toggleVideoDirection)(y.sdp,"inactive"),Promise.resolve(y)};e.deactivateVideoModifier=c;const d=p=>{const y=p;return y.sdp=(0,e.toggleVideoDirection)(y.sdp,"sendrecv"),Promise.resolve(y)};e.activateVideoModifier=d;const h=p=>p?!!n.default.parse(p).media.find(w=>w.type==="video"&&w.port>10&&(!w.direction||w.direction!=="inactive")):!1;e.hasAnActiveVideo=h;const g=(p,y,w=!0)=>{const A=n.default.parse(p),I=s(y)[0],k=I?I.ip:null;k&&(A.origin.address=k),A.media=A.media.map(C=>{const m=w&&I?I.port:C.port;return Object.assign(Object.assign({},C),{port:m,candidates:(C.candidates||[]).concat(y),direction:m<10?"inactive":C.direction})});let x=n.default.write(A);return k&&(x=x.replace(/IN IP4 0.0.0.0/g,`IN IP4 ${k}`)),x};e.fixSdp=g;const v=p=>{const y=n.default.parse(p),w=y.media.find(I=>!!I.candidates);if(!w)return p;const{candidates:A}=w;return y.media=y.media.map(I=>Object.assign(Object.assign({},I),{candidates:I.candidates||A})),n.default.write(y)};e.addIcesInAllBundles=v})(tm);var Hw=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jl,"__esModule",{value:!0});jl.wazoMediaStreamFactory=void 0;const Y5=Hw(U_),_u=$P,gy=Hw(yo()),uh=tm,Ea=gy.default?gy.default.loggerFor("webrtc-sdh"):console,J5=e=>!e.audio&&!e.video?Promise.resolve(new MediaStream):navigator.mediaDevices===void 0?Promise.reject(new Error("Media devices not available in insecure contexts.")):e.screen&&!e.desktop?navigator.mediaDevices.getDisplayMedia.call(navigator.mediaDevices,e):navigator.mediaDevices.getUserMedia.call(navigator.mediaDevices,e);jl.wazoMediaStreamFactory=J5;class X5 extends _u.SessionDescriptionHandler{constructor(t,n,r,i,s){super(t,n,r),this.eventEmitter=new Y5.default,this.isWeb=i,this.session=s}on(t,n){this.eventEmitter.on(t,n)}off(t,n){this.eventEmitter.removeListener(t,n)}setRemoteSessionDescription(t){try{const n=super.setRemoteSessionDescription(t);return this.eventEmitter.emit("setDescription",t),n}catch(n){throw this.logger.error(`SessionDescriptionHandler.setRemoteSessionDescription: ${n}`),n}}getDescription(t={},n){var r;if(this.logger.debug("SessionDescriptionHandler.getDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=t.onDataChannel;const i=t.offerOptions?t.offerOptions.iceRestart:!1,s=t?!!t.conference:!1,a=t?!!t.audioOnly:!1,o=!this.session.pendingReinviteAck&&(i||"constraints"in t),l=t.iceGatheringTimeout===void 0?(r=this.sessionDescriptionHandlerConfiguration)===null||r===void 0?void 0:r.iceGatheringTimeout:t.iceGatheringTimeout;return Ea.trace("getting SDP description",{iceRestart:i,shouldWaitForIce:o,iceTimeout:l}),this.gatheredCandidates=[],this.peerConnectionDelegate||(this.peerConnectionDelegate={}),this.peerConnectionDelegate.onicecandidate=u=>{Ea.trace("onicecandidate",u.candidate?u.candidate.candidate:{done:!0}),u.candidate&&(this.gatheredCandidates.push((0,uh.parseCandidate)(u.candidate.candidate)),(u.candidate.candidate.indexOf("srflx")!==-1||u.candidate.candidate.indexOf("relay")!==-1)&&(Ea.info("A valid ice was found, triggering ice gathering complete callback.",{ice:u.candidate.candidate}),this.iceGatheringComplete()))},this.getLocalMediaStream(t).then(()=>this.updateDirection(t,s,a)).then(()=>this.createDataChannel(t)).then(()=>{var u;s&&t.constraints&&!t.constraints.video&&!("hold"in t)&&!a&&!((u=this.peerConnection)===null||u===void 0)&&u.addTransceiver&&this.peerConnection.addTransceiver("video",{streams:[this._localMediaStream],direction:"sendrecv"})}).then(()=>this.createLocalOfferOrAnswer(t)).then(u=>this.setLocalSessionDescription(u)).then(()=>this.waitForIceGatheringComplete(i,l)).then(()=>this.getLocalSessionDescription()).then(u=>{const{sdp:f}=u;return f.indexOf("a=candidate")!==-1?{type:u.type,sdp:(0,uh.addIcesInAllBundles)(f)}:(Ea.info("No ICE candidates found in SDP, fixing it with gathered ices",this.gatheredCandidates),{type:u.type,sdp:(0,uh.fixSdp)(f,this.gatheredCandidates,t&&t.constraints?t.constraints.video:!1)})}).then(u=>this.applyModifiers(u,n)).then(u=>({body:u.sdp,contentType:"application/sdp"})).catch(u=>{throw Ea.error("error when creating media",u),this.logger.error(`SessionDescriptionHandler.getDescription failed - ${u}`),u})}sendDtmf(t,n={duration:0,interToneGap:0}){if(this.isWeb)return super.sendDtmf(t,n);this.logger.debug(`DTMF sent via INFO: ${t.toString()}`);const i={body:{contentDisposition:"render",contentType:"application/dtmf-relay",content:`Signal=${t}\r
Duration=${n.duration||1e3}`}};return this.session.info({requestOptions:i})}close(){var t,n,r;if(Ea.info("closing sdh"),this.isWeb)return super.close();this.logger.debug("SessionDescriptionHandler.close"),this._peerConnection!==void 0&&(!((t=this.peerConnection)===null||t===void 0)&&t.getLocalStreams&&((n=this.peerConnection)===null||n===void 0||n.getLocalStreams().forEach(i=>{i.getTracks().filter(s=>s.enabled).forEach(s=>s.stop())}),(r=this.peerConnection)===null||r===void 0||r.getRemoteStreams().forEach(i=>{i.getTracks().filter(s=>s.enabled).forEach(s=>s.stop())})),this._dataChannel&&this._dataChannel.close(),this._peerConnection.close(),this._peerConnection=void 0)}updateDirection(t,n=!1,r=!1){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));if(!this.isWeb)return Promise.resolve();switch(this._peerConnection.signalingState){case"stable":{this.logger.debug("SessionDescriptionHandler.updateDirection - setting offer direction");const i=(s,a)=>{if(n)return r&&a.receiver.track&&a.receiver.track.kind==="video"||t&&t.hold?"sendonly":"sendrecv";switch(s){case"inactive":return t&&t.hold?"inactive":n&&!r?"sendrecv":"recvonly";case"recvonly":return t&&t.hold?"inactive":"recvonly";case"sendonly":return t&&t.hold?"sendonly":"sendrecv";case"sendrecv":return t&&t.hold?"sendonly":"sendrecv";case"stopped":return"stopped";default:throw new Error("Should never happen")}};this._peerConnection.getTransceivers().forEach(s=>{if(s.direction){const a=i(s.direction,s);s.direction!==a&&(s.direction=a)}})}break;case"have-remote-offer":{this.logger.debug("SessionDescriptionHandler.updateDirection - setting answer direction");const i=(()=>{const a=this._peerConnection.remoteDescription;if(!a)throw new Error("Failed to read remote offer");const o=/a=sendrecv\r\n|a=sendonly\r\n|a=recvonly\r\n|a=inactive\r\n/.exec(a.sdp);if(o)switch(o[0]){case`a=inactive\r
`:return"inactive";case`a=recvonly\r
`:return"recvonly";case`a=sendonly\r
`:return"sendonly";case`a=sendrecv\r
`:return"sendrecv";default:throw new Error("Should never happen")}return"sendrecv"})(),s=(()=>{switch(i){case"inactive":return"inactive";case"recvonly":return"sendonly";case"sendonly":return t&&t.hold?"inactive":"recvonly";case"sendrecv":return t&&t.hold?"sendonly":"sendrecv";default:throw new Error("Should never happen")}})();this._peerConnection.getTransceivers().forEach(a=>{if(!a.stopped&&a.direction){const{receiver:o}=a;if(n&&r&&o.track&&o.track.kind==="video"){a.direction="inactive";return}a.direction!=="stopped"&&a.direction!==s&&(a.direction=s)}})}break;case"have-local-offer":case"have-local-pranswer":case"have-remote-pranswer":case"closed":default:return Promise.reject(new Error(`Invalid signaling state ${this._peerConnection.signalingState}`))}return Promise.resolve()}setLocalMediaStream(t){if(this.logger.debug("SessionDescriptionHandler.setLocalMediaStream"),!this._peerConnection)throw new Error("Peer connection undefined.");const n=this._peerConnection,{sfu:r}=n,i=this._localMediaStream,s=[],a=u=>{const{kind:f}=u;if(f!=="audio"&&f!=="video")throw new Error(`Unknown new track kind ${f}.`);const c=n.getSenders&&n.getSenders().find(d=>d.track&&d.track.kind===f);c&&(!r||u.kind==="audio")?(c.track&&(u.enabled=c.track.enabled),s.push(new Promise(d=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - replacing sender ${f} track`),d(null)}).then(()=>c.replaceTrack(u).then(()=>{const d=i.getTracks().find(h=>h.kind===f);d&&(d.stop(),i.removeTrack(d),_u.SessionDescriptionHandler.dispatchRemoveTrackEvent(i,d)),i.addTrack(u),_u.SessionDescriptionHandler.dispatchAddTrackEvent(i,u)}).catch(d=>{throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to replace sender ${f} track`),d})))):s.push(new Promise(d=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - adding sender ${f} track`),d(null)}).then(()=>{try{n.addTrack?n.addTrack(u,i):n.addStream(i)}catch(d){throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to add sender ${f} track`),d}i.addTrack(u),_u.SessionDescriptionHandler.dispatchAddTrackEvent(i,u)}))},o=t.getAudioTracks();o.length&&a(o[0]);const l=t.getVideoTracks();return l.length&&a(l[0]),s.reduce((u,f)=>u.then(()=>f),Promise.resolve())}getLocalMediaStream(t){if(this.logger.debug("WazoSessionDescriptionHandler.getLocalMediaStream"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));let n=t.constraints?Object.assign({},t.constraints):{};if(this.localMediaStreamConstraints){if(JSON.stringify(this.localMediaStreamConstraints.audio)===JSON.stringify(n.audio)&&JSON.stringify(this.localMediaStreamConstraints.video)===JSON.stringify(n.video))return Promise.resolve()}else n.audio===void 0&&n.video===void 0&&(n={audio:!0});return this.localMediaStreamConstraints=n,this.mediaStreamFactory(n,this).then(r=>(this.setLocalMediaStream(r),r))}}jl.default=X5;var Gl={},Z5=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gl,"__esModule",{value:!0});const Q5=Z5(U_);class eF{constructor(){this.eventEmitter=new Q5.default}on(t,n){this.eventEmitter.on(t,n)}once(t,n){this.eventEmitter.once(t,n)}off(t,n){this.eventEmitter.removeListener(t,n)}unbind(){this.eventEmitter.removeAllListeners()}}Gl.default=eF;var wu={},jw={},nm={},Pe={},xl={};xl.userAgent=!1;var Ta={},tF="10.8.6",nF="jsrsasign(all) 10.8.6 (2023-04-26) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license";/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */var je=je||function(e,t){var n={},r=n.lib={},i=r.Base=function(){function d(){}return{extend:function(h){d.prototype=this;var g=new d;return h&&g.mixIn(h),g.hasOwnProperty("init")||(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var g in h)h.hasOwnProperty(g)&&(this[g]=h[g]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=i.extend({init:function(d,h){d=this.words=d||[],h!=t?this.sigBytes=h:this.sigBytes=d.length*4},toString:function(d){return(d||o).stringify(this)},concat:function(d){var h=this.words,g=d.words,v=this.sigBytes,p=d.sigBytes;if(this.clamp(),v%4)for(var y=0;y<p;y++){var w=g[y>>>2]>>>24-y%4*8&255;h[v+y>>>2]|=w<<24-(v+y)%4*8}else for(var y=0;y<p;y+=4)h[v+y>>>2]=g[y>>>2];return this.sigBytes+=p,this},clamp:function(){var d=this.words,h=this.sigBytes;d[h>>>2]&=4294967295<<32-h%4*8,d.length=e.ceil(h/4)},clone:function(){var d=i.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var h=[],g=0;g<d;g+=4)h.push(e.random()*4294967296|0);return new s.init(h,d)}}),a=n.enc={},o=a.Hex={stringify:function(d){for(var h=d.words,g=d.sigBytes,v=[],p=0;p<g;p++){var y=h[p>>>2]>>>24-p%4*8&255;v.push((y>>>4).toString(16)),v.push((y&15).toString(16))}return v.join("")},parse:function(d){for(var h=d.length,g=[],v=0;v<h;v+=2)g[v>>>3]|=parseInt(d.substr(v,2),16)<<24-v%8*4;return new s.init(g,h/2)}},l=a.Latin1={stringify:function(d){for(var h=d.words,g=d.sigBytes,v=[],p=0;p<g;p++){var y=h[p>>>2]>>>24-p%4*8&255;v.push(String.fromCharCode(y))}return v.join("")},parse:function(d){for(var h=d.length,g=[],v=0;v<h;v++)g[v>>>2]|=(d.charCodeAt(v)&255)<<24-v%4*8;return new s.init(g,h)}},u=a.Utf8={stringify:function(d){try{return decodeURIComponent(escape(l.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return l.parse(unescape(encodeURIComponent(d)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=u.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var h=this._data,g=h.words,v=h.sigBytes,p=this.blockSize,y=p*4,w=v/y;d?w=e.ceil(w):w=e.max((w|0)-this._minBufferSize,0);var A=w*p,I=e.min(A*4,v);if(A){for(var k=0;k<A;k+=p)this._doProcessBlock(g,k);var x=g.splice(0,A);h.sigBytes-=I}return new s.init(x,I)},clone:function(){var d=i.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var h=this._doFinalize();return h},blockSize:512/32,_createHelper:function(d){return function(h,g){return new d.init(g).finalize(h)}},_createHmacHelper:function(d){return function(h,g){return new c.HMAC.init(d,g).finalize(h)}}});var c=n.algo={};return n}(Math);(function(e){var i=je,t=i.lib,n=t.Base,r=t.WordArray,i=i.x64={};i.Word=n.extend({init:function(s,a){this.high=s,this.low=a}}),i.WordArray=n.extend({init:function(s,a){s=this.words=s||[],this.sigBytes=a!=e?a:8*s.length},toX32:function(){for(var s=this.words,a=s.length,o=[],l=0;l<a;l++){var u=s[l];o.push(u.high),o.push(u.low)}return r.create(o,this.sigBytes)},clone:function(){for(var s=n.clone.call(this),a=s.words=this.words.slice(0),o=a.length,l=0;l<o;l++)a[l]=a[l].clone();return s}})})();je.lib.Cipher||function(e){var h=je,t=h.lib,n=t.Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,s=h.enc.Base64,a=h.algo.EvpKDF,o=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(v,p){return this.create(this._ENC_XFORM_MODE,v,p)},createDecryptor:function(v,p){return this.create(this._DEC_XFORM_MODE,v,p)},init:function(v,p,y){this.cfg=this.cfg.extend(y),this._xformMode=v,this._key=p,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(v){return this._append(v),this._process()},finalize:function(v){return v&&this._append(v),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(v){return{encrypt:function(p,y,w){return(typeof y=="string"?g:d).encrypt(v,p,y,w)},decrypt:function(p,y,w){return(typeof y=="string"?g:d).decrypt(v,p,y,w)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=h.mode={},l=function(v,p,y){var w=this._iv;w?this._iv=e:w=this._prevBlock;for(var A=0;A<y;A++)v[p+A]^=w[A]},u=(t.BlockCipherMode=n.extend({createEncryptor:function(v,p){return this.Encryptor.create(v,p)},createDecryptor:function(v,p){return this.Decryptor.create(v,p)},init:function(v,p){this._cipher=v,this._iv=p}})).extend();u.Encryptor=u.extend({processBlock:function(v,p){var y=this._cipher,w=y.blockSize;l.call(this,v,p,w),y.encryptBlock(v,p),this._prevBlock=v.slice(p,p+w)}}),u.Decryptor=u.extend({processBlock:function(v,p){var y=this._cipher,w=y.blockSize,A=v.slice(p,p+w);y.decryptBlock(v,p),l.call(this,v,p,w),this._prevBlock=A}}),c=c.CBC=u,u=(h.pad={}).Pkcs7={pad:function(v,p){for(var y=4*p,y=y-v.sigBytes%y,w=y<<24|y<<16|y<<8|y,A=[],I=0;I<y;I+=4)A.push(w);y=r.create(A,y),v.concat(y)},unpad:function(v){v.sigBytes-=v.words[v.sigBytes-1>>>2]&255}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:c,padding:u}),reset:function(){o.reset.call(this);var p=this.cfg,v=p.iv,p=p.mode;if(this._xformMode==this._ENC_XFORM_MODE)var y=p.createEncryptor;else y=p.createDecryptor,this._minBufferSize=1;this._mode=y.call(p,this,v&&v.words)},_doProcessBlock:function(v,p){this._mode.processBlock(v,p)},_doFinalize:function(){var v=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){v.pad(this._data,this.blockSize);var p=this._process(!0)}else p=this._process(!0),v.unpad(p);return p},blockSize:4});var f=t.CipherParams=n.extend({init:function(v){this.mixIn(v)},toString:function(v){return(v||this.formatter).stringify(this)}}),c=(h.format={}).OpenSSL={stringify:function(v){var p=v.ciphertext;return v=v.salt,(v?r.create([1398893684,1701076831]).concat(v).concat(p):p).toString(s)},parse:function(v){v=s.parse(v);var p=v.words;if(p[0]==1398893684&&p[1]==1701076831){var y=r.create(p.slice(2,4));p.splice(0,4),v.sigBytes-=16}return f.create({ciphertext:v,salt:y})}},d=t.SerializableCipher=n.extend({cfg:n.extend({format:c}),encrypt:function(v,p,y,w){w=this.cfg.extend(w);var A=v.createEncryptor(y,w);return p=A.finalize(p),A=A.cfg,f.create({ciphertext:p,key:y,iv:A.iv,algorithm:v,mode:A.mode,padding:A.padding,blockSize:v.blockSize,formatter:w.format})},decrypt:function(v,p,y,w){return w=this.cfg.extend(w),p=this._parse(p,w.format),v.createDecryptor(y,w).finalize(p.ciphertext)},_parse:function(v,p){return typeof v=="string"?p.parse(v,this):v}}),h=(h.kdf={}).OpenSSL={execute:function(v,p,y,w){return w||(w=r.random(8)),v=a.create({keySize:p+y}).compute(v,w),y=r.create(v.words.slice(p),4*y),v.sigBytes=4*p,f.create({key:v,iv:y,salt:w})}},g=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:h}),encrypt:function(v,p,y,w){return w=this.cfg.extend(w),y=w.kdf.execute(y,v.keySize,v.ivSize),w.iv=y.iv,v=d.encrypt.call(this,v,p,y.key,w),v.mixIn(y),v},decrypt:function(v,p,y,w){return w=this.cfg.extend(w),p=this._parse(p,w.format),y=w.kdf.execute(y,v.keySize,v.ivSize,p.salt),w.iv=y.iv,d.decrypt.call(this,v,p,y.key,w)}})}();(function(){for(var e=je,t=e.lib.BlockCipher,x=e.algo,n=[],r=[],i=[],s=[],a=[],o=[],l=[],u=[],f=[],c=[],d=[],h=0;256>h;h++)d[h]=128>h?h<<1:h<<1^283;for(var g=0,v=0,h=0;256>h;h++){var p=v^v<<1^v<<2^v<<3^v<<4,p=p>>>8^p&255^99;n[g]=p,r[p]=g;var y=d[g],w=d[y],A=d[w],I=257*d[p]^16843008*p;i[g]=I<<24|I>>>8,s[g]=I<<16|I>>>16,a[g]=I<<8|I>>>24,o[g]=I,I=16843009*A^65537*w^257*y^16843008*g,l[p]=I<<24|I>>>8,u[p]=I<<16|I>>>16,f[p]=I<<8|I>>>24,c[p]=I,g?(g=y^d[d[d[A^y]]],v^=d[d[v]]):g=v=1}var k=[0,1,2,4,8,16,32,64,128,27,54],x=x.AES=t.extend({_doReset:function(){for(var _=this._key,C=_.words,m=_.sigBytes/4,_=4*((this._nRounds=m+6)+1),T=this._keySchedule=[],E=0;E<_;E++)if(E<m)T[E]=C[E];else{var R=T[E-1];E%m?6<m&&E%m==4&&(R=n[R>>>24]<<24|n[R>>>16&255]<<16|n[R>>>8&255]<<8|n[R&255]):(R=R<<8|R>>>24,R=n[R>>>24]<<24|n[R>>>16&255]<<16|n[R>>>8&255]<<8|n[R&255],R^=k[E/m|0]<<24),T[E]=T[E-m]^R}for(C=this._invKeySchedule=[],m=0;m<_;m++)E=_-m,R=m%4?T[E]:T[E-4],C[m]=4>m||4>=E?R:l[n[R>>>24]]^u[n[R>>>16&255]]^f[n[R>>>8&255]]^c[n[R&255]]},encryptBlock:function(C,m){this._doCryptBlock(C,m,this._keySchedule,i,s,a,o,n)},decryptBlock:function(C,m){var _=C[m+1];C[m+1]=C[m+3],C[m+3]=_,this._doCryptBlock(C,m,this._invKeySchedule,l,u,f,c,r),_=C[m+1],C[m+1]=C[m+3],C[m+3]=_},_doCryptBlock:function(C,m,_,T,E,R,D,$){for(var M=this._nRounds,ee=C[m]^_[0],ye=C[m+1]^_[1],we=C[m+2]^_[2],Q=C[m+3]^_[3],O=4,L=1;L<M;L++)var W=T[ee>>>24]^E[ye>>>16&255]^R[we>>>8&255]^D[Q&255]^_[O++],te=T[ye>>>24]^E[we>>>16&255]^R[Q>>>8&255]^D[ee&255]^_[O++],ie=T[we>>>24]^E[Q>>>16&255]^R[ee>>>8&255]^D[ye&255]^_[O++],Q=T[Q>>>24]^E[ee>>>16&255]^R[ye>>>8&255]^D[we&255]^_[O++],ee=W,ye=te,we=ie;W=($[ee>>>24]<<24|$[ye>>>16&255]<<16|$[we>>>8&255]<<8|$[Q&255])^_[O++],te=($[ye>>>24]<<24|$[we>>>16&255]<<16|$[Q>>>8&255]<<8|$[ee&255])^_[O++],ie=($[we>>>24]<<24|$[Q>>>16&255]<<16|$[ee>>>8&255]<<8|$[ye&255])^_[O++],Q=($[Q>>>24]<<24|$[ee>>>16&255]<<16|$[ye>>>8&255]<<8|$[we&255])^_[O++],C[m]=W,C[m+1]=te,C[m+2]=ie,C[m+3]=Q},keySize:8});e.AES=t._createHelper(x)})();(function(){function e(d,h){var g=(this._lBlock>>>d^this._rBlock)&h;this._rBlock^=g,this._lBlock^=g<<d}function t(d,h){var g=(this._rBlock>>>d^this._lBlock)&h;this._lBlock^=g,this._rBlock^=g<<d}var n=je,i=n.lib,r=i.WordArray,i=i.BlockCipher,s=n.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],c=s.DES=i.extend({_doReset:function(){for(var d=this._key.words,h=[],g=0;56>g;g++){var v=a[g]-1;h[g]=d[v>>>5]>>>31-v%32&1}for(d=this._subKeys=[],v=0;16>v;v++){for(var p=d[v]=[],y=l[v],g=0;24>g;g++)p[g/6|0]|=h[(o[g]-1+y)%28]<<31-g%6,p[4+(g/6|0)]|=h[28+(o[g+24]-1+y)%28]<<31-g%6;for(p[0]=p[0]<<1|p[0]>>>31,g=1;7>g;g++)p[g]>>>=4*(g-1)+3;p[7]=p[7]<<5|p[7]>>>27}for(h=this._invSubKeys=[],g=0;16>g;g++)h[g]=d[15-g]},encryptBlock:function(d,h){this._doCryptBlock(d,h,this._subKeys)},decryptBlock:function(d,h){this._doCryptBlock(d,h,this._invSubKeys)},_doCryptBlock:function(d,h,g){this._lBlock=d[h],this._rBlock=d[h+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var v=0;16>v;v++){for(var p=g[v],y=this._lBlock,w=this._rBlock,A=0,I=0;8>I;I++)A|=u[I][((w^p[I])&f[I])>>>0];this._lBlock=w,this._rBlock=y^A}g=this._lBlock,this._lBlock=this._rBlock,this._rBlock=g,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),d[h]=this._lBlock,d[h+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=i._createHelper(c),s=s.TripleDES=i.extend({_doReset:function(){var d=this._key.words;this._des1=c.createEncryptor(r.create(d.slice(0,2))),this._des2=c.createEncryptor(r.create(d.slice(2,4))),this._des3=c.createEncryptor(r.create(d.slice(4,6)))},encryptBlock:function(d,h){this._des1.encryptBlock(d,h),this._des2.decryptBlock(d,h),this._des3.encryptBlock(d,h)},decryptBlock:function(d,h){this._des3.decryptBlock(d,h),this._des2.encryptBlock(d,h),this._des1.decryptBlock(d,h)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=i._createHelper(s)})();(function(){var e=je,t=e.lib.WordArray;e.enc.Base64={stringify:function(n){var r=n.words,i=n.sigBytes,s=this._map;n.clamp(),n=[];for(var a=0;a<i;a+=3)for(var o=(r[a>>>2]>>>24-8*(a%4)&255)<<16|(r[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|r[a+2>>>2]>>>24-8*((a+2)%4)&255,l=0;4>l&&a+.75*l<i;l++)n.push(s.charAt(o>>>6*(3-l)&63));if(r=s.charAt(64))for(;n.length%4;)n.push(r);return n.join("")},parse:function(n){var r=n.length,i=this._map,s=i.charAt(64);s&&(s=n.indexOf(s),s!=-1&&(r=s));for(var s=[],a=0,o=0;o<r;o++)if(o%4){var l=i.indexOf(n.charAt(o-1))<<2*(o%4),u=i.indexOf(n.charAt(o))>>>6-2*(o%4);s[a>>>2]|=(l|u)<<24-8*(a%4),a++}return t.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(c,d,h,g,v,p,y){return c=c+(d&h|~d&g)+v+y,(c<<p|c>>>32-p)+d}function n(c,d,h,g,v,p,y){return c=c+(d&g|h&~g)+v+y,(c<<p|c>>>32-p)+d}function r(c,d,h,g,v,p,y){return c=c+(d^h^g)+v+y,(c<<p|c>>>32-p)+d}function i(c,d,h,g,v,p,y){return c=c+(h^(d|~g))+v+y,(c<<p|c>>>32-p)+d}for(var s=je,l=s.lib,a=l.WordArray,o=l.Hasher,l=s.algo,u=[],f=0;64>f;f++)u[f]=4294967296*e.abs(e.sin(f+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(c,d){for(var h=0;16>h;h++){var g=d+h,v=c[g];c[g]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var h=this._hash.words,g=c[d+0],v=c[d+1],p=c[d+2],y=c[d+3],w=c[d+4],A=c[d+5],I=c[d+6],k=c[d+7],x=c[d+8],C=c[d+9],m=c[d+10],_=c[d+11],T=c[d+12],E=c[d+13],R=c[d+14],D=c[d+15],$=h[0],L=h[1],O=h[2],M=h[3],$=t($,L,O,M,g,7,u[0]),M=t(M,$,L,O,v,12,u[1]),O=t(O,M,$,L,p,17,u[2]),L=t(L,O,M,$,y,22,u[3]),$=t($,L,O,M,w,7,u[4]),M=t(M,$,L,O,A,12,u[5]),O=t(O,M,$,L,I,17,u[6]),L=t(L,O,M,$,k,22,u[7]),$=t($,L,O,M,x,7,u[8]),M=t(M,$,L,O,C,12,u[9]),O=t(O,M,$,L,m,17,u[10]),L=t(L,O,M,$,_,22,u[11]),$=t($,L,O,M,T,7,u[12]),M=t(M,$,L,O,E,12,u[13]),O=t(O,M,$,L,R,17,u[14]),L=t(L,O,M,$,D,22,u[15]),$=n($,L,O,M,v,5,u[16]),M=n(M,$,L,O,I,9,u[17]),O=n(O,M,$,L,_,14,u[18]),L=n(L,O,M,$,g,20,u[19]),$=n($,L,O,M,A,5,u[20]),M=n(M,$,L,O,m,9,u[21]),O=n(O,M,$,L,D,14,u[22]),L=n(L,O,M,$,w,20,u[23]),$=n($,L,O,M,C,5,u[24]),M=n(M,$,L,O,R,9,u[25]),O=n(O,M,$,L,y,14,u[26]),L=n(L,O,M,$,x,20,u[27]),$=n($,L,O,M,E,5,u[28]),M=n(M,$,L,O,p,9,u[29]),O=n(O,M,$,L,k,14,u[30]),L=n(L,O,M,$,T,20,u[31]),$=r($,L,O,M,A,4,u[32]),M=r(M,$,L,O,x,11,u[33]),O=r(O,M,$,L,_,16,u[34]),L=r(L,O,M,$,R,23,u[35]),$=r($,L,O,M,v,4,u[36]),M=r(M,$,L,O,w,11,u[37]),O=r(O,M,$,L,k,16,u[38]),L=r(L,O,M,$,m,23,u[39]),$=r($,L,O,M,E,4,u[40]),M=r(M,$,L,O,g,11,u[41]),O=r(O,M,$,L,y,16,u[42]),L=r(L,O,M,$,I,23,u[43]),$=r($,L,O,M,C,4,u[44]),M=r(M,$,L,O,T,11,u[45]),O=r(O,M,$,L,D,16,u[46]),L=r(L,O,M,$,p,23,u[47]),$=i($,L,O,M,g,6,u[48]),M=i(M,$,L,O,k,10,u[49]),O=i(O,M,$,L,R,15,u[50]),L=i(L,O,M,$,A,21,u[51]),$=i($,L,O,M,T,6,u[52]),M=i(M,$,L,O,y,10,u[53]),O=i(O,M,$,L,m,15,u[54]),L=i(L,O,M,$,v,21,u[55]),$=i($,L,O,M,x,6,u[56]),M=i(M,$,L,O,D,10,u[57]),O=i(O,M,$,L,I,15,u[58]),L=i(L,O,M,$,E,21,u[59]),$=i($,L,O,M,w,6,u[60]),M=i(M,$,L,O,_,10,u[61]),O=i(O,M,$,L,p,15,u[62]),L=i(L,O,M,$,C,21,u[63]);h[0]=h[0]+$|0,h[1]=h[1]+L|0,h[2]=h[2]+O|0,h[3]=h[3]+M|0},_doFinalize:function(){var c=this._data,d=c.words,h=8*this._nDataBytes,g=8*c.sigBytes;d[g>>>5]|=128<<24-g%32;var v=e.floor(h/4294967296);for(d[(g+64>>>9<<4)+15]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,d[(g+64>>>9<<4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,c.sigBytes=4*(d.length+1),this._process(),c=this._hash,d=c.words,h=0;4>h;h++)g=d[h],d[h]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360;return c},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}}),s.MD5=o._createHelper(l),s.HmacMD5=o._createHmacHelper(l)})(Math);(function(){var e=je,i=e.lib,t=i.WordArray,n=i.Hasher,r=[],i=e.algo.SHA1=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(s,a){for(var o=this._hash.words,l=o[0],u=o[1],f=o[2],c=o[3],d=o[4],h=0;80>h;h++){if(16>h)r[h]=s[a+h]|0;else{var g=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=g<<1|g>>>31}g=(l<<5|l>>>27)+d+r[h],g=20>h?g+((u&f|~u&c)+1518500249):40>h?g+((u^f^c)+1859775393):60>h?g+((u&f|u&c|f&c)-1894007588):g+((u^f^c)-899497514),d=c,c=f,f=u<<30|u>>>2,u=l,l=g}o[0]=o[0]+l|0,o[1]=o[1]+u|0,o[2]=o[2]+f|0,o[3]=o[3]+c|0,o[4]=o[4]+d|0},_doFinalize:function(){var s=this._data,a=s.words,o=8*this._nDataBytes,l=8*s.sigBytes;return a[l>>>5]|=128<<24-l%32,a[(l+64>>>9<<4)+14]=Math.floor(o/4294967296),a[(l+64>>>9<<4)+15]=o,s.sigBytes=4*a.length,this._process(),this._hash},clone:function(){var s=n.clone.call(this);return s._hash=this._hash.clone(),s}});e.SHA1=n._createHelper(i),e.HmacSHA1=n._createHmacHelper(i)})();(function(e){for(var t=je,h=t.lib,n=h.WordArray,r=h.Hasher,h=t.algo,i=[],s=[],a=function(v){return 4294967296*(v-(v|0))|0},o=2,l=0;64>l;){var u;e:{u=o;for(var f=e.sqrt(u),c=2;c<=f;c++)if(!(u%c)){u=!1;break e}u=!0}u&&(8>l&&(i[l]=a(e.pow(o,.5))),s[l]=a(e.pow(o,1/3)),l++),o++}var d=[],h=h.SHA256=r.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(g,v){for(var p=this._hash.words,y=p[0],w=p[1],A=p[2],I=p[3],k=p[4],x=p[5],C=p[6],m=p[7],_=0;64>_;_++){if(16>_)d[_]=g[v+_]|0;else{var T=d[_-15],E=d[_-2];d[_]=((T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3)+d[_-7]+((E<<15|E>>>17)^(E<<13|E>>>19)^E>>>10)+d[_-16]}T=m+((k<<26|k>>>6)^(k<<21|k>>>11)^(k<<7|k>>>25))+(k&x^~k&C)+s[_]+d[_],E=((y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22))+(y&w^y&A^w&A),m=C,C=x,x=k,k=I+T|0,I=A,A=w,w=y,y=T+E|0}p[0]=p[0]+y|0,p[1]=p[1]+w|0,p[2]=p[2]+A|0,p[3]=p[3]+I|0,p[4]=p[4]+k|0,p[5]=p[5]+x|0,p[6]=p[6]+C|0,p[7]=p[7]+m|0},_doFinalize:function(){var g=this._data,v=g.words,p=8*this._nDataBytes,y=8*g.sigBytes;return v[y>>>5]|=128<<24-y%32,v[(y+64>>>9<<4)+14]=e.floor(p/4294967296),v[(y+64>>>9<<4)+15]=p,g.sigBytes=4*v.length,this._process(),this._hash},clone:function(){var g=r.clone.call(this);return g._hash=this._hash.clone(),g}});t.SHA256=r._createHelper(h),t.HmacSHA256=r._createHmacHelper(h)})(Math);(function(){var e=je,t=e.lib.WordArray,r=e.algo,n=r.SHA256,r=r.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var i=n._doFinalize.call(this);return i.sigBytes-=4,i}});e.SHA224=n._createHelper(r),e.HmacSHA224=n._createHmacHelper(r)})();(function(){function e(){return r.create.apply(r,arguments)}for(var t=je,n=t.lib.Hasher,s=t.x64,r=s.Word,i=s.WordArray,s=t.algo,a=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],o=[],l=0;80>l;l++)o[l]=e();s=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(u,f){for(var w=this._hash.words,c=w[0],d=w[1],h=w[2],g=w[3],v=w[4],p=w[5],y=w[6],w=w[7],A=c.high,I=c.low,k=d.high,x=d.low,C=h.high,m=h.low,_=g.high,T=g.low,E=v.high,R=v.low,D=p.high,$=p.low,M=y.high,O=y.low,L=w.high,W=w.low,te=A,ie=I,Q=k,ee=x,ye=C,we=m,$e=_,le=T,B=E,K=R,z=D,se=$,Ee=M,V=O,H=L,G=W,re=0;80>re;re++){var Oe=o[re];if(16>re)var ce=Oe.high=u[f+2*re]|0,fe=Oe.low=u[f+2*re+1]|0;else{var ce=o[re-15],fe=ce.high,P=ce.low,ce=(fe>>>1|P<<31)^(fe>>>8|P<<24)^fe>>>7,P=(P>>>1|fe<<31)^(P>>>8|fe<<24)^(P>>>7|fe<<25),N=o[re-2],fe=N.high,J=N.low,N=(fe>>>19|J<<13)^(fe<<3|J>>>29)^fe>>>6,J=(J>>>19|fe<<13)^(J<<3|fe>>>29)^(J>>>6|fe<<26),fe=o[re-7],me=fe.high,Ce=o[re-16],oe=Ce.high,Ce=Ce.low,fe=P+fe.low,ce=ce+me+(fe>>>0<P>>>0?1:0),fe=fe+J,ce=ce+N+(fe>>>0<J>>>0?1:0),fe=fe+Ce,ce=ce+oe+(fe>>>0<Ce>>>0?1:0);Oe.high=ce,Oe.low=fe}var me=B&z^~B&Ee,Ce=K&se^~K&V,Oe=te&Q^te&ye^Q&ye,ve=ie&ee^ie&we^ee&we,P=(te>>>28|ie<<4)^(te<<30|ie>>>2)^(te<<25|ie>>>7),N=(ie>>>28|te<<4)^(ie<<30|te>>>2)^(ie<<25|te>>>7),J=a[re],j=J.high,U=J.low,J=G+((K>>>14|B<<18)^(K>>>18|B<<14)^(K<<23|B>>>9)),oe=H+((B>>>14|K<<18)^(B>>>18|K<<14)^(B<<23|K>>>9))+(J>>>0<G>>>0?1:0),J=J+Ce,oe=oe+me+(J>>>0<Ce>>>0?1:0),J=J+U,oe=oe+j+(J>>>0<U>>>0?1:0),J=J+fe,oe=oe+ce+(J>>>0<fe>>>0?1:0),fe=N+ve,Oe=P+Oe+(fe>>>0<N>>>0?1:0),H=Ee,G=V,Ee=z,V=se,z=B,se=K,K=le+J|0,B=$e+oe+(K>>>0<le>>>0?1:0)|0,$e=ye,le=we,ye=Q,we=ee,Q=te,ee=ie,ie=J+fe|0,te=oe+Oe+(ie>>>0<J>>>0?1:0)|0}I=c.low=I+ie,c.high=A+te+(I>>>0<ie>>>0?1:0),x=d.low=x+ee,d.high=k+Q+(x>>>0<ee>>>0?1:0),m=h.low=m+we,h.high=C+ye+(m>>>0<we>>>0?1:0),T=g.low=T+le,g.high=_+$e+(T>>>0<le>>>0?1:0),R=v.low=R+K,v.high=E+B+(R>>>0<K>>>0?1:0),$=p.low=$+se,p.high=D+z+($>>>0<se>>>0?1:0),O=y.low=O+V,y.high=M+Ee+(O>>>0<V>>>0?1:0),W=w.low=W+G,w.high=L+H+(W>>>0<G>>>0?1:0)},_doFinalize:function(){var u=this._data,f=u.words,c=8*this._nDataBytes,d=8*u.sigBytes;return f[d>>>5]|=128<<24-d%32,f[(d+128>>>10<<5)+30]=Math.floor(c/4294967296),f[(d+128>>>10<<5)+31]=c,u.sigBytes=4*f.length,this._process(),this._hash.toX32()},clone:function(){var u=n.clone.call(this);return u._hash=this._hash.clone(),u},blockSize:32}),t.SHA512=n._createHelper(s),t.HmacSHA512=n._createHmacHelper(s)})();(function(){var e=je,i=e.x64,t=i.Word,n=i.WordArray,i=e.algo,r=i.SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var s=r._doFinalize.call(this);return s.sigBytes-=16,s}});e.SHA384=r._createHelper(i),e.HmacSHA384=r._createHmacHelper(i)})();(function(){var e=je,u=e.lib,t=u.WordArray,n=u.Hasher,u=e.algo,r=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),i=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),o=t.create([0,1518500249,1859775393,2400959708,2840853838]),l=t.create([1352829926,1548603684,1836072691,2053994217,0]),u=u.RIPEMD160=n.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,c){for(var d=0;16>d;d++){var h=c+d,g=f[h];f[h]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var h=this._hash.words,g=o.words,v=l.words,p=r.words,y=i.words,w=s.words,A=a.words,I,k,x,C,m,_,T,E,R,D;_=I=h[0],T=k=h[1],E=x=h[2],R=C=h[3],D=m=h[4];for(var $,d=0;80>d;d+=1)$=I+f[c+p[d]]|0,$=16>d?$+((k^x^C)+g[0]):32>d?$+((k&x|~k&C)+g[1]):48>d?$+(((k|~x)^C)+g[2]):64>d?$+((k&C|x&~C)+g[3]):$+((k^(x|~C))+g[4]),$|=0,$=$<<w[d]|$>>>32-w[d],$=$+m|0,I=m,m=C,C=x<<10|x>>>22,x=k,k=$,$=_+f[c+y[d]]|0,$=16>d?$+((T^(E|~R))+v[0]):32>d?$+((T&R|E&~R)+v[1]):48>d?$+(((T|~E)^R)+v[2]):64>d?$+((T&E|~T&R)+v[3]):$+((T^E^R)+v[4]),$|=0,$=$<<A[d]|$>>>32-A[d],$=$+D|0,_=D,D=R,R=E<<10|E>>>22,E=T,T=$;$=h[1]+x+R|0,h[1]=h[2]+C+D|0,h[2]=h[3]+m+_|0,h[3]=h[4]+I+T|0,h[4]=h[0]+k+E|0,h[0]=$},_doFinalize:function(){var f=this._data,c=f.words,d=8*this._nDataBytes,h=8*f.sigBytes;for(c[h>>>5]|=128<<24-h%32,c[(h+64>>>9<<4)+14]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,f.sigBytes=4*(c.length+1),this._process(),f=this._hash,c=f.words,d=0;5>d;d++)h=c[d],c[d]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360;return f},clone:function(){var f=n.clone.call(this);return f._hash=this._hash.clone(),f}});e.RIPEMD160=n._createHelper(u),e.HmacRIPEMD160=n._createHmacHelper(u)})();(function(){var e=je,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(n,r){n=this._hasher=new n.init,typeof r=="string"&&(r=t.parse(r));var i=n.blockSize,s=4*i;r.sigBytes>s&&(r=n.finalize(r)),r.clamp();for(var a=this._oKey=r.clone(),o=this._iKey=r.clone(),l=a.words,u=o.words,f=0;f<i;f++)l[f]^=1549556828,u[f]^=909522486;a.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var n=this._hasher;n.reset(),n.update(this._iKey)},update:function(n){return this._hasher.update(n),this},finalize:function(n){var r=this._hasher;return n=r.finalize(n),r.reset(),r.finalize(this._oKey.clone().concat(n))}})})();(function(){var e=je,r=e.lib,t=r.Base,n=r.WordArray,r=e.algo,i=r.HMAC,s=r.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:r.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,o){for(var g=this.cfg,l=i.create(g.hasher,a),u=n.create(),f=n.create([1]),c=u.words,d=f.words,h=g.keySize,g=g.iterations;c.length<h;){var v=l.update(o).finalize(f);l.reset();for(var p=v.words,y=p.length,w=v,A=1;A<g;A++){w=l.finalize(w),l.reset();for(var I=w.words,k=0;k<y;k++)p[k]^=I[k]}u.concat(v),d[0]++}return u.sigBytes=4*h,u}});e.PBKDF2=function(a,o,l){return s.create(l).compute(a,o)}})();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var Na="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qw="=";function ki(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=Na.charAt(n>>6)+Na.charAt(n&63);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=Na.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=Na.charAt(n>>2)+Na.charAt((n&3)<<4));(r.length&3)>0;)r+=qw;return r}function bo(e){var t="",n,r=0,i,s;for(n=0;n<e.length&&e.charAt(n)!=qw;++n)s=Na.indexOf(e.charAt(n)),!(s<0)&&(r==0?(t+=Ei(s>>2),i=s&3,r=1):r==1?(t+=Ei(i<<2|s>>4),i=s&15,r=2):r==2?(t+=Ei(i),t+=Ei(s>>2),i=s&3,r=3):(t+=Ei(i<<2|s>>4),t+=Ei(s&15),r=0));return r==1&&(t+=Ei(i<<2)),t}function Uw(e){var t=bo(e),n,r=new Array;for(n=0;2*n<t.length;++n)r[n]=parseInt(t.substring(2*n,2*n+2),16);return r}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
*/var hs;function X(e,t,n){e!=null&&(typeof e=="number"?this.fromNumber(e,t,n):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function gt(){return new X(null)}function rF(e,t,n,r,i,s){for(;--s>=0;){var a=t*this[e++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=a&67108863}return i}function iF(e,t,n,r,i,s){for(var a=t&32767,o=t>>15;--s>=0;){var l=this[e]&32767,u=this[e++]>>15,f=o*l+u*a;l=a*l+((f&32767)<<15)+n[r]+(i&1073741823),i=(l>>>30)+(f>>>15)+o*u+(i>>>30),n[r++]=l&1073741823}return i}function sF(e,t,n,r,i,s){for(var a=t&16383,o=t>>14;--s>=0;){var l=this[e]&16383,u=this[e++]>>14,f=o*l+u*a;l=a*l+((f&16383)<<14)+n[r]+i,i=(l>>28)+(f>>14)+o*u,n[r++]=l&268435455}return i}xl.appName=="Microsoft Internet Explorer"?(X.prototype.am=iF,hs=30):xl.appName!="Netscape"?(X.prototype.am=rF,hs=26):(X.prototype.am=sF,hs=28);X.prototype.DB=hs;X.prototype.DM=(1<<hs)-1;X.prototype.DV=1<<hs;var rm=52;X.prototype.FV=Math.pow(2,rm);X.prototype.F1=rm-hs;X.prototype.F2=2*hs-rm;var aF="0123456789abcdefghijklmnopqrstuvwxyz",wd=new Array,So,xr;So="0".charCodeAt(0);for(xr=0;xr<=9;++xr)wd[So++]=xr;So="a".charCodeAt(0);for(xr=10;xr<36;++xr)wd[So++]=xr;So="A".charCodeAt(0);for(xr=10;xr<36;++xr)wd[So++]=xr;function Ei(e){return aF.charAt(e)}function zw(e,t){var n=wd[e.charCodeAt(t)];return n??-1}function oF(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function lF(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function ls(e){var t=gt();return t.fromInt(e),t}function uF(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var r=e.length,i=!1,s=0;--r>=0;){var a=n==8?e[r]&255:zw(e,r);if(a<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&e[0]&128&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&X.ZERO.subTo(this,this)}function cF(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function dF(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var n=(1<<t)-1,r,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(r=this[a]>>o)>0&&(i=!0,s=Ei(r));a>=0;)o<t?(r=(this[a]&(1<<o)-1)<<t-o,r|=this[--a]>>(o+=this.DB-t)):(r=this[a]>>(o-=t)&n,o<=0&&(o+=this.DB,--a)),r>0&&(i=!0),i&&(s+=Ei(r));return i?s:"0"}function fF(){var e=gt();return X.ZERO.subTo(this,e),e}function hF(){return this.s<0?this.negate():this}function gF(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function xd(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function vF(){return this.t<=0?0:this.DB*(this.t-1)+xd(this[this.t-1]^this.s&this.DM)}function mF(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function pF(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function yF(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM,o;for(o=this.t-1;o>=0;--o)t[o+s+1]=this[o]>>r|a,a=(this[o]&i)<<n;for(o=s-1;o>=0;--o)t[o]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function bF(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&s)<<i,t[a-n]=this[a]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function SF(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function _F(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&X.ZERO.subTo(t,t)}function wF(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function xF(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=gt());var s=gt(),a=this.s,o=e.s,l=this.DB-xd(r[r.t-1]);l>0?(r.lShiftTo(l,s),i.lShiftTo(l,n)):(r.copyTo(s),i.copyTo(n));var u=s.t,f=s[u-1];if(f!=0){var c=f*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),d=this.FV/c,h=(1<<this.F1)/c,g=1<<this.F2,v=n.t,p=v-u,y=t??gt();for(s.dlShiftTo(p,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),X.ONE.dlShiftTo(u,y),y.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--p>=0;){var w=n[--v]==f?this.DM:Math.floor(n[v]*d+(n[v-1]+g)*h);if((n[v]+=s.am(0,w,n,p,0,u))<w)for(s.dlShiftTo(p,y),n.subTo(y,n);n[v]<--w;)n.subTo(y,n)}t!=null&&(n.drShiftTo(u,t),a!=o&&X.ZERO.subTo(t,t)),n.t=u,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&X.ZERO.subTo(n,n)}}}function CF(e){var t=gt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(X.ZERO)>0&&e.subTo(t,t),t}function la(e){this.m=e}function EF(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function TF(e){return e}function AF(e){e.divRemTo(this.m,null,e)}function IF(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function RF(e,t){e.squareTo(t),this.reduce(t)}la.prototype.convert=EF;la.prototype.revert=TF;la.prototype.reduce=AF;la.prototype.mulTo=IF;la.prototype.sqrTo=RF;function kF(){if(this.t<1)return 0;var e=this[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function ua(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function PF(e){var t=gt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(X.ZERO)>0&&this.m.subTo(t,t),t}function DF(e){var t=gt();return e.copyTo(t),this.reduce(t),t}function FF(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e[t]&32767,r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function OF(e,t){e.squareTo(t),this.reduce(t)}function NF(e,t,n){e.multiplyTo(t,n),this.reduce(n)}ua.prototype.convert=PF;ua.prototype.revert=DF;ua.prototype.reduce=FF;ua.prototype.mulTo=NF;ua.prototype.sqrTo=OF;function $F(){return(this.t>0?this[0]&1:this.s)==0}function MF(e,t){if(e>4294967295||e<1)return X.ONE;var n=gt(),r=gt(),i=t.convert(this),s=xd(e)-1;for(i.copyTo(n);--s>=0;)if(t.sqrTo(n,r),(e&1<<s)>0)t.mulTo(r,i,n);else{var a=n;n=r,r=a}return t.revert(n)}function VF(e,t){var n;return e<256||t.isEven()?n=new la(t):n=new ua(t),this.exp(e,n)}X.prototype.copyTo=oF;X.prototype.fromInt=lF;X.prototype.fromString=uF;X.prototype.clamp=cF;X.prototype.dlShiftTo=mF;X.prototype.drShiftTo=pF;X.prototype.lShiftTo=yF;X.prototype.rShiftTo=bF;X.prototype.subTo=SF;X.prototype.multiplyTo=_F;X.prototype.squareTo=wF;X.prototype.divRemTo=xF;X.prototype.invDigit=kF;X.prototype.isEven=$F;X.prototype.exp=MF;X.prototype.toString=dF;X.prototype.negate=fF;X.prototype.abs=hF;X.prototype.compareTo=gF;X.prototype.bitLength=vF;X.prototype.mod=CF;X.prototype.modPowInt=VF;X.ZERO=ls(0);X.ONE=ls(1);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function BF(){var e=gt();return this.copyTo(e),e}function LF(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function HF(){return this.t==0?this.s:this[0]<<24>>24}function jF(){return this.t==0?this.s:this[0]<<16>>16}function qF(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function UF(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function zF(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=ls(n),i=gt(),s=gt(),a="";for(this.divRemTo(r,i,s);i.signum()>0;)a=(n+s.intValue()).toString(e).substr(1)+a,i.divRemTo(r,i,s);return s.intValue().toString(e)+a}function KF(e,t){this.fromInt(0),t==null&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,s=0,a=0,o=0;o<e.length;++o){var l=zw(e,o);if(l<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+l,++s>=n&&(this.dMultiply(r),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&X.ZERO.subTo(this,this)}function GF(e,t,n){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(X.ONE.shiftLeft(e-1),im,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(X.ONE.shiftLeft(e-1),this);else{var r=new Array,i=e&7;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function WF(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),r&128&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function YF(e){return this.compareTo(e)==0}function JF(e){return this.compareTo(e)<0?this:e}function XF(e){return this.compareTo(e)>0?this:e}function ZF(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=s;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function QF(e,t){return e&t}function eO(e){var t=gt();return this.bitwiseTo(e,QF,t),t}function im(e,t){return e|t}function tO(e){var t=gt();return this.bitwiseTo(e,im,t),t}function Kw(e,t){return e^t}function nO(e){var t=gt();return this.bitwiseTo(e,Kw,t),t}function Gw(e,t){return e&~t}function rO(e){var t=gt();return this.bitwiseTo(e,Gw,t),t}function iO(){for(var e=gt(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function sO(e){var t=gt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function aO(e){var t=gt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function oO(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function lO(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+oO(this[e]);return this.s<0?this.t*this.DB:-1}function uO(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function cO(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=uO(this[n]^t);return e}function dO(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function fO(e,t){var n=X.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function hO(e){return this.changeBit(e,im)}function gO(e){return this.changeBit(e,Gw)}function vO(e){return this.changeBit(e,Kw)}function mO(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()}function pO(e){var t=gt();return this.addTo(e,t),t}function yO(e){var t=gt();return this.subTo(e,t),t}function bO(e){var t=gt();return this.multiplyTo(e,t),t}function SO(){var e=gt();return this.squareTo(e),e}function _O(e){var t=gt();return this.divRemTo(e,t,null),t}function wO(e){var t=gt();return this.divRemTo(e,null,t),t}function xO(e){var t=gt(),n=gt();return this.divRemTo(e,t,n),new Array(t,n)}function CO(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function EO(e,t){if(e!=0){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Wl(){}function Ww(e){return e}function TO(e,t,n){e.multiplyTo(t,n)}function AO(e,t){e.squareTo(t)}Wl.prototype.convert=Ww;Wl.prototype.revert=Ww;Wl.prototype.mulTo=TO;Wl.prototype.sqrTo=AO;function IO(e){return this.exp(e,new Wl)}function RO(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,e[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e[r],n,r,0,t-r);n.clamp()}function kO(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function _o(e){this.r2=gt(),this.q3=gt(),X.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function PO(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=gt();return e.copyTo(t),this.reduce(t),t}function DO(e){return e}function FO(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function OO(e,t){e.squareTo(t),this.reduce(t)}function NO(e,t,n){e.multiplyTo(t,n),this.reduce(n)}_o.prototype.convert=PO;_o.prototype.revert=DO;_o.prototype.reduce=FO;_o.prototype.mulTo=NO;_o.prototype.sqrTo=OO;function $O(e,t){var n=e.bitLength(),r,i=ls(1),s;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?s=new la(t):t.isEven()?s=new _o(t):s=new ua(t);var a=new Array,o=3,l=r-1,u=(1<<r)-1;if(a[1]=s.convert(this),r>1){var f=gt();for(s.sqrTo(a[1],f);o<=u;)a[o]=gt(),s.mulTo(f,a[o-2],a[o]),o+=2}var c=e.t-1,d,h=!0,g=gt(),v;for(n=xd(e[c])-1;c>=0;){for(n>=l?d=e[c]>>n-l&u:(d=(e[c]&(1<<n+1)-1)<<l-n,c>0&&(d|=e[c-1]>>this.DB+n-l)),o=r;!(d&1);)d>>=1,--o;if((n-=o)<0&&(n+=this.DB,--c),h)a[d].copyTo(i),h=!1;else{for(;o>1;)s.sqrTo(i,g),s.sqrTo(g,i),o-=2;o>0?s.sqrTo(i,g):(v=i,i=g,g=v),s.mulTo(g,a[d],i)}for(;c>=0&&!(e[c]&1<<n);)s.sqrTo(i,g),v=i,i=g,g=v,--n<0&&(n=this.DB-1,--c)}return s.revert(i)}function MO(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n}function VO(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n}function BO(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return X.ZERO;for(var n=e.clone(),r=this.clone(),i=ls(1),s=ls(0),a=ls(0),o=ls(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),t?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(a,i),s.subTo(o,s)):(r.subTo(n,r),t&&a.subTo(i,a),o.subTo(s,o))}if(r.compareTo(X.ONE)!=0)return X.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var qn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],LO=(1<<26)/qn[qn.length-1];function HO(e){var t,n=this.abs();if(n.t==1&&n[0]<=qn[qn.length-1]){for(t=0;t<qn.length;++t)if(n[0]==qn[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<qn.length;){for(var r=qn[t],i=t+1;i<qn.length&&r<LO;)r*=qn[i++];for(r=n.modInt(r);t<i;)if(r%qn[t++]==0)return!1}return n.millerRabin(e)}function jO(e){var t=this.subtract(X.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);e=e+1>>1,e>qn.length&&(e=qn.length);for(var i=gt(),s=0;s<e;++s){i.fromInt(qn[Math.floor(Math.random()*qn.length)]);var a=i.modPow(r,this);if(a.compareTo(X.ONE)!=0&&a.compareTo(t)!=0){for(var o=1;o++<n&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(X.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}X.prototype.chunkSize=qF;X.prototype.toRadix=zF;X.prototype.fromRadix=KF;X.prototype.fromNumber=GF;X.prototype.bitwiseTo=ZF;X.prototype.changeBit=fO;X.prototype.addTo=mO;X.prototype.dMultiply=CO;X.prototype.dAddOffset=EO;X.prototype.multiplyLowerTo=RO;X.prototype.multiplyUpperTo=kO;X.prototype.modInt=VO;X.prototype.millerRabin=jO;X.prototype.clone=BF;X.prototype.intValue=LF;X.prototype.byteValue=HF;X.prototype.shortValue=jF;X.prototype.signum=UF;X.prototype.toByteArray=WF;X.prototype.equals=YF;X.prototype.min=JF;X.prototype.max=XF;X.prototype.and=eO;X.prototype.or=tO;X.prototype.xor=nO;X.prototype.andNot=rO;X.prototype.not=iO;X.prototype.shiftLeft=sO;X.prototype.shiftRight=aO;X.prototype.getLowestSetBit=lO;X.prototype.bitCount=cO;X.prototype.testBit=dO;X.prototype.setBit=hO;X.prototype.clearBit=gO;X.prototype.flipBit=vO;X.prototype.add=pO;X.prototype.subtract=yO;X.prototype.multiply=bO;X.prototype.divide=_O;X.prototype.remainder=wO;X.prototype.divideAndRemainder=xO;X.prototype.modPow=$O;X.prototype.modInverse=BO;X.prototype.pow=IO;X.prototype.gcd=MO;X.prototype.isProbablePrime=HO;X.prototype.square=SO;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function sm(){this.i=0,this.j=0,this.S=new Array}function qO(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function UO(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}sm.prototype.init=qO;sm.prototype.next=UO;function zO(){return new sm}var sg=256;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var xu,ar,yn;function KO(e){ar[yn++]^=e&255,ar[yn++]^=e>>8&255,ar[yn++]^=e>>16&255,ar[yn++]^=e>>24&255,yn>=sg&&(yn-=sg)}function am(){KO(new Date().getTime())}if(ar==null){ar=new Array,yn=0;var Nr;if(Ta!==void 0&&(Ta.crypto!==void 0||Ta.msCrypto!==void 0)){var vy=Ta.crypto||Ta.msCrypto;if(vy.getRandomValues){var my=new Uint8Array(32);for(vy.getRandomValues(my),Nr=0;Nr<32;++Nr)ar[yn++]=my[Nr]}else if(xl.appName=="Netscape"&&xl.appVersion<"5"){var py=Ta.crypto.random(32);for(Nr=0;Nr<py.length;++Nr)ar[yn++]=py.charCodeAt(Nr)&255}}for(;yn<sg;)Nr=Math.floor(65536*Math.random()),ar[yn++]=Nr>>>8,ar[yn++]=Nr&255;yn=0,am()}function GO(){if(xu==null){for(am(),xu=zO(),xu.init(ar),yn=0;yn<ar.length;++yn)ar[yn]=0;yn=0}return xu.next()}function WO(e){var t;for(t=0;t<e.length;++t)e[t]=GO()}function bs(){}bs.prototype.nextBytes=WO;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Dn(e,t){return new X(e,t)}function YO(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=i&63|128,n[--t]=i>>6|192):(n[--t]=i&63|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var s=new bs,a=new Array;t>2;){for(a[0]=0;a[0]==0;)s.nextBytes(a);n[--t]=a[0]}return n[--t]=2,n[--t]=0,new X(n)}function yy(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,i&255]))),i+=1;return r}function JO(e,t,n,r){var i=S.crypto.MessageDigest,s=S.crypto.Util,a=null;if(n||(n="sha1"),typeof n=="string"&&(a=i.getCanonicalAlgName(n),r=i.getHashLength(a),n=function(v){return Nn(s.hashHex(Rr(v),a))}),e.length+2*r+2>t)throw"Message too long for RSA";var o="",l;for(l=0;l<t-e.length-2*r-2;l+=1)o+="\0";var u=n("")+o+""+e,f=new Array(r);new bs().nextBytes(f);var c=yy(f,u.length,n),d=[];for(l=0;l<u.length;l+=1)d[l]=u.charCodeAt(l)^c.charCodeAt(l);var h=yy(d,f.length,n),g=[0];for(l=0;l<f.length;l+=1)g[l+1]=f[l]^h.charCodeAt(l);return new X(g.concat(d))}function Ye(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function XO(e,t){if(this.isPublic=!0,this.isPrivate=!1,typeof e!="string")this.n=e,this.e=t;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Dn(e,16),this.e=parseInt(t,16);else throw"Invalid RSA public key"}function ZO(e){return e.modPowInt(this.e,this.n)}function QO(e){var t=YO(e,this.n.bitLength()+7>>3);if(t==null)return null;var n=this.doPublic(t);if(n==null)return null;var r=n.toString(16);return r.length&1?"0"+r:r}function e3(e,t,n){var r=this.n.bitLength()+7>>3,i=JO(e,r,t,n);if(i==null)return null;var s=this.doPublic(i);if(s==null)return null;for(var a=s.toString(16);a.length<r*2;)a="0"+a;return a}Ye.prototype.doPublic=ZO;Ye.prototype.setPublic=XO;Ye.prototype.encrypt=QO;Ye.prototype.encryptOAEP=e3;Ye.prototype.type="RSA";/*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function t3(e,t){for(var n=e.toByteArray(),r=0;r<n.length&&n[r]==0;)++r;if(n.length-r!=t-1||n[r]!=2)return null;for(++r;n[r]!=0;)if(++r>=n.length)return null;for(var i="";++r<n.length;){var s=n[r]&255;s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((s&31)<<6|n[r+1]&63),++r):(i+=String.fromCharCode((s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63),r+=2)}return i}function by(e,t,n){for(var r="",i=0;r.length<t;)r+=n(e+String.fromCharCode.apply(String,[(i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,i&255])),i+=1;return r}function n3(e,t,n,r){var i=S.crypto.MessageDigest,s=S.crypto.Util,a=null;n||(n="sha1"),typeof n=="string"&&(a=i.getCanonicalAlgName(n),r=i.getHashLength(a),n=function(p){return Nn(s.hashHex(Rr(p),a))}),e=e.toByteArray();var c;for(c=0;c<e.length;c+=1)e[c]&=255;for(;e.length<t;)e.unshift(0);if(e=String.fromCharCode.apply(String,e),e.length<2*r+2)throw"Cipher too short";var o=e.substr(1,r),l=e.substr(r+1),u=by(l,r,n),f=[],c;for(c=0;c<o.length;c+=1)f[c]=o.charCodeAt(c)^u.charCodeAt(c);var d=by(String.fromCharCode.apply(String,f),e.length-r,n),h=[];for(c=0;c<l.length;c+=1)h[c]=l.charCodeAt(c)^d.charCodeAt(c);if(h=String.fromCharCode.apply(String,h),h.substr(0,r)!==n(""))throw"Hash mismatch";h=h.substr(r);var g=h.indexOf(""),v=g!=-1?h.substr(0,g).lastIndexOf("\0"):-1;if(v+1!=g)throw"Malformed data";return h.substr(g+1)}function r3(e,t,n){if(this.isPrivate=!0,typeof e!="string")this.n=e,this.e=t,this.d=n;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Dn(e,16),this.e=parseInt(t,16),this.d=Dn(n,16);else throw"Invalid RSA private key"}function i3(e,t,n,r,i,s,a,o){if(this.isPrivate=!0,this.isPublic=!1,e==null)throw"RSASetPrivateEx N == null";if(t==null)throw"RSASetPrivateEx E == null";if(e.length==0)throw"RSASetPrivateEx N.length == 0";if(t.length==0)throw"RSASetPrivateEx E.length == 0";if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Dn(e,16),this.e=parseInt(t,16),this.d=Dn(n,16),this.p=Dn(r,16),this.q=Dn(i,16),this.dmp1=Dn(s,16),this.dmq1=Dn(a,16),this.coeff=Dn(o,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function s3(e,t){var n=new bs,r=e>>1;this.e=parseInt(t,16);for(var i=new X(t,16),s=e/2-100,a=X.ONE.shiftLeft(s);;){for(;this.p=new X(e-r,1,n),!(this.p.subtract(X.ONE).gcd(i).compareTo(X.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new X(r,1,n),!(this.q.subtract(X.ONE).gcd(i).compareTo(X.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var l=this.q.subtract(this.p).abs();if(!(l.bitLength()<s||l.compareTo(a)<=0)){var u=this.p.subtract(X.ONE),f=this.q.subtract(X.ONE),c=u.multiply(f);if(c.gcd(i).compareTo(X.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=i.modInverse(c),this.dmp1=this.d.mod(u),this.dmq1=this.d.mod(f),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function a3(e){if(this.p==null||this.q==null)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),n=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(n)<0;)t=t.add(this.p);return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)}function o3(e){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var t=Dn(e,16),n=this.doPrivate(t);return n==null?null:t3(n,this.n.bitLength()+7>>3)}function l3(e,t,n){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var r=Dn(e,16),i=this.doPrivate(r);return i==null?null:n3(i,this.n.bitLength()+7>>3,t,n)}Ye.prototype.doPrivate=a3;Ye.prototype.setPrivate=r3;Ye.prototype.setPrivateEx=i3;Ye.prototype.generate=s3;Ye.prototype.decrypt=o3;Ye.prototype.decryptOAEP=l3;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function hn(e,t){this.x=t,this.q=e}function u3(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function c3(){return this.x}function d3(){return new hn(this.q,this.x.negate().mod(this.q))}function f3(e){return new hn(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function h3(e){return new hn(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function g3(e){return new hn(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function v3(){return new hn(this.q,this.x.square().mod(this.q))}function m3(e){return new hn(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}hn.prototype.equals=u3;hn.prototype.toBigInteger=c3;hn.prototype.negate=d3;hn.prototype.add=f3;hn.prototype.subtract=h3;hn.prototype.multiply=g3;hn.prototype.square=v3;hn.prototype.divide=m3;hn.prototype.sqrt=function(){return new hn(this.q,this.x.sqrt().mod(this.q))};function _t(e,t,n,r){this.curve=e,this.x=t,this.y=n,r==null?this.z=X.ONE:this.z=r,this.zinv=null}function p3(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function y3(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function b3(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,n;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),t.equals(X.ZERO)?(n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),n.equals(X.ZERO)):!1}function S3(){return this.x==null&&this.y==null?!0:this.z.equals(X.ZERO)&&!this.y.toBigInteger().equals(X.ZERO)}function _3(){return new _t(this.curve,this.x,this.y.negate(),this.z)}function w3(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(X.ZERO.equals(n))return X.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new X("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger();e.x.toBigInteger(),e.y.toBigInteger();var a=n.square(),o=a.multiply(n),l=i.multiply(a),u=t.square().multiply(this.z),f=u.subtract(l.shiftLeft(1)).multiply(e.z).subtract(o).multiply(n).mod(this.curve.q),c=l.multiply(r).multiply(t).subtract(s.multiply(o)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(o)).mod(this.curve.q),d=o.multiply(this.z).multiply(e.z).mod(this.curve.q);return new _t(this.curve,this.curve.fromBigInteger(f),this.curve.fromBigInteger(c),d)}function x3(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=new X("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),s=this.curve.a.toBigInteger(),a=t.square().multiply(e);X.ZERO.equals(s)||(a=a.add(this.z.square().multiply(s))),a=a.mod(this.curve.q);var o=a.square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),l=a.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(a.square().multiply(a)).mod(this.curve.q),u=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new _t(this.curve,this.curve.fromBigInteger(o),this.curve.fromBigInteger(l),u)}function C3(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,n=t.multiply(new X("3")),r=this.negate(),i=this,s=this.curve.q.subtract(e),a=s.multiply(new X("3")),o=new _t(this.curve,this.x,this.y),l=o.negate(),u;for(u=n.bitLength()-2;u>0;--u){i=i.twice();var f=n.testBit(u),c=t.testBit(u);f!=c&&(i=i.add(f?this:r))}for(u=a.bitLength()-2;u>0;--u){o=o.twice();var d=a.testBit(u),h=s.testBit(u);d!=h&&(o=o.add(d?o:l))}return i}function E3(e,t,n){var r;e.bitLength()>n.bitLength()?r=e.bitLength()-1:r=n.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?n.testBit(r)?i=i.add(s):i=i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i}_t.prototype.getX=p3;_t.prototype.getY=y3;_t.prototype.equals=b3;_t.prototype.isInfinity=S3;_t.prototype.negate=_3;_t.prototype.add=w3;_t.prototype.twice=x3;_t.prototype.multiply=C3;_t.prototype.multiplyTwo=E3;function ji(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new _t(this,null,null)}function T3(){return this.q}function A3(){return this.a}function I3(){return this.b}function R3(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function k3(){return this.infinity}function P3(e){return new hn(this.q,e)}function D3(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2);e.substr(2);var n=this.fromBigInteger(new X(l,16)),r=this.getA(),i=this.getB(),s=n.square().add(r).multiply(n).add(i),a=s.sqrt();return t=="03"&&(a=a.negate()),new _t(this,n,a);case 4:case 6:case 7:var o=(e.length-2)/2,l=e.substr(2,o),u=e.substr(o+2,o);return new _t(this,this.fromBigInteger(new X(l,16)),this.fromBigInteger(new X(u,16)));default:return null}}ji.prototype.getQ=T3;ji.prototype.getA=A3;ji.prototype.getB=I3;ji.prototype.equals=R3;ji.prototype.getInfinity=k3;ji.prototype.fromBigInteger=P3;ji.prototype.decodePointHex=D3;/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */hn.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};_t.prototype.getEncoded=function(e){var t=function(s,a){var o=s.toByteArrayUnsigned();if(a<o.length)o=o.slice(o.length-a);else for(;a>o.length;)o.unshift(0);return o},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i};_t.decodeFrom=function(e,t){t[0];var n=t.length-1,r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var s=new X(r),a=new X(i);return new _t(e,e.fromBigInteger(s),e.fromBigInteger(a))};_t.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),s=new X(r,16),a=new X(i,16);return new _t(e,e.fromBigInteger(s),e.fromBigInteger(a))};_t.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y),r=n.divide(t),i=r.square().subtract(this.x).subtract(e.x),s=r.multiply(this.x.subtract(i)).subtract(this.y);return new _t(this.curve,i,s)};_t.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=this.curve.fromBigInteger(X.valueOf(2)),t=this.curve.fromBigInteger(X.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new _t(this.curve,r,i)};_t.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,n=t.multiply(new X("3")),r=this.negate(),i=this,s;for(s=n.bitLength()-2;s>0;--s){i=i.twice();var a=n.testBit(s),o=t.testBit(s);a!=o&&(i=i.add2D(a?this:r))}return i};_t.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=t.multiply(t).mod(i),a=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return s.equals(a)};_t.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};_t.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(X.ONE)<0||t.compareTo(e.subtract(X.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(X.ONE)<0||n.compareTo(e.subtract(X.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var Yw=function(){var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",t='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',n='(?:"'+t+'*")',r=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+n+")","g"),i=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function a(f,c,d){return c?s[c]:String.fromCharCode(parseInt(d,16))}var o=new String(""),l="\\",u=Object.hasOwnProperty;return function(f,c){var d=f.match(r),h,g=d[0],v=!1;g==="{"?h={}:g==="["?h=[]:(h=[],v=!0);for(var p,y=[h],w=1-v,A=d.length;w<A;++w){g=d[w];var I;switch(g.charCodeAt(0)){default:I=y[0],I[p||I.length]=+g,p=void 0;break;case 34:if(g=g.substring(1,g.length-1),g.indexOf(l)!==-1&&(g=g.replace(i,a)),I=y[0],!p)if(I instanceof Array)p=I.length;else{p=g||o;break}I[p]=g,p=void 0;break;case 91:I=y[0],y.unshift(I[p||I.length]=[]),p=void 0;break;case 93:y.shift();break;case 102:I=y[0],I[p||I.length]=!1,p=void 0;break;case 110:I=y[0],I[p||I.length]=null,p=void 0;break;case 116:I=y[0],I[p||I.length]=!0,p=void 0;break;case 123:I=y[0],y.unshift(I[p||I.length]={}),p=void 0;break;case 125:y.shift();break}}if(v){if(y.length!==1)throw new Error;h=h[0]}else if(y.length)throw new Error;if(c){var k=function(x,C){var m=x[C];if(m&&typeof m=="object"){var _=null;for(var T in m)if(u.call(m,T)&&m!==x){var E=k(m,T);E!==void 0?m[T]=E:(_||(_=[]),_.push(T))}if(_)for(var R=_.length;--R>=0;)delete m[_[R]]}return c.call(x,C,m)};h=k({"":h},"")}return h}}();(typeof S>"u"||!S)&&(S={});(typeof S.asn1>"u"||!S.asn1)&&(S.asn1={});S.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if(t.substr(0,1)!="-")t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1),r=n.length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var i="",s=0;s<r;s++)i+="f";var a=new X(i,16),o=a.xor(e).add(X.ONE);t=o.toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return mn(e,t)},this.newObject=function(e){var t=S,n=t.asn1,r=n.ASN1Object,i=n.DERBoolean,s=n.DERInteger,a=n.DERBitString,o=n.DEROctetString,l=n.DERNull,u=n.DERObjectIdentifier,f=n.DEREnumerated,c=n.DERUTF8String,d=n.DERNumericString,h=n.DERPrintableString,g=n.DERTeletexString,v=n.DERIA5String,p=n.DERUTCTime,y=n.DERGeneralizedTime,w=n.DERVisibleString,A=n.DERBMPString,I=n.DERSequence,k=n.DERSet,x=n.DERTaggedObject,C=n.ASN1Util.newObject;if(e instanceof n.ASN1Object)return e;var m=Object.keys(e);if(m.length!=1)throw new Error("key of param shall be only one.");var _=m[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+_+":")==-1)throw new Error("undefined key: "+_);if(_=="bool")return new i(e[_]);if(_=="int")return new s(e[_]);if(_=="bitstr")return new a(e[_]);if(_=="octstr")return new o(e[_]);if(_=="null")return new l(e[_]);if(_=="oid")return new u(e[_]);if(_=="enum")return new f(e[_]);if(_=="utf8str")return new c(e[_]);if(_=="numstr")return new d(e[_]);if(_=="prnstr")return new h(e[_]);if(_=="telstr")return new g(e[_]);if(_=="ia5str")return new v(e[_]);if(_=="utctime")return new p(e[_]);if(_=="gentime")return new y(e[_]);if(_=="visstr")return new w(e[_]);if(_=="bmpstr")return new A(e[_]);if(_=="asn1")return new r(e[_]);if(_=="seq"){for(var T=e[_],E=[],R=0;R<T.length;R++){var D=C(T[R]);E.push(D)}return new I({array:E})}if(_=="set"){for(var T=e[_],E=[],R=0;R<T.length;R++){var D=C(T[R]);E.push(D)}return new k({array:E})}if(_=="tag"){var $=e[_];if(Object.prototype.toString.call($)==="[object Array]"&&$.length==3){var M=C($[2]);return new x({tag:$[0],explicit:$[1],obj:M})}else return new x($)}},this.jsonToASN1HEX=function(e){var t=this.newObject(e);return t.tohex()}};S.asn1.ASN1Util.oidHexToInt=function(e){for(var i="",t=parseInt(e.substr(0,2),16),n=Math.floor(t/40),r=t%40,i=n+"."+r,s="",a=2;a<e.length;a+=2){var o=parseInt(e.substr(a,2),16),l=("00000000"+o.toString(2)).slice(-8);if(s=s+l.substr(1,7),l.substr(0,1)=="0"){var u=new X(s,2);i=i+"."+u.toString(10),s=""}}return i};S.asn1.ASN1Util.oidIntToHex=function(e){var t=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},n=function(o){var l="",u=new X(o,10),f=u.toString(2),c=7-f.length%7;c==7&&(c=0);for(var d="",h=0;h<c;h++)d+="0";f=d+f;for(var h=0;h<f.length-1;h+=7){var g=f.substr(h,7);h!=f.length-7&&(g="1"+g),l+=t(parseInt(g,2))}return l};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),s=parseInt(i[0])*40+parseInt(i[1]);r+=t(s),i.splice(0,2);for(var a=0;a<i.length;a++)r+=n(i[a]);return r};S.asn1.ASN1Object=function(e){var t="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+t.length+",v="+this.hV);var n=this.hV.length/2,r=n.toString(16);if(r.length%2==1&&(r="0"+r),n<128)return r;var i=r.length/2;if(i>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+n.toString(16));var s=128+i;return s.toString(16)+r},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(n){this.params=n},e!=null&&e.tlv!=null&&(this.hTLV=e.tlv,this.isModified=!1)};S.asn1.DERAbstractString=function(e){S.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=Ed(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"?this.setString(e):typeof e.str<"u"?this.setString(e.str):typeof e.hex<"u"&&this.setStringHex(e.hex))};pe(S.asn1.DERAbstractString,S.asn1.ASN1Object);S.asn1.DERAbstractTime=function(e){S.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){var n=t.getTime()+t.getTimezoneOffset()*6e4,r=new Date(n);return r},this.formatDate=function(t,n,r){var i=this.zeroPadding,s=this.localDateToUTC(t),a=String(s.getFullYear());n=="utc"&&(a=a.substr(2,2));var o=i(String(s.getMonth()+1),2),l=i(String(s.getDate()),2),u=i(String(s.getHours()),2),f=i(String(s.getMinutes()),2),c=i(String(s.getSeconds()),2),d=a+o+l+u+f+c;if(r===!0){var h=s.getMilliseconds();if(h!=0){var g=i(String(h),3);g=g.replace(/[0]+$/,""),d=d+"."+g}}return d+"Z"},this.zeroPadding=function(t,n){return t.length>=n?t:new Array(n-t.length+1).join("0")+t},this.setByParam=function(t){this.hV=null,this.hTLV=null,this.params=t},this.getString=function(){},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=t},this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=t},this.setByDateValue=function(t,n,r,i,s,a){var o=new Date(Date.UTC(t,n-1,r,i,s,a,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}};pe(S.asn1.DERAbstractTime,S.asn1.ASN1Object);S.asn1.DERAbstractStructured=function(e){S.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,typeof e<"u"&&typeof e.array<"u"&&(this.asn1Array=e.array)};pe(S.asn1.DERAbstractStructured,S.asn1.ASN1Object);S.asn1.DERBoolean=function(e){S.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",e==!1?this.hTLV="010100":this.hTLV="0101ff"};pe(S.asn1.DERBoolean,S.asn1.ASN1Object);S.asn1.DERInteger=function(e){S.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var t=S.asn1.ASN1Util.bigIntToMinTwosComplementsHex;this.setByBigInteger=function(n){this.isModified=!0,this.params={bigint:n}},this.setByInteger=function(n){this.isModified=!0,this.params=n},this.setValueHex=function(n){this.isModified=!0,this.params={hex:n}},this.getFreshValueHex=function(){var n=this.params,r=null;if(n==null)throw new Error("value not set");if(typeof n=="object"&&n.hex!=null)return this.hV=n.hex,this.hV;if(typeof n=="number")r=new X(String(n),10);else if(n.int!=null)r=new X(String(n.int),10);else if(n.bigint!=null)r=n.bigint;else throw new Error("wrong parameter");return this.hV=t(r),this.hV},e!=null&&(this.params=e)};pe(S.asn1.DERInteger,S.asn1.ASN1Object);S.asn1.DERBitString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=S.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}S.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(n){this.hTLV=null,this.isModified=!0,this.hV=n},this.setUnusedBitsAndHexValue=function(n,r){if(n<0||7<n)throw"unused bits shall be from 0 to 7: u = "+n;var i="0"+n;this.hTLV=null,this.isModified=!0,this.hV=i+r},this.setByBinaryString=function(n){n=n.replace(/0+$/,"");var r=8-n.length%8;r==8&&(r=0),n+="0000000".substr(0,r);for(var i="",s=0;s<n.length-1;s+=8){var a=n.substr(s,8),o=parseInt(a,2).toString(16);o.length==1&&(o="0"+o),i+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+r+i},this.setByBooleanArray=function(n){for(var r="",i=0;i<n.length;i++)n[i]==!0?r+="1":r+="0";this.setByBinaryString(r)},this.newFalseArray=function(n){for(var r=new Array(n),i=0;i<n;i++)r[i]=!1;return r},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):typeof e.hex<"u"?this.setHexValueIncludingUnusedBits(e.hex):typeof e.bin<"u"?this.setByBinaryString(e.bin):typeof e.array<"u"&&this.setByBooleanArray(e.array))};pe(S.asn1.DERBitString,S.asn1.ASN1Object);S.asn1.DEROctetString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=S.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}S.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"};pe(S.asn1.DEROctetString,S.asn1.DERAbstractString);S.asn1.DERNull=function(){S.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};pe(S.asn1.DERNull,S.asn1.ASN1Object);S.asn1.DERObjectIdentifier=function(e){S.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var n=nx(t);if(n==null)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueName=function(t){var n=S.asn1.x509.OID.name2oid(t);if(n!=="")this.setValueOidString(n);else throw new Error("DERObjectIdentifier oidName undefined: "+t)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){typeof t=="string"?this.setValueNameOrOid(t):t.oid!==void 0?this.setValueNameOrOid(t.oid):t.name!==void 0?this.setValueNameOrOid(t.name):t.hex!==void 0&&this.setValueHex(t.hex)},e!==void 0&&this.setByParam(e)};pe(S.asn1.DERObjectIdentifier,S.asn1.ASN1Object);S.asn1.DEREnumerated=function(e){S.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=S.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var n=new X(String(t),10);this.setByBigInteger(n)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))};pe(S.asn1.DEREnumerated,S.asn1.ASN1Object);S.asn1.DERUTF8String=function(e){S.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"};pe(S.asn1.DERUTF8String,S.asn1.DERAbstractString);S.asn1.DERNumericString=function(e){S.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"};pe(S.asn1.DERNumericString,S.asn1.DERAbstractString);S.asn1.DERPrintableString=function(e){S.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"};pe(S.asn1.DERPrintableString,S.asn1.DERAbstractString);S.asn1.DERTeletexString=function(e){S.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"};pe(S.asn1.DERTeletexString,S.asn1.DERAbstractString);S.asn1.DERIA5String=function(e){S.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"};pe(S.asn1.DERIA5String,S.asn1.DERAbstractString);S.asn1.DERVisibleString=function(e){S.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"};pe(S.asn1.DERVisibleString,S.asn1.DERAbstractString);S.asn1.DERBMPString=function(e){S.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"};pe(S.asn1.DERBMPString,S.asn1.DERAbstractString);S.asn1.DERUTCTime=function(e){S.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{12}Z$/)||t.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Qn(t);else throw new Error("malformed string for UTCTime: "+t);else if(t.str!=null)this.hV=Qn(t.str);else if(t.date==null&&t.millis==!0){var n=new Date;this.hV=Qn(this.formatDate(n,"utc",!0))}else if(t.date!=null&&t.date instanceof Date){var r=t.millis===!0;this.hV=Qn(this.formatDate(t.date,"utc",r))}else t instanceof Date&&(this.hV=Qn(this.formatDate(t,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},e!=null&&this.setByParam(e)};pe(S.asn1.DERUTCTime,S.asn1.DERAbstractTime);S.asn1.DERGeneralizedTime=function(e){S.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{14}Z$/)||t.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Qn(t);else throw new Error("malformed string for GeneralizedTime: "+t);else if(t.str!=null)this.hV=Qn(t.str);else if(t.date==null&&t.millis==!0){var n=new Date;this.hV=Qn(this.formatDate(n,"gen",!0))}else if(t.date!=null&&t.date instanceof Date){var r=t.millis===!0;this.hV=Qn(this.formatDate(t.date,"gen",r))}else t instanceof Date&&(this.hV=Qn(this.formatDate(t,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},e!=null&&this.setByParam(e)};pe(S.asn1.DERGeneralizedTime,S.asn1.DERAbstractTime);S.asn1.DERSequence=function(e){S.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var t="",n=0;n<this.asn1Array.length;n++){var r=this.asn1Array[n];t+=r.tohex()}return this.hV=t,this.hV}};pe(S.asn1.DERSequence,S.asn1.DERAbstractStructured);S.asn1.DERSet=function(e){S.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,n=0;n<this.asn1Array.length;n++){var r=this.asn1Array[n];t.push(r.tohex())}return this.sortFlag==!0&&t.sort(),this.hV=t.join(""),this.hV},typeof e<"u"&&typeof e.sortflag<"u"&&e.sortflag==!1&&(this.sortFlag=!1)};pe(S.asn1.DERSet,S.asn1.DERAbstractStructured);S.asn1.DERTaggedObject=function(e){S.asn1.DERTaggedObject.superclass.constructor.call(this);var t=S.asn1,n=Te,r=n.getV;n.isASN1HEX;var i=t.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(s,a,o){this.params={tag:a,explicit:s,obj:o}},this.getFreshValueHex=function(){var s=this.params;if(s.explicit==null&&(s.explicit=!0),s.tage!=null&&(s.tag=s.tage,s.explicit=!0),s.tagi!=null&&(s.tag=s.tagi,s.explicit=!1),s.str!=null)this.hV=Ed(s.str);else if(s.hex!=null)this.hV=s.hex;else if(s.obj!=null){var a;s.obj instanceof t.ASN1Object?a=s.obj.tohex():typeof s.obj=="object"&&(a=i(s.obj).tohex()),s.explicit?this.hV=a:this.hV=r(a,0)}else throw new Error("str, hex nor obj not specified");return s.tag==null&&(s.tag="a0"),this.hT=s.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(s){this.params=s},e!==void 0&&this.setByParam(e)};pe(S.asn1.DERTaggedObject,S.asn1.ASN1Object);var Te=new function(){};Te.getLblen=function(e,t){if(e.substr(t+2,1)!="8")return 1;var n=parseInt(e.substr(t+3,1));return n==0?-1:0<n&&n<10?n+1:-2};Te.getL=function(e,t){var n=Te.getLblen(e,t);return n<1?"":e.substr(t+2,n*2)};Te.getVblen=function(e,t){var n,r;return n=Te.getL(e,t),n==""?-1:(n.substr(0,1)==="8"?r=new X(n.substr(2),16):r=new X(n,16),r.intValue())};Te.getVidx=function(e,t){var n=Te.getLblen(e,t);return n<0?n:t+(n+1)*2};Te.getV=function(e,t){var n=Te.getVidx(e,t),r=Te.getVblen(e,t);return e.substr(n,r*2)};Te.getTLV=function(e,t){return e.substr(t,2)+Te.getL(e,t)+Te.getV(e,t)};Te.getTLVblen=function(e,t){return 2+Te.getLblen(e,t)*2+Te.getVblen(e,t)*2};Te.getNextSiblingIdx=function(e,t){var n=Te.getVidx(e,t),r=Te.getVblen(e,t);return n+r*2};Te.getChildIdx=function(e,t){var n=Te,r=[],i,s,a;i=n.getVidx(e,t),s=n.getVblen(e,t)*2,e.substr(t,2)=="03"&&(i+=2,s-=2),a=0;for(var o=i;a<=s;){var l=n.getTLVblen(e,o);if(a+=l,a<=s&&r.push(o),o+=l,a>=s)break}return r};Te.getNthChildIdx=function(e,t,n){var r=Te.getChildIdx(e,t);return r[n]};Te.getIdxbyList=function(e,t,n,r){var i=Te,s,a;return n.length==0?r!==void 0&&e.substr(t,2)!==r?-1:t:(s=n.shift(),a=i.getChildIdx(e,t),s>=a.length?-1:i.getIdxbyList(e,a[s],n,r))};Te.getIdxbyListEx=function(e,t,n,r){var i=Te,s,a;if(n.length==0)return r!==void 0&&e.substr(t,2)!==r?-1:t;s=n.shift(),a=i.getChildIdx(e,t);for(var o=0,l=0;l<a.length;l++){var u=e.substr(a[l],2);if(typeof s=="number"&&!i.isContextTag(u)&&o==s||typeof s=="string"&&i.isContextTag(u,s))return i.getIdxbyListEx(e,a[l],n,r);i.isContextTag(u)||o++}return-1};Te.getTLVbyList=function(e,t,n,r){var i=Te,s=i.getIdxbyList(e,t,n,r);return s==-1||s>=e.length?null:i.getTLV(e,s)};Te.getTLVbyListEx=function(e,t,n,r){var i=Te,s=i.getIdxbyListEx(e,t,n,r);return s==-1?null:i.getTLV(e,s)};Te.getVbyList=function(e,t,n,r,i){var s=Te,a,o;return a=s.getIdxbyList(e,t,n,r),a==-1||a>=e.length?null:(o=s.getV(e,a),i===!0&&(o=o.substr(2)),o)};Te.getVbyListEx=function(e,t,n,r,i){var s=Te,a,o;return a=s.getIdxbyListEx(e,t,n,r),a==-1?null:(o=s.getV(e,a),e.substr(a,2)=="03"&&i!==!1&&(o=o.substr(2)),o)};Te.getInt=function(e,t,n){n==null&&(n=-1);try{var r=e.substr(t,2);if(r!="02"&&r!="03")return n;var i=Te.getV(e,t);return r=="02"?parseInt(i,16):rx(i)}catch{return n}};Te.getOID=function(e,t,n){n==null&&(n=null);try{if(e.substr(t,2)!="06")return n;var r=Te.getV(e,t);return kd(r)}catch{return n}};Te.getOIDName=function(e,t,n){n==null&&(n=null);try{var r=Te.getOID(e,t,n);if(r==n)return n;var i=S.asn1.x509.OID.oid2name(r);return i==""?r:i}catch{return n}};Te.getString=function(e,t,n){n==null&&(n=null);try{var r=Te.getV(e,t);return Nn(r)}catch{return n}};Te.hextooidstr=function(e){var t=function(c,d){return c.length>=d?c:new Array(d-c.length+1).join("0")+c},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var s=e.substr(2),a=[],o=0;o<s.length/2;o++)a.push(parseInt(s.substr(o*2,2),16));for(var l=[],u="",o=0;o<a.length;o++)a[o]&128?u=u+t((a[o]&127).toString(2),7):(u=u+t((a[o]&127).toString(2),7),l.push(new String(parseInt(u,2))),u="");var f=n.join(".");return l.length>0&&(f=f+"."+l.join(".")),f};Te.dump=function(e,t,n,r){var i=Te,s=i.getV,a=i.dump,o=i.getChildIdx,l=e;e instanceof S.asn1.ASN1Object&&(l=e.tohex());var u=function(C,m){if(C.length<=m*2)return C;var _=C.substr(0,m)+"..(total "+C.length/2+"bytes).."+C.substr(C.length-m,m);return _};t===void 0&&(t={ommit_long_octet:32}),n===void 0&&(n=0),r===void 0&&(r="");var f=t.ommit_long_octet,k=l.substr(n,2);if(k=="01"){var c=s(l,n);return c=="00"?r+`BOOLEAN FALSE
`:r+`BOOLEAN TRUE
`}if(k=="02"){var c=s(l,n);return r+"INTEGER "+u(c,f)+`
`}if(k=="03"){var c=s(l,n);if(i.isASN1HEX(c.substr(2))){var d=r+`BITSTRING, encapsulates
`;return d=d+a(c.substr(2),t,0,r+"  "),d}else return r+"BITSTRING "+u(c,f)+`
`}if(k=="04"){var c=s(l,n);if(i.isASN1HEX(c)){var d=r+`OCTETSTRING, encapsulates
`;return d=d+a(c,t,0,r+"  "),d}else return r+"OCTETSTRING "+u(c,f)+`
`}if(k=="05")return r+`NULL
`;if(k=="06"){var h=s(l,n),g=S.asn1.ASN1Util.oidHexToInt(h),v=S.asn1.x509.OID.oid2name(g),p=g.replace(/\./g," ");return v!=""?r+"ObjectIdentifier "+v+" ("+p+`)
`:r+"ObjectIdentifier ("+p+`)
`}if(k=="0a")return r+"ENUMERATED "+parseInt(s(l,n))+`
`;if(k=="0c")return r+"UTF8String '"+Et(s(l,n))+`'
`;if(k=="13")return r+"PrintableString '"+Et(s(l,n))+`'
`;if(k=="14")return r+"TeletexString '"+Et(s(l,n))+`'
`;if(k=="16")return r+"IA5String '"+Et(s(l,n))+`'
`;if(k=="17")return r+"UTCTime "+Et(s(l,n))+`
`;if(k=="18")return r+"GeneralizedTime "+Et(s(l,n))+`
`;if(k=="1a")return r+"VisualString '"+Et(s(l,n))+`'
`;if(k=="1e")return r+"BMPString '"+cm(s(l,n))+`'
`;if(k=="30"){if(l.substr(n,4)=="3000")return r+`SEQUENCE {}
`;var d=r+`SEQUENCE
`,y=o(l,n),w=t;if((y.length==2||y.length==3)&&l.substr(y[0],2)=="06"&&l.substr(y[y.length-1],2)=="04"){var v=i.oidname(s(l,y[0])),A=JSON.parse(JSON.stringify(t));A.x509ExtName=v,w=A}for(var I=0;I<y.length;I++)d=d+a(l,w,y[I],r+"  ");return d}if(k=="31"){for(var d=r+`SET
`,y=o(l,n),I=0;I<y.length;I++)d=d+a(l,t,y[I],r+"  ");return d}var k=parseInt(k,16);if(k&128){var x=k&31;if(k&32){for(var d=r+"["+x+`]
`,y=o(l,n),I=0;I<y.length;I++)d=d+a(l,t,y[I],r+"  ");return d}else{var c=s(l,n);if(Te.isASN1HEX(c)){var d=r+"["+x+`]
`;return d=d+a(c,t,0,r+"  "),d}else(c.substr(0,8)=="68747470"||t.x509ExtName==="subjectAltName"&&x==2)&&(c=Et(c));var d=r+"["+x+"] "+c+`
`;return d}}return r+"UNKNOWN("+k+") "+s(l,n)+`
`};Te.parse=function(e){var t=Te,n=t.parse,r=t.isASN1HEX,i=t.getV,s=t.getTLV,a=t.getChildIdx,o=S.asn1,l=o.ASN1Util.oidHexToInt,u=o.x509.OID.oid2name,f=Et,c=cm,d=V3,h={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},g=function(_){for(var T=[],E=a(_,0),R=0;R<E.length;R++){var D=E[R],$=s(_,D),M=n($);T.push(M)}return T},v=e.substr(0,2),p={},y=i(e,0);if(v=="01")return e=="0101ff"?{bool:!0}:{bool:!1};if(v=="02")return{int:{hex:y}};if(v=="03")try{if(y.substr(0,2)!="00")throw"not encap";var w=y.substr(2);if(!r(w))throw"not encap";return{bitstr:{obj:n(w)}}}catch{var A=null;return y.length<=10&&(A=sx(y)),A==null?{bitstr:{hex:y}}:{bitstr:{bin:A}}}else if(v=="04")try{if(!r(y))throw"not encap";return{octstr:{obj:n(y)}}}catch{return{octstr:{hex:y}}}else{if(v=="05")return{null:""};if(v=="06"){var I=l(y),k=u(I);return k==""?{oid:I}:{oid:k}}else{if(v=="0a")return y.length>4?{enum:{hex:y}}:{enum:parseInt(y,16)};if(v=="30"||v=="31")return p[h[v]]=g(e),p;if(v=="14"){var x=d(y);return p[h[v]]={str:x},p}else if(v=="1e"){var x=c(y);return p[h[v]]={str:x},p}else if(":0c:12:13:16:17:18:1a:".indexOf(v)!=-1){var x=f(y);return p[h[v]]={str:x},p}else if(v.match(/^8[0-9]$/)){var x=f(y);return x==null|x==""?{tag:{tag:v,explicit:!1,hex:y}}:x.match(/[\x00-\x1F\x7F-\x9F]/)!=null||x.match(/[\u0000-\u001F\u0080–\u009F]/)!=null?{tag:{tag:v,explicit:!1,hex:y}}:{tag:{tag:v,explicit:!1,str:x}}}else if(v.match(/^a[0-9]$/))try{if(!r(y))throw new Error("not encap");return{tag:{tag:v,explicit:!0,obj:n(y)}}}catch{return{tag:{tag:v,explicit:!0,hex:y}}}else{var C=new S.asn1.ASN1Object;C.hV=y;var m=C.getLengthHexFromValue();return{asn1:{tlv:v+m+y}}}}}};Te.isContextTag=function(e,t){e=e.toLowerCase();var n,r;try{n=parseInt(e,16)}catch{return-1}if(t===void 0)return(n&192)==128;try{var i=t.match(/^\[[0-9]+\]$/);return i==null||(r=parseInt(t.substr(1,t.length-1),10),r>31)?!1:(n&192)==128&&(n&31)==r}catch{return!1}};Te.isASN1HEX=function(e){var t=Te;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),i=t.getL(e,0),s=e.length-r.length-i.length;return s==n*2};Te.checkStrictDER=function(e,t,n,r,i){var s=Te;if(n===void 0){if(typeof e!="string")throw new Error("not hex string");if(e=e.toLowerCase(),!S.lang.String.isHex(e))throw new Error("not hex string");n=e.length,r=e.length/2,r<128?i=1:i=Math.ceil(r.toString(16))+1}var a=s.getL(e,t);if(a.length>i*2)throw new Error("L of TLV too long: idx="+t);var o=s.getVblen(e,t);if(o>r)throw new Error("value of L too long than hex: idx="+t);var l=s.getTLV(e,t),u=l.length-2-s.getL(e,t).length;if(u!==o*2)throw new Error("V string length and L's value not the same:"+u+"/"+o*2);if(t===0&&e.length!=l.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+l.length);var f=e.substr(t,2);if(f==="02"){var c=s.getVidx(e,t);if(e.substr(c,2)=="00"&&e.charCodeAt(c+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(f,16)&32){for(var d=s.getVblen(e,t),h=0,g=s.getChildIdx(e,t),v=0;v<g.length;v++){var p=s.getTLV(e,g[v]);h+=p.length,s.checkStrictDER(e,g[v],n,r,i)}if(d*2!=h)throw new Error("sum of children's TLV length and L unmatch: "+d*2+"!="+h)}};Te.oidname=function(e){var t=S.asn1;S.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return n===""&&(n=e),n};(typeof S>"u"||!S)&&(S={});(typeof S.asn1>"u"||!S.asn1)&&(S.asn1={});(typeof S.asn1.x509>"u"||!S.asn1.x509)&&(S.asn1.x509={});S.asn1.x509.Certificate=function(e){S.asn1.x509.Certificate.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERBitString,i=n.DERSequence,s=n.x509,a=s.TBSCertificate,o=s.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=this.params,u=l.sigalg;l.sigalg.name!=null&&(u=l.sigalg.name);var f=l.tbsobj.tohex(),c=new S.crypto.Signature({alg:u});c.init(l.cakey),c.updateHex(f),l.sighex=c.sign()},this.getPEM=function(){return mn(this.tohex(),"CERTIFICATE")},this.tohex=function(){var l=this.params;if((l.tbsobj==null||l.tbsobj==null)&&(l.tbsobj=new a(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var u=[];u.push(l.tbsobj),u.push(new o({name:l.sigalg})),u.push(new r({hex:"00"+l.sighex}));var f=new i({array:u});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};pe(S.asn1.x509.Certificate,S.asn1.ASN1Object);S.asn1.x509.TBSCertificate=function(e){S.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.x509,i=n.DERTaggedObject,s=n.DERInteger,a=n.DERSequence,o=r.AlgorithmIdentifier,l=r.Time,u=r.X500Name,f=r.Extensions,c=r.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(d){this.params=d},this.tohex=function(){var d=[],h=this.params;if(h.version!=null||h.version!=1){var g=2;h.version!=null&&(g=h.version-1);var v=new i({obj:new s({int:g})});d.push(v)}d.push(new s(h.serial)),d.push(new o({name:h.sigalg})),d.push(new u(h.issuer)),d.push(new a({array:[new l(h.notbefore),new l(h.notafter)]})),d.push(new u(h.subject)),d.push(new c(St.getKey(h.sbjpubkey))),h.ext!==void 0&&h.ext.length>0&&d.push(new i({tag:"a3",obj:new f(h.ext)}));var p=new S.asn1.DERSequence({array:d});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.TBSCertificate,S.asn1.ASN1Object);S.asn1.x509.Extensions=function(e){S.asn1.x509.Extensions.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERSequence,i=n.x509;this.aParam=[],this.setByParam=function(s){this.aParam=s},this.tohex=function(){for(var s=[],a=0;a<this.aParam.length;a++){var o=this.aParam[a],l=o.extname,u=null;if(o.extn!=null)u=new i.PrivateExtension(o);else if(l=="subjectKeyIdentifier")u=new i.SubjectKeyIdentifier(o);else if(l=="keyUsage")u=new i.KeyUsage(o);else if(l=="subjectAltName")u=new i.SubjectAltName(o);else if(l=="issuerAltName")u=new i.IssuerAltName(o);else if(l=="basicConstraints")u=new i.BasicConstraints(o);else if(l=="nameConstraints")u=new i.NameConstraints(o);else if(l=="cRLDistributionPoints")u=new i.CRLDistributionPoints(o);else if(l=="certificatePolicies")u=new i.CertificatePolicies(o);else if(l=="policyMappings")u=new i.PolicyMappings(o);else if(l=="policyConstraints")u=new i.PolicyConstraints(o);else if(l=="inhibitAnyPolicy")u=new i.InhibitAnyPolicy(o);else if(l=="authorityKeyIdentifier")u=new i.AuthorityKeyIdentifier(o);else if(l=="extKeyUsage")u=new i.ExtKeyUsage(o);else if(l=="authorityInfoAccess")u=new i.AuthorityInfoAccess(o);else if(l=="cRLNumber")u=new i.CRLNumber(o);else if(l=="cRLReason")u=new i.CRLReason(o);else if(l=="ocspNonce")u=new i.OCSPNonce(o);else if(l=="ocspNoCheck")u=new i.OCSPNoCheck(o);else if(l=="adobeTimeStamp")u=new i.AdobeTimeStamp(o);else if(l=="subjectDirectoryAttributes")u=new i.SubjectDirectoryAttributes(o);else throw new Error("extension not supported:"+JSON.stringify(o));u!=null&&s.push(u)}var f=new r({array:s});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.x509.Extensions,S.asn1.ASN1Object);S.asn1.x509.Extension=function(e){S.asn1.x509.Extension.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERObjectIdentifier,i=n.DEROctetString;n.DERBitString;var s=n.DERBoolean,a=n.DERSequence;this.tohex=function(){var o=new r({oid:this.oid}),l=new i({hex:this.getExtnValueHex()}),u=new Array;u.push(o),this.critical&&u.push(new s),u.push(l);var f=new a({array:u});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,e!==void 0&&e.critical!==void 0&&(this.critical=e.critical)};pe(S.asn1.x509.Extension,S.asn1.ASN1Object);S.asn1.x509.KeyUsage=function(e){S.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,n={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var r=this.getBinValue();return this.asn1ExtnValue=new S.asn1.DERBitString({bin:r}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var r=this.params;if(typeof r!="object"||typeof r.names!="object"&&typeof r.bin!="string")throw new t("parameter not yet set");if(r.names!=null)return Sc(r.names,n);if(r.bin!=null)return r.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",e!==void 0&&(this.params=e)};pe(S.asn1.x509.KeyUsage,S.asn1.x509.Extension);S.asn1.x509.BasicConstraints=function(e){S.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=S.asn1,n=t.DERBoolean,r=t.DERInteger,i=t.DERSequence;this.getExtnValueHex=function(){var s=new Array;this.cA&&s.push(new n),this.pathLen>-1&&s.push(new r({int:this.pathLen}));var a=new i({array:s});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,e!==void 0&&(e.cA!==void 0&&(this.cA=e.cA),e.pathLen!==void 0&&(this.pathLen=e.pathLen))};pe(S.asn1.x509.BasicConstraints,S.asn1.x509.Extension);S.asn1.x509.CRLDistributionPoints=function(e){S.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=S,n=t.asn1,r=n.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(i){for(var s=[],a=0;a<i.length;a++)if(i[a]instanceof S.asn1.ASN1Object)s.push(i[a]);else{var o=new r.DistributionPoint(i[a]);s.push(o)}this.asn1ExtnValue=new n.DERSequence({array:s})},this.setByOneURI=function(i){var s=new r.DistributionPoint({fulluri:i});this.setByDPArray([s])},this.oid="2.5.29.31",e!==void 0&&(e.array!==void 0?this.setByDPArray(e.array):e.uri!==void 0&&this.setByOneURI(e.uri))};pe(S.asn1.x509.CRLDistributionPoints,S.asn1.x509.Extension);S.asn1.x509.DistributionPoint=function(e){S.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.x509.DistributionPointName;this.tohex=function(){var i=new n.DERSequence;if(this.asn1DP!=null){var s=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});i.appendASN1Object(s)}return this.hTLV=i.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.dpobj!==void 0?this.asn1DP=e.dpobj:e.dpname!==void 0?this.asn1DP=new r(e.dpname):e.fulluri!==void 0&&(this.asn1DP=new r({full:[{uri:e.fulluri}]})))};pe(S.asn1.x509.DistributionPoint,S.asn1.ASN1Object);S.asn1.x509.DistributionPointName=function(e){S.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0)if(n.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else if(e.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new n.x509.GeneralNames(e.full);else throw new Error("This class supports GeneralNames only as argument")};pe(S.asn1.x509.DistributionPointName,S.asn1.ASN1Object);S.asn1.x509.CertificatePolicies=function(e){S.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=S,n=t.asn1,r=n.x509,i=n.DERSequence,s=r.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new s(this.params.array[o]));var l=new i({array:a});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",e!==void 0&&(this.params=e)};pe(S.asn1.x509.CertificatePolicies,S.asn1.x509.Extension);S.asn1.x509.PolicyInformation=function(e){S.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=S.asn1,n=t.DERSequence,r=t.DERObjectIdentifier,i=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var s=[new r(this.params.policyoid)];if(this.params.array!==void 0){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new i(this.params.array[o]));a.length>0&&s.push(new n({array:a}))}var l=new n({array:s});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(S.asn1.x509.PolicyInformation,S.asn1.ASN1Object);S.asn1.x509.PolicyQualifierInfo=function(e){S.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=S.asn1,n=t.DERSequence,r=t.DERIA5String,i=t.DERObjectIdentifier,s=t.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var a=new n({array:[new i({oid:"1.3.6.1.5.5.7.2.1"}),new r({str:this.params.cps})]});return a.tohex()}if(this.params.unotice!=null){var a=new n({array:[new i({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]});return a.tohex()}},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(S.asn1.x509.PolicyQualifierInfo,S.asn1.ASN1Object);S.asn1.x509.UserNotice=function(e){S.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=S.asn1.DERSequence;S.asn1.DERInteger;var n=S.asn1.x509.DisplayText,r=S.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var i=[];this.params.noticeref!==void 0&&i.push(new r(this.params.noticeref)),this.params.exptext!==void 0&&i.push(new n(this.params.exptext));var s=new t({array:i});return s.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(S.asn1.x509.UserNotice,S.asn1.ASN1Object);S.asn1.x509.NoticeReference=function(e){S.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=S.asn1.DERSequence,n=S.asn1.DERInteger,r=S.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var i=[];if(this.params.org!==void 0&&i.push(new r(this.params.org)),this.params.noticenum!==void 0){for(var s=[],a=this.params.noticenum,o=0;o<a.length;o++)s.push(new n(a[o]));i.push(new t({array:s}))}if(i.length==0)throw new Error("parameter is empty");var l=new t({array:i});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(S.asn1.x509.NoticeReference,S.asn1.ASN1Object);S.asn1.x509.DisplayText=function(e){S.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",e!==void 0&&(e.type==="ia5"?this.hT="16":e.type==="vis"?this.hT="1a":e.type==="bmp"&&(this.hT="1e"))};pe(S.asn1.x509.DisplayText,S.asn1.DERAbstractString);S.asn1.x509.PolicyMappings=function(e){S.asn1.x509.PolicyMappings.superclass.constructor.call(this,e);var t=S,n=t.asn1;n.x509;var r=n.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var i=this.params,s=[],a=0;a<i.array.length;a++){var o=i.array[a];s.push({seq:[{oid:o[0]},{oid:o[1]}]})}return this.asn1ExtnValue=r({seq:s}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",e!==void 0&&(this.params=e)};pe(S.asn1.x509.PolicyMappings,S.asn1.x509.Extension);S.asn1.x509.PolicyConstraints=function(e){S.asn1.x509.PolicyConstraints.superclass.constructor.call(this,e);var t=S,n=t.asn1;n.x509;var r=n.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var i=this.params,s=[];return i.reqexp!=null&&s.push({tag:{tagi:"80",obj:{int:i.reqexp}}}),i.inhibit!=null&&s.push({tag:{tagi:"81",obj:{int:i.inhibit}}}),this.asn1ExtnValue=r({seq:s}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",e!==void 0&&(this.params=e)};pe(S.asn1.x509.PolicyConstraints,S.asn1.x509.Extension);S.asn1.x509.InhibitAnyPolicy=function(e){S.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,e);var t=S,n=t.asn1;n.x509;var r=n.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=r({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",e!==void 0&&(this.params=e)};pe(S.asn1.x509.InhibitAnyPolicy,S.asn1.x509.Extension);S.asn1.x509.NameConstraints=function(e){S.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=S,n=t.asn1,r=n.x509,i=n.ASN1Util.newObject,s=r.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var a=this.params,o=[];if(a.permit!=null&&a.permit.length!=null){for(var l=[],u=0;u<a.permit.length;u++)l.push(new s(a.permit[u]));o.push({tag:{tagi:"a0",obj:{seq:l}}})}if(a.exclude!=null&&a.exclude.length!=null){for(var f=[],u=0;u<a.exclude.length;u++)f.push(new s(a.exclude[u]));o.push({tag:{tagi:"a1",obj:{seq:f}}})}return this.asn1ExtnValue=i({seq:o}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",e!==void 0&&(this.params=e)};pe(S.asn1.x509.NameConstraints,S.asn1.x509.Extension);S.asn1.x509.GeneralSubtree=function(e){S.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=S.asn1,n=t.x509,r=n.GeneralName,i=t.ASN1Util.newObject;this.params=null,this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,a=[new r(s)];s.min!=null&&a.push({tag:{tagi:"80",obj:{int:s.min}}}),s.max!=null&&a.push({tag:{tagi:"81",obj:{int:s.max}}});var o=i({seq:a});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.GeneralSubtree,S.asn1.ASN1Object);S.asn1.x509.ExtKeyUsage=function(e){S.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=S,n=t.asn1;this.setPurposeArray=function(r){this.asn1ExtnValue=new n.DERSequence;for(var i=0;i<r.length;i++){var s=new n.DERObjectIdentifier(r[i]);this.asn1ExtnValue.appendASN1Object(s)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",e!==void 0&&e.array!==void 0&&this.setPurposeArray(e.array)};pe(S.asn1.x509.ExtKeyUsage,S.asn1.x509.Extension);S.asn1.x509.AuthorityKeyIdentifier=function(e){S.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=S,n=t.asn1,r=n.DERTaggedObject,i=n.x509.GeneralNames;t.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var s=new Array;this.asn1KID&&s.push(new r({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&s.push(new r({explicit:!1,tag:"a1",obj:new i([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&s.push(new r({explicit:!1,tag:"82",obj:this.asn1CertSN}));var a=new n.DERSequence({array:s});return this.asn1ExtnValue=a,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(s){if(s.str!==void 0||s.hex!==void 0)this.asn1KID=new S.asn1.DEROctetString(s);else if(typeof s=="object"&&S.crypto.Util.isKey(s)||typeof s=="string"&&s.indexOf("BEGIN ")!=-1){var a=s;typeof s=="string"&&(a=St.getKey(s));var o=St.getKeyID(a);this.asn1KID=new S.asn1.DEROctetString({hex:o})}},this.setCertIssuerByParam=function(s){s.str!==void 0||s.ldapstr!==void 0||s.hex!==void 0||s.certsubject!==void 0||s.certissuer!==void 0?this.asn1CertIssuer=new S.asn1.x509.X500Name(s):typeof s=="string"&&s.indexOf("BEGIN ")!=-1&&s.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new S.asn1.x509.X500Name({certissuer:s}))},this.setCertSNByParam=function(s){if(s.str!==void 0||s.bigint!==void 0||s.hex!==void 0)this.asn1CertSN=new S.asn1.DERInteger(s);else if(typeof s=="string"&&s.indexOf("BEGIN ")!=-1&&s.indexOf("CERTIFICATE")){var a=new Xe;a.readCertPEM(s);var o=a.getSerialNumberHex();this.asn1CertSN=new S.asn1.DERInteger({hex:o})}},this.oid="2.5.29.35",e!==void 0&&(e.kid!==void 0&&this.setKIDByParam(e.kid),e.issuer!==void 0&&this.setCertIssuerByParam(e.issuer),e.sn!==void 0&&this.setCertSNByParam(e.sn),e.issuersn!==void 0&&typeof e.issuersn=="string"&&e.issuersn.indexOf("BEGIN ")!=-1&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))};pe(S.asn1.x509.AuthorityKeyIdentifier,S.asn1.x509.Extension);S.asn1.x509.SubjectKeyIdentifier=function(e){S.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=S,n=t.asn1,r=n.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(i){if(i.str!==void 0||i.hex!==void 0)this.asn1KID=new r(i);else if(typeof i=="object"&&S.crypto.Util.isKey(i)||typeof i=="string"&&i.indexOf("BEGIN")!=-1){var s=i;typeof i=="string"&&(s=St.getKey(i));var a=St.getKeyID(s);this.asn1KID=new S.asn1.DEROctetString({hex:a})}},this.oid="2.5.29.14",e!==void 0&&e.kid!==void 0&&this.setKIDByParam(e.kid)};pe(S.asn1.x509.SubjectKeyIdentifier,S.asn1.x509.Extension);S.asn1.x509.AuthorityInfoAccess=function(e){S.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(t){for(var n=new Array,r=S,i=r.asn1,s=i.DERSequence,a=i.DERObjectIdentifier,o=i.x509.GeneralName,l=0;l<t.length;l++){var u,f=t[l];if(f.ocsp!==void 0)u=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.1"}),new o({uri:f.ocsp})]});else if(f.caissuer!==void 0)u=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.2"}),new o({uri:f.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(f));n.push(u)}this.asn1ExtnValue=new s({array:n})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",e!==void 0&&e.array!==void 0&&this.setAccessDescriptionArray(e.array)};pe(S.asn1.x509.AuthorityInfoAccess,S.asn1.x509.Extension);S.asn1.x509.SubjectAltName=function(e){S.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new S.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};pe(S.asn1.x509.SubjectAltName,S.asn1.x509.Extension);S.asn1.x509.IssuerAltName=function(e){S.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new S.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};pe(S.asn1.x509.IssuerAltName,S.asn1.x509.Extension);S.asn1.x509.SubjectDirectoryAttributes=function(e){S.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=S.asn1,n=t.DERSequence,r=t.ASN1Util.newObject,i=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var s=[],a=0;a<this.params.array.length;a++){var o=this.params.array[a];if(o.attr!=null&&o.array!=null){var l={seq:[{oid:o.attr},{set:o.array}]};s.push(r(l));continue}var u={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(o.attr=="dateOfBirth")u.seq[0].oid=i(o.attr),u.seq[1].set[0]={gentime:o.str};else if(o.attr=="placeOfBirth")u.seq[0].oid=i(o.attr),u.seq[1].set[0]={utf8str:o.str};else if(o.attr=="gender")u.seq[0].oid=i(o.attr),u.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfCitizenship")u.seq[0].oid=i(o.attr),u.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfResidence")u.seq[0].oid=i(o.attr),u.seq[1].set[0]={prnstr:o.str};else throw new Error("unsupported attribute: "+o.attr);s.push(new r(u))}var f=new n({array:s});return this.asn1ExtnValue=f,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",e!==void 0&&(this.params=e)};pe(S.asn1.x509.SubjectDirectoryAttributes,S.asn1.x509.Extension);S.asn1.x509.PrivateExtension=function(e){S.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=S,n=t.lang.String.isHex,r=t.asn1,i=r.x509.OID.name2oid,s=r.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.oid=i(a.extname),this.params=a},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var a=this.params.extn;if(typeof a=="string"&&n(a))return a;if(typeof a=="object")try{return s(a).tohex()}catch{}throw new Error("unsupported extn value")},e!=null&&this.setByParam(e)};pe(S.asn1.x509.PrivateExtension,S.asn1.x509.Extension);S.asn1.x509.CRL=function(e){S.asn1.x509.CRL.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERSequence,i=n.DERBitString,s=n.x509,a=s.AlgorithmIdentifier,o=s.TBSCertList;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=new o(this.params).tohex(),u=new S.crypto.Signature({alg:this.params.sigalg});u.init(this.params.cakey),u.updateHex(l);var f=u.sign();this.params.sighex=f},this.getPEM=function(){return mn(this.tohex(),"X509 CRL")},this.tohex=function(){var l=this.params;if(l.tbsobj==null&&(l.tbsobj=new o(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var u=[];u.push(l.tbsobj),u.push(new a({name:l.sigalg})),u.push(new i({hex:"00"+l.sighex}));var f=new r({array:u});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};pe(S.asn1.x509.CRL,S.asn1.ASN1Object);S.asn1.x509.TBSCertList=function(e){S.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERInteger,i=n.DERSequence,s=n.DERTaggedObject;n.DERObjectIdentifier;var a=n.x509,o=a.AlgorithmIdentifier,l=a.Time,u=a.Extensions,f=a.X500Name;this.params=null,this.setByParam=function(c){this.params=c},this.getRevCertSequence=function(){for(var c=[],d=this.params.revcert,h=0;h<d.length;h++){var g=[new r(d[h].sn),new l(d[h].date)];d[h].ext!=null&&g.push(new u(d[h].ext)),c.push(new i({array:g}))}return new i({array:c})},this.tohex=function(){var c=[],d=this.params;if(d.version!=null){var h=d.version-1,g=new r({int:h});c.push(g)}if(c.push(new o({name:d.sigalg})),c.push(new f(d.issuer)),c.push(new l(d.thisupdate)),d.nextupdate!=null&&c.push(new l(d.nextupdate)),d.revcert!=null&&c.push(this.getRevCertSequence()),d.ext!=null){var v=new u(d.ext);c.push(new s({tag:"a0",explicit:!0,obj:v}))}var p=new i({array:c});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.TBSCertList,S.asn1.ASN1Object);S.asn1.x509.CRLEntry=function(e){S.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=S,n=t.asn1;this.setCertSerial=function(r){this.sn=new n.DERInteger(r)},this.setRevocationDate=function(r){this.time=new n.x509.Time(r)},this.tohex=function(){var r=new n.DERSequence({array:[this.sn,this.time]});return this.TLV=r.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.time!==void 0&&this.setRevocationDate(e.time),e.sn!==void 0&&this.setCertSerial(e.sn))};pe(S.asn1.x509.CRLEntry,S.asn1.ASN1Object);S.asn1.x509.CRLNumber=function(e){S.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new S.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",e!=null&&(this.params=e)};pe(S.asn1.x509.CRLNumber,S.asn1.x509.Extension);S.asn1.x509.CRLReason=function(e){S.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new S.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",e!=null&&(this.params=e)};pe(S.asn1.x509.CRLReason,S.asn1.x509.Extension);S.asn1.x509.OCSPNonce=function(e){S.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new S.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",e!=null&&(this.params=e)};pe(S.asn1.x509.OCSPNonce,S.asn1.x509.Extension);S.asn1.x509.OCSPNoCheck=function(e){S.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new S.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",e!=null&&(this.params=e)};pe(S.asn1.x509.OCSPNoCheck,S.asn1.x509.Extension);S.asn1.x509.AdobeTimeStamp=function(e){S.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=S,n=t.asn1,r=n.DERInteger,i=n.DERBoolean,s=n.DERSequence,a=n.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var o=this.params,l=[new r(1)];return l.push(new a({uri:o.uri})),o.reqauth!=null&&l.push(new i(o.reqauth)),this.asn1ExtnValue=new s({array:l}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.AdobeTimeStamp,S.asn1.x509.Extension);S.asn1.x509.X500Name=function(e){S.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=S,n=t.asn1,r=n.x509,i=r.RDN;this.setByString=function(s,a){a!==void 0&&(this.sRule=a);var o=s.split("/");o.shift();for(var l=[],u=0;u<o.length;u++)if(o[u].match(/^[^=]+=.+$/))l.push(o[u]);else{var f=l.length-1;l[f]=l[f]+"/"+o[u]}for(var u=0;u<l.length;u++)this.asn1Array.push(new i({str:l[u],rule:this.sRule}))},this.setByLdapString=function(s,a){a!==void 0&&(this.sRule=a);var o=r.X500Name.ldapToCompat(s);this.setByString(o,a)},this.setByObject=function(s,a){a!==void 0&&(this.sRule=a);for(var o in s)if(s.hasOwnProperty(o)){var l=new i({str:o+"="+s[o],rule:this.sRule});this.asn1Array?this.asn1Array.push(l):this.asn1Array=[l]}},this.setByParam=function(s){if(s.rule!==void 0&&(this.sRule=s.rule),s.array!==void 0)this.paramArray=s.array;else if(s.str!==void 0)this.setByString(s.str);else if(s.ldapstr!==void 0)this.setByLdapString(s.ldapstr);else if(s.hex!==void 0)this.hTLV=s.hex;else if(s.certissuer!==void 0){var a=new Xe;a.readCertPEM(s.certissuer),this.hTLV=a.getIssuerHex()}else if(s.certsubject!==void 0){var a=new Xe;a.readCertPEM(s.certsubject),this.hTLV=a.getSubjectHex()}else typeof s=="object"&&s.certsubject===void 0&&s.certissuer===void 0&&this.setByObject(s)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var s=0;s<this.paramArray.length;s++){var a={array:this.paramArray[s]};this.sRule!="utf8"&&(a.rule=this.sRule);var o=new i(a);this.asn1Array.push(o)}var l=new n.DERSequence({array:this.asn1Array});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.X500Name,S.asn1.ASN1Object);S.asn1.x509.X500Name.compatToLDAP=function(e){if(e.substr(0,1)!=="/")throw"malformed input";e=e.substr(1);var t=e.split("/");return t.reverse(),t=t.map(function(n){return n.replace(/,/,"\\,")}),t.join(",")};S.asn1.x509.X500Name.onelineToLDAP=function(e){return S.asn1.x509.X500Name.compatToLDAP(e)};S.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),n=!1,r=[],i=0;t.length>0;i++){var s=t.shift();if(n===!0){var a=r.pop(),o=(a+","+s).replace(/\\,/g,",");r.push(o),n=!1}else r.push(s);s.substr(-1,1)==="\\"&&(n=!0)}return r=r.map(function(l){return l.replace("/","\\/")}),r.reverse(),"/"+r.join("/")};S.asn1.x509.X500Name.ldapToOneline=function(e){return S.asn1.x509.X500Name.ldapToCompat(e)};S.asn1.x509.RDN=function(e){S.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=S.asn1.x509.AttributeTypeAndValue;this.setByParam=function(n){n.rule!==void 0&&(this.sRule=n.rule),n.str!==void 0&&this.addByMultiValuedString(n.str),n.array!==void 0&&(this.paramArray=n.array)},this.addByString=function(n){this.asn1Array.push(new S.asn1.x509.AttributeTypeAndValue({str:n,rule:this.sRule}))},this.addByMultiValuedString=function(n){for(var r=S.asn1.x509.RDN.parseString(n),i=0;i<r.length;i++)this.addByString(r[i])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var n=0;n<this.paramArray.length;n++){var r=this.paramArray[n];r.rule!==void 0&&this.sRule!="utf8"&&(r.rule=this.sRule);var i=new t(r);this.asn1Array.push(i)}var s=new S.asn1.DERSet({array:this.asn1Array});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.RDN,S.asn1.ASN1Object);S.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),n=!1,r=[],i=0;t.length>0;i++){var s=t.shift();if(n===!0){var a=r.pop(),o=(a+"+"+s).replace(/\\\+/g,"+");r.push(o),n=!1}else r.push(s);s.substr(-1,1)==="\\"&&(n=!0)}for(var l=!1,u=[],i=0;r.length>0;i++){var s=r.shift();if(l===!0){var f=u.pop();if(s.match(/"$/)){var o=(f+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");u.push(o),l=!1}else u.push(f+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(l=!0)}return u};S.asn1.x509.AttributeTypeAndValue=function(e){S.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=S,n=t.asn1,r=n.DERSequence,i=n.DERUTF8String,s=n.DERPrintableString,a=n.DERTeletexString,o=n.DERIA5String,l=n.DERVisibleString,u=n.DERBMPString,f=t.lang.String.isMail,c=t.lang.String.isPrintable;this.setByParam=function(d){if(d.rule!==void 0&&(this.sRule=d.rule),d.ds!==void 0&&(this.dsType=d.ds),d.value===void 0&&d.str!==void 0){var h=d.str,g=h.match(/^([^=]+)=(.+)$/);if(g)this.sType=g[1],this.sValue=g[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=d.type,this.sValue=d.value},this.setByString=function(d,h){h!==void 0&&(this.sRule=h);var g=d.match(/^([^=]+)=(.+)$/);if(g)this.setByAttrTypeAndValueStr(g[1],g[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var d=this.sType,h=this.sValue,g=this.sRule;return g==="prn"?d=="CN"&&f(h)?"ia5":c(h)?"prn":"utf8":g==="utf8"?d=="CN"&&f(h)?"ia5":d=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(d,h,g){g!==void 0&&(this.sRule=g),this.sType=d,this.sValue=h},this.getValueObj=function(d,h){if(d=="utf8")return new i({str:h});if(d=="prn")return new s({str:h});if(d=="tel")return new a({str:h});if(d=="ia5")return new o({str:h});if(d=="vis")return new l({str:h});if(d=="bmp")return new u({str:h});throw new Error("unsupported directory string type: type="+d+" value="+h)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var d=S.asn1.x509.OID.atype2obj(this.sType),h=this.getValueObj(this.dsType,this.sValue),g=new r({array:[d,h]});return this.TLV=g.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.AttributeTypeAndValue,S.asn1.ASN1Object);S.asn1.x509.SubjectPublicKeyInfo=function(e){S.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERInteger,i=n.DERBitString,s=n.DERObjectIdentifier,a=n.DERSequence,o=n.ASN1Util.newObject,l=n.x509,u=l.AlgorithmIdentifier,f=t.crypto;f.ECDSA,f.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var c=new a({array:[this.asn1AlgId,this.asn1SubjPKey]});return c},this.tohex=function(){var c=this.getASN1Object();return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(c){try{if(c instanceof Ye){var d=o({seq:[{int:{bigint:c.n}},{int:{int:c.e}}]}),h=d.tohex();this.asn1AlgId=new u({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+h})}}catch{}try{if(c instanceof S.crypto.ECDSA){var g=new s({name:c.curveName});this.asn1AlgId=new u({name:"ecPublicKey",asn1params:g}),this.asn1SubjPKey=new i({hex:"00"+c.pubKeyHex})}}catch{}try{if(c instanceof S.crypto.DSA){var g=new o({seq:[{int:{bigint:c.p}},{int:{bigint:c.q}},{int:{bigint:c.g}}]});this.asn1AlgId=new u({name:"dsa",asn1params:g});var v=new r({bigint:c.y});this.asn1SubjPKey=new i({hex:"00"+v.tohex()})}}catch{}},e!==void 0&&this.setPubKey(e)};pe(S.asn1.x509.SubjectPublicKeyInfo,S.asn1.ASN1Object);S.asn1.x509.Time=function(e){S.asn1.x509.Time.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERUTCTime,i=n.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(s){this.timeParams=s},this.setByParam=function(s){this.params=s},this.getType=function(s){return s.match(/^[0-9]{12}Z$/)?"utc":s.match(/^[0-9]{14}Z$/)?"gen":s.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":s.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var s=this.params,a=null;if(typeof s=="string"&&(s={str:s}),s!=null&&s.str&&(s.type==null||s.type==null)&&(s.type=this.getType(s.str)),s!=null&&s.str?(s.type=="utc"&&(a=new r(s.str)),s.type=="gen"&&(a=new i(s.str))):this.type=="gen"?a=new i:a=new r,a==null)throw new Error("wrong setting for Time");return this.TLV=a.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};S.asn1.x509.Time_bak=function(e){S.asn1.x509.Time_bak.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERUTCTime,i=n.DERGeneralizedTime;this.setTimeParams=function(s){this.timeParams=s},this.tohex=function(){var s=null;return this.timeParams!=null?this.type=="utc"?s=new r(this.timeParams):s=new i(this.timeParams):this.type=="utc"?s=new r:s=new i,this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",e!==void 0&&(e.type!==void 0?this.type=e.type:e.str!==void 0&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)};pe(S.asn1.x509.Time,S.asn1.ASN1Object);S.asn1.x509.AlgorithmIdentifier=function(e){S.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=S,n=t.asn1,r=n.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var s=null;for(var a in r)a===this.nameAlg&&(s=r[a]);if(s!==null)return this.hTLV=s,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=n.x509.OID.name2obj(this.nameAlg));var o=[this.asn1Alg];this.asn1Params!==null&&o.push(this.asn1Params);var l=new n.DERSequence({array:o});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.name!==void 0&&(this.nameAlg=e.name),e.asn1params!==void 0&&(this.asn1Params=e.asn1params),e.paramempty!==void 0&&(this.paramEmpty=e.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var i=this.nameAlg.toLowerCase();i.substr(-7,7)!=="withdsa"&&i.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new n.DERNull)}};pe(S.asn1.x509.AlgorithmIdentifier,S.asn1.ASN1Object);S.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};S.asn1.x509.GeneralName=function(e){S.asn1.x509.GeneralName.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.x509,i=r.X500Name,s=r.OtherName,a=n.DERIA5String;n.DERPrintableString;var o=n.DEROctetString,l=n.DERTaggedObject,u=n.ASN1Object,f=Error;this.params=null,this.setByParam=function(c){this.params=c},this.tohex=function(){var c=this.params,d,g,h,g=!1;if(c.other!==void 0)d="a0",h=new s(c.other);else if(c.rfc822!==void 0)d="81",h=new a({str:c.rfc822});else if(c.dns!==void 0)d="82",h=new a({str:c.dns});else if(c.dn!==void 0)d="a4",g=!0,typeof c.dn=="string"?h=new i({str:c.dn}):c.dn instanceof S.asn1.x509.X500Name?h=c.dn:h=new i(c.dn);else if(c.ldapdn!==void 0)d="a4",g=!0,h=new i({ldapstr:c.ldapdn});else if(c.certissuer!==void 0||c.certsubj!==void 0){d="a4",g=!0;var v,p,y=null;if(c.certsubj!==void 0?(v=!1,p=c.certsubj):(v=!0,p=c.certissuer),p.match(/^[0-9A-Fa-f]+$/),p.indexOf("-----BEGIN ")!=-1&&(y=en(p)),y==null)throw new Error("certsubj/certissuer not cert");var w=new Xe;w.hex=y;var A;v?A=w.getIssuerHex():A=w.getSubjectHex(),h=new u,h.hTLV=A}else if(c.uri!==void 0)d="86",h=new a({str:c.uri});else if(c.ip!==void 0){d="87";var I,k=c.ip;try{if(k.match(/^[0-9a-f]+$/)){var x=k.length;if(x==8||x==16||x==32||x==64)I=k;else throw"err"}else I=um(k)}catch(m){throw new f("malformed IP address: "+c.ip+":"+m.message)}h=new o({hex:I})}else throw new f("improper params");var C=new l({tag:d,explicit:g,obj:h});return C.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.GeneralName,S.asn1.ASN1Object);S.asn1.x509.GeneralNames=function(e){S.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=S,n=t.asn1;this.setByParamArray=function(r){for(var i=0;i<r.length;i++){var s=new n.x509.GeneralName(r[i]);this.asn1Array.push(s)}},this.tohex=function(){var r=new n.DERSequence({array:this.asn1Array});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof e<"u"&&this.setByParamArray(e)};pe(S.asn1.x509.GeneralNames,S.asn1.ASN1Object);S.asn1.x509.OtherName=function(e){S.asn1.x509.OtherName.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DERObjectIdentifier,i=n.DERSequence,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(a.oid==null||a.value==null)throw new Error("oid or value not specified");var o=new r({oid:a.oid}),l=s({tag:{tag:"a0",explicit:!0,obj:a.value}}),u=new i({array:[o,l]});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.x509.OtherName,S.asn1.ASN1Object);S.asn1.x509.OID=new function(){var e=S.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(typeof this.objCache[t]<"u")return this.objCache[t];if(typeof this.name2oidList[t]>"u")throw"Name of ObjectIdentifier not defined: "+t;var n=this.name2oidList[t],r=new e({oid:n});return this.objCache[t]=r,r},this.atype2obj=function(t){if(this.objCache[t]!==void 0)return this.objCache[t];var n;if(t.match(/^\d+\.\d+\.[0-9.]+$/))n=t;else if(this.atype2oidList[t]!==void 0)n=this.atype2oidList[t];else if(this.name2oidList[t]!==void 0)n=this.name2oidList[t];else throw new Error("AttributeType name undefined: "+t);var r=new e({oid:n});return this.objCache[t]=r,r},this.registerOIDs=function(t){if(this.checkOIDs(t))for(var n in t)this.name2oidList[n]=t[n]},this.checkOIDs=function(t){try{var n=Object.keys(t);return n.length==0?!1:(n.map(function(r,i,s){var a=this[r];if(!a.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},t),!0)}catch{return!1}}};S.asn1.x509.OID.oid2name=function(e){var t=S.asn1.x509.OID.name2oidList;for(var n in t)if(t[n]==e)return n;return""};S.asn1.x509.OID.oid2atype=function(e){var t=S.asn1.x509.OID.atype2oidList;for(var n in t)if(t[n]==e)return n;return e};S.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=S.asn1.x509.OID.name2oidList;return t[e]===void 0?"":t[e]};S.asn1.x509.X509Util={};S.asn1.x509.X509Util.newCertPEM=function(e){var t=S.asn1.x509;t.TBSCertificate;var n=t.Certificate,r=new n(e);return r.getPEM()};(typeof S>"u"||!S)&&(S={});(typeof S.asn1>"u"||!S.asn1)&&(S.asn1={});(typeof S.asn1.cms>"u"||!S.asn1.cms)&&(S.asn1.cms={});S.asn1.cms.Attribute=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence,s=r.DERSet,a=r.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(o){this.params=o},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var o=new a({oid:this.typeOid}),l=new s({array:this.getValueArray()}),u=new i({array:[o,l]});return u.tohex()},this.getEncodedHex=function(){return this.tohex()}};pe(S.asn1.cms.Attribute,S.asn1.ASN1Object);S.asn1.cms.ContentType=function(e){var t=S,n=t.asn1;n.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var r=new n.DERObjectIdentifier(this.params.type);return[r]},e!=null&&this.setByParam(e)};pe(S.asn1.cms.ContentType,S.asn1.cms.Attribute);S.asn1.cms.MessageDigest=function(e){var t=S,n=t.asn1,r=n.DEROctetString,i=n.cms;i.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var s=new r(this.params);return[s]},e!=null&&this.setByParam(e)};pe(S.asn1.cms.MessageDigest,S.asn1.cms.Attribute);S.asn1.cms.SigningTime=function(e){var t=S,n=t.asn1;n.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var r=new n.x509.Time(this.params);return[r]},e!=null&&this.setByParam(e)};pe(S.asn1.cms.SigningTime,S.asn1.cms.Attribute);S.asn1.cms.SigningCertificate=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence,s=r.cms,a=s.ESSCertID;n.crypto,s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var o=this.params.array,l=[],u=0;u<o.length;u++){var f=o[u];e.hasis==!1&&typeof f=="string"&&(f.indexOf("-----BEGIN")!=-1||Te.isASN1HEX(f))&&(f={cert:f}),f.hasis!=!1&&e.hasis==!1&&(f.hasis=!1),l.push(new a(f))}var c=new i({array:l}),d=new i({array:[c]});return[d]},e!=null&&this.setByParam(e)};pe(S.asn1.cms.SigningCertificate,S.asn1.cms.Attribute);S.asn1.cms.ESSCertID=function(e){S.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,n=S,r=n.asn1,i=r.DEROctetString,s=r.DERSequence,a=r.cms.IssuerSerial;this.params=null,this.getCertHash=function(o,l){if(o.hash!=null)return o.hash;if(typeof o=="string"&&o.indexOf("-----BEGIN")==-1&&!Te.isASN1HEX(o))return o;var u;if(typeof o=="string")u=o;else if(o.cert!=null)u=o.cert;else throw new t("hash nor cert unspecified");var f;u.indexOf("-----BEGIN")!=-1?f=en(u):f=u,typeof o=="string"&&(o.indexOf("-----BEGIN")!=-1?f=en(o):Te.isASN1HEX(o)&&(f=o));var c;if(o.alg!=null)c=o.alg;else if(l!=null)c=l;else throw new t("hash alg unspecified");return n.crypto.Util.hashHex(f,c)},this.tohex=function(){var o=this.params,l=this.getCertHash(o,"sha1"),u=[];u.push(new i({hex:l})),(typeof o=="string"&&o.indexOf("-----BEGIN")!=-1||o.cert!=null&&o.hasis!=!1||o.issuer!=null&&o.serial!=null)&&u.push(new a(o));var f=new s({array:u});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.ESSCertID,S.asn1.ASN1Object);S.asn1.cms.SigningCertificateV2=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence;r.x509;var s=r.cms,a=s.ESSCertIDv2;n.crypto,s.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var o=this.params.array,l=[],u=0;u<o.length;u++){var f=o[u];(e.alg!=null||e.hasis==!1)&&typeof f=="string"&&(f.indexOf("-----BEGIN")!=-1||Te.isASN1HEX(f))&&(f={cert:f}),f.alg==null&&e.alg!=null&&(f.alg=e.alg),f.hasis!=!1&&e.hasis==!1&&(f.hasis=!1),l.push(new a(f))}var c=new i({array:l}),d=new i({array:[c]});return[d]},e!=null&&this.setByParam(e)};pe(S.asn1.cms.SigningCertificateV2,S.asn1.cms.Attribute);S.asn1.cms.ESSCertIDv2=function(e){S.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.DEROctetString,i=n.DERSequence,s=n.cms.IssuerSerial,a=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var o=this.params,l=this.getCertHash(o,"sha256"),u=[];o.alg!=null&&o.alg!="sha256"&&u.push(new a({name:o.alg})),u.push(new r({hex:l})),(typeof o=="string"&&o.indexOf("-----BEGIN")!=-1||o.cert!=null&&o.hasis!=!1||o.issuer!=null&&o.serial!=null)&&u.push(new s(o));var f=new i({array:u});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.ESSCertIDv2,S.asn1.cms.ESSCertID);S.asn1.cms.IssuerSerial=function(e){var t=Error,n=S,r=n.asn1,i=r.DERInteger,s=r.DERSequence,a=r.cms,o=r.x509,l=o.GeneralNames,u=Xe;a.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(f){this.params=f},this.tohex=function(){var f=this.params,c,d;if(typeof f=="string"&&f.indexOf("-----BEGIN")!=-1||f.cert!=null){var h;f.cert!=null?h=f.cert:h=f;var g=new u;g.readCertPEM(h),c=g.getIssuer(),d={hex:g.getSerialNumberHex()}}else if(f.issuer!=null&&f.serial)c=f.issuer,d=f.serial;else throw new t("cert or issuer and serial parameter not specified");var v=new l([{dn:c}]),p=new i(d),y=new s({array:[v,p]});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.IssuerSerial,S.asn1.ASN1Object);S.asn1.cms.SignerIdentifier=function(e){var t=S,n=t.asn1;n.DERInteger,n.DERSequence;var r=n.cms,i=r.IssuerAndSerialNumber,s=r.SubjectKeyIdentifier,a=n.x509;a.X500Name,r.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;if(o.type=="isssn"){var l=new i(o);return l.tohex()}else if(o.type=="skid"){var u=new s(o);return u.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.SignerIdentifier,S.asn1.ASN1Object);S.asn1.cms.IssuerAndSerialNumber=function(e){var t=S,n=t.asn1,r=n.DERInteger,i=n.DERSequence,s=n.cms,a=n.x509,o=a.X500Name,l=Xe,u=Error;s.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var f=this.params,c,d;if(typeof f=="string"&&f.indexOf("-----BEGIN")!=-1||f.cert!=null){var h;f.cert!=null?h=f.cert:h=f;var g=new l;g.readCertPEM(h),c=g.getIssuer(),d={hex:g.getSerialNumberHex()}}else if(f.issuer!=null&&f.serial)c=f.issuer,d=f.serial;else throw new u("cert or issuer and serial parameter not specified");var v=new o(c),p=new r(d),y=new i({array:[v,p]});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(f){this.params=f},e!=null&&this.setByParam(e)};pe(S.asn1.cms.IssuerAndSerialNumber,S.asn1.ASN1Object);S.asn1.cms.SubjectKeyIdentifier=function(e){var t=S,n=t.asn1;n.DERInteger,n.DERSequence;var r=n.ASN1Util.newObject,i=n.cms;i.IssuerAndSerialName,i.SubjectKeyIdentifier;var s=n.x509;s.X500Name;var a=Xe,o=Error;i.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var l=this.params;if(l.cert==null&&l.skid==null)throw new o("property cert nor skid undefined");var u;if(l.cert!=null){var f=new a(l.cert),c=f.getExtSubjectKeyIdentifier();u=c.kid.hex}else l.skid!=null&&(u=l.skid);var d=r({tag:{tage:"a0",obj:{octstr:{hex:u}}}});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.SubjectKeyIdentifier,S.asn1.ASN1Object);S.asn1.cms.AttributeList=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSet,s=r.cms;s.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(this.hTLV!=null)return this.hTLV;var o=!0;a.sortflag!=null&&(o=a.sortflag);for(var l=a.array,u=[],f=0;f<l.length;f++){var c=l[f],d=c.attr;if(d=="contentType")u.push(new s.ContentType(c));else if(d=="messageDigest")u.push(new s.MessageDigest(c));else if(d=="signingTime")u.push(new s.SigningTime(c));else if(d=="signingCertificate")u.push(new s.SigningCertificate(c));else if(d=="signingCertificateV2")u.push(new s.SigningCertificateV2(c));else if(d=="signaturePolicyIdentifier")u.push(new S.asn1.cades.SignaturePolicyIdentifier(c));else if(d=="signatureTimeStamp"||d=="timeStampToken")u.push(new S.asn1.cades.SignatureTimeStamp(c));else throw new t("unknown attr: "+d)}var h=new i({array:u,sortflag:o});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.AttributeList,S.asn1.ASN1Object);S.asn1.cms.SignerInfo=function(e){var t=Error,n=S,r=n.asn1,i=r.DERInteger,s=r.DEROctetString,a=r.DERSequence,o=r.DERTaggedObject,l=r.cms,u=l.SignerIdentifier,f=l.AttributeList;l.ContentType,l.EncapsulatedContentInfo,l.MessageDigest,l.SignedData;var c=r.x509,d=c.AlgorithmIdentifier,h=n.crypto,g=St;l.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var v=this.params,p=v.sigalg,y=new f(v.sattrs).tohex(),w=g.getKey(v.signkey),A=new h.Signature({alg:p});A.init(w),A.updateHex(y);var I=A.sign();v.sighex=I},this.tohex=function(){var v=this.params,p=[];if(p.push(new i({int:v.version})),p.push(new u(v.id)),p.push(new d({name:v.hashalg})),v.sattrs!=null){var y=new f(v.sattrs);try{p.push(new o({tag:"a0",explicit:!1,obj:y}))}catch(A){throw new t("si sattr error: "+A)}}if(v.sigalgfield!=null?p.push(new d({name:v.sigalgfield})):p.push(new d({name:v.sigalg})),v.sighex==null&&v.signkey!=null&&this.sign(),p.push(new s({hex:v.sighex})),v.uattrs!=null){var y=new f(v.uattrs);try{p.push(new o({tag:"a1",explicit:!1,obj:y}))}catch(I){throw new t("si uattr error: "+I)}}var w=new a({array:p});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.SignerInfo,S.asn1.ASN1Object);S.asn1.cms.EncapsulatedContentInfo=function(e){var t=S,n=t.asn1,r=n.DERTaggedObject,i=n.DERSequence,s=n.DERObjectIdentifier,a=n.DEROctetString,o=n.cms;o.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,u=[];if(u.push(new s(l.type)),l.content!=null&&(l.content.hex!=null||l.content.str!=null)&&l.isDetached!=!0){var f=new a(l.content),c=new r({tag:"a0",explicit:!0,obj:f});u.push(c)}var d=new i({array:u});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},e!=null&&this.setByParam(e)};pe(S.asn1.cms.EncapsulatedContentInfo,S.asn1.ASN1Object);S.asn1.cms.ContentInfo=function(e){var t=S,n=t.asn1,r=n.DERTaggedObject,i=n.DERSequence,s=n.DERObjectIdentifier,a=n.x509;a.OID.name2obj,S.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=[];l.push(new s(o.type));var u=new r({tag:"a0",explicit:!0,obj:o.obj});l.push(u);var f=new i({array:l});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(o){this.params=o},e!=null&&this.setByParam(e)};pe(S.asn1.cms.ContentInfo,S.asn1.ASN1Object);S.asn1.cms.SignedData=function(e){var t=S,n=t.asn1;n.ASN1Object;var r=n.DERInteger,i=n.DERSet,s=n.DERSequence;n.DERTaggedObject;var a=n.cms,o=a.EncapsulatedContentInfo,l=a.SignerInfo,u=a.ContentInfo,f=a.CertificateSet,c=a.RevocationInfoChoices,d=n.x509,h=d.AlgorithmIdentifier;S.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var g=this.params;this._setDigestAlgs(g),this._setContentTypeByEContent(g),this._setMessageDigestByEContent(g),this._setSignerInfoVersion(g),this._setSignedDataVersion(g)},this._setDigestAlgs=function(g){for(var v={},p=g.sinfos,y=0;y<p.length;y++){var w=p[y];v[w.hashalg]=1}g.hashalgs=Object.keys(v).sort()},this._setContentTypeByEContent=function(g){for(var v=g.econtent.type,p=g.sinfos,y=0;y<p.length;y++){var w=p[y],A=this._getAttrParamByName(w,"contentType");A.type=v}},this._setMessageDigestByEContent=function(g){var v=g.econtent;g.econtent.type;var p=v.content.hex;p==null&&v.type=="data"&&v.content.str!=null&&(p=Rr(v.content.str));for(var y=g.sinfos,w=0;w<y.length;w++){var A=y[w],I=A.hashalg,k=this._getAttrParamByName(A,"messageDigest"),x=S.crypto.Util.hashHex(p,I);k.hex=x}},this._getAttrParamByName=function(g,v){for(var p=g.sattrs.array,y=0;y<p.length;y++)if(p[y].attr==v)return p[y]},this._setSignerInfoVersion=function(g){for(var v=g.sinfos,p=0;p<v.length;p++){var y=v[p],w=1;y.id.type=="skid"&&(w=3),y.version=w}},this._setSignedDataVersion=function(g){var v=this._getSignedDataVersion(g);g.version=v},this._getSignedDataVersion=function(g){if(g.revinfos!=null)for(var v=g.revinfos,p=0;p<v.length;p++){var y=v[p];if(y.ocsp!=null)return 5}for(var w=g.sinfos,p=0;p<w.length;p++){var A=g.sinfos[p];if(A.version==3)return 3}return g.econtent.type!="data"?3:1},this.tohex=function(){var g=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),g.fixed!=!0&&this.checkAndFixParam();var v=[];v.push(new r({int:g.version}));for(var p=[],y=0;y<g.hashalgs.length;y++){var w=g.hashalgs[y];p.push(new h({name:w}))}v.push(new i({array:p})),v.push(new o(g.econtent)),g.certs!=null&&v.push(new f(g.certs)),g.revinfos!=null&&v.push(new c(g.revinfos));for(var A=[],y=0;y<g.sinfos.length;y++){var I=g.sinfos[y];A.push(new l(I))}v.push(new i({array:A}));var k=new s({array:v});return k.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var g=new u({type:"signed-data",obj:this});return g},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.SignedData,S.asn1.ASN1Object);S.asn1.cms.CertificateSet=function(e){S.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,n=S.asn1,r=n.DERTaggedObject,i=n.DERSet,s=n.ASN1Object;this.params=null,this.tohex=function(){var a=this.params,o=[],l;if(a instanceof Array)l=a;else if(a.array!=null)l=a.array;else throw new t("cert array not specified");for(var u=0;u<l.length;u++){var f=l[u],c=en(f),d=new s;d.hTLV=c,o.push(d)}var h={array:o};a.sortflag==!1&&(h.sortflag=!1);var g=new i(h),v=new r({tag:"a0",explicit:!1,obj:g});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.CertificateSet,S.asn1.ASN1Object);S.asn1.cms.RevocationInfoChoices=function(e){S.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new Error("params is not array");for(var n=[],r=0;r<t.length;r++)n.push(new S.asn1.cms.RevocationInfoChoice(t[r]));var i=S.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:n}}});return i.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.RevocationInfoChoices,S.asn1.ASN1Object);S.asn1.cms.RevocationInfoChoice=function(e){S.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.crl!=null&&typeof t.crl=="string"){var n=t.crl;return t.crl.indexOf("-----BEGIN")!=-1&&(n=en(t.crl)),n}else if(t.ocsp!=null){var r=S.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new S.asn1.cms.OtherRevocationFormat(t)}});return r.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.RevocationInfoChoice,S.asn1.ASN1Object);S.asn1.cms.OtherRevocationFormat=function(e){S.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,n=S,r=n.asn1,i=r.ASN1Util.newObject,s=n.lang.String.isHex;this.params=null,this.tohex=function(){var a=this.params;if(a.ocsp==null)throw new t("property ocsp not specified");if(!s(a.ocsp)||!Te.isASN1HEX(a.ocsp))throw new t("ocsp value not ASN.1 hex string");var o=i({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:a.ocsp}}]});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cms.OtherRevocationFormat,S.asn1.ASN1Object);S.asn1.cms.CMSUtil=new function(){};S.asn1.cms.CMSUtil.newSignedData=function(e){return new S.asn1.cms.SignedData(e)};S.asn1.cms.CMSUtil.verifySignedData=function(e){var t=S,n=t.asn1,r=n.cms;r.SignerInfo,r.SignedData,r.SigningTime,r.SigningCertificate,r.SigningCertificateV2;var i=n.cades;i.SignaturePolicyIdentifier;var s=t.lang.String.isHex,a=Te,o=a.getVbyList,l=a.getTLVbyList,u=a.getIdxbyList,f=a.getChildIdx,c=a.getTLV,d=a.oidname,h=t.crypto.Util.hashHex;e.cms===void 0&&s(e.cms);var g=e.cms,v=function(m,_){for(var T,E=3;E<6;E++)if(T=u(m,0,[1,0,E]),T!==void 0){var R=m.substr(T,2);R==="a0"&&(_.certsIdx=T),R==="a1"&&(_.revinfosIdx=T),R==="31"&&(_.signerinfosIdx=T)}},p=function(m,_){var T=_.signerinfosIdx;if(T!==void 0){var E=f(m,T);_.signerInfoIdxList=E;for(var R=0;R<E.length;R++){var D=E[R],$={idx:D};y(m,$),_.signerInfos.push($)}}},y=function(m,_){var T=_.idx;_.signerid_issuer1=l(m,T,[1,0],"30"),_.signerid_serial1=o(m,T,[1,1],"02"),_.hashalg=d(o(m,T,[2,0],"06"));var E=u(m,T,[3],"a0");_.idxSignedAttrs=E,w(m,_,E);var R=f(m,T),D=R.length;if(D<6)throw"malformed SignerInfo";_.sigalg=d(o(m,T,[D-2,0],"06")),_.sigval=o(m,T,[D-1],"04")},w=function(m,_,T){var E=f(m,T);_.signedAttrIdxList=E;for(var R=0;R<E.length;R++){var D=E[R],$=o(m,D,[0],"06"),M;$==="2a864886f70d010905"?(M=Et(o(m,D,[1,0])),_.saSigningTime=M):$==="2a864886f70d010904"&&(M=o(m,D,[1,0],"04"),_.saMessageDigest=M)}},A=function(m,_){if(o(m,0,[0],"06")!=="2a864886f70d010702")return _;_.cmsType="signedData",_.econtent=o(m,0,[1,0,2,1,0]),v(m,_),_.signerInfos=[],p(m,_)},I=function(m,_){for(var T=_.parse.signerInfos,E=T.length,R=!0,D=0;D<E;D++){var $=T[D];x(m,_,$),$.isValid||(R=!1)}_.isValid=R},k=function(m,_,T,E){var R=_.parse.certsIdx,D;if(_.certs===void 0){D=[],_.certkeys=[];for(var $=f(m,R),M=0;M<$.length;M++){var O=c(m,$[M]),L=new Xe;L.readCertHex(O),D[M]=L,_.certkeys[M]=L.getPublicKey()}_.certs=D}else D=_.certs;_.cccc=D.length,_.cccci=$.length;for(var M=0;M<D.length;M++){var W=L.getIssuerHex(),te=L.getSerialNumberHex();T.signerid_issuer1===W&&T.signerid_serial1===te&&(T.certkey_idx=M)}},x=function(m,_,T,E){T.verifyDetail={};var R=T.verifyDetail,D=_.parse.econtent,$=T.hashalg,M=T.saMessageDigest;R.validMessageDigest=!1,h(D,$)===M&&(R.validMessageDigest=!0),k(m,_,T),R.validSignatureValue=!1;var O=T.sigalg,L="31"+c(m,T.idxSignedAttrs).substr(2);T.signedattrshex=L;var W=_.certs[T.certkey_idx].getPublicKey(),te=new S.crypto.Signature({alg:O});te.init(W),te.updateHex(L);var ie=te.verify(T.sigval);R.validSignatureValue_isValid=ie,ie===!0&&(R.validSignatureValue=!0),T.isValid=!1,R.validMessageDigest&&R.validSignatureValue&&(T.isValid=!0)},C={isValid:!1,parse:{}};return A(g,C.parse),I(g,C),C};S.asn1.cms.CMSParser=function(){var e=Error,t=Xe,n=new t,r=Te,i=r.getV,s=r.getTLV;r.getIdxbyList;var a=r.getTLVbyList,o=r.getTLVbyListEx,l=r.getVbyList,u=r.getVbyListEx,f=r.getChildIdx;this.getCMSSignedData=function(c){var d=a(c,0,[1,0]),h=this.getSignedData(d);return h},this.getSignedData=function(c){var d=f(c,0),h={},g=i(c,d[0]),v=parseInt(g,16);h.version=v;var p=s(c,d[1]);h.hashalgs=this.getHashAlgArray(p);var y=s(c,d[2]);h.econtent=this.getEContent(y);var w=o(c,0,["[0]"]);w!=null&&(h.certs=this.getCertificateSet(w)),o(c,0,["[1]"]);var A=o(c,0,[3]);return h.sinfos=this.getSignerInfos(A),h},this.getHashAlgArray=function(c){for(var d=f(c,0),h=new t,g=[],v=0;v<d.length;v++){var p=s(c,d[v]),y=h.getAlgorithmIdentifierName(p);g.push(y)}return g},this.getEContent=function(c){var d={},h=l(c,0,[0]),g=l(c,0,[1,0]);return d.type=S.asn1.x509.OID.oid2name(Te.hextooidstr(h)),d.content={hex:g},d},this.getSignerInfos=function(c){for(var d=[],h=f(c,0),g=0;g<h.length;g++){var v=s(c,h[g]),p=this.getSignerInfo(v);d.push(p)}return d},this.getSignerInfo=function(c){var d={},h=f(c,0),g=r.getInt(c,h[0],-1);g!=-1&&(d.version=g);var v=s(c,h[1]),p=this.getIssuerAndSerialNumber(v);d.id=p;var y=s(c,h[2]),w=n.getAlgorithmIdentifierName(y);d.hashalg=w;var A=o(c,0,["[0]"]);if(A!=null){var I=this.getAttributeList(A);d.sattrs=I}var k=o(c,0,[3]),x=n.getAlgorithmIdentifierName(k);d.sigalg=x;var C=u(c,0,[4]);d.sighex=C;var m=o(c,0,["[1]"]);if(m!=null){var _=this.getAttributeList(m);d.uattrs=_}return d},this.getSignerIdentifier=function(c){if(c.substr(0,2)=="30")return this.getIssuerAndSerialNumber(c);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(c){var d={type:"isssn"},h=f(c,0),g=s(c,h[0]);d.issuer=n.getX500Name(g);var v=i(c,h[1]);return d.serial={hex:v},d},this.getAttributeList=function(c){for(var d=[],h=f(c,0),g=0;g<h.length;g++){var v=s(c,h[g]),p=this.getAttribute(v);d.push(p)}return{array:d}},this.getAttribute=function(c){var d={},h=f(c,0),g=r.getOID(c,h[0]),v=S.asn1.x509.OID.oid2name(g);d.attr=v;var p=s(c,h[1]),y=f(p,0);if(y.length==1)d.valhex=s(p,y[0]);else{for(var w=[],A=0;A<y.length;A++)w.push(s(p,y[A]));d.valhex=w}return v=="contentType"?this.setContentType(d):v=="messageDigest"?this.setMessageDigest(d):v=="signingTime"?this.setSigningTime(d):v=="signingCertificate"?this.setSigningCertificate(d):v=="signingCertificateV2"?this.setSigningCertificateV2(d):v=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(d),d},this.setContentType=function(c){var d=r.getOIDName(c.valhex,0,null);d!=null&&(c.type=d,delete c.valhex)},this.setSigningTime=function(c){var d=i(c.valhex,0),h=Et(d);c.str=h,delete c.valhex},this.setMessageDigest=function(c){var d=i(c.valhex,0);c.hex=d,delete c.valhex},this.setSigningCertificate=function(c){var d=f(c.valhex,0);if(d.length>0){for(var h=s(c.valhex,d[0]),g=f(h,0),v=[],p=0;p<g.length;p++){var y=s(h,g[p]),w=this.getESSCertID(y);v.push(w)}c.array=v}if(d.length>1){var A=s(c.valhex,d[1]);c.polhex=A}delete c.valhex},this.setSignaturePolicyIdentifier=function(c){var d=f(c.valhex,0);if(d.length>0){var h=r.getOID(c.valhex,d[0]);c.oid=h}if(d.length>1){var g=new t,v=f(c.valhex,d[1]),p=s(c.valhex,v[0]),y=g.getAlgorithmIdentifierName(p);c.alg=y;var w=i(c.valhex,v[1]);c.hash=w}delete c.valhex},this.setSigningCertificateV2=function(c){var d=f(c.valhex,0);if(d.length>0){for(var h=s(c.valhex,d[0]),g=f(h,0),v=[],p=0;p<g.length;p++){var y=s(h,g[p]),w=this.getESSCertIDv2(y);v.push(w)}c.array=v}if(d.length>1){var A=s(c.valhex,d[1]);c.polhex=A}delete c.valhex},this.getESSCertID=function(c){var d={},h=f(c,0);if(h.length>0){var g=i(c,h[0]);d.hash=g}if(h.length>1){var v=s(c,h[1]),p=this.getIssuerSerial(v);p.serial!=null&&(d.serial=p.serial),p.issuer!=null&&(d.issuer=p.issuer)}return d},this.getESSCertIDv2=function(c){var d={},h=f(c,0);if(h.length<1||3<h.length)throw new e("wrong number of elements");var g=0;if(c.substr(h[0],2)=="30"){var v=s(c,h[0]);d.alg=n.getAlgorithmIdentifierName(v),g++}else d.alg="sha256";var p=i(c,h[g]);if(d.hash=p,h.length>g+1){var y=s(c,h[g+1]),w=this.getIssuerSerial(y);d.issuer=w.issuer,d.serial=w.serial}return d},this.getIssuerSerial=function(c){var d={},h=f(c,0),g=s(c,h[0]),v=n.getGeneralNames(g),p=v[0].dn;d.issuer=p;var y=i(c,h[1]);return d.serial={hex:y},d},this.getCertificateSet=function(c){for(var d=f(c,0),h=[],g=0;g<d.length;g++){var v=s(c,d[g]);if(v.substr(0,2)=="30"){var p=mn(v,"CERTIFICATE");h.push(p)}}return{array:h,sortflag:!1}}};(typeof S>"u"||!S)&&(S={});(typeof S.asn1>"u"||!S.asn1)&&(S.asn1={});(typeof S.asn1.tsp>"u"||!S.asn1.tsp)&&(S.asn1.tsp={});S.asn1.tsp.TimeStampToken=function(e){var t=S,n=t.asn1,r=n.tsp;r.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var i=new r.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=i.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.TimeStampToken,S.asn1.cms.SignedData);S.asn1.tsp.TSTInfo=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.DERInteger,s=n.DERBoolean,a=n.DERGeneralizedTime,o=n.DERObjectIdentifier,l=n.DERTaggedObject,u=n.tsp,f=u.MessageImprint,c=u.Accuracy;n.x509.X500Name;var d=n.x509.GeneralName;if(u.TSTInfo.superclass.constructor.call(this),this.dVersion=new i({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var h=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(h.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(h.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(h.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");h.push(this.dGenTime),this.dAccuracy!=null&&h.push(this.dAccuracy),this.dOrdering!=null&&h.push(this.dOrdering),this.dNonce!=null&&h.push(this.dNonce),this.dTsa!=null&&h.push(this.dTsa);var g=new r({array:h});return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0){if(typeof e.policy=="string"){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:e.policy})}e.messageImprint!==void 0&&(this.dMessageImprint=new f(e.messageImprint)),e.serial!==void 0&&(this.dSerial=new i(e.serial)),e.genTime!==void 0&&(this.dGenTime=new a(e.genTime)),e.accuracy!==void 0&&(this.dAccuracy=new c(e.accuracy)),e.ordering!==void 0&&e.ordering==!0&&(this.dOrdering=new s),e.nonce!==void 0&&(this.dNonce=new i(e.nonce)),e.tsa!==void 0&&(this.dTsa=new l({tag:"a0",explicit:!0,obj:new d({dn:e.tsa})}))}};pe(S.asn1.tsp.TSTInfo,S.asn1.ASN1Object);S.asn1.tsp.Accuracy=function(e){var t=S,n=t.asn1,r=n.ASN1Util.newObject;n.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var i=this.params,s=[];return i.seconds!=null&&typeof i.seconds=="number"&&s.push({int:i.seconds}),i.millis!=null&&typeof i.millis=="number"&&s.push({tag:{tagi:"80",obj:{int:i.millis}}}),i.micros!=null&&typeof i.micros=="number"&&s.push({tag:{tagi:"81",obj:{int:i.micros}}}),r({seq:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.Accuracy,S.asn1.ASN1Object);S.asn1.tsp.MessageImprint=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.DEROctetString,s=n.x509,a=s.AlgorithmIdentifier;n.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=new a({name:o.alg}),u=new i({hex:o.hash}),f=new r({array:[l,u]});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.tsp.MessageImprint,S.asn1.ASN1Object);S.asn1.tsp.TimeStampReq=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.DERInteger,s=n.DERBoolean;n.ASN1Object;var a=n.DERObjectIdentifier,o=n.tsp,l=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,f=[];f.push(new i({int:1})),u.messageImprint instanceof S.asn1.ASN1Object?f.push(u.messageImprint):f.push(new l(u.messageImprint)),u.policy!=null&&f.push(new a(u.policy)),u.nonce!=null&&f.push(new i(u.nonce)),u.certreq==!0&&f.push(new s);var c=new r({array:f});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.TimeStampReq,S.asn1.ASN1Object);S.asn1.tsp.TimeStampResp=function(e){var t=S,n=t.asn1,r=n.DERSequence;n.ASN1Object;var i=n.tsp,s=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var a=this.params,o=[];if(a.econtent!=null||a.tst!=null)if(a.statusinfo!=null?o.push(new s(a.statusinfo)):o.push(new s("granted")),a.econtent!=null)o.push(new i.TimeStampToken(a).getContentInfo());else if(a.tst instanceof n.ASN1Object)o.push(a.tst);else throw new Error("improper member tst value");else if(a.statusinfo!=null)o.push(new s(a.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var l=new r({array:o});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.TimeStampResp,S.asn1.ASN1Object);S.asn1.tsp.PKIStatusInfo=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence,s=r.tsp,a=s.PKIStatus,o=s.PKIFreeText,l=s.PKIFailureInfo;s.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,f=[];if(typeof u=="string")f.push(new a(u));else{if(u.status==null)throw new t("property 'status' unspecified");f.push(new a(u.status)),u.statusstr!=null&&f.push(new o(u.statusstr)),u.failinfo!=null&&f.push(new l(u.failinfo))}var c=new i({array:f});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.PKIStatusInfo,S.asn1.ASN1Object);S.asn1.tsp.PKIStatus=function(e){var t=Error,n=S,r=n.asn1,i=r.DERInteger,s=r.tsp;s.PKIStatus.superclass.constructor.call(this);var a={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var o=this.params,l;if(typeof o=="string")try{l=a[o]}catch{throw new t("undefined name: "+o)}else if(typeof o=="number")l=o;else throw new t("unsupported params");return new i({int:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.PKIStatus,S.asn1.ASN1Object);S.asn1.tsp.PKIFreeText=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence,s=r.DERUTF8String,a=r.tsp;a.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;if(!o instanceof Array)throw new t("wrong params: not array");for(var l=[],u=0;u<o.length;u++)l.push(new s({str:o[u]}));var f=new i({array:l});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.PKIFreeText,S.asn1.ASN1Object);S.asn1.tsp.PKIFailureInfo=function(e){var t=Error,n=S,r=n.asn1,i=r.DERBitString,s=r.tsp,a=s.PKIFailureInfo,o={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};a.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var l=this.params,u=0;if(typeof l=="number"&&0<=l&&l<=25){u|=1<<l;for(var f=u.toString(2),c="",d=f.length-1;d>=0;d--)c+=f[d];return c}else{if(typeof l=="string"&&o[l]!=null)return Sc([l],o);if(typeof l=="object"&&l.length!=null)return Sc(l,o);throw new t("wrong params")}},this.tohex=function(){this.params;var l=this.getBinValue();return new i({bin:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.tsp.PKIFailureInfo,S.asn1.ASN1Object);S.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(t,n){throw"not implemented yet"}};S.asn1.tsp.SimpleTSAAdapter=function(e){var t=S,n=t.asn1,r=n.tsp,i=t.crypto.Util.hashHex;r.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(s,a){var o=i(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o},this.params.econtent.content.serial={int:this.serial++};var l=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:l};var u=new r.TimeStampToken(this.params);return u.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};pe(S.asn1.tsp.SimpleTSAAdapter,S.asn1.tsp.AbstractTSAAdapter);S.asn1.tsp.FixedTSAAdapter=function(e){var t=S,n=t.asn1,r=n.tsp,i=t.crypto.Util.hashHex;r.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(s,a){var o=i(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o};var l=new r.TimeStampToken(this.params);return l.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};pe(S.asn1.tsp.FixedTSAAdapter,S.asn1.tsp.AbstractTSAAdapter);S.asn1.tsp.TSPUtil=new function(){};S.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new S.asn1.tsp.TimeStampToken(e)};S.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=new S.asn1.tsp.TSPParser;return t.getTimeStampReq(e)};S.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=new S.asn1.tsp.TSPParser;return t.getMessageImprint(e)};S.asn1.tsp.TSPParser=function(){var e=Xe,t=new e,n=Te,r=n.getV,i=n.getTLV,s=n.getIdxbyList;n.getTLVbyListEx;var a=n.getChildIdx,o=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],l={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(u){var f=a(u,0);if(f.length==1)return this.getPKIStatusInfo(i(u,f[0]));if(f.length>1){var c=this.getPKIStatusInfo(i(u,f[0])),d=i(u,f[1]),h=this.getToken(d);return h.statusinfo=c,h}},this.getToken=function(u){var f=new S.asn1.cms.CMSParser,c=f.getCMSSignedData(u);return this.setTSTInfo(c),c},this.setTSTInfo=function(u){var f=u.econtent;if(f.type=="tstinfo"){var c=f.content.hex,d=this.getTSTInfo(c);f.content=d}},this.getTSTInfo=function(u){var f={},c=a(u,0),d=r(u,c[1]);f.policy=kd(d);var h=i(u,c[2]);f.messageImprint=this.getMessageImprint(h);var g=r(u,c[3]);f.serial={hex:g};var v=r(u,c[4]);f.genTime={str:Et(v)};var p=0;if(c.length>5&&u.substr(c[5],2)=="30"){var y=i(u,c[5]);f.accuracy=this.getAccuracy(y),p++}if(c.length>5+p&&u.substr(c[5+p],2)=="01"){var w=r(u,c[5+p]);w=="ff"&&(f.ordering=!0),p++}if(c.length>5+p&&u.substr(c[5+p],2)=="02"){var A=r(u,c[5+p]);f.nonce={hex:A},p++}if(c.length>5+p&&u.substr(c[5+p],2)=="a0"){var I=i(u,c[5+p]);I="30"+I.substr(2),pGeneralNames=t.getGeneralNames(I);var k=pGeneralNames[0].dn;f.tsa=k,p++}if(c.length>5+p&&u.substr(c[5+p],2)=="a1"){var x=i(u,c[5+p]);x="30"+x.substr(2);var C=t.getExtParamArray(x);f.ext=C,p++}return f},this.getAccuracy=function(u){for(var f={},c=a(u,0),d=0;d<c.length;d++){var h=u.substr(c[d],2),g=r(u,c[d]),v=parseInt(g,16);h=="02"?f.seconds=v:h=="80"?f.millis=v:h=="81"&&(f.micros=v)}return f},this.getMessageImprint=function(u){if(u.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var f={};a(u,0);var c=s(u,0,[0,0]),d=r(u,c),h=n.hextooidstr(d),g=S.asn1.x509.OID.oid2name(h);if(g=="")throw new Error("hashAlg name undefined: "+h);var v=g,p=s(u,0,[1]);return f.alg=v,f.hash=r(u,p),f},this.getPKIStatusInfo=function(u){var f={},c=a(u,0),d=0;try{var h=r(u,c[0]),g=parseInt(h,16);f.status=o[g]}catch{}if(c.length>1&&u.substr(c[1],2)=="30"){var v=i(u,c[1]);f.statusstr=this.getPKIFreeText(v),d++}if(c.length>d&&u.substr(c[1+d],2)=="03"){var p=i(u,c[1+d]);f.failinfo=this.getPKIFailureInfo(p)}return f},this.getPKIFreeText=function(u){for(var f=[],c=a(u,0),d=0;d<c.length;d++)f.push(n.getString(u,c[d]));return f},this.getPKIFailureInfo=function(u){var f=n.getInt(u,0);return l[f]!=null?l[f]:f},this.getTimeStampReq=function(u){var f={};f.certreq=!1;var c=a(u,0);if(c.length<2)throw new Error("TimeStampReq must have at least 2 items");var d=i(u,c[1]);f.messageImprint=S.asn1.tsp.TSPUtil.parseMessageImprint(d);for(var h=2;h<c.length;h++){var g=c[h],v=u.substr(g,2);if(v=="06"){var p=r(u,g);f.policy=n.hextooidstr(p)}v=="02"&&(f.nonce=r(u,g)),v=="01"&&(f.certreq=!0)}return f}};(typeof S>"u"||!S)&&(S={});(typeof S.asn1>"u"||!S.asn1)&&(S.asn1={});(typeof S.asn1.cades>"u"||!S.asn1.cades)&&(S.asn1.cades={});S.asn1.cades.SignaturePolicyIdentifier=function(e){var t=S,n=t.asn1,r=n.cades,i=r.SignaturePolicyId;r.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new i(this.params)]},this.setByParam=function(s){this.params=s},e!=null&&this.setByParam(e)};pe(S.asn1.cades.SignaturePolicyIdentifier,S.asn1.cms.Attribute);S.asn1.cades.SignaturePolicyId=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.DERObjectIdentifier,s=n.x509;s.AlgorithmIdentifier;var a=n.cades,o=a.SignaturePolicyId,l=a.OtherHashAlgAndValue;o.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,f=[];f.push(new i(u.oid)),f.push(new l(u));var c=new r({array:f});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},e!=null&&this.setByParam(e)};pe(S.asn1.cades.SignaturePolicyId,S.asn1.ASN1Object);S.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence,s=r.DEROctetString,a=r.x509,o=a.AlgorithmIdentifier,l=r.cades,u=l.OtherHashAlgAndValue;u.superclass.constructor.call(this),this.params=null,this.tohex=function(){var f=this.params;if(f.alg==null)throw new t("property 'alg' not specified");if(f.hash==null&&f.cert==null)throw new t("property 'hash' nor 'cert' not specified");var c=null;if(f.hash!=null)c=f.hash;else if(f.cert!=null){if(typeof f.cert!="string")throw new t("cert not string");var d=f.cert;f.cert.indexOf("-----BEGIN")!=-1&&(d=en(f.cert)),c=S.crypto.Util.hashHex(d,f.alg)}var h=[];h.push(new o({name:f.alg})),h.push(new s({hex:c}));var g=new i({array:h});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cades.OtherHashAlgAndValue,S.asn1.ASN1Object);S.asn1.cades.OtherHashValue=function(e){S.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,n=S;n.lang.String.isHex;var r=n.asn1,i=r.DEROctetString;n.crypto.Util.hashHex,this.params=null,this.tohex=function(){var s=this.params;if(s.hash==null&&s.cert==null)throw new t("hash or cert not specified");var a=null;if(s.hash!=null)a=s.hash;else if(s.cert!=null){if(typeof s.cert!="string")throw new t("cert not string");var o=s.cert;s.cert.indexOf("-----BEGIN")!=-1&&(o=en(s.cert)),a=S.crypto.Util.hashHex(o,"sha1")}return new i({hex:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cades.OtherHashValue,S.asn1.ASN1Object);S.asn1.cades.SignatureTimeStamp=function(e){var t=Error,n=S,r=n.lang.String.isHex,i=n.asn1,s=i.ASN1Object;i.x509;var a=i.cades;a.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var o=this.params;if(o.tst!=null)if(r(o.tst)){var l=new s;return l.hTLV=o.tst,[l]}else{if(o.tst instanceof s)return[o.tst];throw new t("params.tst has wrong value")}else if(o.res!=null){var u=o.res;if(u instanceof s&&(u=u.tohex()),typeof u!="string"||!r(u))throw new t("params.res has wrong value");Te.getTLVbyList(u,0,[1]);var l=new s;return l.hTLV=o.tst,[l]}},e!=null&&this.setByParam(e)};pe(S.asn1.cades.SignatureTimeStamp,S.asn1.cms.Attribute);S.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence,s=r.cades,a=s.OtherCertID,o=n.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var l=this.params,u=[],f=0;f<l.array.length;f++){var c=l.array[f];if(typeof c=="string")if(c.indexOf("-----BEGIN")!=-1)c={cert:c};else if(o(c))c={hash:c};else throw new t("unsupported value: "+c);l.alg!=null&&c.alg==null&&(c.alg=l.alg),l.hasis!=null&&c.hasis==null&&(c.hasis=l.hasis);var d=new a(c);u.push(d)}var h=new i({array:u});return[h]},e!=null&&this.setByParam(e)};pe(S.asn1.cades.CompleteCertificateRefs,S.asn1.cms.Attribute);S.asn1.cades.OtherCertID=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.cms,s=i.IssuerSerial,a=n.cades,o=a.OtherHashValue,l=a.OtherHashAlgAndValue;a.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var u=this.params;typeof u=="string"&&(u.indexOf("-----BEGIN")!=-1?u={cert:u}:_isHex(u)&&(u={hash:u}));var f=[],c=null;if(u.alg!=null?c=new l(u):c=new o(u),f.push(c),u.cert!=null&&u.hasis==!0||u.issuer!=null&&u.serial!=null){var d=new s(u);f.push(d)}var h=new r({array:f});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cades.OtherCertID,S.asn1.ASN1Object);S.asn1.cades.OtherHash=function(e){var t=S,n=t.asn1;n.cms;var r=n.cades,i=r.OtherHashAlgAndValue,s=r.OtherHashValue;t.crypto.Util.hashHex;var a=t.lang.String.isHex;r.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;typeof o=="string"&&(o.indexOf("-----BEGIN")!=-1?o={cert:o}:a(o)&&(o={hash:o}));var l=null;return o.alg!=null?l=new i(o):l=new s(o),l.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(S.asn1.cades.OtherHash,S.asn1.ASN1Object);S.asn1.cades.CAdESUtil=new function(){};S.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=new S.asn1.cms.CMSParser,n=t.getCMSSignedData(e);return n};S.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,n){var r=Te,i=r.getChildIdx,s=r.getTLV,a=r.getV,o=S,l=o.asn1,u=l.ASN1Object,f=l.cms,c=f.AttributeList,d=f.SignerInfo,h={},g=i(e,t);if(g.length!=6)throw"not supported items for SignerInfo (!=6)";var v=g.shift();h.version=s(e,v);var p=g.shift();h.si=s(e,p);var y=g.shift();h.digalg=s(e,y);var w=g.shift();h.sattrs=s(e,w);var A=g.shift();h.sigalg=s(e,A);var I=g.shift();h.sig=s(e,I),h.sigval=a(e,I);var k=null;return h.obj=new d,k=new u,k.hTLV=h.version,h.obj.dCMSVersion=k,k=new u,k.hTLV=h.si,h.obj.dSignerIdentifier=k,k=new u,k.hTLV=h.digalg,h.obj.dDigestAlgorithm=k,k=new u,k.hTLV=h.sattrs,h.obj.dSignedAttrs=k,k=new u,k.hTLV=h.sigalg,h.obj.dSigAlg=k,k=new u,k.hTLV=h.sig,h.obj.dSig=k,h.obj.dUnsignedAttrs=new c,h};(typeof S.asn1.csr>"u"||!S.asn1.csr)&&(S.asn1.csr={});S.asn1.csr.CertificationRequest=function(e){var t=S,n=t.asn1,r=n.DERBitString,i=n.DERSequence,s=n.csr;n.x509;var a=s.CertificationRequestInfo;s.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(o){this.params=o},this.sign=function(){var o=new a(this.params).tohex(),l=new S.crypto.Signature({alg:this.params.sigalg});l.init(this.params.sbjprvkey),l.updateHex(o);var u=l.sign();this.params.sighex=u},this.getPEM=function(){return mn(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var o=this.params,l=new S.asn1.csr.CertificationRequestInfo(this.params),u=new S.asn1.x509.AlgorithmIdentifier({name:o.sigalg});if(o.sighex==null&&o.sbjprvkey!=null&&this.sign(),o.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var f=new r({hex:"00"+o.sighex}),c=new i({array:[l,u,f]});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.csr.CertificationRequest,S.asn1.ASN1Object);S.asn1.csr.CertificationRequestInfo=function(e){var t=S,n=t.asn1;n.DERBitString;var r=n.DERSequence,i=n.DERInteger,s=n.DERUTF8String,a=n.DERTaggedObject,o=n.ASN1Util.newObject,l=n.csr,u=n.x509,f=u.X500Name,c=u.Extensions,d=u.SubjectPublicKeyInfo;l.AttributeList,l.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(g){g!=null&&(this.params=g)},this.tohex=function(){var g=this.params,v=[];if(v.push(new i({int:0})),v.push(new f(g.subject)),v.push(new d(St.getKey(g.sbjpubkey))),g.attrs!=null){var p=h(g.attrs),y=o({tag:{tage:"a0",obj:p}});v.push(y)}else if(g.extreq!=null){var w=new c(g.extreq),y=o({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[w]}]}}});v.push(y)}else v.push(new a({tag:"a0",explicit:!1,obj:new s({str:""})}));var A=new r({array:v});return A.tohex()},this.getEncodedHex=function(){return this.tohex()};function h(g){for(var v=Error,p=S.asn1.x509.Extensions,y=[],w=0;w<g.length;w++){var A=g[w],I=A.attr;if(I=="extensionRequest"){var k=new p(A.ext),x={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[k]}]};y.push(x)}else if(I=="unstructuredName"){var x={seq:[{oid:"1.2.840.113549.1.9.2"},{set:A.names}]};y.push(x)}else if(I=="challengePassword"){var x={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:A.password}]}]};y.push(x)}else throw new v("unknown CSR attribute")}return{set:y}}e!=null&&this.setByParam(e)};pe(S.asn1.csr.CertificationRequestInfo,S.asn1.ASN1Object);S.asn1.csr.AttributeList=function(e){};pe(S.asn1.csr.AttributeList,S.asn1.ASN1Object);S.asn1.csr.CSRUtil=new function(){};S.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=S.asn1.csr,n=new t.CertificationRequest(e),r=n.getPEM();return r};S.asn1.csr.CSRUtil.getParam=function(e,t){var n=Te,r=n.getV,i=n.getIdxbyList,s=n.getTLVbyList,a=n.getTLVbyListEx,o=n.getVbyListEx,l=function(w){var A=i(w,0,[0,3,0,0],"06");return r(w,A)!="2a864886f70d01090e"?null:s(w,0,[0,3,0,1,0],"30")},u={};if(e.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var f=en(e,"CERTIFICATE REQUEST");t&&(u.tbs=s(f,0,[0]));try{var c=a(f,0,[0,1]);if(c=="3000")u.subject={};else{var v=new Xe;u.subject=v.getX500Name(c)}}catch{}var d=a(f,0,[0,2]),h=St.getKey(d,null,"pkcs8pub");u.sbjpubkey=St.getPEM(h,"PKCS8PUB");var g=l(f),v=new Xe;g!=null&&(u.extreq=v.getExtParamArray(g));try{var p=a(f,0,[1],"30"),v=new Xe;u.sigalg=v.getAlgorithmIdentifierName(p)}catch{}try{var y=o(f,0,[2]);u.sighex=y}catch{}return u};S.asn1.csr.CSRUtil.verifySignature=function(e){try{var t=null;if(typeof e=="string"&&e.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?t=S.asn1.csr.CSRUtil.getParam(e,!0):typeof e=="object"&&e.sbjpubkey!=null&&e.sigalg!=null&&e.sighex!=null&&e.tbs!=null&&(t=e),t==null)return!1;var n=new S.crypto.Signature({alg:t.sigalg});return n.init(t.sbjpubkey),n.updateHex(t.tbs),n.verify(t.sighex)}catch(r){return alert(r),!1}};(typeof S>"u"||!S)&&(S={});(typeof S.asn1>"u"||!S.asn1)&&(S.asn1={});(typeof S.asn1.ocsp>"u"||!S.asn1.ocsp)&&(S.asn1.ocsp={});S.asn1.ocsp.DEFAULT_HASH="sha1";S.asn1.ocsp.OCSPResponse=function(e){S.asn1.ocsp.OCSPResponse.superclass.constructor.call(this),S.asn1.DEREnumerated;var t=S.asn1.ASN1Util.newObject,n=S.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var i=this.params.resstatus;return typeof i=="number"?i:typeof i!="string"?-1:r.indexOf(i)},this.setByParam=function(i){this.params=i},this.tohex=function(){var i=this.params,s=this._getStatusCode();if(s==-1)throw new Error("responseStatus not supported: "+i.resstatus);if(s!=0)return t({seq:[{enum:{int:s}}]}).tohex();var a=new n(i);return t({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:a}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.OCSPResponse,S.asn1.ASN1Object);S.asn1.ocsp.ResponseBytes=function(e){S.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=S.asn1,n=t.DERSequence,r=t.DERObjectIdentifier,i=t.DEROctetString,s=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(a.restype!="ocspBasic")throw new Error("not supported responseType: "+a.restype);var o=new s(a),l=[];l.push(new r({name:"ocspBasic"})),l.push(new i({hex:o.tohex()}));var u=new n({array:l});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.ResponseBytes,S.asn1.ASN1Object);S.asn1.ocsp.BasicOCSPResponse=function(e){S.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,n=S.asn1,r=n.ASN1Object,i=n.DERSequence;n.DERGeneralizedTime;var s=n.DERTaggedObject,a=n.DERBitString;n.x509.Extensions;var o=n.x509.AlgorithmIdentifier,l=n.ocsp;l.ResponderID,_SingleResponseList=l.SingleResponseList,_ResponseData=l.ResponseData,this.params=null,this.setByParam=function(u){this.params=u},this.sign=function(){var u=this.params,f=u.tbsresp.tohex(),c=new S.crypto.Signature({alg:u.sigalg});c.init(u.reskey),c.updateHex(f),u.sighex=c.sign()},this.tohex=function(){var u=this.params;u.tbsresp==null&&(u.tbsresp=new _ResponseData(u)),u.sighex==null&&u.reskey!=null&&this.sign();var f=[];if(f.push(u.tbsresp),f.push(new o({name:u.sigalg})),f.push(new a({hex:"00"+u.sighex})),u.certs!=null&&u.certs.length!=null){for(var c=[],d=0;d<u.certs.length;d++){var h=u.certs[d],g=null;if(Te.isASN1HEX(h))g=h;else if(h.match(/-----BEGIN/))g=en(h);else throw new t("certs["+d+"] not hex or PEM");c.push(new r({tlv:g}))}var v=new i({array:c});f.push(new s({tag:"a0",explicit:!0,obj:v}))}var p=new i({array:f});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.BasicOCSPResponse,S.asn1.ASN1Object);S.asn1.ocsp.ResponseData=function(e){S.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=S.asn1,n=t.DERSequence,r=t.DERGeneralizedTime,i=t.DERTaggedObject,s=t.x509.Extensions,a=t.ocsp,o=a.ResponderID;_SingleResponseList=a.SingleResponseList,this.params=null,this.tohex=function(){var l=this.params;l.respid!=null,l.prodat!=null,l.array!=null;var u=[];if(u.push(new o(l.respid)),u.push(new r(l.prodat)),u.push(new _SingleResponseList(l.array)),l.ext!=null){var f=new s(l.ext);u.push(new i({tag:"a1",explicit:!0,obj:f}))}var c=new n({array:u});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.ResponseData,S.asn1.ASN1Object);S.asn1.ocsp.ResponderID=function(e){S.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=S,n=t.asn1,r=n.ASN1Util.newObject,i=n.x509.X500Name,s=t.lang.String.isHex,a=Error;this.params=null,this.tohex=function(){var o=this.params;if(o.key!=null){var l=null;if(typeof o.key=="string"){if(s(o.key)&&(l=o.key),o.key.match(/-----BEGIN CERTIFICATE/)){var u=new Xe(o.key),f=u.getExtSubjectKeyIdentifier();f!=null&&(l=f.kid.hex)}}else if(o.key instanceof Xe){var f=o.key.getExtSubjectKeyIdentifier();f!=null&&(l=f.kid.hex)}if(l==null)throw new a("wrong key member value");var c=r({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:l}}}});return c.tohex()}else if(o.name!=null){var d=null;if(typeof o.name=="string"&&o.name.match(/-----BEGIN CERTIFICATE/)){var u=new Xe(o.name);d=u.getSubject()}else o.name instanceof Xe?d=o.name.getSubject():typeof o.name=="object"&&(o.name.array!=null||o.name.str!=null)&&(d=o.name);if(d==null)throw new a("wrong name member value");var c=r({tag:{tag:"a1",explicit:!0,obj:new i(d)}});return c.tohex()}throw new a("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(o){this.params=o},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.ResponderID,S.asn1.ASN1Object);S.asn1.ocsp.SingleResponseList=function(e){S.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=S.asn1,n=t.DERSequence,r=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var i=this.params;if(typeof i!="object"||i.length==null)throw new Error("params not specified properly");for(var s=[],a=0;a<i.length;a++)s.push(new r(i[a]));var o=new n({array:s});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(i){this.params=i},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.SingleResponseList,S.asn1.ASN1Object);S.asn1.ocsp.SingleResponse=function(e){var t=Error,n=S,r=n.asn1,i=r.DERSequence,s=r.DERGeneralizedTime,a=r.DERTaggedObject,o=r.ocsp,l=o.CertID,u=o.CertStatus,f=r.x509,c=f.Extensions;o.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var d=this.params,h=[];if(d.certid==null)throw new t("certid unspecified");if(d.status==null)throw new t("status unspecified");if(d.thisupdate==null)throw new t("thisupdate unspecified");if(h.push(new l(d.certid)),h.push(new u(d.status)),h.push(new s(d.thisupdate)),d.nextupdate!=null){var g=new s(d.nextupdate);h.push(new a({tag:"a0",explicit:!0,obj:g}))}if(d.ext!=null){var v=new c(d.ext);h.push(new a({tag:"a1",explicit:!0,obj:v}))}var p=new i({array:h});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(d){this.params=d},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.SingleResponse,S.asn1.ASN1Object);S.asn1.ocsp.CertID=function(e){var t=S,n=t.asn1,r=n.DEROctetString,i=n.DERInteger,s=n.DERSequence,a=n.x509,o=a.AlgorithmIdentifier,l=n.ocsp;l.DEFAULT_HASH;var u=t.crypto,f=u.Util.hashHex,c=Xe,d=Te,h=d.getVbyList;l.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(g,v,p,y){y==null&&(y=this.DEFAULT_HASH),this.params={alg:y,issname:g,isskey:v,sbjsn:p}},this.setByCert=function(g,v,p){p==null&&(p=this.DEFAULT_HASH),this.params={alg:p,issuerCert:g,subjectCert:v}},this.getParamByCerts=function(g,v,p){p==null&&(p=this.DEFAULT_HASH);var y=new c(g),w=new c(v),A=f(y.getSubjectHex(),p),I=y.getPublicKeyHex(),k=f(h(I,0,[1],"03",!0),p),x=w.getSerialNumberHex(),C={alg:p,issname:A,isskey:k,sbjsn:x};return C},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var g=this.params,v,p,y,w;if(g.alg==null?w=this.DEFAULT_HASH:w=g.alg,g.issuerCert!=null&&g.subjectCert!=null){var A=this.getParamByCerts(g.issuerCert,g.subjectCert,w);v=A.issname,p=A.isskey,y=A.sbjsn}else if(g.issname!=null&&g.isskey!=null&&g.sbjsn!=null)v=g.issname,p=g.isskey,y=g.sbjsn;else throw new Error("required param members not defined");var I=new o({name:w}),k=new r({hex:v}),x=new r({hex:p}),C=new i({hex:y}),m=new s({array:[I,k,x,C]});return this.hTLV=m.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.CertID,S.asn1.ASN1Object);S.asn1.ocsp.CertStatus=function(e){S.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.status=="good")return"8000";if(t.status=="unknown")return"8200";if(t.status=="revoked"){var n=[{gentime:{str:t.time}}];t.reason!=null&&n.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}});var r={tag:"a1",explicit:!1,obj:{seq:n}};return S.asn1.ASN1Util.newObject({tag:r}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},e!==void 0&&this.setByParam(e)};pe(S.asn1.ocsp.CertStatus,S.asn1.ASN1Object);S.asn1.ocsp.Request=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.ocsp;if(i.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var a=[];if(this.dReqCert===null)throw"reqCert not set";a.push(this.dReqCert);var o=new r({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof e<"u"){var s=new i.CertID(e);this.dReqCert=s}};pe(S.asn1.ocsp.Request,S.asn1.ASN1Object);S.asn1.ocsp.TBSRequest=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.ocsp;i.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(s){for(var a=[],o=0;o<s.length;o++){var l=new i.Request(s[0]);a.push(l)}this.dRequestList=a},this.tohex=function(){var s=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var a=new r({array:this.dRequestList});if(s.push(a),this.dRequestExt!==null)throw"requestExtensions not supported";var o=new r({array:s});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0&&this.setRequestListByParam(e.reqList)};pe(S.asn1.ocsp.TBSRequest,S.asn1.ASN1Object);S.asn1.ocsp.OCSPRequest=function(e){var t=S,n=t.asn1,r=n.DERSequence,i=n.ocsp;if(i.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var a=[];if(this.dTbsRequest!==null)a.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var o=new r({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0){var s=new i.TBSRequest(e);this.dTbsRequest=s}};pe(S.asn1.ocsp.OCSPRequest,S.asn1.ASN1Object);S.asn1.ocsp.OCSPUtil={};S.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,n){var r=S,i=r.asn1,s=i.ocsp;n===void 0&&(n=s.DEFAULT_HASH);var a={alg:n,issuerCert:e,subjectCert:t},o=new s.OCSPRequest({reqList:[a]});return o.tohex()};S.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=Te,n=t.getVbyList,r=t.getVbyListEx,i=t.getIdxbyList;t.getIdxbyListEx;var s=t.getV,a={};try{var o=r(e,0,[0],"0a");a.responseStatus=parseInt(o,16)}catch{}if(a.responseStatus!==0)return a;try{var l=i(e,0,[1,0,1,0,0,2,0,1]);e.substr(l,2)==="80"?a.certStatus="good":e.substr(l,2)==="a1"?(a.certStatus="revoked",a.revocationTime=Et(n(e,l,[0]))):e.substr(l,2)==="82"&&(a.certStatus="unknown")}catch{}try{var u=i(e,0,[1,0,1,0,0,2,0,2]);a.thisUpdate=Et(s(e,u))}catch{}try{var f=i(e,0,[1,0,1,0,0,2,0,3]);e.substr(f,2)==="a0"&&(a.nextUpdate=Et(n(e,f,[0])))}catch{}return a};S.asn1.ocsp.OCSPParser=function(){var e=Error,t=Xe,n=new t,r=Te,i=r.getV,s=r.getTLV,a=r.getIdxbyList,o=r.getVbyList,l=r.getTLVbyList,u=r.getVbyListEx,f=r.getTLVbyListEx,c=r.getChildIdx;this.getOCSPRequest=function(d){var h=c(d,0);if(h.length!=1&&h.length!=2)throw new e("wrong number elements: "+h.length);var g=this.getTBSRequest(s(d,h[0]));return g},this.getTBSRequest=function(d){var h={},g=f(d,0,[0],"30");h.array=this.getRequestList(g);var v=f(d,0,["[2]",0],"30");return v!=null&&(h.ext=n.getExtParamArray(v)),h},this.getRequestList=function(d){for(var h=[],g=c(d,0),v=0;v<g.length;v++){var d=s(d,g[v]);h.push(this.getRequest(d))}return h},this.getRequest=function(d){var h=c(d,0);if(h.length!=1&&h.length!=2)throw new e("wrong number elements: "+h.length);var g=this.getCertID(s(d,h[0]));if(h.length==2){var v=a(d,0,[1,0]);g.ext=n.getExtParamArray(s(d,v))}return g},this.getCertID=function(d){var h=c(d,0);if(h.length!=4)throw new e("wrong number elements: "+h.length);var g=new t,v={};return v.alg=g.getAlgorithmIdentifierName(s(d,h[0])),v.issname=i(d,h[1]),v.isskey=i(d,h[2]),v.sbjsn=i(d,h[3]),v},this.getOCSPResponse=function(d){var h=c(d,0),g,v=i(d,h[0]),p=parseInt(v);if(h.length==1)return{resstatus:p};var y=l(d,0,[1,0]);return g=this.getResponseBytes(y),g.resstatus=p,g},this.getResponseBytes=function(d){var h=c(d,0),g,v=l(d,0,[1,0]);g=this.getBasicOCSPResponse(v);var p=i(d,h[0]);return g.restype=S.asn1.x509.OID.oid2name(kd(p)),g},this.getBasicOCSPResponse=function(d){var h=c(d,0),g;g=this.getResponseData(s(d,h[0]));var v=new Xe;g.alg=v.getAlgorithmIdentifierName(s(d,h[1]));var p=i(d,h[2]);g.sighex=p.substr(2);var y=u(d,0,["[0]"]);if(y!=null){for(var w=c(y,0),A=[],I=0;I<w.length;I++){var k=s(y,w[I]);A.push(k)}g.certs=A}return g},this.getResponseData=function(d){var h=c(d,0),g=h.length,v={},p=0;d.substr(h[0],2)=="a0"&&p++,v.respid=this.getResponderID(s(d,h[p++]));var y=i(d,h[p++]);if(v.prodat=Et(y),v.array=this.getSingleResponseList(s(d,h[p++])),d.substr(h[g-1],2)=="a1"){var w=l(d,h[g-1],[0]),A=new Xe;v.ext=A.getExtParamArray(w)}return v},this.getResponderID=function(d){var h={};if(d.substr(0,2)=="a2"){var g=o(d,0,[0]);h.key=g}if(d.substr(0,2)=="a1"){var v=l(d,0,[0]),p=new Xe;h.name=p.getX500Name(v)}return h},this.getSingleResponseList=function(d){for(var h=c(d,0),g=[],v=0;v<h.length;v++){var p=this.getSingleResponse(s(d,h[v]));g.push(p)}return g},this.getSingleResponse=function(d){var h=c(d,0),g={},v=this.getCertID(s(d,h[0]));g.certid=v;var p=this.getCertStatus(s(d,h[1]));if(g.status=p,d.substr(h[2],2)=="18"){var y=i(d,h[2]);g.thisupdate=Et(y)}for(var w=3;w<h.length;w++){if(d.substr(h[w],2)=="a0"){var A=o(d,h[w],[0],"18");g.nextupdate=Et(A)}if(d.substr(h[w],2)=="a1"){var I=new Xe,k=l(d,0,[w,0]);g.ext=I.getExtParamArray(k)}}return g},this.getCertStatus=function(d){var h={};if(d=="8000")return{status:"good"};if(d=="8200")return{status:"unknown"};if(d.substr(0,2)=="a1"){h.status="revoked";var g=o(d,0,[0]),v=Et(g);h.time=v}return h}};var S;(typeof S>"u"||!S)&&(S={});(typeof S.lang>"u"||!S.lang)&&(S.lang={});S.lang.String=function(){};function Jw(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function Xw(e){for(var t="",n=0;n<e.length;n++)t=t+String.fromCharCode(e[n]);return t}function Cd(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);r.length==1&&(r="0"+r),t=t+r}return t}function Qn(e){return Cd(Jw(e))}function F3(e){return ki(Qn(e))}function O3(e){return no(ki(Qn(e)))}function N3(e){return Xw(Uw(Yl(e)))}function no(e){return e=e.replace(/\=/g,""),e=e.replace(/\+/g,"-"),e=e.replace(/\//g,"_"),e}function Yl(e){return e.length%4==2?e=e+"==":e.length%4==3&&(e=e+"="),e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),e}function un(e){return e.length%2==1&&(e="0"+e),no(ki(e))}function $t(e){return bo(Yl(e))}var Cl,Hr;typeof Buffer=="function"?(Cl=function(e){return no(Buffer.from(e,"utf8").toString("base64"))},Hr=function(e){return Buffer.from(Yl(e),"base64").toString("utf8")}):(Cl=function(e){return un(Ad(Rd(e)))},Hr=function(e){return decodeURIComponent(Id($t(e)))});function $3(e){return ki(Ad(Rd(e)))}function M3(e){return decodeURIComponent(Id(bo(e)))}function Ed(e){return Ad(Rd(e)).toLowerCase()}function Et(e){try{return decodeURIComponent(Id(e))}catch{return null}}function V3(e){return Et(B3(e))}function B3(e){for(var t=e.match(/.{1,2}/g),n=[],r=0;r<t.length;r++){var i=parseInt(t[r],16);161<=i&&i<=191?(n.push("c2"),n.push(t[r])):192<=i&&i<=255?(n.push("c3"),n.push((i-64).toString(16))):n.push(t[r])}return n.join("")}function Nn(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function Rr(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function om(e){return ki(e)}function L3(e){return Td(om(e),64)}function Td(e,t){return e=e.replace(new RegExp("(.{"+t+"})","g"),`$1\r
`),e=e.replace(/\s+$/,""),e}function Zw(e){var t=e.replace(/[^0-9A-Za-z\/+=]*/g,""),n=bo(t);return n}function H3(e,t){return"-----BEGIN "+t+`-----\r
`+Td(e,64)+`\r
-----END `+t+`-----\r
`}function mn(e,t){return"-----BEGIN "+t+`-----\r
`+Td(om(e),64)+`\r
-----END `+t+`-----\r
`}function en(e,t){if(e.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return t!==void 0?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),""),e=e.replace(new RegExp("-----END "+t+"-----[^]*$"),"")):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,""),e=e.replace(/-----END [^-]+-----[^]*$/,"")),Zw(e)}function j3(e){return e.indexOf("-----BEGIN ")==-1||e.indexOf("-----END ")==-1?null:(e=e.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),e=e.replace(/-----END [\s\S]+$/m,""),e=e.replace(/\s+/g,""),e.match(/^[0-9a-zA-Z+/=]+$/)?e:null)}function q3(e){if(e.length%2!=0)throw"input is not even length";if(e.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(r*2,2),16));return t}function U3(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t}function lm(e){var t,n,r,i,s,a,o,l,u,f;if(e=ex(e),f=e.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),f)return t=parseInt(f[1]),n=parseInt(f[2])-1,r=parseInt(f[3]),i=parseInt(f[4]),s=parseInt(f[5]),a=parseInt(f[6]),o=0,l=f[7],l!==""&&(u=(l.substr(1)+"00").substr(0,3),o=parseInt(u)),Date.UTC(t,n,r,i,s,a,o);throw new Error("unsupported zulu format: "+e)}function z3(e){var t=new Date(e),n=("0000"+t.getUTCFullYear()).slice(-4),r=("00"+(t.getUTCMonth()+1)).slice(-2),i=("00"+t.getUTCDate()).slice(-2),s=("00"+t.getUTCHours()).slice(-2),a=("00"+t.getUTCMinutes()).slice(-2),o=("00"+t.getUTCSeconds()).slice(-2),l=("000"+t.getUTCMilliseconds()).slice(-3);return l=l.replace(/0+$/,""),l=l!=""?"."+l:l,n+r+i+s+a+o+l+"Z"}function Qw(e){return Math.round(lm(e)/1e3)}function K3(e){return new Date(lm(e))}function G3(e,t,n){var r,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var s=e.getUTCMilliseconds();s!==0&&(s=("00"+s).slice(-3),s=s.replace(/0+$/g,""),r+="."+s)}return r+="Z",r}function ex(e){return e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}[.][0-9]*Z$/)?e.match(/^[0-4]/)?"20"+e:"19"+e:e}function Ad(e){return e.replace(/%/g,"")}function Id(e){return e.replace(/(..)/g,"%$1")}function ag(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;e=e.toLowerCase();var n=e.split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2);e=e.replace("::",r);var i=e.split(":");if(i.length!=8)throw t;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function og(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);e=e.toLowerCase();var t=e.match(/.{1,4}/g);t=t.map(function(i){return i.replace(/^0+/,"")}),t=t.map(function(i){return i==""?"0":i}),e=":"+t.join(":")+":";var n=e.match(/:(0:){2,}/g);if(n==null)return e.slice(1,-1);var r=n.sort().slice(-1)[0];return e=e.replace(r.substr(0,r.length-1),":"),e.substr(0,2)!="::"&&(e=e.substr(1)),e.substr(-2,2)!="::"&&(e=e.substr(0,e.length-1)),e}function yc(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(e.length==8){var n;try{return n=parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16),n}catch{throw t}}else if(e.length==16)try{return yc(e.substr(0,8))+"/"+Sy(e.substr(8))}catch{throw t}else{if(e.length==32)return og(e);if(e.length==64){try{return og(e.substr(0,32))+"/"+Sy(e.substr(32))}catch{throw t}return}else return e}}function Sy(e){var t=new Error("malformed mask"),n;try{n=new X(e,16).toString(2)}catch{throw t}if(!n.match(/^1*0*$/))throw t;return n.replace(/0+$/,"").length}function um(e){var t=new Error("malformed IP address");if(e=e.toLowerCase(e),!e.match(/^[0-9a-f.:/]+$/))throw t;if(e.match(/^[0-9.]+$/)){var n=e.split(".");if(n.length!==4)throw t;var r="";try{for(var i=0;i<4;i++){var s=parseInt(n[i]);r+=("0"+s.toString(16)).slice(-2)}return r}catch{throw t}}else if(e.match(/^[0-9.]+\/[0-9]+$/)){var a=e.split("/");return um(a[0])+_y(parseInt(a[1]),32)}else{if(e.match(/^[0-9a-f:]+$/)&&e.indexOf(":")!==-1)return ag(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&e.indexOf(":")!==-1){var a=e.split("/");return ag(a[0])+_y(parseInt(a[1]),128)}else throw t}}function _y(e,t){if(t==32&&e==0)return"00000000";if(t==128&&e==0)return"00000000000000000000000000000000";var n=Array(e+1).join("1")+Array(t-e+1).join("0");return new X(n,2).toString(16)}function cm(e){function t(i){var s=parseInt(i.substr(0,2),16),a=parseInt(i.substr(2),16);if(s==0&a<128)return String.fromCharCode(a);if(s<8){var o=192|(s&7)<<3|(a&192)>>6,l=128|a&63;return Et(o.toString(16)+l.toString(16))}var o=224|(s&240)>>4,l=128|(s&15)<<2|(a&192)>>6,u=128|a&63;return Et(o.toString(16)+l.toString(16)+u.toString(16))}var n=e.match(/.{4}/g),r=n.map(t);return r.join("")}function Rd(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)t[r]=="%"?(n=n+t.substr(r,3),r=r+2):n=n+"%"+Qn(t[r]);return n}function W3(e){return e=e.replace(/\r\n/mg,`
`),e}function Y3(e){return e=e.replace(/\r\n/mg,`
`),e=e.replace(/\n/mg,`\r
`),e}S.lang.String.isInteger=function(e){return e.match(/^[0-9]+$/)?!0:!!e.match(/^-[0-9]+$/)};S.lang.String.isHex=function(e){return tx(e)};function tx(e){return!!(e.length%2==0&&(e.match(/^[0-9a-f]+$/)||e.match(/^[0-9A-F]+$/)))}S.lang.String.isBase64=function(e){return e=e.replace(/\s+/g,""),!!(e.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&e.length%4==0)};S.lang.String.isBase64URL=function(e){return e.match(/[+/=]/)?!1:(e=Yl(e),S.lang.String.isBase64(e))};function dm(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}S.lang.String.isIntegerArray=function(e){return e=e.replace(/\s+/g,""),!!e.match(/^\[[0-9,]+\]$/)};S.lang.String.isPrintable=function(e){return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};S.lang.String.isIA5=function(e){return e.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};S.lang.String.isMail=function(e){return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function lg(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function J3(e){e=e.replace(/^\s*\[\s*/,""),e=e.replace(/\s*\]\s*$/,""),e=e.replace(/\s*/g,"");try{var t=e.split(/,/).map(function(n,r,i){var s=parseInt(n);if(s<0||255<s)throw"integer not in range 0-255";var a=("00"+s.toString(16)).slice(-2);return a}).join("");return t}catch(n){throw"malformed integer array string: "+n}}var X3=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1};function nx(e){var t=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},n=function(o){var l="",u=parseInt(o,10),f=u.toString(2),c=7-f.length%7;c==7&&(c=0);for(var d="",h=0;h<c;h++)d+="0";f=d+f;for(var h=0;h<f.length-1;h+=7){var g=f.substr(h,7);h!=f.length-7&&(g="1"+g),l+=t(parseInt(g,2))}return l};try{if(!e.match(/^[0-9.]+$/))return null;var r="",i=e.split("."),s=parseInt(i[0],10)*40+parseInt(i[1],10);r+=t(s),i.splice(0,2);for(var a=0;a<i.length;a++)r+=n(i[a]);return r}catch{return null}}function kd(e){if(!tx(e))return null;try{var t=[],n=e.substr(0,2),r=parseInt(n,16);t[0]=new String(Math.floor(r/40)),t[1]=new String(r%40);for(var i=e.substr(2),s=[],a=0;a<i.length/2;a++)s.push(parseInt(i.substr(a*2,2),16));for(var o=[],l="",a=0;a<s.length;a++)s[a]&128?l=l+bc((s[a]&127).toString(2),7):(l=l+bc((s[a]&127).toString(2),7),o.push(new String(parseInt(l,2))),l="");var u=t.join(".");return o.length>0&&(u=u+"."+o.join(".")),u}catch{return null}}var bc=function(e,t,n){return n==null&&(n="0"),e.length>=t?e:new Array(t-e.length+1).join(n)+e};function rx(e){if(e.length%2!=0||(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null))return-1;try{var t=e.substr(0,2);if(t=="00")return parseInt(e.substr(2),16);var n=parseInt(t,16);if(n>7)return-1;var r=e.substr(2),i=parseInt(r,16).toString(2);i=="0"&&(i="00000000"),i=i.slice(0,0-n);var s=parseInt(i,2);return s==NaN?-1:s}catch{return-1}}function ix(e){if(typeof e!="number"||e<0)return null;var t=Number(e).toString(2),n=8-t.length%8;n==8&&(n=0),t=t+bc("",n,"0");var r=parseInt(t,2).toString(16);r.length%2==1&&(r="0"+r);var i="0"+n;return i+r}function sx(e){if(typeof e!="string"||e.length%2!=0||!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var n=e.substr(2),r="",i=0;i<n.length;i+=2){var s=n.substr(i,2),a=parseInt(s,16).toString(2);a=("0000000"+a).slice(-8),r+=a}return r.substr(0,r.length-t)}catch{return null}}function Z3(e){if(typeof e!="string"||e.match(/^[01]+$/)==null)return null;try{var t=parseInt(e,2);return ix(t)}catch{return null}}function Sc(e,t){for(var n=0,r=0;r<e.length;r++)n|=1<<t[e[r]];for(var i=n.toString(2),s="",r=i.length-1;r>=0;r--)s+=i[r];return s}function Ds(e,r,n){if(typeof e=="object"){for(var r=String(r).split("."),i=0;i<r.length&&e;i++){var s=r[i];s.match(/^[0-9]+$/)&&(s=parseInt(s)),e=e[s]}return e||e===!1?e:n}}function pe(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}(typeof S>"u"||!S)&&(S={});(typeof S.crypto>"u"||!S.crypto)&&(S.crypto={});S.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:je.algo.MD5,sha1:je.algo.SHA1,sha224:je.algo.SHA224,sha256:je.algo.SHA256,sha384:je.algo.SHA384,sha512:je.algo.SHA512,ripemd160:je.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(typeof this.DIGESTINFOHEAD[t]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var s="0001",a="00"+r,o="",l=i-s.length-a.length,u=0;u<l;u+=2)o+="ff";var f=s+o+a;return f},this.hashString=function(e,t){var n=new S.crypto.MessageDigest({alg:t});return n.digestString(e)},this.hashHex=function(e,t){var n=new S.crypto.MessageDigest({alg:t});return n.digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof Ye||e instanceof S.crypto.DSA||e instanceof S.crypto.ECDSA}};S.crypto.Util.md5=function(e){var t=new S.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return t.digestString(e)};S.crypto.Util.ripemd160=function(e){var t=new S.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return t.digestString(e)};S.crypto.Util.SECURERANDOMGEN=new bs;S.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return S.crypto.Util.SECURERANDOMGEN.nextBytes(t),Cd(t)};S.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new X(S.crypto.Util.getRandomHexOfNbytes(e),16)};S.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=(e-t)/8,r=new Array(n+1);return S.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],Cd(r)};S.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new X(S.crypto.Util.getRandomHexOfNbits(e),16)};S.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=S.crypto.Util.getRandomBigIntegerOfNbits(t);if(e.compareTo(n)!=-1)return n}};S.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(n==1)throw"biMin is greater than biMax";if(n==0)return e;var r=t.subtract(e),i=S.crypto.Util.getRandomBigIntegerZeroToMax(r);return i.add(e)};S.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(t,n){if(t=S.crypto.MessageDigest.getCanonicalAlgName(t),t!==null&&n===void 0&&(n=S.crypto.Util.DEFAULTPROVIDER[t]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)!=-1&&n=="cryptojs"){try{this.md=S.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(r){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+r}this.updateString=function(r){this.md.update(r)},this.updateHex=function(r){var i=je.enc.Hex.parse(r);this.md.update(i)},this.digest=function(){var r=this.md.finalize();return r.toString(je.enc.Hex)},this.digestString=function(r){return this.updateString(r),this.digest()},this.digestHex=function(r){return this.updateHex(r),this.digest()}}if(":sha256:".indexOf(t)!=-1&&n=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(r){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+r}this.updateString=function(r){this.md.update(r)},this.updateHex=function(r){var i=sjcl.codec.hex.toBits(r);this.md.update(i)},this.digest=function(){var r=this.md.finalize();return sjcl.codec.hex.fromBits(r)},this.digestString=function(r){return this.updateString(r),this.digest()},this.digestHex=function(r){return this.updateHex(r),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},e!==void 0&&e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=S.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};S.crypto.MessageDigest.getCanonicalAlgName=function(e){return typeof e=="string"&&(e=e.toLowerCase(),e=e.replace(/-/,"")),e};S.crypto.MessageDigest.getHashLength=function(e){var t=S.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(t.HASHLENGTH[n]===void 0)throw"not supported algorithm: "+e;return t.HASHLENGTH[n]};S.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};S.crypto.Mac=function(e){this.setAlgAndProvider=function(t,n){if(t=t.toLowerCase(),t==null&&(t="hmacsha1"),t=t.toLowerCase(),t.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+t;n===void 0&&(n=S.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+n;var r=t.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)!=-1&&n=="cryptojs"){try{var i=S.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=je.algo.HMAC.create(i,this.pass)}catch(s){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+s}this.updateString=function(s){this.mac.update(s)},this.updateHex=function(s){var a=je.enc.Hex.parse(s);this.mac.update(a)},this.doFinal=function(){var s=this.mac.finalize();return s.toString(je.enc.Hex)},this.doFinalString=function(s){return this.updateString(s),this.doFinal()},this.doFinalHex=function(s){return this.updateHex(s),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if(typeof t=="string"){var n=t;(t.length%2==1||!t.match(/^[0-9A-Fa-f]+$/))&&(n=Rr(t)),this.pass=je.enc.Hex.parse(n);return}if(typeof t!="object")throw"KJUR.crypto.Mac unsupported password type: "+t;var n=null;if(t.hex!==void 0){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;n=t.hex}if(t.utf8!==void 0&&(n=Ed(t.utf8)),t.rstr!==void 0&&(n=Rr(t.rstr)),t.b64!==void 0&&(n=bo(t.b64)),t.b64u!==void 0&&(n=$t(t.b64u)),n==null)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=je.enc.Hex.parse(n)},e!==void 0&&(e.pass!==void 0&&this.setPassword(e.pass),e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=S.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};S.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var n=this.algName.match(/^(.+)with(.+)$/);n&&(this.mdAlgName=n[1].toLowerCase(),this.pubkeyAlgName=n[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(n,r){for(var i="",s=r/4-n.length,a=0;a<s;a++)i=i+"0";return i+n},this.setAlgAndProvider=function(n,r){if(this._setAlgNames(),r!="cryptojs/jsrsa")throw new Error("provider not supported: "+r);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new S.crypto.MessageDigest({alg:this.mdAlgName})}catch(i){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+i)}this.init=function(i,s){var a=null;try{s===void 0?a=St.getKey(i):a=St.getKey(i,s)}catch(o){throw"init failed:"+o}if(a.isPrivate===!0)this.prvKey=a,this.state="SIGN";else if(a.isPublic===!0)this.pubKey=a,this.state="VERIFY";else throw"init failed.:"+a},this.updateString=function(i){this.md.updateString(i)},this.updateHex=function(i){this.md.updateHex(i)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&S.crypto.ECDSA!==void 0&&(this.prvKey=new S.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Ye&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Ye&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof S.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof S.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(i){return this.updateString(i),this.sign()},this.signHex=function(i){return this.updateHex(i),this.sign()},this.verify=function(i){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&S.crypto.ECDSA!==void 0&&(this.pubKey=new S.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Ye&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,i,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Ye&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,i);if(S.crypto.ECDSA!==void 0&&this.pubKey instanceof S.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,i);if(S.crypto.DSA!==void 0&&this.pubKey instanceof S.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,i);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(n,r){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(n){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(n){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(n){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(n){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(n){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,e!==void 0&&(e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0?this.provName=S.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),e.psssaltlen!==void 0&&(this.pssSaltLen=e.psssaltlen),e.prvkeypem!==void 0)){if(e.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=St.getKey(e.prvkeypem);this.init(t)}catch(n){throw"fatal error to load pem private key: "+n}}};S.crypto.Cipher=function(e){};S.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof Ye&&t.isPublic){var r=S.crypto.Cipher.getAlgByKeyAndName(t,n);if(r==="RSA")return t.encrypt(e);if(r==="RSAOAEP")return t.encryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(i!==null)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}else throw"Cipher.encrypt: unsupported key or algorithm"};S.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof Ye&&t.isPrivate){var r=S.crypto.Cipher.getAlgByKeyAndName(t,n);if(r==="RSA")return t.decrypt(e);if(r==="RSAOAEP")return t.decryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(i!==null)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}else throw"Cipher.decrypt: unsupported key or algorithm"};S.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof Ye){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t)!=-1)return t;if(t==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t};S.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof S>"u"||!S)&&(S={});(typeof S.crypto>"u"||!S.crypto)&&(S.crypto={});S.crypto.ECDSA=function(e){var t="secp256r1",n=Error,r=X,i=_t,s=S.crypto.ECDSA,a=S.crypto.ECParameterDB,o=s.getName,l=Te,u=l.getVbyListEx,f=l.isASN1HEX,c=new bs;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(d){return new r(d.bitLength(),c).mod(d.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(d){this.ecparams=a.getByName(d),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=d},this.setPrivateKeyHex=function(d){this.isPrivate=!0,this.prvKeyHex=d},this.setPublicKeyHex=function(d){this.isPublic=!0,this.pubKeyHex=d},this.getPublicKeyXYHex=function(){var d=this.pubKeyHex;if(d.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var h=this.ecparams.keycharlen;if(d.length!==2+h*2)throw"malformed public key hex length";var g={};return g.x=d.substr(2,h),g.y=d.substr(2+h),g},this.getShortNISTPCurveName=function(){var d=this.curveName;return d==="secp256r1"||d==="NIST P-256"||d==="P-256"||d==="prime256v1"?"P-256":d==="secp384r1"||d==="NIST P-384"||d==="P-384"?"P-384":d==="secp521r1"||d==="NIST P-521"||d==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var d=this.ecparams.n,h=this.getBigRandom(d),g=this.ecparams.keycharlen,v=("0000000000"+h.toString(16)).slice(-g);this.setPrivateKeyHex(v);var p=this.generatePublicKeyHex();return{ecprvhex:v,ecpubhex:p}},this.generatePublicKeyHex=function(){var d=new r(this.prvKeyHex,16),h=this.ecparams.G.multiply(d),g=h.getX().toBigInteger(),v=h.getY().toBigInteger(),p=this.ecparams.keycharlen,y=("0000000000"+g.toString(16)).slice(-p),w=("0000000000"+v.toString(16)).slice(-p),A="04"+y+w;return this.setPublicKeyHex(A),A},this.signWithMessageHash=function(d){return this.signHex(d,this.prvKeyHex)},this.signHex=function(d,h){var g=new r(h,16),v=this.ecparams.n,p=new r(d.substring(0,this.ecparams.keycharlen),16);do var y=this.getBigRandom(v),w=this.ecparams.G,A=w.multiply(y),I=A.getX().toBigInteger().mod(v);while(I.compareTo(r.ZERO)<=0);var k=y.modInverse(v).multiply(p.add(g.multiply(I))).mod(v);return s.biRSSigToASN1Sig(I,k)},this.sign=function(d,h){var g=h,v=this.ecparams.n,p=r.fromByteArrayUnsigned(d);do var y=this.getBigRandom(v),w=this.ecparams.G,A=w.multiply(y),I=A.getX().toBigInteger().mod(v);while(I.compareTo(X.ZERO)<=0);var k=y.modInverse(v).multiply(p.add(g.multiply(I))).mod(v);return this.serializeSig(I,k)},this.verifyWithMessageHash=function(d,h){return this.verifyHex(d,h,this.pubKeyHex)},this.verifyHex=function(d,h,g){try{var v,p,y=s.parseSigHex(h);v=y.r,p=y.s;var w=i.decodeFromHex(this.ecparams.curve,g),A=new r(d.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(A,v,p,w)}catch{return!1}},this.verify=function(d,h,g){var v,p;if(Bitcoin.Util.isArray(h)){var y=this.parseSig(h);v=y.r,p=y.s}else if(typeof h=="object"&&h.r&&h.s)v=h.r,p=h.s;else throw"Invalid value for signature";var w;if(g instanceof _t)w=g;else if(Bitcoin.Util.isArray(g))w=i.decodeFrom(this.ecparams.curve,g);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var A=r.fromByteArrayUnsigned(d);return this.verifyRaw(A,v,p,w)},this.verifyRaw=function(d,h,g,v){var p=this.ecparams.n,y=this.ecparams.G;if(h.compareTo(r.ONE)<0||h.compareTo(p)>=0||g.compareTo(r.ONE)<0||g.compareTo(p)>=0)return!1;var w=g.modInverse(p),A=d.multiply(w).mod(p),I=h.multiply(w).mod(p),k=y.multiply(A).add(v.multiply(I)),x=k.getX().toBigInteger().mod(p);return x.equals(h)},this.serializeSig=function(d,h){var g=d.toByteArraySigned(),v=h.toByteArraySigned(),p=[];return p.push(2),p.push(g.length),p=p.concat(g),p.push(2),p.push(v.length),p=p.concat(v),p.unshift(p.length),p.unshift(48),p},this.parseSig=function(d){var h;if(d[0]!=48)throw new Error("Signature not a valid DERSequence");if(h=2,d[h]!=2)throw new Error("First element in signature must be a DERInteger");var g=d.slice(h+2,h+2+d[h+1]);if(h+=2+d[h+1],d[h]!=2)throw new Error("Second element in signature must be a DERInteger");var v=d.slice(h+2,h+2+d[h+1]);h+=2+d[h+1];var p=r.fromByteArrayUnsigned(g),y=r.fromByteArrayUnsigned(v);return{r:p,s:y}},this.parseSigCompact=function(d){if(d.length!==65)throw"Signature has the wrong length";var h=d[0]-27;if(h<0||h>7)throw"Invalid signature type";var g=this.ecparams.n,v=r.fromByteArrayUnsigned(d.slice(1,33)).mod(g),p=r.fromByteArrayUnsigned(d.slice(33,65)).mod(g);return{r:v,s:p,i:h}},this.readPKCS5PrvKeyHex=function(d){if(f(d)===!1)throw new Error("not ASN.1 hex string");var h,g,v;try{h=u(d,0,["[0]",0],"06"),g=u(d,0,[1],"04");try{v=u(d,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=o(h),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(v),this.setPrivateKeyHex(g),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(d){if(f(d)===!1)throw new n("not ASN.1 hex string");var h,g,v,p;try{h=u(d,0,[1,0],"06"),g=u(d,0,[1,1],"06"),v=u(d,0,[2,0,1],"04");try{p=u(d,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new n("malformed PKCS#8 plain ECC private key")}if(this.curveName=o(g),this.curveName===void 0)throw new n("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(p),this.setPrivateKeyHex(v),this.isPublic=!1},this.readPKCS8PubKeyHex=function(d){if(f(d)===!1)throw new n("not ASN.1 hex string");var h,g,v;try{h=u(d,0,[0,0],"06"),g=u(d,0,[0,1],"06"),v=u(d,0,[1],"03")}catch{throw new n("malformed PKCS#8 ECC public key")}if(this.curveName=o(g),this.curveName===null)throw new n("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(v)},this.readCertPubKeyHex=function(d,h){if(f(d)===!1)throw new n("not ASN.1 hex string");var g,v;try{g=u(d,0,[0,5,0,1],"06"),v=u(d,0,[0,5,1],"03")}catch{throw new n("malformed X.509 certificate ECC public key")}if(this.curveName=o(g),this.curveName===null)throw new n("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(v)},e!==void 0&&e.curve!==void 0&&(this.curveName=e.curve),this.curveName===void 0&&(this.curveName=t),this.setNamedCurve(this.curveName),e!==void 0&&(e.prv!==void 0&&this.setPrivateKeyHex(e.prv),e.pub!==void 0&&this.setPublicKeyHex(e.pub))};S.crypto.ECDSA.parseSigHex=function(e){var t=S.crypto.ECDSA.parseSigHexInHexRS(e),n=new X(t.r,16),r=new X(t.s,16);return{r:n,s:r}};S.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=Te,n=t.getChildIdx,r=t.getV;if(t.checkStrictDER(e,0),e.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var i=n(e,0);if(i.length!=2)throw new Error("signature shall have two elements");var s=i[0],a=i[1];if(e.substr(s,2)!="02")throw new Error("1st item not ASN.1 integer");if(e.substr(a,2)!="02")throw new Error("2nd item not ASN.1 integer");var o=r(e,s),l=r(e,a);return{r:o,s:l}};S.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=S.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if(n.length>=130&&n.length<=134){if(n.length%2!=0)throw Error("unknown ECDSA sig r length error");if(r.length%2!=0)throw Error("unknown ECDSA sig s length error");n.substr(0,2)=="00"&&(n=n.substr(2)),r.substr(0,2)=="00"&&(r=r.substr(2));var i=Math.max(n.length,r.length);return n=("000000"+n).slice(-i),r=("000000"+r).slice(-i),n+r}if(n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),r.substr(0,2)=="00"&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw Error("unknown ECDSA sig r length error");if(r.length%32!=0)throw Error("unknown ECDSA sig s length error");return n+r};S.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return S.crypto.ECDSA.hexRSSigToASN1Sig(t,n)};S.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new X(e,16),r=new X(t,16);return S.crypto.ECDSA.biRSSigToASN1Sig(n,r)};S.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=S.asn1,r=new n.DERInteger({bigint:e}),i=new n.DERInteger({bigint:t}),s=new n.DERSequence({array:[r,i]});return s.tohex()};S.crypto.ECDSA.getName=function(e){return e==="2b8104001f"?"secp192k1":e==="2a8648ce3d030107"?"secp256r1":e==="2b8104000a"?"secp256k1":e==="2b81040021"?"secp224r1":e==="2b81040022"?"secp384r1":e==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)!==-1?"secp256r1":"|secp256k1|".indexOf(e)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(e)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(e)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(e)!==-1?"secp521r1":null};(typeof S>"u"||!S)&&(S={});(typeof S.crypto>"u"||!S.crypto)&&(S.crypto={});S.crypto.ECParameterDB=new function(){var e={},t={};function n(r){return new X(r,16)}this.getByName=function(r){var i=r;if(typeof t[i]<"u"&&(i=t[r]),typeof e[i]<"u")return e[i];throw"unregistered EC curve name: "+i},this.regist=function(r,i,s,a,o,l,u,f,c,d,h,g){e[r]={};var v=n(s),p=n(a),y=n(o),w=n(l),A=n(u),I=new ji(v,p,y),k=I.decodePointHex("04"+f+c);e[r].name=r,e[r].keylen=i,e[r].keycharlen=Math.ceil(i/8)*2,e[r].curve=I,e[r].G=k,e[r].n=w,e[r].h=A,e[r].oid=h,e[r].info=g;for(var x=0;x<d.length;x++)t[d[x]]=r}};S.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");S.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");S.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");S.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);S.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);S.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);S.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);S.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);S.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);S.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof S>"u"||!S)&&(S={});(typeof S.crypto>"u"||!S.crypto)&&(S.crypto={});S.crypto.DSA=function(){var e=Te;e.getVbyList;var t=e.getVbyListEx,n=e.isASN1HEX,r=X;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(i,s,a,o,l){this.isPrivate=!0,this.p=i,this.q=s,this.g=a,this.y=o,this.x=l},this.setPrivateHex=function(i,s,a,o,l){var u,f,c,d,h;u=new X(i,16),f=new X(s,16),c=new X(a,16),typeof o=="string"&&o.length>1?d=new X(o,16):d=null,h=new X(l,16),this.setPrivate(u,f,c,d,h)},this.setPublic=function(i,s,a,o){this.isPublic=!0,this.p=i,this.q=s,this.g=a,this.y=o,this.x=null},this.setPublicHex=function(i,s,a,o){var l,u,f,c;l=new X(i,16),u=new X(s,16),f=new X(a,16),c=new X(o,16),this.setPublic(l,u,f,c)},this.signWithMessageHash=function(i){var s=this.p,a=this.q,o=this.g;this.y;var l=this.x,u=S.crypto.Util.getRandomBigIntegerMinToMax(X.ONE.add(X.ONE),a.subtract(X.ONE)),f=i.substr(0,a.bitLength()/4),c=new X(f,16),d=o.modPow(u,s).mod(a),h=u.modInverse(a).multiply(c.add(l.multiply(d))).mod(a),g=S.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:d}},{int:{bigint:h}}]});return g},this.verifyWithMessageHash=function(i,s){var a=this.p,o=this.q,l=this.g,u=this.y,f=this.parseASN1Signature(s),c=f[0],d=f[1],h=i.substr(0,o.bitLength()/4),g=new X(h,16);if(X.ZERO.compareTo(c)>0||c.compareTo(o)>0||X.ZERO.compareTo(d)>=0||d.compareTo(o)>0)throw"invalid DSA signature";var v=d.modInverse(o),p=g.multiply(v).mod(o),y=c.multiply(v).mod(o),w=l.modPow(p,a).multiply(u.modPow(y,a)).mod(a).mod(o);return w.compareTo(c)==0},this.parseASN1Signature=function(i){try{var s=new r(t(i,0,[0],"02"),16),a=new r(t(i,0,[1],"02"),16);return[s,a]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(i){var s,a,o,l,u;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{s=t(i,0,[1],"02"),a=t(i,0,[2],"02"),o=t(i,0,[3],"02"),l=t(i,0,[4],"02"),u=t(i,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(s,a,o,l,u)},this.readPKCS8PrvKeyHex=function(i){var s,a,o,l;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{s=t(i,0,[1,1,0],"02"),a=t(i,0,[1,1,1],"02"),o=t(i,0,[1,1,2],"02"),l=t(i,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(s,a,o,null,l)},this.readPKCS8PubKeyHex=function(i){var s,a,o,l;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{s=t(i,0,[0,1,0],"02"),a=t(i,0,[0,1,1],"02"),o=t(i,0,[0,1,2],"02"),l=t(i,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(s,a,o,l)},this.readCertPubKeyHex=function(i,s){var a,o,l,u;if(n(i)===!1)throw new Error("not ASN.1 hex string");try{a=t(i,0,[0,5,0,1,0],"02"),o=t(i,0,[0,5,0,1,1],"02"),l=t(i,0,[0,5,0,1,2],"02"),u=t(i,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(a,o,l,u)}};var St=function(){var e=function(g,v,p){return r(je.AES,g,v,p)},t=function(g,v,p){return r(je.TripleDES,g,v,p)},n=function(g,v,p){return r(je.DES,g,v,p)},r=function(g,v,p,y){var w=je.enc.Hex.parse(v),A=je.enc.Hex.parse(p),I=je.enc.Hex.parse(y),k={};k.key=A,k.iv=I,k.ciphertext=w;var x=g.decrypt(k,A,{iv:I});return je.enc.Hex.stringify(x)},i=function(g,v,p){return o(je.AES,g,v,p)},s=function(g,v,p){return o(je.TripleDES,g,v,p)},a=function(g,v,p){return o(je.DES,g,v,p)},o=function(g,v,p,y){var w=je.enc.Hex.parse(v),A=je.enc.Hex.parse(p),I=je.enc.Hex.parse(y),k=g.encrypt(w,A,{iv:I}),x=je.enc.Hex.parse(k.toString()),C=je.enc.Base64.stringify(x);return C},l={"AES-256-CBC":{proc:e,eproc:i,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:i,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:i,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:t,eproc:s,keylen:24,ivlen:8},"DES-CBC":{proc:n,eproc:a,keylen:8,ivlen:8}},u=function(g){var v=je.lib.WordArray.random(g),p=je.enc.Hex.stringify(v);return p},f=function(g){var v={},p=g.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));p&&(v.cipher=p[1],v.ivsalt=p[2]);var y=g.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));y&&(v.type=y[1]);var w=-1,A=0;g.indexOf(`\r
\r
`)!=-1&&(w=g.indexOf(`\r
\r
`),A=2),g.indexOf(`

`)!=-1&&(w=g.indexOf(`

`),A=1);var I=g.indexOf("-----END");if(w!=-1&&I!=-1){var k=g.substring(w+A*2,I-A);k=k.replace(/\s+/g,""),v.data=k}return v},c=function(g,v,p){for(var y=p.substring(0,16),w=je.enc.Hex.parse(y),A=je.enc.Utf8.parse(v),I=l[g].keylen+l[g].ivlen,k="",x=null;;){var C=je.algo.MD5.create();if(x!=null&&C.update(x),C.update(A),C.update(w),x=C.finalize(),k=k+je.enc.Hex.stringify(x),k.length>=I*2)break}var m={};return m.keyhex=k.substr(0,l[g].keylen*2),m.ivhex=k.substr(l[g].keylen*2,l[g].ivlen*2),m},d=function(g,v,p,y){var w=je.enc.Base64.parse(g),A=je.enc.Hex.stringify(w),I=l[v].proc,k=I(A,p,y);return k},h=function(g,v,p,y){var w=l[v].eproc,A=w(g,p,y);return A};return{version:"1.0.0",parsePKCS5PEM:function(g){return f(g)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(g,v,p){return c(g,v,p)},decryptKeyB64:function(g,v,p,y){return d(g,v,p,y)},getDecryptedKeyHex:function(g,v){var p=f(g),y=p.cipher,w=p.ivsalt,A=p.data,I=c(y,v,w),k=I.keyhex,x=d(A,y,k,w);return x},getEncryptedPKCS5PEMFromPrvKeyHex:function(g,v,p,y,w){var _="";if((typeof y>"u"||y==null)&&(y="AES-256-CBC"),typeof l[y]>"u")throw new Error("KEYUTIL unsupported algorithm: "+y);if(typeof w>"u"||w==null){var A=l[y].ivlen,I=u(A);w=I.toUpperCase()}var k=c(y,p,w),x=k.keyhex,C=h(v,y,x,w),m=C.replace(/(.{64})/g,`$1\r
`),_="-----BEGIN "+g+` PRIVATE KEY-----\r
`;return _+=`Proc-Type: 4,ENCRYPTED\r
`,_+="DEK-Info: "+y+","+w+`\r
`,_+=`\r
`,_+=m,_+=`\r
-----END `+g+` PRIVATE KEY-----\r
`,_},parseHexOfEncryptedPKCS8:function(g){var v=Te,p=v.getChildIdx,y=v.getV,w={},A=p(g,0);if(A.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+A.length);w.ciphertext=y(g,A[1]);var I=p(g,A[0]);if(I.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+I.length);if(y(g,I[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var k=p(g,I[1]);if(I.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+k.length);var x=p(g,k[1]);if(x.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+x.length);if(y(g,x[0])!="2a864886f70d0307")throw"this only supports TripleDES";w.encryptionSchemeAlg="TripleDES",w.encryptionSchemeIV=y(g,x[1]);var C=p(g,k[0]);if(C.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+C.length);if(y(g,C[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var m=p(g,C[1]);if(m.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+m.length);w.pbkdf2Salt=y(g,m[0]);var _=y(g,m[1]);try{w.pbkdf2Iter=parseInt(_,16)}catch{throw new Error("malformed format pbkdf2Iter: "+_)}return w},getPBKDF2KeyHexFromParam:function(g,v){var p=je.enc.Hex.parse(g.pbkdf2Salt),y=g.pbkdf2Iter,w=je.PBKDF2(v,p,{keySize:192/32,iterations:y}),A=je.enc.Hex.stringify(w);return A},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(g,v){var p=en(g,"ENCRYPTED PRIVATE KEY"),y=this.parseHexOfEncryptedPKCS8(p),w=St.getPBKDF2KeyHexFromParam(y,v),A={};A.ciphertext=je.enc.Hex.parse(y.ciphertext);var I=je.enc.Hex.parse(w),k=je.enc.Hex.parse(y.encryptionSchemeIV),x=je.TripleDES.decrypt(A,I,{iv:k}),C=je.enc.Hex.stringify(x);return C},getKeyFromEncryptedPKCS8PEM:function(g,v){var p=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(g,v),y=this.getKeyFromPlainPrivatePKCS8Hex(p);return y},parsePlainPrivatePKCS8Hex:function(g){var v=Te,p=v.getChildIdx,y=v.getV,w={};if(w.algparam=null,g.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var A=p(g,0);if(A.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(g.substr(A[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var I=p(g,A[1]);if(I.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(g.substr(I[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(w.algoid=y(g,I[0]),g.substr(I[1],2)=="06"&&(w.algparam=y(g,I[1])),g.substr(A[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return w.keyidx=v.getVidx(g,A[2]),w},getKeyFromPlainPrivatePKCS8PEM:function(g){var v=en(g,"PRIVATE KEY"),p=this.getKeyFromPlainPrivatePKCS8Hex(v);return p},getKeyFromPlainPrivatePKCS8Hex:function(g){var v=this.parsePlainPrivatePKCS8Hex(g),p;if(v.algoid=="2a864886f70d010101")p=new Ye;else if(v.algoid=="2a8648ce380401")p=new S.crypto.DSA;else if(v.algoid=="2a8648ce3d0201")p=new S.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return p.readPKCS8PrvKeyHex(g),p},_getKeyFromPublicPKCS8Hex:function(g){var v,p=Te.getVbyList(g,0,[0,0],"06");if(p==="2a864886f70d010101")v=new Ye;else if(p==="2a8648ce380401")v=new S.crypto.DSA;else if(p==="2a8648ce3d0201")v=new S.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return v.readPKCS8PubKeyHex(g),v},parsePublicRawRSAKeyHex:function(g){var v=Te,p=v.getChildIdx,y=v.getV,w={};if(g.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var A=p(g,0);if(A.length!=2)throw new Error("malformed RSA key(code:002)");if(g.substr(A[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(w.n=y(g,A[0]),g.substr(A[1],2)!="02")throw new Error("malformed RSA key(code:004)");return w.e=y(g,A[1]),w},parsePublicPKCS8Hex:function(g){var v=Te,p=v.getChildIdx,y=v.getV,w={};w.algparam=null;var A=p(g,0);if(A.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+A.length);var I=A[0];if(g.substr(I,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var k=p(g,I);if(k.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(g.substr(k[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(w.algoid=y(g,k[0]),g.substr(k[1],2)=="06"?w.algparam=y(g,k[1]):g.substr(k[1],2)=="30"&&(w.algparam={},w.algparam.p=v.getVbyList(g,k[1],[0],"02"),w.algparam.q=v.getVbyList(g,k[1],[1],"02"),w.algparam.g=v.getVbyList(g,k[1],[2],"02")),g.substr(A[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return w.key=y(g,A[1]).substr(2),w}}}();St.getKey=function(e,t,n){var r=Te,i=r.getChildIdx;r.getV;var s=r.getVbyList,a=S.crypto,o=a.ECDSA,l=a.DSA,u=Ye,f=en,c=St;if(typeof u<"u"&&e instanceof u||typeof o<"u"&&e instanceof o||typeof l<"u"&&e instanceof l)return e;if(e.curve!==void 0&&e.xy!==void 0&&e.d===void 0)return new o({pub:e.xy,curve:e.curve});if(e.curve!==void 0&&e.d!==void 0)return new o({prv:e.d,curve:e.curve});if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var d=new u;return d.setPublic(e.n,e.e),d}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.co!==void 0&&e.qi===void 0){var d=new u;return d.setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),d}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p===void 0){var d=new u;return d.setPrivate(e.n,e.e,e.d),d}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x===void 0){var d=new l;return d.setPublic(e.p,e.q,e.g,e.y),d}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x!==void 0){var d=new l;return d.setPrivate(e.p,e.q,e.g,e.y,e.x),d}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var d=new u;return d.setPublic($t(e.n),$t(e.e)),d}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.qi!==void 0){var d=new u;return d.setPrivateEx($t(e.n),$t(e.e),$t(e.d),$t(e.p),$t(e.q),$t(e.dp),$t(e.dq),$t(e.qi)),d}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0){var d=new u;return d.setPrivate($t(e.n),$t(e.e),$t(e.d)),d}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d===void 0){var h=new o({curve:e.crv}),g=h.ecparams.keycharlen,v=("0000000000"+$t(e.x)).slice(-g),p=("0000000000"+$t(e.y)).slice(-g),y="04"+v+p;return h.setPublicKeyHex(y),h}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d!==void 0){var h=new o({curve:e.crv}),g=h.ecparams.keycharlen,v=("0000000000"+$t(e.x)).slice(-g),p=("0000000000"+$t(e.y)).slice(-g),y="04"+v+p,w=("0000000000"+$t(e.d)).slice(-g);return h.setPublicKeyHex(y),h.setPrivateKeyHex(w),h}if(n==="pkcs5prv"){var A=e,r=Te,I,d;if(I=i(A,0),I.length===9)d=new u,d.readPKCS5PrvKeyHex(A);else if(I.length===6)d=new l,d.readPKCS5PrvKeyHex(A);else if(I.length>2&&A.substr(I[1],2)==="04")d=new o,d.readPKCS5PrvKeyHex(A);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return d}if(n==="pkcs8prv"){var d=c.getKeyFromPlainPrivatePKCS8Hex(e);return d}if(n==="pkcs8pub")return c._getKeyFromPublicPKCS8Hex(e);if(n==="x509pub")return Xe.getPublicKeyFromCertHex(e);if(e.indexOf("-END CERTIFICATE-",0)!=-1||e.indexOf("-END X509 CERTIFICATE-",0)!=-1||e.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Xe.getPublicKeyFromCertPEM(e);if(e.indexOf("-END PUBLIC KEY-")!=-1){var k=en(e,"PUBLIC KEY");return c._getKeyFromPublicPKCS8Hex(k)}if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var x=f(e,"RSA PRIVATE KEY");return c.getKey(x,null,"pkcs5prv")}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var C=f(e,"DSA PRIVATE KEY"),m=s(C,0,[1],"02"),_=s(C,0,[2],"02"),T=s(C,0,[3],"02"),E=s(C,0,[4],"02"),R=s(C,0,[5],"02"),d=new l;return d.setPrivate(new X(m,16),new X(_,16),new X(T,16),new X(E,16),new X(R,16)),d}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var x=f(e,"EC PRIVATE KEY");return c.getKey(x,null,"pkcs5prv")}if(e.indexOf("-END PRIVATE KEY-")!=-1)return c.getKeyFromPlainPrivatePKCS8PEM(e);if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var D=c.getDecryptedKeyHex(e,t),$=new Ye;return $.readPKCS5PrvKeyHex(D),$}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var C=c.getDecryptedKeyHex(e,t),d=s(C,0,[1],"04"),M=s(C,0,[2,0],"06"),O=s(C,0,[3,0],"03").substr(2),L="";if(S.crypto.OID.oidhex2name[M]!==void 0)L=S.crypto.OID.oidhex2name[M];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+M);var h=new o({curve:L});return h.setPublicKeyHex(O),h.setPrivateKeyHex(d),h.isPublic=!1,h}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var C=c.getDecryptedKeyHex(e,t),m=s(C,0,[1],"02"),_=s(C,0,[2],"02"),T=s(C,0,[3],"02"),E=s(C,0,[4],"02"),R=s(C,0,[5],"02"),d=new l;return d.setPrivate(new X(m,16),new X(_,16),new X(T,16),new X(E,16),new X(R,16)),d}if(e.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return c.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")};St.generateKeypair=function(e,t){if(e=="RSA"){var n=t,r=new Ye;r.generate(n,"10001"),r.isPrivate=!0,r.isPublic=!0;var i=new Ye,s=r.n.toString(16),a=r.e.toString(16);i.setPublic(s,a),i.isPrivate=!1,i.isPublic=!0;var o={};return o.prvKeyObj=r,o.pubKeyObj=i,o}else if(e=="EC"){var l=t,u=new S.crypto.ECDSA({curve:l}),f=u.generateKeyPairHex(),r=new S.crypto.ECDSA({curve:l});r.setPublicKeyHex(f.ecpubhex),r.setPrivateKeyHex(f.ecprvhex),r.isPrivate=!0,r.isPublic=!1;var i=new S.crypto.ECDSA({curve:l});i.setPublicKeyHex(f.ecpubhex),i.isPrivate=!1,i.isPublic=!0;var o={};return o.prvKeyObj=r,o.pubKeyObj=i,o}else throw new Error("unknown algorithm: "+e)};St.getPEM=function(e,t,n,r,i,s){var a=S,o=a.asn1,l=o.DERObjectIdentifier,u=o.DERInteger,f=o.ASN1Util.newObject,c=o.x509,d=c.SubjectPublicKeyInfo,h=a.crypto,g=h.DSA,v=h.ECDSA,p=Ye;function y(O){var L=f({seq:[{int:0},{int:{bigint:O.n}},{int:O.e},{int:{bigint:O.d}},{int:{bigint:O.p}},{int:{bigint:O.q}},{int:{bigint:O.dmp1}},{int:{bigint:O.dmq1}},{int:{bigint:O.coeff}}]});return L}function w(O){var L=f({seq:[{int:1},{octstr:{hex:O.prvKeyHex}},{tag:["a0",!0,{oid:{name:O.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+O.pubKeyHex}}]}]});return L}function A(O){var L=f({seq:[{int:0},{int:{bigint:O.p}},{int:{bigint:O.q}},{int:{bigint:O.g}},{int:{bigint:O.y}},{int:{bigint:O.x}}]});return L}if((p!==void 0&&e instanceof p||g!==void 0&&e instanceof g||v!==void 0&&e instanceof v)&&e.isPublic==!0&&(t===void 0||t=="PKCS8PUB")){var I=new d(e),k=I.tohex();return mn(k,"PUBLIC KEY")}if(t=="PKCS1PRV"&&p!==void 0&&e instanceof p&&(n===void 0||n==null)&&e.isPrivate==!0){var I=y(e),k=I.tohex();return mn(k,"RSA PRIVATE KEY")}if(t=="PKCS1PRV"&&v!==void 0&&e instanceof v&&(n===void 0||n==null)&&e.isPrivate==!0){var x=new l({name:e.curveName}),C=x.tohex(),m=w(e),_=m.tohex(),T="";return T+=mn(C,"EC PARAMETERS"),T+=mn(_,"EC PRIVATE KEY"),T}if(t=="PKCS1PRV"&&g!==void 0&&e instanceof g&&(n===void 0||n==null)&&e.isPrivate==!0){var I=A(e),k=I.tohex();return mn(k,"DSA PRIVATE KEY")}if(t=="PKCS5PRV"&&p!==void 0&&e instanceof p&&n!==void 0&&n!=null&&e.isPrivate==!0){var I=y(e),k=I.tohex();return r===void 0&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",k,n,r,s)}if(t=="PKCS5PRV"&&v!==void 0&&e instanceof v&&n!==void 0&&n!=null&&e.isPrivate==!0){var I=w(e),k=I.tohex();return r===void 0&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",k,n,r,s)}if(t=="PKCS5PRV"&&g!==void 0&&e instanceof g&&n!==void 0&&n!=null&&e.isPrivate==!0){var I=A(e),k=I.tohex();return r===void 0&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",k,n,r,s)}var E=function(O,L){var W=R(O,L),te=new f({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:W.pbkdf2Salt}},{int:W.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:W.encryptionSchemeIV}}]}]}]},{octstr:{hex:W.ciphertext}}]});return te.tohex()},R=function(O,L){var W=100,te=je.lib.WordArray.random(8),ie="DES-EDE3-CBC",Q=je.lib.WordArray.random(8),ee=je.PBKDF2(L,te,{keySize:192/32,iterations:W}),ye=je.enc.Hex.parse(O),we=je.TripleDES.encrypt(ye,ee,{iv:Q})+"",$e={};return $e.ciphertext=we,$e.pbkdf2Salt=je.enc.Hex.stringify(te),$e.pbkdf2Iter=W,$e.encryptionSchemeAlg=ie,$e.encryptionSchemeIV=je.enc.Hex.stringify(Q),$e};if(t=="PKCS8PRV"&&p!=null&&e instanceof p&&e.isPrivate==!0){var D=y(e),$=D.tohex(),I=f({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:$}}]}),k=I.tohex();if(n===void 0||n==null)return mn(k,"PRIVATE KEY");var _=E(k,n);return mn(_,"ENCRYPTED PRIVATE KEY")}if(t=="PKCS8PRV"&&v!==void 0&&e instanceof v&&e.isPrivate==!0){var M={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};typeof e.pubKeyHex=="string"&&M.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});var D=new f(M),$=D.tohex(),I=f({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:$}}]}),k=I.tohex();if(n===void 0||n==null)return mn(k,"PRIVATE KEY");var _=E(k,n);return mn(_,"ENCRYPTED PRIVATE KEY")}if(t=="PKCS8PRV"&&g!==void 0&&e instanceof g&&e.isPrivate==!0){var D=new u({bigint:e.x}),$=D.tohex(),I=f({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:$}}]}),k=I.tohex();if(n===void 0||n==null)return mn(k,"PRIVATE KEY");var _=E(k,n);return mn(_,"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")};St.getKeyFromCSRPEM=function(e){var t=en(e,"CERTIFICATE REQUEST"),n=St.getKeyFromCSRHex(t);return n};St.getKeyFromCSRHex=function(e){var t=St.parseCSRHex(e),n=St.getKey(t.p8pubkeyhex,null,"pkcs8pub");return n};St.parseCSRHex=function(e){var t=Te,n=t.getChildIdx,r=t.getTLV,i={},s=e;if(s.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var a=n(s,0);if(a.length<1)throw new Error("malformed CSR(code:002)");if(s.substr(a[0],2)!="30")throw new Error("malformed CSR(code:003)");var o=n(s,a[0]);if(o.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=r(s,o[2]),i};St.getKeyID=function(e){var t=St,n=Te;typeof e=="string"&&e.indexOf("BEGIN ")!=-1&&(e=t.getKey(e));var r=en(t.getPEM(e)),i=n.getIdxbyList(r,0,[1]),s=n.getV(r,i).substring(2);return S.crypto.Util.hashHex(s,"sha1")};St.getJWK=function(e,t,n,r,i){var s,a={},o,l=S.crypto.Util.hashHex;if(typeof e=="string")s=St.getKey(e),e.indexOf("CERTIFICATE")!=-1&&(o=en(e));else if(typeof e=="object")e instanceof Xe?(s=e.getPublicKey(),o=e.hex):s=e;else throw new Error("unsupported keyinfo type");if(s instanceof Ye&&s.isPrivate)a.kty="RSA",a.n=un(s.n.toString(16)),a.e=un(s.e.toString(16)),a.d=un(s.d.toString(16)),a.p=un(s.p.toString(16)),a.q=un(s.q.toString(16)),a.dp=un(s.dmp1.toString(16)),a.dq=un(s.dmq1.toString(16)),a.qi=un(s.coeff.toString(16));else if(s instanceof Ye&&s.isPublic)a.kty="RSA",a.n=un(s.n.toString(16)),a.e=un(s.e.toString(16));else if(s instanceof S.crypto.ECDSA&&s.isPrivate){var u=s.getShortNISTPCurveName();if(u!=="P-256"&&u!=="P-384"&&u!=="P-521")throw new Error("unsupported curve name for JWT: "+u);var f=s.getPublicKeyXYHex();a.kty="EC",a.crv=u,a.x=un(f.x),a.y=un(f.y),a.d=un(s.prvKeyHex)}else if(s instanceof S.crypto.ECDSA&&s.isPublic){var u=s.getShortNISTPCurveName();if(u!=="P-256"&&u!=="P-384"&&u!=="P-521")throw new Error("unsupported curve name for JWT: "+u);var f=s.getPublicKeyXYHex();a.kty="EC",a.crv=u,a.x=un(f.x),a.y=un(f.y)}if(a.kty==null)throw new Error("unsupported keyinfo");return!s.isPrivate&&t!=!0&&(a.kid=S.jws.JWS.getJWKthumbprint(a)),o!=null&&n!=!0&&(a.x5c=[ki(o)]),o!=null&&r!=!0&&(a.x5t=no(ki(l(o,"sha1")))),o!=null&&i!=!0&&(a["x5t#S256"]=no(ki(l(o,"sha256")))),a};St.getJWKFromKey=function(e){return St.getJWK(e,!0,!0,!0,!0)};Ye.getPosArrayOfChildrenFromHex=function(e){return Te.getChildIdx(e,0)};Ye.getHexValueArrayOfChildrenFromHex=function(e){var t=Te,n=t.getV,d=Ye.getPosArrayOfChildrenFromHex(e),r=n(e,d[0]),i=n(e,d[1]),s=n(e,d[2]),a=n(e,d[3]),o=n(e,d[4]),l=n(e,d[5]),u=n(e,d[6]),f=n(e,d[7]),c=n(e,d[8]),d=new Array;return d.push(r,i,s,a,o,l,u,f,c),d};Ye.prototype.readPrivateKeyFromPEMString=function(e){var t=en(e),n=Ye.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])};Ye.prototype.readPKCS5PrvKeyHex=function(e){var t=Ye.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])};Ye.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,i,s,a,o,l,u=Te,f=u.getVbyListEx;if(u.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");try{t=f(e,0,[2,0,1],"02"),n=f(e,0,[2,0,2],"02"),r=f(e,0,[2,0,3],"02"),i=f(e,0,[2,0,4],"02"),s=f(e,0,[2,0,5],"02"),a=f(e,0,[2,0,6],"02"),o=f(e,0,[2,0,7],"02"),l=f(e,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,n,r,i,s,a,o,l)};Ye.prototype.readPKCS5PubKeyHex=function(e){var t=Te,n=t.getV;if(t.isASN1HEX(e)===!1)throw new Error("keyHex is not ASN.1 hex string");var r=t.getChildIdx(e,0);if(r.length!==2||e.substr(r[0],2)!=="02"||e.substr(r[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var i=n(e,r[0]),s=n(e,r[1]);this.setPublic(i,s)};Ye.prototype.readPKCS8PubKeyHex=function(e){var t=Te;if(t.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");if(t.getTLVbyListEx(e,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var n=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(n)};Ye.prototype.readCertPubKeyHex=function(e,t){var n,r;n=new Xe,n.readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};function ax(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n=n+"0";return n+e}Ye.prototype.sign=function(e,t){var n=function(i){return S.crypto.Util.hashString(i,t)},r=n(e);return this.signWithMessageHash(r,t)};Ye.prototype.signWithMessageHash=function(e,t){var n=S.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),r=Dn(n,16),i=this.doPrivate(r),s=i.toString(16);return ax(s,this.n.bitLength())};function ox(e,t,n){for(var r="",i=0;r.length<t;)r+=Nn(n(Rr(e+String.fromCharCode.apply(String,[(i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,i&255])))),i+=1;return r}Ye.prototype.signPSS=function(e,t,n){var r=function(s){return S.crypto.Util.hashHex(s,t)},i=r(Rr(e));return n===void 0&&(n=-1),this.signWithMessageHashPSS(i,t,n)};Ye.prototype.signWithMessageHashPSS=function(e,t,n){var r=Nn(e),i=r.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),o,l=function(p){return S.crypto.Util.hashHex(p,t)};if(n===-1||n===void 0)n=i;else if(n===-2)n=a-i-2;else if(n<-2)throw new Error("invalid salt length");if(a<i+n+2)throw new Error("data too long");var u="";n>0&&(u=new Array(n),new bs().nextBytes(u),u=String.fromCharCode.apply(String,u));var f=Nn(l(Rr("\0\0\0\0\0\0\0\0"+r+u))),c=[];for(o=0;o<a-n-i-2;o+=1)c[o]=0;var d=String.fromCharCode.apply(String,c)+""+u,h=ox(f,d.length,l),g=[];for(o=0;o<d.length;o+=1)g[o]=d.charCodeAt(o)^h.charCodeAt(o);var v=65280>>8*a-s&255;for(g[0]&=~v,o=0;o<i;o++)g.push(f.charCodeAt(o));return g.push(188),ax(this.doPrivate(new X(g)).toString(16),this.n.bitLength())};function lx(e){for(var t in S.crypto.Util.DIGESTINFOHEAD){var n=S.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n){var i=[t,e.substring(r)];return i}}return[]}Ye.prototype.verify=function(e,t){if(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null)return!1;var n=Dn(t,16),r=this.n.bitLength();if(n.bitLength()>r)return!1;var i=this.doPublic(n),s=i.toString(16);if(s.length+3!=r/4)return!1;var a=s.replace(/^1f+00/,""),o=lx(a);if(o.length==0)return!1;var l=o[0],u=o[1],f=function(d){return S.crypto.Util.hashString(d,l)},c=f(e);return u==c};Ye.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=Dn(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=this.doPublic(n),i=r.toString(16).replace(/^1f+00/,""),s=lx(i);if(s.length==0)return!1;s[0];var a=s[1];return a==e};Ye.prototype.verifyPSS=function(e,t,n,r){var i=function(a){return S.crypto.Util.hashHex(a,n)},s=i(Rr(e));return r===void 0&&(r=-1),this.verifyWithMessageHashPSS(s,t,n,r)};Ye.prototype.verifyWithMessageHashPSS=function(e,t,n,r){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=new X(t,16),s=function(w){return S.crypto.Util.hashHex(w,n)},a=Nn(e),o=a.length,l=this.n.bitLength()-1,u=Math.ceil(l/8),f;if(r===-1||r===void 0)r=o;else if(r===-2)r=u-o-2;else if(r<-2)throw new Error("invalid salt length");if(u<o+r+2)throw new Error("data too long");var c=this.doPublic(i).toByteArray();for(f=0;f<c.length;f+=1)c[f]&=255;for(;c.length<u;)c.unshift(0);if(c[u-1]!==188)throw new Error("encoded message does not end in 0xbc");c=String.fromCharCode.apply(String,c);var d=c.substr(0,u-o-1),h=c.substr(d.length,o),g=65280>>8*u-l&255;if(d.charCodeAt(0)&g)throw new Error("bits beyond keysize not zero");var v=ox(h,d.length,s),p=[];for(f=0;f<d.length;f+=1)p[f]=d.charCodeAt(f)^v.charCodeAt(f);p[0]&=~g;var y=u-o-r-2;for(f=0;f<y;f+=1)if(p[f]!==0)throw new Error("leftmost octets not zero");if(p[y]!==1)throw new Error("0x01 marker not found");return h===Nn(s(Rr("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,p.slice(-r)))))};Ye.SALT_LEN_HLEN=-1;Ye.SALT_LEN_MAX=-2;Ye.SALT_LEN_RECOVER=-2;function Xe(e){var t=Te,n=t.getChildIdx,r=t.getV;t.dump;var i=t.parse,s=t.getTLV,a=t.getVbyList,o=t.getVbyListEx,l=t.getTLVbyList,u=t.getTLVbyListEx,f=t.getIdxbyList,c=t.getIdxbyListEx,d=t.getVidx,h=t.getInt,g=t.oidname,v=t.hextooidstr,p=en,y,w=Error;try{y=S.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var x=l(this.hex,0,[0,0]);if(x.substr(0,2)=="a0"){var C=l(x,0,[0]),m=h(C,0);if(m<0||2<m)throw new Error("malformed version field");return this.version=m+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return o(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var x=u(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(x)},this.getAlgorithmIdentifierName=function(x){for(var C in y)if(x===y[C])return C;return g(o(x,0,[0],"06"))},this.getIssuer=function(x,C){return this.getX500Name(this.getIssuerHex(),x,C)},this.getIssuerHex=function(){return l(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var x=this.getIssuer();return x.str},this.getSubject=function(x,C){return this.getX500Name(this.getSubjectHex(),x,C)},this.getSubjectHex=function(){return l(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var x=this.getSubject();return x.str},this.getNotBefore=function(){var x=a(this.hex,0,[0,4+this.foffset,0]);return x=x.replace(/(..)/g,"%$1"),x=decodeURIComponent(x),x},this.getNotAfter=function(){var x=a(this.hex,0,[0,4+this.foffset,1]);return x=x.replace(/(..)/g,"%$1"),x=decodeURIComponent(x),x},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var x=this.getSPKI();return x==null?null:a(x,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return f(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var x=this.getPublicKeyIdx();return f(this.hex,x,[1,0],"30")},this.getPublicKey=function(){return St.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var x=l(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(x)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(x){var C=this.getSignatureAlgorithmField(),m=this.getSignatureValueHex(),_=l(this.hex,0,[0],"30"),T=new S.crypto.Signature({alg:C});return T.init(x),T.updateHex(_),T.verify(m)},this.parseExt=function(x){var C,m,_;if(x===void 0){if(_=this.hex,this.version!==3)return-1;C=f(_,0,[0,7,0],"30"),m=n(_,C)}else{_=en(x);var T=f(_,0,[0,3,0,0],"06");if(r(_,T)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}C=f(_,0,[0,3,0,1,0],"30"),m=n(_,C),this.hex=_}this.aExtInfo=new Array;for(var E=0;E<m.length;E++){var R={};R.critical=!1;var D=n(_,m[E]),$=0;D.length===3&&(R.critical=!0,$=1),R.oid=t.hextooidstr(a(_,m[E],[0],"06"));var M=f(_,m[E],[1+$]);R.vidx=d(_,M),this.aExtInfo.push(R)}},this.getExtInfo=function(x){var C=this.aExtInfo,m=x;if(x.match(/^[0-9.]+$/)||(m=S.asn1.x509.OID.name2oid(x)),m!==""){for(var _=0;_<C.length;_++)if(C[_].oid===m)return C[_]}},this.getCriticalExtV=function(x,C,m){if(C!=null)return[C,m];var _=this.getExtInfo(x);return _==null?[null,null]:[s(this.hex,_.vidx),_.critical]},this.getExtBasicConstraints=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("basicConstraints");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"basicConstraints"};if(C&&(_.critical=!0),x==="3000")return _;if(x==="30030101ff")return _.cA=!0,_;if(x.substr(0,12)==="30060101ff02"){var T=r(x,10),E=parseInt(T,16);return _.cA=!0,_.pathLen=E,_}throw new Error("hExtV parse error: "+x)},this.getExtNameConstraints=function(x,C){var m=this.getCriticalExtV("nameConstraints",x,C);if(x=m[0],C=m[1],x!=null){var _={extname:"nameConstraints"};C&&(_.critical=!0);for(var T=n(x,0),E=0;E<T.length;E++){for(var R=[],D=n(x,T[E]),$=0;$<D.length;$++){var M=s(x,D[$]),O=this.getGeneralSubtree(M);R.push(O)}var L=x.substr(T[E],2);L=="a0"?_.permit=R:L=="a1"&&(_.exclude=R)}return _}},this.getGeneralSubtree=function(x){var C=n(x,0),m=C.length;if(m<1||2<m)throw new Error("wrong num elements");for(var _=this.getGeneralName(s(x,C[0])),T=1;T<m;T++){var E=x.substr(C[T],2),R=r(x,C[T]),D=parseInt(R,16);E=="80"&&(_.min=D),E=="81"&&(_.max=D)}return _},this.getExtKeyUsage=function(x,C){var m=this.getCriticalExtV("keyUsage",x,C);if(x=m[0],C=m[1],x!=null){var _={extname:"keyUsage"};return C&&(_.critical=!0),_.names=this.getExtKeyUsageString(x).split(","),_}},this.getExtKeyUsageBin=function(x){if(x===void 0){var C=this.getExtInfo("keyUsage");if(C===void 0)return"";x=s(this.hex,C.vidx)}if(x.length!=8&&x.length!=10)throw new Error("malformed key usage value: "+x);var m="000000000000000"+parseInt(x.substr(6),16).toString(2);return x.length==8&&(m=m.slice(-8)),x.length==10&&(m=m.slice(-16)),m=m.replace(/0+$/,""),m==""&&(m="0"),m},this.getExtKeyUsageString=function(x){for(var C=this.getExtKeyUsageBin(x),m=new Array,_=0;_<C.length;_++)C.substr(_,1)=="1"&&m.push(Xe.KEYUSAGE_NAME[_]);return m.join(",")},this.getExtSubjectKeyIdentifier=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("subjectKeyIdentifier");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"subjectKeyIdentifier"};C&&(_.critical=!0);var T=r(x,0);return _.kid={hex:T},_},this.getExtAuthorityKeyIdentifier=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("authorityKeyIdentifier");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"authorityKeyIdentifier"};C&&(_.critical=!0);for(var T=n(x,0),E=0;E<T.length;E++){var R=x.substr(T[E],2);if(R==="80"&&(_.kid={hex:r(x,T[E])}),R==="a1"){var D=s(x,T[E]),$=this.getGeneralNames(D);_.issuer=$[0].dn}R==="82"&&(_.sn={hex:r(x,T[E])})}return _},this.getExtExtKeyUsage=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("extKeyUsage");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"extKeyUsage",array:[]};C&&(_.critical=!0);for(var T=n(x,0),E=0;E<T.length;E++)_.array.push(g(r(x,T[E])));return _},this.getExtExtKeyUsageName=function(){var x=this.getExtInfo("extKeyUsage");if(x===void 0)return x;var C=new Array,m=s(this.hex,x.vidx);if(m==="")return C;for(var _=n(m,0),T=0;T<_.length;T++)C.push(g(r(m,_[T])));return C},this.getExtSubjectAltName=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("subjectAltName");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"subjectAltName",array:[]};return C&&(_.critical=!0),_.array=this.getGeneralNames(x),_},this.getExtIssuerAltName=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("issuerAltName");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"issuerAltName",array:[]};return C&&(_.critical=!0),_.array=this.getGeneralNames(x),_},this.getGeneralNames=function(x){for(var C=n(x,0),m=[],_=0;_<C.length;_++){var T=this.getGeneralName(s(x,C[_]));T!==void 0&&m.push(T)}return m},this.getGeneralName=function(x){var C=x.substr(0,2),m=r(x,0),_=Nn(m);if(C=="81")return{rfc822:_};if(C=="82")return{dns:_};if(C=="86")return{uri:_};if(C=="87")return{ip:yc(m)};if(C=="a4")return{dn:this.getX500Name(m)};if(C=="a0")return{other:this.getOtherName(x)}},this.getExtSubjectAltName2=function(){var x,C,m,_=this.getExtInfo("subjectAltName");if(_===void 0)return _;for(var T=new Array,E=s(this.hex,_.vidx),R=n(E,0),D=0;D<R.length;D++)m=E.substr(R[D],2),x=r(E,R[D]),m==="81"&&(C=Et(x),T.push(["MAIL",C])),m==="82"&&(C=Et(x),T.push(["DNS",C])),m==="84"&&(C=Xe.hex2dn(x,0),T.push(["DN",C])),m==="86"&&(C=Et(x),T.push(["URI",C])),m==="87"&&(C=yc(x),T.push(["IP",C]));return T},this.getExtCRLDistributionPoints=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("cRLDistributionPoints");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"cRLDistributionPoints",array:[]};C&&(_.critical=!0);for(var T=n(x,0),E=0;E<T.length;E++){var R=s(x,T[E]);_.array.push(this.getDistributionPoint(R))}return _},this.getDistributionPoint=function(x){for(var C={},m=n(x,0),_=0;_<m.length;_++){var T=x.substr(m[_],2),E=s(x,m[_]);T=="a0"&&(C.dpname=this.getDistributionPointName(E))}return C},this.getDistributionPointName=function(x){for(var C={},m=n(x,0),_=0;_<m.length;_++){var T=x.substr(m[_],2),E=s(x,m[_]);T=="a0"&&(C.full=this.getGeneralNames(E))}return C},this.getExtCRLDistributionPointsURI=function(){var x=this.getExtCRLDistributionPoints();if(x==null)return x;for(var C=x.array,m=[],_=0;_<C.length;_++)try{C[_].dpname.full[0].uri!=null&&m.push(C[_].dpname.full[0].uri)}catch{}return m},this.getExtAIAInfo=function(){var x=this.getExtInfo("authorityInfoAccess");if(x===void 0)return x;for(var C={ocsp:[],caissuer:[]},m=n(this.hex,x.vidx),_=0;_<m.length;_++){var T=a(this.hex,m[_],[0],"06"),E=a(this.hex,m[_],[1],"86");T==="2b06010505073001"&&C.ocsp.push(Et(E)),T==="2b06010505073002"&&C.caissuer.push(Et(E))}return C},this.getExtAuthorityInfoAccess=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("authorityInfoAccess");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"authorityInfoAccess",array:[]};C&&(_.critical=!0);for(var T=n(x,0),E=0;E<T.length;E++){var R=o(x,T[E],[0],"06"),D=a(x,T[E],[1],"86"),$=Et(D);if(R=="2b06010505073001")_.array.push({ocsp:$});else if(R=="2b06010505073002")_.array.push({caissuer:$});else throw new Error("unknown method: "+R)}return _},this.getExtCertificatePolicies=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("certificatePolicies");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"certificatePolicies",array:[]};C&&(_.critical=!0);for(var T=n(x,0),E=0;E<T.length;E++){var R=s(x,T[E]),D=this.getPolicyInformation(R);_.array.push(D)}return _},this.getPolicyInformation=function(x){var C={},m=a(x,0,[0],"06");C.policyoid=g(m);var _=c(x,0,[1],"30");if(_!=-1){C.array=[];for(var T=n(x,_),E=0;E<T.length;E++){var R=s(x,T[E]),D=this.getPolicyQualifierInfo(R);C.array.push(D)}}return C},this.getOtherName=function(x){var C={},m=n(x,0),_=a(x,m[0],[],"06"),T=a(x,m[1],[]);return C.oid=g(_),C.value=i(T),C},this.getPolicyQualifierInfo=function(x){var C={},m=a(x,0,[0],"06");if(m==="2b06010505070201"){var _=o(x,0,[1],"16");C.cps=Nn(_)}else if(m==="2b06010505070202"){var T=l(x,0,[1],"30");C.unotice=this.getUserNotice(T)}return C},this.getUserNotice=function(x){var C=null;try{C=t.parse(x);var m=this._asn1ToUnotice(C);return m}catch{return}},this._asn1ToUnotice=function(x){try{for(var C={},m=Ds(x,"seq"),_=0;_<m.length;_++){var T=this._asn1ToNoticeRef(m[_]);T!=null&&(C.noticeref=T);var E=this.asn1ToDisplayText(m[_]);E!=null&&(C.exptext=E)}return Object.keys(C).length>0?C:void 0}catch{return}},this._asn1ToNoticeRef=function(x){try{for(var C={},m=Ds(x,"seq"),_=0;_<m.length;_++){var T=this._asn1ToNoticeNum(m[_]);T!=null&&(C.noticenum=T);var E=this.asn1ToDisplayText(m[_]);E!=null&&(C.org=E)}return Object.keys(C).length>0?C:void 0}catch{return}},this._asn1ToNoticeNum=function(x){try{for(var C=Ds(x,"seq"),m=[],_=0;_<C.length;_++){var T=C[_];m.push(parseInt(Ds(T,"int.hex"),16))}return m}catch{return}},this.getDisplayText=function(x){var C={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},m={};return m.type=C[x.substr(0,2)],m.str=Nn(r(x,0)),m},this.asn1ToDisplayText=function(x){if(x.utf8str!=null)return{type:"utf8",str:x.utf8str.str};if(x.ia5str!=null)return{type:"ia5",str:x.ia5str.str};if(x.visstr!=null)return{type:"vis",str:x.visstr.str};if(x.bmpstr!=null)return{type:"bmp",str:x.bmpstr.str};if(x.prnstr!=null)return{type:"prn",str:x.prnstr.str}},this.getExtPolicyMappings=function(x,C){var m=this.getCriticalExtV("policyMappings",x,C);if(x=m[0],C=m[1],x!=null){var _={extname:"policyMappings"};C&&(_.critical=!0);try{for(var T=i(x),E=T.seq,R=[],D=0;D<E.length;D++){var $=E[D].seq;R.push([$[0].oid,$[1].oid])}_.array=R}catch{throw new w("malformed policyMappings")}return _}},this.getExtPolicyConstraints=function(x,C){var m=this.getCriticalExtV("policyConstraints",x,C);if(x=m[0],C=m[1],x!=null){var _={extname:"policyConstraints"};C&&(_.critical=!0);var T=i(x);try{for(var E=T.seq,R=0;R<E.length;R++){var D=E[R].tag;D.explicit==!1&&(D.tag=="80"&&(_.reqexp=parseInt(D.hex,16)),D.tag=="81"&&(_.inhibit=parseInt(D.hex,16)))}}catch{return new w("malformed policyConstraints value")}return _}},this.getExtInhibitAnyPolicy=function(x,C){var m=this.getCriticalExtV("inhibitAnyPolicy",x,C);if(x=m[0],C=m[1],x!=null){var _={extname:"inhibitAnyPolicy"};C&&(_.critical=!0);var T=h(x,0);return T==-1?new w("wrong value"):(_.skip=T,_)}},this.getExtCRLNumber=function(x,C){var m={extname:"cRLNumber"};if(C&&(m.critical=!0),x.substr(0,2)=="02")return m.num={hex:r(x,0)},m;throw new w("hExtV parse error: "+x)},this.getExtCRLReason=function(x,C){var m={extname:"cRLReason"};if(C&&(m.critical=!0),x.substr(0,2)=="0a")return m.code=parseInt(r(x,0),16),m;throw new Error("hExtV parse error: "+x)},this.getExtOcspNonce=function(x,C){var m={extname:"ocspNonce"};C&&(m.critical=!0);var _=r(x,0);return m.hex=_,m},this.getExtOcspNoCheck=function(x,C){var m={extname:"ocspNoCheck"};return C&&(m.critical=!0),m},this.getExtAdobeTimeStamp=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("adobeTimeStamp");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"adobeTimeStamp"};C&&(_.critical=!0);var T=n(x,0);if(T.length>1){var E=s(x,T[1]),R=this.getGeneralName(E);R.uri!=null&&(_.uri=R.uri)}if(T.length>2){var D=s(x,T[2]);D=="0101ff"&&(_.reqauth=!0),D=="010100"&&(_.reqauth=!1)}return _},this.getExtSubjectDirectoryAttributes=function(x,C){if(x===void 0&&C===void 0){var m=this.getExtInfo("subjectDirectoryAttributes");if(m===void 0)return;x=s(this.hex,m.vidx),C=m.critical}var _={extname:"subjectDirectoryAttributes"};C&&(_.critical=!0);try{for(var T=i(x),E=[],R=0;R<T.seq.length;R++){var D=T.seq[R],$=Ds(D,"seq.0.oid"),M=Ds(D,"seq.1.set");if($==null||M==null)throw"error";E.push({attr:$,array:M})}return _.array=E,_}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var A=function(x){var C={};try{var m=x.seq[0].oid,_=S.asn1.x509.OID.name2oid(m);C.type=S.asn1.x509.OID.oid2atype(_);var T=x.seq[1];if(T.utf8str!=null)C.ds="utf8",C.value=T.utf8str.str;else if(T.numstr!=null)C.ds="num",C.value=T.numstr.str;else if(T.telstr!=null)C.ds="tel",C.value=T.telstr.str;else if(T.prnstr!=null)C.ds="prn",C.value=T.prnstr.str;else if(T.ia5str!=null)C.ds="ia5",C.value=T.ia5str.str;else if(T.visstr!=null)C.ds="vis",C.value=T.visstr.str;else if(T.bmpstr!=null)C.ds="bmp",C.value=T.bmpstr.str;else throw"error";return C}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},I=function(x){try{return x.set.map(function(C){return A(C)})}catch(C){throw new Error("improper ASN.1 parsed RDN: "+C)}},k=function(x){try{return x.seq.map(function(C){return I(C)})}catch(C){throw new Error("improper ASN.1 parsed X500Name: "+C)}};this.getX500NameRule=function(x){for(var C=null,m=[],_=0;_<x.length;_++)for(var T=x[_],E=0;E<T.length;E++)m.push(T[E]);for(var _=0;_<m.length;_++){var R=m[_],D=R.ds,$=R.value,M=R.type;if(D!="prn"&&D!="utf8"&&D!="ia5")return"mixed";if(D=="ia5"){if(M!="CN")return"mixed";if(S.lang.String.isMail($))continue;return"mixed"}if(M=="C"){if(D=="prn")continue;return"mixed"}if(C==null)C=D;else if(C!==D)return"mixed"}return C??"prn"},this.getAttrTypeAndValue=function(x){var C=i(x);return A(C)},this.getRDN=function(x){var C=i(x);return I(C)},this.getX500NameArray=function(x){var C=i(x);return k(C)},this.getX500Name=function(x,C,m){var _=this.getX500NameArray(x),T=this.dnarraytostr(_),E={str:T};return E.array=_,m==!0&&(E.hex=x),C==!0&&(E.canon=this.c14nRDNArray(_)),E},this.readCertPEM=function(x){this.readCertHex(p(x))},this.readCertHex=function(x){this.hex=x,this.getVersion();try{f(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(x){var C={};return x==null&&(x={}),C.version=this.getVersion(),C.serial={hex:this.getSerialNumberHex()},C.sigalg=this.getSignatureAlgorithmField(),C.issuer=this.getIssuer(x.dncanon,x.dnhex),C.notbefore=this.getNotBefore(),C.notafter=this.getNotAfter(),C.subject=this.getSubject(x.dncanon,x.dnhex),C.sbjpubkey=mn(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(C.ext=this.getExtParamArray()),C.sighex=this.getSignatureValueHex(),x.tbshex==!0&&(C.tbshex=l(this.hex,0,[0])),x.nodnarray==!0&&(delete C.issuer.array,delete C.subject.array),C},this.getExtParamArray=function(x){if(x==null){var C=c(this.hex,0,[0,"[3]"]);C!=-1&&(x=u(this.hex,0,[0,"[3]",0],"30"))}for(var m=[],_=n(x,0),T=0;T<_.length;T++){var E=s(x,_[T]),R=this.getExtParam(E);R!=null&&m.push(R)}return m},this.getExtParam=function(x){var C=n(x,0),m=C.length;if(m!=2&&m!=3)throw new Error("wrong number elements in Extension: "+m+" "+x);var _=v(a(x,0,[0],"06")),T=!1;m==3&&l(x,0,[1])=="0101ff"&&(T=!0);var E=l(x,0,[m-1,0]),R=void 0;if(_=="2.5.29.14"?R=this.getExtSubjectKeyIdentifier(E,T):_=="2.5.29.15"?R=this.getExtKeyUsage(E,T):_=="2.5.29.17"?R=this.getExtSubjectAltName(E,T):_=="2.5.29.18"?R=this.getExtIssuerAltName(E,T):_=="2.5.29.19"?R=this.getExtBasicConstraints(E,T):_=="2.5.29.30"?R=this.getExtNameConstraints(E,T):_=="2.5.29.31"?R=this.getExtCRLDistributionPoints(E,T):_=="2.5.29.32"?R=this.getExtCertificatePolicies(E,T):_=="2.5.29.33"?R=this.getExtPolicyMappings(E,T):_=="2.5.29.35"?R=this.getExtAuthorityKeyIdentifier(E,T):_=="2.5.29.36"?R=this.getExtPolicyConstraints(E,T):_=="2.5.29.37"?R=this.getExtExtKeyUsage(E,T):_=="2.5.29.54"?R=this.getExtInhibitAnyPolicy(E,T):_=="1.3.6.1.5.5.7.1.1"?R=this.getExtAuthorityInfoAccess(E,T):_=="2.5.29.20"?R=this.getExtCRLNumber(E,T):_=="2.5.29.21"?R=this.getExtCRLReason(E,T):_=="2.5.29.9"?R=this.getExtSubjectDirectoryAttributes(E,T):_=="1.3.6.1.5.5.7.48.1.2"?R=this.getExtOcspNonce(E,T):_=="1.3.6.1.5.5.7.48.1.5"?R=this.getExtOcspNoCheck(E,T):_=="1.2.840.113583.1.1.9.1"?R=this.getExtAdobeTimeStamp(E,T):Xe.EXT_PARSER[_]!=null&&(R=Xe.EXT_PARSER[_](_,T,E)),R!=null)return R;var D={extname:_,extn:E};try{D.extn=i(E)}catch{}return T&&(D.critical=!0),D},this.findExt=function(x,C){for(var m=0;m<x.length;m++)if(x[m].extname==C)return x[m];return null},this.updateExtCDPFullURI=function(x,C){var m=this.findExt(x,"cRLDistributionPoints");if(m!=null&&m.array!=null){for(var _=m.array,T=0;T<_.length;T++)if(_[T].dpname!=null&&_[T].dpname.full!=null)for(var E=_[T].dpname.full,R=0;R<E.length;R++){var D=E[T];D.uri!=null&&(D.uri=C)}}},this.updateExtAIAOCSP=function(x,C){var m=this.findExt(x,"authorityInfoAccess");if(m!=null&&m.array!=null)for(var _=m.array,T=0;T<_.length;T++)_[T].ocsp!=null&&(_[T].ocsp=C)},this.updateExtAIACAIssuer=function(x,C){var m=this.findExt(x,"authorityInfoAccess");if(m!=null&&m.array!=null)for(var _=m.array,T=0;T<_.length;T++)_[T].caissuer!=null&&(_[T].caissuer=C)},this.dnarraytostr=function(x){function C(_){return _.map(function(T){return m(T).replace(/\+/,"\\+")}).join("+")}function m(_){return _.type+"="+_.value}return"/"+x.map(function(_){return C(_).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(x){var C;if(x.str!=null&&x.array==null){var m=new S.asn1.x509.X500Name({str:x.str}),_=m.tohex();C=this.getX500NameArray(_)}else C=x.array;x.canon==null&&(x.canon=this.c14nRDNArray(C))},this.c14nRDNArray=function(x){for(var C=[],m=0;m<x.length;m++){for(var _=x[m],T=[],E=0;E<_.length;E++){var R=_[E],D=R.value;D=D.replace(/^\s*/,""),D=D.replace(/\s*$/,""),D=D.replace(/\s+/g," "),D=D.toLowerCase(),T.push(R.type.toLowerCase()+"="+D)}C.push(T.join("+"))}return"/"+C.join("/")},this.getInfo=function(){var x=function(le){for(var B="",K="    ",z=`
`,se=le.array,Ee=0;Ee<se.length;Ee++){var V=se[Ee];if(V.dn!=null&&(B+=K+"dn: "+V.dn.str+z),V.ip!=null&&(B+=K+"ip: "+V.ip+z),V.rfc822!=null&&(B+=K+"rfc822: "+V.rfc822+z),V.dns!=null&&(B+=K+"dns: "+V.dns+z),V.uri!=null&&(B+=K+"uri: "+V.uri+z),V.other!=null){var H=V.other.oid,G=JSON.stringify(V.other.value).replace(/\"/g,"");B+=K+"other: "+H+"="+G+z}}return B=B.replace(/\n$/,""),B},C=function(le){for(var B="",K=le.array,z=0;z<K.length;z++){var se=K[z];if(B+="    policy oid: "+se.policyoid+`
`,se.array!==void 0)for(var Ee=0;Ee<se.array.length;Ee++){var V=se.array[Ee];V.cps!==void 0&&(B+="    cps: "+V.cps+`
`)}}return B},m=function(le){for(var B="",K=le.array,z=0;z<K.length;z++){var se=K[z];try{se.dpname.full[0].uri!==void 0&&(B+="    "+se.dpname.full[0].uri+`
`)}catch{}try{se.dname.full[0].dn.hex!==void 0&&(B+="    "+Xe.hex2dn(se.dpname.full[0].dn.hex)+`
`)}catch{}}return B},_=function(le){for(var B="",K=le.array,z=0;z<K.length;z++){var se=K[z];se.caissuer!==void 0&&(B+="    caissuer: "+se.caissuer+`
`),se.ocsp!==void 0&&(B+="    ocsp: "+se.ocsp+`
`)}return B},T,E,R;if(T=`Basic Fields
`,T+="  serial number: "+this.getSerialNumberHex()+`
`,T+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,T+="  issuer: "+this.getIssuerString()+`
`,T+="  notBefore: "+this.getNotBefore()+`
`,T+="  notAfter: "+this.getNotAfter()+`
`,T+="  subject: "+this.getSubjectString()+`
`,T+=`  subject public key info: 
`,E=this.getPublicKey(),T+="    key algorithm: "+E.type+`
`,E.type==="RSA"&&(T+="    n="+lg(E.n.toString(16)).substr(0,16)+`...
`,T+="    e="+lg(E.e.toString(16))+`
`),R=this.aExtInfo,R!=null){T+=`X509v3 Extensions:
`;for(var D=0;D<R.length;D++){var $=R[D],M=S.asn1.x509.OID.oid2name($.oid);M===""&&(M=$.oid);var O="";if($.critical===!0&&(O="CRITICAL"),T+="  "+M+" "+O+`:
`,M==="basicConstraints"){var L=this.getExtBasicConstraints();L.cA===void 0?T+=`    {}
`:(T+="    cA=true",L.pathLen!==void 0&&(T+=", pathLen="+L.pathLen),T+=`
`)}else if(M=="policyMappings"){var W=this.getExtPolicyMappings().array,te=W.map(function(le){var B=le;return B[0]+":"+B[1]}).join(", ");T+="    "+te+`
`}else if(M=="policyConstraints"){var ie=this.getExtPolicyConstraints();T+="    ",ie.reqexp!=null&&(T+=" reqexp="+ie.reqexp),ie.inhibit!=null&&(T+=" inhibit="+ie.inhibit),T+=`
`}else if(M=="inhibitAnyPolicy"){var ie=this.getExtInhibitAnyPolicy();T+="    skip="+ie.skip+`
`}else if(M=="keyUsage")T+="    "+this.getExtKeyUsageString()+`
`;else if(M=="subjectKeyIdentifier")T+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(M=="authorityKeyIdentifier"){var Q=this.getExtAuthorityKeyIdentifier();Q.kid!==void 0&&(T+="    kid="+Q.kid.hex+`
`)}else if(M=="extKeyUsage"){var ee=this.getExtExtKeyUsage().array;T+="    "+ee.join(", ")+`
`}else if(M=="subjectAltName"){var ye=x(this.getExtSubjectAltName());T+=ye+`
`}else if(M=="cRLDistributionPoints"){var we=this.getExtCRLDistributionPoints();T+=m(we)}else if(M=="authorityInfoAccess"){var $e=this.getExtAuthorityInfoAccess();T+=_($e)}else M=="certificatePolicies"&&(T+=C(this.getExtCertificatePolicies()))}}return T+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,T+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,T},typeof e=="string"&&(e.indexOf("-----BEGIN")!=-1?this.readCertPEM(e):S.lang.String.isHex(e)&&this.readCertHex(e))}Xe.EXT_PARSER={};Xe.registExtParser=function(e,t){Xe.EXT_PARSER[e]=t};Xe.hex2dn=function(e,t){t===void 0&&(t=0);var n=new Xe;Te.getTLV(e,t);var r=n.getX500Name(e);return r.str};Xe.hex2rdn=function(e,t){if(t===void 0&&(t=0),e.substr(t,2)!=="31")throw new Error("malformed RDN");for(var n=new Array,r=Te.getChildIdx(e,t),i=0;i<r.length;i++)n.push(Xe.hex2attrTypeValue(e,r[i]));return n=n.map(function(s){return s.replace("+","\\+")}),n.join("+")};Xe.hex2attrTypeValue=function(e,t){var n=Te,r=n.getV;if(t===void 0&&(t=0),e.substr(t,2)!=="30")throw new Error("malformed attribute type and value");var i=n.getChildIdx(e,t);i.length!==2||e.substr(i[0],2);var s=r(e,i[0]),a=S.asn1.ASN1Util.oidHexToInt(s),o=S.asn1.x509.OID.oid2atype(a),l=r(e,i[1]),u=Nn(l);return o+"="+u};Xe.getPublicKeyFromCertHex=function(e){var t=new Xe;return t.readCertHex(e),t.getPublicKey()};Xe.getPublicKeyFromCertPEM=function(e){var t=new Xe;return t.readCertPEM(e),t.getPublicKey()};Xe.getPublicKeyInfoPropOfCertPEM=function(e){var t=Te,n=t.getVbyList,r={},i,s;return r.algparam=null,i=new Xe,i.readCertPEM(e),s=i.getPublicKeyHex(),r.keyhex=n(s,0,[1],"03").substr(2),r.algoid=n(s,0,[0,0],"06"),r.algoid==="2a8648ce3d0201"&&(r.algparam=n(s,0,[0,1],"06")),r};Xe.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Q3=function(e){var t=S,n=t.lang.String.isHex,r=Te,i=r.getV,s=r.getTLV,a=r.getVbyList,o=r.getTLVbyList,l=r.getTLVbyListEx,u=r.getIdxbyList,f=r.getIdxbyListEx,c=r.getChildIdx,d=new Xe;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var h=u(this.hex,0,[0,0]),g=this.hex.substr(h,2);if(g=="02")this.posSigAlg=1;else if(g=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+g);var v=u(this.hex,0,[0,this.posSigAlg+3]),p=this.hex.substr(v,2);if(p=="17"||p=="18"){var y,w;y=u(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,y!=-1&&(w=this.hex.substr(y,2),w=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(p=="30")this.posRevCert=this.posSigAlg+3;else if(p=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+p)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(a(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var h=o(this.hex,0,[0,this.posSigAlg],"30");return d.getAlgorithmIdentifierName(h)},this.getIssuer=function(){return d.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return o(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var h=a(this.hex,0,[0,this.posSigAlg+2]);return result=Nn(h)},this.getNextUpdate=function(){var h=u(this.hex,0,[0,this.posSigAlg+3]),g=this.hex.substr(h,2);return g!="17"&&g!="18"?null:Nn(i(this.hex,h))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var h=[],g=u(this.hex,0,[0,this.posRevCert]),v=c(this.hex,g),p=0;p<v.length;p++){var y=s(this.hex,v[p]);h.push(this.getRevCert(y))}return h},this.getRevCert=function(h){var g={},v=c(h,0);return g.sn={hex:a(h,0,[0],"02")},g.date=Nn(a(h,0,[1])),v.length==3&&(g.ext=d.getExtParamArray(o(h,0,[2]))),g},this.findRevCert=function(h){var g=new Xe(h),v=g.getSerialNumberHex();return this.findRevCertBySN(v)},this.findRevCertBySN=function(h){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var g=this.parsed.revcert,v=0;v<g.length;v++)if(h==g[v].sn.hex)return g[v];return null},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(h){var g=this.getSignatureAlgorithmField(),v=this.getSignatureValueHex(),p=o(this.hex,0,[0],"30"),y=new S.crypto.Signature({alg:g});return y.init(h),y.updateHex(p),y.verify(v)},this.getParam=function(h){var g={},v=this.getVersion();v!=null&&(g.version=v),g.sigalg=this.getSignatureAlgorithmField(),g.issuer=this.getIssuer(),g.thisupdate=this.getThisUpdate();var p=this.getNextUpdate();p!=null&&(g.nextupdate=p);var y=this.getRevCertArray();y!=null&&(g.revcert=y);var w=f(this.hex,0,[0,"[0]"]);if(w!=-1){var A=l(this.hex,0,[0,"[0]",0]);g.ext=d.getExtParamArray(A)}return g.sighex=this.getSignatureValueHex(),this.parsed=g,typeof h=="object"&&(h.tbshex==!0&&(g.tbshex=o(this.hex,0,[0])),h.nodnarray==!0&&delete g.issuer.array),g},typeof e=="string"&&(n(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=en(e)),this._setPos())};(typeof S>"u"||!S)&&(S={});(typeof S.jws>"u"||!S.jws)&&(S.jws={});S.jws.JWS=function(){var e=S,t=e.jws.JWS,n=t.isSafeJSONString;this.parseJWS=function(r,i){if(!(this.parsedJWS!==void 0&&(i||this.parsedJWS.sigvalH!==void 0))){var s=r.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(s==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var a=s[1],o=s[2],l=s[3],u=a+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=a,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=l,this.parsedJWS.si=u,!i){var f=$t(l),c=Dn(f,16);this.parsedJWS.sigvalH=f,this.parsedJWS.sigvalBI=c}var d=Hr(a),h=Hr(o);if(this.parsedJWS.headS=d,this.parsedJWS.payloadS=h,!n(d,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+d}}};S.jws.JWS.sign=function(e,t,n,r,i){var s=S,a=s.jws,o=a.JWS,l=o.readSafeJSONString,u=o.isSafeJSONString,f=s.crypto;f.ECDSA;var c=f.Mac,d=f.Signature,h=JSON,g,v,p;if(typeof t!="string"&&typeof t!="object")throw"spHeader must be JSON string or object: "+t;if(typeof t=="object"&&(v=t,g=h.stringify(v)),typeof t=="string"){if(g=t,!u(g))throw"JWS Head is not safe JSON string: "+g;v=l(g)}if(p=n,typeof n=="object"&&(p=h.stringify(n)),(e==""||e==null)&&v.alg!==void 0&&(e=v.alg),e!=""&&e!=null&&v.alg===void 0&&(v.alg=e,g=h.stringify(v)),e!==v.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+v.alg;var y=null;if(o.jwsalg2sigalg[e]===void 0)throw"unsupported alg name: "+e;y=o.jwsalg2sigalg[e];var w=Cl(g),A=Cl(p),I=w+"."+A,k="";if(y.substr(0,4)=="Hmac"){if(r===void 0)throw"mac key shall be specified for HS* alg";var x=new c({alg:y,prov:"cryptojs",pass:r});x.updateString(I),k=x.doFinal()}else if(y.indexOf("withECDSA")!=-1){var C=new d({alg:y});C.init(r,i),C.updateString(I);var m=C.sign();k=S.crypto.ECDSA.asn1SigToConcatSig(m)}else if(y!="none"){var C=new d({alg:y});C.init(r,i),C.updateString(I),k=C.sign()}var _=un(k);return I+"."+_};S.jws.JWS.verify=function(e,t,n){var r=S,i=r.jws,s=i.JWS,a=s.readSafeJSONString,o=r.crypto,l=o.ECDSA,u=o.Mac,f=o.Signature,c;if(typeof Ye!==void 0&&(c=Ye),!dm(e))return!1;var d=e.split(".");if(d.length!==3)return!1;var h=d[0],g=d[1],v=h+"."+g,p=$t(d[2]),y=a(Hr(d[0])),w=null,A=null;if(y.alg===void 0)throw"algorithm not specified in header";if(w=y.alg,A=w.substr(0,2),n!=null&&Object.prototype.toString.call(n)==="[object Array]"&&n.length>0){var I=":"+n.join(":")+":";if(I.indexOf(":"+w+":")==-1)throw"algorithm '"+w+"' not accepted in the list"}if(w!="none"&&t===null)throw"key shall be specified to verify.";if(typeof t=="string"&&t.indexOf("-----BEGIN ")!=-1&&(t=St.getKey(t)),(A=="RS"||A=="PS")&&!(t instanceof c))throw"key shall be a RSAKey obj for RS* and PS* algs";if(A=="ES"&&!(t instanceof l))throw"key shall be a ECDSA obj for ES* algs";var k=null;if(s.jwsalg2sigalg[y.alg]===void 0)throw"unsupported alg name: "+w;if(k=s.jwsalg2sigalg[w],k=="none")throw"not supported";if(k.substr(0,4)=="Hmac"){var x=null;if(t===void 0)throw"hexadecimal key shall be specified for HMAC";var C=new u({alg:k,pass:t});return C.updateString(v),x=C.doFinal(),p==x}else if(k.indexOf("withECDSA")!=-1){var m=null;try{m=l.concatSigToASN1Sig(p)}catch{return!1}var _=new f({alg:k});return _.init(t),_.updateString(v),_.verify(m)}else{var _=new f({alg:k});return _.init(t),_.updateString(v),_.verify(p)}};S.jws.JWS.parse=function(e){var t=e.split("."),n={},r,i,s;if(t.length!=2&&t.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return r=t[0],i=t[1],t.length==3&&(s=t[2]),n.headerObj=S.jws.JWS.readSafeJSONString(Hr(r)),n.payloadObj=S.jws.JWS.readSafeJSONString(Hr(i)),n.headerPP=JSON.stringify(n.headerObj,null,"  "),n.payloadObj==null?n.payloadPP=Hr(i):n.payloadPP=JSON.stringify(n.payloadObj,null,"  "),s!==void 0&&(n.sigHex=$t(s)),n};S.jws.JWS.verifyJWT=function(e,t,n){var r=S,i=r.jws,s=i.JWS,a=s.readSafeJSONString,o=s.inArray,l=s.includedArray;if(!dm(e))return!1;var u=e.split(".");if(u.length!=3)return!1;var f=u[0],c=u[1];$t(u[2]);var d=a(Hr(f)),h=a(Hr(c));if(d.alg===void 0)return!1;if(n.alg===void 0)throw"acceptField.alg shall be specified";if(!o(d.alg,n.alg)||h.iss!==void 0&&typeof n.iss=="object"&&!o(h.iss,n.iss)||h.sub!==void 0&&typeof n.sub=="object"&&!o(h.sub,n.sub))return!1;if(h.aud!==void 0&&typeof n.aud=="object"){if(typeof h.aud=="string"){if(!o(h.aud,n.aud))return!1}else if(typeof h.aud=="object"&&!l(h.aud,n.aud))return!1}var g=i.IntDate.getNow();return n.verifyAt!==void 0&&typeof n.verifyAt=="number"&&(g=n.verifyAt),(n.gracePeriod===void 0||typeof n.gracePeriod!="number")&&(n.gracePeriod=0),!(h.exp!==void 0&&typeof h.exp=="number"&&h.exp+n.gracePeriod<g||h.nbf!==void 0&&typeof h.nbf=="number"&&g<h.nbf-n.gracePeriod||h.iat!==void 0&&typeof h.iat=="number"&&g<h.iat-n.gracePeriod||h.jti!==void 0&&n.jti!==void 0&&h.jti!==n.jti||!s.verify(e,t,n.alg))};S.jws.JWS.includedArray=function(e,t){var n=S.jws.JWS.inArray;if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t))return!1;return!0};S.jws.JWS.inArray=function(e,t){if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1};S.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};S.jws.JWS.isSafeJSONString=function(e,t,n){var r=null;try{return r=Yw(e),typeof r!="object"||r.constructor===Array?0:(t&&(t[n]=r),1)}catch{return 0}};S.jws.JWS.readSafeJSONString=function(e){var t=null;try{return t=Yw(e),typeof t!="object"||t.constructor===Array?null:t}catch{return null}};S.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(t==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]};S.jws.JWS.getJWKthumbprint=function(e){if(e.kty!=="RSA"&&e.kty!=="EC"&&e.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var t="{";if(e.kty==="RSA"){if(typeof e.n!="string"||typeof e.e!="string")throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if(e.kty==="EC"){if(typeof e.crv!="string"||typeof e.x!="string"||typeof e.y!="string")throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if(e.kty==="oct"){if(typeof e.k!="string")throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=Rr(t),r=S.crypto.Util.hashHex(n,"sha256"),i=un(r);return i};S.jws.IntDate={};S.jws.IntDate.get=function(e){var t=S.jws.IntDate,n=t.getNow,r=t.getZulu;if(e=="now")return n();if(e=="now + 1hour")return n()+60*60;if(e=="now + 1day")return n()+60*60*24;if(e=="now + 1month")return n()+60*60*24*30;if(e=="now + 1year")return n()+60*60*24*365;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e};S.jws.IntDate.getZulu=function(e){return Qw(e)};S.jws.IntDate.getNow=function(){var e=~~(new Date/1e3);return e};S.jws.IntDate.intDate2UTCString=function(e){var t=new Date(e*1e3);return t.toUTCString()};S.jws.IntDate.intDate2Zulu=function(e){var t=new Date(e*1e3),n=("0000"+t.getUTCFullYear()).slice(-4),r=("00"+(t.getUTCMonth()+1)).slice(-2),i=("00"+t.getUTCDate()).slice(-2),s=("00"+t.getUTCHours()).slice(-2),a=("00"+t.getUTCMinutes()).slice(-2),o=("00"+t.getUTCSeconds()).slice(-2);return n+r+i+s+a+o+"Z"};(typeof S>"u"||!S)&&(S={});(typeof S.jws>"u"||!S.jws)&&(S.jws={});S.jws.JWSJS=function(){var e=S,t=e.jws,n=t.JWS,r=n.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(i){this.init();var s=i.split(".");if(s.length!=3)throw"malformed input JWS";this.aHeader.push(s[0]),this.sPayload=s[1],this.aSignature.push(s[2])},this.addSignature=function(i,s,a,o){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var l=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var u=S.jws.JWS.sign(i,s,this.sPayload,a,o),f=u.split("."),c=f[0],d=f[2];this.aHeader.push(f[0]),this.aSignature.push(f[2])}catch(h){throw this.aHeader.length>l&&this.aHeader.pop(),this.aSignature.length>l&&this.aSignature.pop(),"addSignature failed: "+h}},this.verifyAll=function(i){if(this.aHeader.length!==i.length||this.aSignature.length!==i.length)return!1;for(var s=0;s<i.length;s++){var a=i[s];if(a.length!==2)return!1;var o=this.verifyNth(s,a[0],a[1]);if(o===!1)return!1}return!0},this.verifyNth=function(i,s,a){if(this.aHeader.length<=i||this.aSignature.length<=i)return!1;var o=this.aHeader[i],l=this.aSignature[i],u=o+"."+this.sPayload+"."+l,f=!1;try{f=n.verify(u,s,a)}catch{return!1}return f},this.readJWSJS=function(i){if(typeof i=="string"){var s=r(i);if(s==null)throw"argument is not safe JSON object string";this.aHeader=s.headers,this.sPayload=s.payload,this.aSignature=s.signatures}else try{if(i.headers.length>0)this.aHeader=i.headers;else throw"malformed header";if(typeof i.payload=="string")this.sPayload=i.payload;else throw"malformed signatures";if(i.signatures.length>0)this.aSignature=i.signatures;else throw"malformed signatures"}catch(a){throw"malformed JWS-JS JSON object: "+a}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};Pe.SecureRandom=bs;Pe.rng_seed_time=am;Pe.BigInteger=X;Pe.RSAKey=Ye;Pe.ECDSA=S.crypto.ECDSA;Pe.DSA=S.crypto.DSA;Pe.Signature=S.crypto.Signature;Pe.MessageDigest=S.crypto.MessageDigest;Pe.Mac=S.crypto.Mac;Pe.Cipher=S.crypto.Cipher;Pe.KEYUTIL=St;Pe.ASN1HEX=Te;Pe.X509=Xe;Pe.X509CRL=Q3;Pe.CryptoJS=je;Pe.b64tohex=bo;Pe.b64toBA=Uw;Pe.ECFieldElementFp=hn;Pe.ECPointFp=_t;Pe.ECCurveFp=ji;Pe.stoBA=Jw;Pe.BAtos=Xw;Pe.BAtohex=Cd;Pe.stohex=Qn;Pe.stob64=F3;Pe.stob64u=O3;Pe.b64utos=N3;Pe.b64tob64u=no;Pe.b64utob64=Yl;Pe.hex2b64=ki;Pe.hextob64u=un;Pe.b64utohex=$t;Pe.utf8tob64u=Cl;Pe.b64utoutf8=Hr;Pe.utf8tob64=$3;Pe.b64toutf8=M3;Pe.utf8tohex=Ed;Pe.hextoutf8=Et;Pe.hextorstr=Nn;Pe.rstrtohex=Rr;Pe.hextob64=om;Pe.hextob64nl=L3;Pe.b64nltohex=Zw;Pe.hextopem=mn;Pe.pemtohex=en;Pe.hextoArrayBuffer=q3;Pe.ArrayBuffertohex=U3;Pe.zulutomsec=lm;Pe.msectozulu=z3;Pe.zulutosec=Qw;Pe.zulutodate=K3;Pe.datetozulu=G3;Pe.uricmptohex=Ad;Pe.hextouricmp=Id;Pe.ipv6tohex=ag;Pe.hextoipv6=og;Pe.hextoip=yc;Pe.iptohex=um;Pe.ucs2hextoutf8=cm;Pe.encodeURIComponentAll=Rd;Pe.newline_toUnix=W3;Pe.newline_toDos=Y3;Pe.hextoposhex=lg;Pe.intarystrtohex=J3;Pe.strdiffidx=X3;Pe.oidtohex=nx;Pe.hextooid=kd;Pe.strpad=bc;Pe.bitstrtoint=rx;Pe.inttobitstr=ix;Pe.bitstrtobinstr=sx;Pe.binstrtobitstr=Z3;Pe.isBase64URLDot=dm;Pe.namearraytobinstr=Sc;Pe.extendClass=pe;Pe.foldnl=Td;Pe.b64topem=H3;Pe.pemtob64=j3;Pe.timeogen=ex;Pe.aryval=Ds;Pe.KJUR=S;Pe.crypto=S.crypto;Pe.asn1=S.asn1;Pe.jws=S.jws;Pe.lang=S.lang;Pe.VERSION=tF;Pe.VERSION_FULL=nF;var fm={};Object.defineProperty(fm,"__esModule",{value:!0});const e8=`-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmkXOuNfY8u5xoTiIhkb8
djnbIwG/Wrz3vpo8BZir8L5e1a1nSy740qBjP7ZINBQoALDhFfmdOfJnCyEGiHuz
ZW6jbG6C3PryE3Bu6GKwqSmD6k3q4Zk27fpwYAnNl+rWhYYM563rJZBda/INyHNN
pK7M1mixWi7gNdjjXwoEXSSBx+VpYMkY6LiAB2mvHXTY9M1qI14dvgGoQISZQoKi
NMTRCg5UP2ic0Dd9nSz/XpcOxGfa+0fwIl1F7RC1tJXOqvkGGPTOV4LLfg/Yta3h
nUPX9EZZDIX6vO/0IBV1LzjSl2A1bYFYAjJfowv3i1CpvONBOClHjSY5t9Y8MH6p
BwIDAQAB
-----END PUBLIC KEY-----`;fm.default=e8;var hm={},Pd={},gm={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.default=(e,t)=>{const n={};return Object.getOwnPropertyNames(e).forEach(r=>{n[r]=e[r]}),new t(n)};var t8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gm,"__esModule",{value:!0});const n8=t8(kn);class _c{static parse(t){return new _c({id:t.id,extensions:t.extensions,endpointCustom:t.endpoint_custom||null,endpointSccp:t.endpoint_sccp||null,endpointSip:t.endpoint_sip||null})}static newFrom(t){return(0,n8.default)(t,_c)}is(t){return t?this.id===t.id:!1}hasExtension(t){return this.extensions?this.extensions.some(n=>n.exten===t):!1}constructor({id:t,extensions:n,endpointCustom:r,endpointSccp:i,endpointSip:s}={}){this.id=t,this.extensions=n,this.endpointCustom=r||null,this.endpointSccp=i||null,this.endpointSip=s||null,this.type="Line"}}gm.default=_c;var Jl={},r8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.FORWARD_KEYS=void 0;const i8=r8(kn);Jl.FORWARD_KEYS={BUSY:"busy",NO_ANSWER:"noanswer",UNCONDITIONAL:"unconditional"};class wc{static parse(t,n){return new wc({destination:t.destination||"",enabled:t.enabled,key:n})}static newFrom(t){return(0,i8.default)(t,wc)}constructor({destination:t,enabled:n,key:r}={}){this.destination=t,this.enabled=n,this.key=r}setDestination(t){return this.destination=t,this}setEnabled(t){return this.enabled=t,this}is(t){return this.key===t.key}}Jl.default=wc;(function(e){var t=Y&&Y.__createBinding||(Object.create?function(u,f,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(f,c);(!h||("get"in h?!f.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return f[c]}}),Object.defineProperty(u,d,h)}:function(u,f,c,d){d===void 0&&(d=c),u[d]=f[c]}),n=Y&&Y.__setModuleDefault||(Object.create?function(u,f){Object.defineProperty(u,"default",{enumerable:!0,value:f})}:function(u,f){u.default=f}),r=Y&&Y.__importStar||function(u){if(u&&u.__esModule)return u;var f={};if(u!=null)for(var c in u)c!=="default"&&Object.prototype.hasOwnProperty.call(u,c)&&t(f,u,c);return n(f,u),f},i=Y&&Y.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.LINE_STATE=e.STATE=void 0;const s=i(gm),a=r(Jl),o=i(kn);e.STATE={AVAILABLE:"available",UNAVAILABLE:"unavailable",INVISIBLE:"invisible",DISCONNECTED:"disconnected",AWAY:"away"},e.LINE_STATE={AVAILABLE:"available",HOLDING:"holding",RINGING:"ringing",TALKING:"talking",UNAVAILABLE:"unavailable",PROGRESSING:"progressing"};class l{static parse(f){return new l({id:f.uuid,firstName:f.firstName||f.firstname||"",lastName:f.lastName||f.lastname||"",email:f.email,lines:f.lines.map(c=>s.default.parse(c)),username:f.username,mobileNumber:f.mobile_phone_number||"",ringSeconds:f.ring_seconds,forwards:[a.default.parse(f.forwards.unconditional,a.FORWARD_KEYS.UNCONDITIONAL),a.default.parse(f.forwards.noanswer,a.FORWARD_KEYS.NO_ANSWER),a.default.parse(f.forwards.busy,a.FORWARD_KEYS.BUSY)],doNotDisturb:f.services.dnd.enabled,subscriptionType:f.subscription_type,voicemail:f.voicemail,switchboards:f.switchboards||[],agent:f.agent,status:"",callPickupTargetUsers:f.call_pickup_target_users||[],onlineCallRecordEnabled:f.online_call_record_enabled})}static newFrom(f){return(0,o.default)(f,l)}constructor({id:f,firstName:c,lastName:d,email:h,lines:g,username:v,mobileNumber:p,forwards:y,doNotDisturb:w,state:A,subscriptionType:I,voicemail:k,switchboards:x,agent:C,status:m,ringSeconds:_,sipLines:T,callPickupTargetUsers:E,onlineCallRecordEnabled:R}){this.id=f,this.firstName=c,this.lastName=d,this.email=h,this.lines=g,this.username=v,this.mobileNumber=p,this.forwards=y,this.doNotDisturb=w,this.state=A,this.voicemail=k,this.subscriptionType=I,this.switchboards=x,this.agent=C,this.status=m,this.callPickupTargetUsers=E,this.onlineCallRecordEnabled=R,this.ringSeconds=_,this.sipLines=T||[]}static getLinesState(f){let c=e.LINE_STATE.UNAVAILABLE;for(const d of f){if(d.state===e.LINE_STATE.RINGING){c=e.LINE_STATE.RINGING;break}if(d.state===e.LINE_STATE.TALKING){c=e.LINE_STATE.TALKING;break}d.state===e.LINE_STATE.AVAILABLE&&(c=e.LINE_STATE.AVAILABLE)}return c}hasId(f){return f===this.id}setMobileNumber(f){return this.mobileNumber=f,this}setForwardOption(f){const c=this.forwards.slice(),d=c.findIndex(h=>h.is(f));return c.splice(d,1,f),this.forwards=c,this}setDoNotDisturb(f){return this.doNotDisturb=f,this}setState(f){return this.state=f,this}}e.default=l})(Pd);(function(e){var t=Y&&Y.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.BACKEND=void 0;const n=Pd,r=t(kn);e.BACKEND={OFFICE365:"office365",PERSONAL:"personal",GOOGLE:"google",WAZO:"wazo",CONFERENCE:"conference",PHONEBOOK:"phonebook"};const i="mobile";class s{static merge(o,l){return l.map(u=>{const f=o.find(c=>c&&c.is(u));return f?u.merge(f):u})}static sortContacts(o,l){const u=o.separateName(),f=l.separateName(),c=u.lastName,d=f.lastName;return c===d?u.firstName.localeCompare(f.firstName):c.localeCompare(d)}static parseMany(o,l=0,u=null){return!o||!o.results||u===0?[]:(u!==null&&u>0?o.results.slice(l,u):l>0?o.results.slice(l):o.results).map(c=>s.parse(c,o.column_types))}static manyGraphQlWithNumbersParser(o){return l=>!l.data||!l.data.me||!l.data.me.contacts?[]:l.data.me.contacts.edges.map((u,f)=>{if(!u.node)return null;const{email:c}=u.node,d=u.node.firstname&&u.node.lastname?`${u.node.firstname||""} ${u.node.lastname||""}`:u.node.wazoReverse;return new s({name:d,number:o[f],numbers:[{label:"primary",number:o[f]}],backend:u.node.wazoBackend,source:u.node.wazoSourceName,sourceId:u.node.wazoSourceEntryId||"",email:c||"",emails:c?[{label:"primary",email:c}]:[],uuid:u.node.userUuid})}).filter(u=>!!u)}static fetchNumbers(o,l){const u=l.map((f,c)=>({index:c,columnName:f})).filter(f=>f.columnName==="number"||f.columnName==="callable").map(f=>f.index);return o.column_values.filter((f,c)=>u.some(d=>d===c)&&f!==null)}static parse(o,l){const u=s.fetchNumbers(o,l),f=o.column_values[l.indexOf("email")];return new s({name:o.column_values[l.indexOf("name")],number:u.length?u[0]:"",numbers:u.map((c,d)=>({label:d===0?"primary":"secondary",number:c})),favorited:o.column_values[l.indexOf("favorite")],email:f||"",emails:f?[{label:"primary",email:f}]:[],entreprise:o.column_values[l.indexOf("entreprise")]||"",birthday:o.column_values[l.indexOf("birthday")]||"",address:o.column_values[l.indexOf("address")]||"",note:o.column_values[l.indexOf("note")]||"",endpointId:o.relations.endpoint_id,personal:o.column_values[l.indexOf("personal")],source:o.source,sourceId:o.relations.source_entry_id||"",uuid:o.relations.user_uuid,backend:o.backend||""})}static parseManyPersonal(o){return o.map(l=>s.parsePersonal(l))}static parsePersonal(o){return new s({name:`${o.firstName||o.firstname||""} ${o.lastName||o.lastname||""}`,number:o.number||"",numbers:o.number?[{label:"primary",number:o.number}]:[],email:o.email||"",emails:o.email?[{label:"primary",email:o.email}]:[],source:"personal",sourceId:o.id||"",entreprise:o.entreprise||"",birthday:o.birthday||"",address:o.address||"",note:o.note||"",favorited:o.favorited,personal:!0,backend:o.backend||e.BACKEND.PERSONAL})}static parseMobile(o){let l="";if(o.postalAddresses.length){const g=o.postalAddresses[0];l=`${g.street} ${g.city} ${g.postCode} ${g.country}`}const u=o.givenName||"",f=o.familyName||"",c=o.company||"",h=!u&&!f?c:`${u} ${f}`;return new s({name:h,number:o.phoneNumbers.length?o.phoneNumbers[0].number:"",numbers:[...new Map(o.phoneNumbers.map(g=>[g.number,g])).values()].map((g,v)=>({label:v===0?"primary":"secondary",number:g.number})),email:o.emailAddresses.length?o.emailAddresses[0].email:"",emails:o.emailAddresses.length?[{label:"primary",email:o.emailAddresses[0].email}]:[],source:i,sourceId:o.recordID||"",birthday:o.birthday?`${o.birthday.year}-${o.birthday.month}-${o.birthday.day}`:"",address:l,note:o.note||"",favorited:!1,personal:!0})}static parseManyOffice365(o,l){return o.map(u=>s.parseOffice365(u,l))}static parseOffice365(o,l){const u=[],f=[];return o.emailAddresses&&o.emailAddresses.map(c=>u.push({email:c.address})),o.businessPhones&&o.businessPhones.map(c=>f.push({label:"business",number:c})),o.mobilePhone&&f.push({label:"mobile",number:o.mobilePhone}),o.homePhones&&o.homePhones.map(c=>f.push({label:"home",number:c})),new s({sourceId:o.id||"",name:o.displayName||"",number:f.length?f[0].number:"",numbers:f,emails:u,source:l.name,backend:e.BACKEND.OFFICE365})}static parseManyGoogle(o,l){return o.map(u=>s.parseGoogle(u,l))}static parseGoogle(o,l){const u=[],f=[];return o.emails&&o.emails.forEach(c=>typeof c=="object"?{email:c.address,label:c.label}:{email:c}),o.numbers_by_label?Object.keys(o.numbers_by_label).forEach(c=>f.push({label:c,number:o.numbers_by_label[c]})):o.numbers&&o.numbers.forEach(c=>f.push({number:c})),new s({sourceId:o.id||"",name:o.name||"",number:f.length?f[0].number:"",numbers:f,emails:u,source:l.name,backend:e.BACKEND.GOOGLE})}static parseManyWazo(o,l){return o.map(u=>s.parseWazo(u,l))}static parseWazo(o,l){const u=[],f=[];return o.email&&u.push({label:"email",email:o.email}),o.exten&&f.push({label:"exten",number:o.exten}),o.mobile_phone_number&&f.push({label:"mobile",number:o.mobile_phone_number}),new s({uuid:o.uuid,sourceId:String(o.id)||"",name:`${o.firstname}${o.lastname?` ${o.lastname}`:""}`,number:f.length?f[0].number:"",numbers:f,emails:u,source:l.name,backend:e.BACKEND.WAZO})}static parseManyConference(o,l){return o.map(u=>s.parseConference(u,l))}static parseConference(o,l){const u=[];let f="";return o&&o.extensions&&o.extensions.length>0&&o.extensions[0].exten&&(f=o.extensions[0].exten,u.push({label:"exten",number:f})),new s({sourceId:String(o.id),name:o.name,number:f,numbers:u,source:l.name,backend:e.BACKEND.CONFERENCE})}static newFrom(o){return(0,r.default)(o,s)}constructor({id:o,uuid:l,name:u,number:f,numbers:c,email:d,emails:h,source:g,sourceId:v,entreprise:p,birthday:y,address:w,note:A,state:I,lineState:k,lastActivity:x,mobile:C,status:m,endpointId:_,personal:T,favorited:E,backend:R,personalStatus:D,sessions:$,connected:M,doNotDisturb:O,ringing:L,previousPresential:W,lines:te}={}){this.id=o,this.uuid=l,this.name=u||"",this.number=f,this.numbers=c,this.email=d,this.emails=h,this.source=g,this.sourceId=v,this.entreprise=p,this.birthday=y,this.address=w,this.note=A,this.state=I,this.lineState=k,this.lastActivity=x,this.mobile=C,this.status=m,this.endpointId=_,this.personal=T,this.favorited=E,this.backend=R,this.personalStatus=D||"",this.sessions=$||[],this.connected=M,this.doNotDisturb=O,this.ringing=L,this.previousPresential=W,this.lines=te||[],this.type="Contact"}setFavorite(o){return this.favorited=o,this}is(o){const l=this.sourceId!==null&&o.sourceId!==null&&this.sourceId===o.sourceId,u=!!this.uuid&&!!o.uuid&&this.uuid===o.uuid,f=l||u,c=!!this.backend&&!!o.backend&&this.backend===o.backend,d=!!this.source&&!!o.source&&this.source===o.source;return!!o&&f&&c&&d}hasId(o){return this.uuid===o}hasNumber(o){return this.number===o}hasEndpointId(o){return this.endpointId===o}isAvailable(){return this.state===n.STATE.AVAILABLE}isAway(){return this.state===n.STATE.AWAY}isUnavailable(){return this.state===n.STATE.UNAVAILABLE}isInvisible(){return this.state===n.STATE.INVISIBLE}isInCall(){return this.lineState===n.LINE_STATE.TALKING||this.lineState===n.LINE_STATE.HOLDING}isRinging(){return this.ringing}isInUseOrRinging(){return this.lineState===n.LINE_STATE.TALKING||this.lineState===n.LINE_STATE.RINGING}isProgressing(){return this.lineState===n.LINE_STATE.PROGRESSING}merge(o){return Object.keys(o).filter(l=>l!=="lineState").forEach(l=>{this[l]=o[l]||this[l]}),o.lineState&&(this.lineState=o.lineState),this}isIntern(){return!!this.uuid}hasSourceId(){return!!this.sourceId}isCallable(o){return!!this.number&&!!o&&!o.is(this)}isFromMobile(){return this.source===i}isFavorite(){return this.favorited}separateName(){if(!this.name)return{firstName:"",lastName:""};const o=this.name.split(/\s+/),l=o[0],u=o.slice(1).join(" ");return{firstName:l,lastName:u}}}e.default=s})(hm);var vm={};Object.defineProperty(vm,"__esModule",{value:!0});const s8=(e,t)=>{let n,r;const i=/(\.0+)+$/,s=e.replace(i,"").split("."),a=t.replace(i,"").split("."),o=Math.min(s.length,a.length);for(n=0;n<o;n++)if(r=parseInt(s[n],10)-parseInt(a[n],10),r)return r;return s.length-a.length};vm.default=s8;var Dd=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nm,"__esModule",{value:!0});const mm=Pe,a8=Dd(fm),o8=Dd(hm),l8=Dd(kn),u8=Dd(vm),{jws:wy}=mm.KJUR,c8=mm.KEYUTIL.getKey(a8.default),d8="19.08";class xc{static parse(t){var n,r;const i=t.data.metadata?t.data.metadata.jwt:null;let s=[];if(i&&wy.JWS.verifyJWT(i,c8,{alg:["RS256"],verifyAt:new Date})){const o=wy.JWS.readSafeJSONString((0,mm.b64utoutf8)(i.split(".")[1]));s=o?o.authorizations:[]}return new xc({token:t.data.token,refreshToken:t.data.refresh_token||null,uuid:t.data.metadata?t.data.metadata.uuid:null,sessionUuid:t.data.session_uuid,authorizations:s,acl:t.data.acls?t.data.acls:t.data.acl?t.data.acl:[],tenantUuid:t.data.metadata?t.data.metadata.tenant_uuid:void 0,expiresAt:new Date(`${t.data.utc_expires_at}z`),stackUuid:t.data.xivo_uuid,stackHostFromHeader:(r=(n=t._headers)===null||n===void 0?void 0:n.get)===null||r===void 0?void 0:r.call(n,"wazo-stack-host")})}static newFrom(t){return(0,l8.default)(t,xc)}constructor({token:t,uuid:n,tenantUuid:r,profile:i,expiresAt:s,authorizations:a,acl:o,engineVersion:l,refreshToken:u,sessionUuid:f,stackUuid:c,stackHostFromHeader:d=void 0}){this.token=t,this.uuid=n,this.tenantUuid=r||null,this.profile=i,this.expiresAt=s,this.authorizations=a||[],this.acl=o||[],this.engineVersion=l,this.refreshToken=u,this.sessionUuid=f,this.stackUuid=c,this._stackHostFromHeader=d}hasExpired(t=new Date){return t>=this.expiresAt}is(t){return!!t&&this.uuid===t.uuid}using(t){return this.profile=t,this}hasAuthorizations(){return this.authorizations&&!!this.authorizations.length}displayName(){return this.profile?`${this.profile.firstName} ${this.profile.lastName}`:""}hasAccessToVoicemail(){return this.profile?!!this.profile.voicemail:!1}primaryLine(){return this.profile&&this.profile.lines.length>0?this.profile.lines[0]:null}primarySipLine(){return this.profile&&this.profile.sipLines.length>0?this.profile.sipLines[0]:null}primaryWebRtcLine(){return this.profile&&(this.profile.sipLines||[]).find(t=>t&&t.isWebRtc())}primaryCtiLine(){return this.profile&&(this.profile.sipLines||[]).find(t=>t&&!t.isWebRtc())}getContact(){if(this.contact)return this.contact;const{email:t,firstName:n,lastName:r,mobileNumber:i,state:s,status:a}=this.profile||{},o=this.primaryNumber()||"",l=[{label:"primary",number:o}];return i&&l.push({label:"mobile",number:i}),new o8.default({uuid:this.uuid||"",email:t,name:`${n} ${r}`,number:o,numbers:l,state:s||"",status:a,backend:"wazo",source:"default"})}primaryContext(){if(this.engineVersion&&this.hasEngineVersionGte(d8))return"default";const t=this.primaryLine();return t&&Array.isArray(t.extensions)&&t.extensions.length>0?t.extensions[0].context:"default"}hasEngineVersionGte(t){return this.engineVersion&&(0,u8.default)(String(this.engineVersion),String(t))>=0}primaryNumber(){const t=this.primaryLine();return t&&Array.isArray(t.extensions)&&t.extensions.length?t.extensions[0].exten:null}allLines(){return this.profile?this.profile.lines||[]:[]}allNumbers(){const t=this.allLines().map(n=>{var r;return((r=n.extensions)===null||r===void 0?void 0:r.map(i=>i.exten))||[]});return t.length?t.reduce((n,r)=>n.concat(r)):[]}hasExtension(t){return this.allNumbers().some(n=>n===t)}getHostFromHeader(){return this._stackHostFromHeader}get acls(){return console.warn("`acls` property of Session has been removed in Wazo's SDK, please use `acl` instead."),this.acl}get engineUuid(){return console.warn("`engineUuid` property of Session has been removed in Wazo's SDK, please use `stackUuid` instead."),this.stackUuid}toJSON(){return Object.assign(Object.assign({},this),{engineUuid:this.engineUuid})}}nm.default=xc;(function(e){var t=Y&&Y.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.DETAULT_EXPIRATION=e.BACKEND_LDAP_USER=e.DEFAULT_BACKEND_USER=void 0;const n=t(gi()),r=t(nm);e.DEFAULT_BACKEND_USER="wazo_user",e.BACKEND_LDAP_USER="ldap_user",e.DETAULT_EXPIRATION=3600,e.default=(i,s)=>({checkToken:a=>i.head(`${s}/token/${a}`,null,{}),authenticate:a=>i.get(`${s}/token/${a}`,null,{}).then(o=>r.default.parse(o)),logIn(a){const o={backend:a.backend||e.DEFAULT_BACKEND_USER,expiration:a.expiration||e.DETAULT_EXPIRATION},l={Authorization:`Basic ${n.default.base64Encode(`${a.username}:${a.password}`)}`,"Content-Type":"application/json"};return i.clientId&&(o.access_type="offline",o.client_id=i.clientId),a.mobile&&(l["Wazo-Session-Type"]="mobile"),a.tenantId&&(console.warn("Use of `tenantId` is deprecated when calling logIn() method, use `domainName` instead."),o.tenant_id=a.tenantId),a.domainName&&(o.domain_name=a.domainName),i.post(`${s}/token`,o,l).then(u=>r.default.parse(u))},logOut:a=>i.delete(`${s}/token/${a}`,null,{},n.default.successResponseParser),refreshToken:(a,o,l,u,f,c)=>{const d={backend:o||e.DEFAULT_BACKEND_USER,expiration:l||e.DETAULT_EXPIRATION,refresh_token:a,client_id:i.clientId};f&&(console.warn("Use of `tenantId` is deprecated when calling refreshToken() method, use `domainName` instead."),d.tenant_id=f),c&&(d.domain_name=c);const h=Object.assign({"Content-Type":"application/json"},u?{"Wazo-Session-Type":"mobile"}:{});return i.post(`${s}/token`,d,h,n.default.defaultParser,!1).then(r.default.parse)},deleteRefreshToken:a=>i.delete(`${s}/users/me/tokens/${a}`,null,null,n.default.successResponseParser),updatePassword:(a,o,l)=>{const u={new_password:l,old_password:o};return i.put(`${s}/users/${a}/password`,u,null,n.default.successResponseParser)},sendDeviceToken:(a,o,l,u)=>{const f={token:o};return l&&(f.apns_token=l,f.apns_voip_token=l),u&&(f.apns_notification_token=u),i.post(`${s}/users/${a}/external/mobile`,f)},getPushNotificationSenderId:a=>i.get(`${s}/users/${a}/external/mobile/sender_id`,null).then(o=>o.sender_id),sendResetPasswordEmail:({username:a,email:o})=>{const l={};return a&&(l.username=a),o&&(l.email=o),i.get(`${s}/users/password/reset`,l,{},n.default.successResponseParser)},resetPassword:(a,o)=>{const l={password:o};return i.post(`${s}/users/password/reset?user_uuid=${a}`,l,null,n.default.successResponseParser)},removeDeviceToken:a=>i.delete(`${s}/users/${a}/external/mobile`),createUser:(a,o,l,u)=>{const f={username:a,password:o,firstname:l,lastname:u};return i.post(`${s}/users`,f)},addUserEmail:(a,o,l)=>{const u={emails:[{address:o,main:l}]};return i.put(`${s}/users/${a}/emails`,u)},addUserPolicy:(a,o)=>i.put(`${s}/users/${a}/policies/${o}`),getRestrictionPolicies:a=>i.post(`${s}/token/${i.token}/scopes/check`,{scopes:a}),deleteUserPolicy:(a,o)=>i.delete(`${s}/users/${a}/policies/${o}`),addUserGroup:(a,o)=>i.put(`${s}/groups/${o}/users/${a}`),listUsersGroup:a=>i.get(`${s}/groups/${a}/users`),deleteUserGroup:(a,o)=>i.delete(`${s}/groups/${o}/users/${a}`),getUser:a=>i.get(`${s}/users/${a}`),getUserSession:a=>i.get(`${s}/users/${a}/sessions`),deleteUserSession:(a,o)=>i.delete(`${s}/users/${a}/sessions/${o}`),listUsers:()=>i.get(`${s}/users`),deleteUser:a=>i.delete(`${s}/users/${a}`),listTenants:()=>i.get(`${s}/tenants`),getTenant:a=>i.get(`${s}/tenants/${a}`),createTenant:a=>i.post(`${s}/tenants`,{name:a}),updateTenant:(a,o,l,u,f)=>{const c={name:o,contact:l,phone:u,address:f};return i.put(`${s}/tenants/${a}`,c)},deleteTenant:a=>i.delete(`${s}/tenants/${a}`),createGroup:a=>i.post(`${s}/groups`,{name:a}),listGroups:()=>i.get(`${s}/groups`),deleteGroup:a=>i.delete(`${s}/groups/${a}`),createPolicy:(a,o,l)=>{const u={name:a,description:o,acl_templates:l,acl:l};return i.post(`${s}/policies`,u)},listPolicies:()=>i.get(`${s}/policies`),deletePolicy:a=>i.delete(`${s}/policies/${a}`),getProviders:a=>i.get(`${s}/users/${a}/external`),getProviderToken:(a,o)=>i.get(`${s}/users/${a}/external/${o}`),getProviderAuthUrl:(a,o)=>i.post(`${s}/users/${a}/external/${o}`,{}),deleteProviderToken:(a,o)=>i.delete(`${s}/users/${a}/external/${o}`)})})(jw);var pm={},f8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pm,"__esModule",{value:!0});const yr=f8(gi());pm.default=(e,t)=>({bridgeCall(n,r,i,s,a,o){const l=`${t}/${n}/nodes`,u={calls:[{id:r}]};return e.post(l,u,null,f=>f.json().then(c=>c.uuid)).then(f=>e.post(`${l}/${f}/calls`,{context:i,exten:s,autoanswer:a,displayed_caller_id_number:o}).then(c=>({nodeUuid:f,data:c})))},answerCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/answer`,{},null,yr.default.successResponseParser),calls:n=>e.get(`${t}/${n}/calls`),hangupCall:(n,r)=>e.delete(`${t}/${n}/calls/${r}`),startPlaybackCall:(n,r,i,s)=>e.post(`${t}/${n}/calls/${r}/playbacks`,{language:i,uri:s}),stopPlaybackCall:(n,r)=>e.delete(`${t}/${n}/playbacks/${r}`),startProgressCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/progress/start`,{},null,yr.default.successResponseParser),stopProgressCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/progress/stop`,{},null,yr.default.successResponseParser),startMohCall:(n,r,i)=>e.put(`${t}/${n}/calls/${r}/moh/${i}/start`,{},null,yr.default.successResponseParser),stopMohCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/moh/stop`,{},null,yr.default.successResponseParser),startHoldCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/hold/start`,{},null,yr.default.successResponseParser),stopHoldCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/hold/stop`,{},null,yr.default.successResponseParser),startMuteCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/mute/start`,{},null,yr.default.successResponseParser),stopMuteCall:(n,r)=>e.put(`${t}/${n}/calls/${r}/mute/stop`,{},null,yr.default.successResponseParser),sendDTMFCall:(n,r,i)=>e.put(`${t}/${n}/calls/${r}/dtmf`,{digits:i},null,yr.default.successResponseParser),addCallNodes:(n,r,i)=>e.put(`${t}/${n}/nodes/${r}/calls/${i}`,{},null,yr.default.successResponseParser),createNewNodeWithCall:(n,r)=>e.post(`${t}/${n}/nodes`,{calls:r}),addNewCallNodes:(n,r,i,s,a)=>e.post(`${t}/${n}/nodes/${r}/calls`,{context:i,exten:s,autoanswer:a}),listCallsNodes:(n,r)=>e.get(`${t}/${n}/nodes/${r}`),listNodes:n=>e.get(`${t}/${n}/nodes`),removeNode:(n,r)=>e.delete(`${t}/${n}/nodes/${r}`),removeCallNodes:(n,r,i)=>e.delete(`${t}/${n}/nodes/${r}/calls/${i}`),listSnoop:n=>e.get(`${t}/${n}/snoops`),removeSnoop:(n,r)=>e.delete(`${t}/${n}/snoops/${r}`),viewSnoop:(n,r)=>e.get(`${t}/${n}/snoops/${r}`),createSnoop:(n,r,i,s)=>e.post(`${t}/${n}/calls/${r}/snoops`,{snooping_call_id:i,whisper_mode:s}),updateSnoop:(n,r,i)=>e.put(`${t}/${n}/snoops/${r}`,{whisper_mode:i},null,yr.default.successResponseParser)});var ym={},bm={},h8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bm,"__esModule",{value:!0});const g8=h8(kn),v8=["vp8","vp9","h264"];class Cc{static parse(t){let{username:n,secret:r,host:i}=t;if(t.auth_section_options){const s=(u,f)=>u.find(c=>c[0]===f),a=s(t.auth_section_options,"username"),o=s(t.auth_section_options,"password"),l=s(t.endpoint_section_options,"media_address");n=a?a[1]:"",r=o?o[1]:"",i=l?l[1]:""}return new Cc({id:t.id,uuid:t.uuid,tenantUuid:t.tenant_uuid,username:n,secret:r,type:t.type,host:i,options:t.options,endpointSectionOptions:t.endpoint_section_options,links:t.links,trunk:t.trunk,line:t.line})}static newFrom(t){return(0,g8.default)(t,Cc)}is(t){return t.uuid?this.uuid===t.uuid:this.id===t.id}getOptions(){return this.endpointSectionOptions||this.options||[]}isWebRtc(){return this.getOptions().some(t=>t[0]==="webrtc"&&t[1]==="yes")}hasVideo(){const t=this.getOptions().find(n=>n[0]==="allow");return Array.isArray(t)&&t[1].split(",").some(n=>v8.some(r=>r===n))}hasVideoConference(){return this.getOptions().some(t=>t[0]==="max_audio_streams"&&parseInt(t[1],10)>0)&&this.getOptions().some(t=>t[0]==="max_video_streams"&&parseInt(t[1],10)>1)}constructor({id:t,uuid:n,tenantUuid:r,username:i,secret:s,type:a,host:o,options:l,endpointSectionOptions:u,links:f,trunk:c,line:d}){this.id=t,this.uuid=n,this.tenantUuid=r,this.username=i,this.secret=s,this.type=a,this.host=o,this.options=l,this.endpointSectionOptions=u,this.links=f,this.trunk=c,this.line=d,this.type="SipLine"}}bm.default=Cc;var Sm={},m8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sm,"__esModule",{value:!0});const p8=m8(kn);class Qo{static parse(t){return new Qo({name:t.name,configuration:t.configuration})}static parseMany(t){return t.items.map(n=>Qo.parse(n))}static newFrom(t){return(0,p8.default)(t,Qo)}constructor({name:t,configuration:n}={}){this.name=t,this.configuration=n,this.type="ExternalApp"}}Sm.default=Qo;var _m={},ux=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_m,"__esModule",{value:!0});const y8=ux(aa),b8=ux(kn);let S8=class Wu{static parse(t){return new Wu({guestSipAuthorization:t.guest_sip_authorization,uri:t.ingress_http_uri,name:t.name,ownerUuids:t.owner_uuids,port:t.port,uuid:t.uuid,extension:t.exten,persistent:t.persistent,creationTime:(0,y8.default)(t.creation_time).toDate(),requireAuthorization:t.require_authorization})}static parseMany(t){return t?t.map(n=>Wu.parse(n)):[]}static newFrom(t){return(0,b8.default)(t,Wu)}constructor({uuid:t,name:n,guestSipAuthorization:r,ownerUuids:i,port:s,uri:a,extension:o,persistent:l,creationTime:u,requireAuthorization:f}={}){this.guestSipAuthorization=r,this.uri=a,this.name=n,this.ownerUuids=i,this.port=s,this.uuid=t,this.extension=o,this.persistent=l,this.creationTime=u,this.requireAuthorization=f,this.type="Meeting"}getGuestSipCredentials(){const[t,n]=Buffer.from(this.guestSipAuthorization,"base64").toString("ascii").split(":");return{username:t,secret:n}}};_m.default=S8;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.POST_PROCESSED_ERROR=Un.POST_PROCESSED_SUCCESS=Un.POST_PROCESSING=Un.REJECTED=Un.ACCEPTED=Un.PENDING=void 0;Un.PENDING="pending";Un.ACCEPTED="accepted";Un.REJECTED="rejected";Un.POST_PROCESSING="post_processing";Un.POST_PROCESSED_SUCCESS="post_processed_success";Un.POST_PROCESSED_ERROR="post_processed_error";class Ec{constructor({meetingUuid:t,uuid:n,userUuid:r,userName:i}={}){this.meetingUuid=t,this.uuid=n,this.userUuid=r,this.userName=i}setStatus(t){this.status=t}getStatus(){return this.status}static parse(t){const{meeting_uuid:n,uuid:r,guest_uuid:i,guest_name:s}=t;return new Ec({meetingUuid:n,uuid:r,userUuid:i,userName:s})}static parseMany(t){return t?t.map(Ec.parse):[]}}Un.default=Ec;var cx={},Fd={};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.camelToUnderscore=void 0;const _8=e=>{if(typeof e!="string")throw new Error("Input is not a string");return e.charAt(0).toLowerCase()+e.substring(1).replace(/([A-Z])/g,"_$1").toLowerCase()};Fd.camelToUnderscore=_8;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertKeysFromCamelToUnderscore=void 0;const t=Fd,n=r=>{if(!r||typeof r!="object"||Array.isArray(r))throw new Error("Input is not an object");return Object.keys(r).reduce((i,s)=>(i[(0,t.camelToUnderscore)(s)]=typeof r[s]=="object"&&!Array.isArray(r[s])?(0,e.convertKeysFromCamelToUnderscore)(r[s]):r[s],i),{})};e.convertKeysFromCamelToUnderscore=n})(cx);var w8=Y&&Y.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{u(r.next(f))}catch(c){a(c)}}function l(f){try{u(r.throw(f))}catch(c){a(c)}}function u(f){f.done?s(f.value):i(f.value).then(o,l)}u((r=r.apply(e,t||[])).next())})},wo=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ym,"__esModule",{value:!0});const Aa=wo(gi()),x8=wo(Pd),C8=wo(bm),xy=wo(Sm),Cu=wo(_m),Cy=wo(Un),Ey=cx;ym.default=(e,t)=>({listUsers:()=>e.get(`${t}/users`,null),getUser:n=>e.get(`${t}/users/${n}`,null).then(x8.default.parse),updateUser:(n,r)=>{const i={firstname:r.firstName,lastname:r.lastName,email:r.email,mobile_phone_number:r.mobileNumber};return e.put(`${t}/users/${n}`,i,null,Aa.default.successResponseParser)},updateForwardOption:(n,r,i,s)=>{const a=`${t}/users/${n}/forwards/${r}`;return e.put(a,{destination:i,enabled:s},null,Aa.default.successResponseParser)},updateDoNotDisturb:(n,r)=>e.put(`${t}/users/${n}/services/dnd`,{enabled:r},null,Aa.default.successResponseParser),getUserLineSip:(n,r)=>e.get(`${t}/users/${n}/lines/${r}/associated/endpoints/sip?view=merged`).then(C8.default.parse),getUserLinesSip(n,r){return Promise.all(r.map(i=>this.getUserLineSip(n,i).catch(()=>null)))},getUserLineSipFromToken(n){return this.getUser(n).then(r=>{if(!r.lines.length)return console.warn(`No sip line for user: ${n}`),null;const i=r.lines[0];return this.getUserLineSip(n,i.uuid||i.id)})},listApplications:()=>e.get(`${t}/applications`,null),getInfos:()=>e.get(`${t}/infos`,null),getExternalApps:n=>e.get(`${t}/users/${n}/external/apps`).then(xy.default.parseMany),getExternalApp:(n,r)=>w8(void 0,void 0,void 0,function*(){const i=`${t}/users/${n}/external/apps/${r}?view=fallback`;try{return yield e.get(i).then(xy.default.parse)}catch{return null}}),getMyMeetings:()=>e.get(`${t}/users/me/meetings`).then(n=>Cu.default.parseMany(n.items)),createMyMeeting:n=>e.post(`${t}/users/me/meetings`,(0,Ey.convertKeysFromCamelToUnderscore)(n)).then(Cu.default.parse),updateMyMeeting:(n,r)=>e.put(`${t}/users/me/meetings/${n}`,(0,Ey.convertKeysFromCamelToUnderscore)(r),null,Aa.default.successResponseParser),deleteMyMeeting:n=>e.delete(`${t}/users/me/meetings/${n}`,null),getMeeting:n=>e.get(`${t}/meetings/${n}`,null).then(Cu.default.parse),meetingAuthorizations:n=>e.get(`${t}/users/me/meetings/${n}/authorizations`,null).then(r=>Cy.default.parseMany(r.items)),meetingAuthorizationReject:(n,r)=>e.put(`${t}/users/me/meetings/${n}/authorizations/${r}/reject`,{},null,Aa.default.successResponseParser),meetingAuthorizationAccept:(n,r)=>e.put(`${t}/users/me/meetings/${n}/authorizations/${r}/accept`,{},null,Aa.default.successResponseParser),guestGetMeeting:n=>e.get(`${t}/guests/me/meetings/${n}`,null).then(Cu.default.parse),guestAuthorizationRequest:(n,r,i)=>e.post(`${t}/guests/${n}/meetings/${r}/authorizations`,{guest_name:i}).then(Cy.default.parse),guestAuthorizationCheck:(n,r,i)=>e.get(`${t}/guests/${n}/meetings/${r}/authorizations/${i}`,null)});var Eu={},Od={};Object.defineProperty(Od,"__esModule",{value:!0});class Nd{static parse(t){return new Nd({initiatorCall:t.initiator_call,recipientCall:t.recipient_call,relocatedCall:t.relocated_call})}constructor({relocatedCall:t,initiatorCall:n,recipientCall:r}){this.initiatorCall=n||"",this.relocatedCall=t||"",this.recipientCall=r||""}}Nd.MIN_ENGINE_VERSION_REQUIRED="19.09";Od.default=Nd;var Xl={},dx=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xl,"__esModule",{value:!0});const E8=dx(aa),T8=dx(kn);class el{static parseMany(t){return!t||!t.items?[]:t.items.map(n=>el.parse(n))}static parse(t){return new el({uuid:t.uuid,date:(0,E8.default)(t.created_at).toDate(),content:t.content,alias:t.alias,userUuid:t.user_uuid,read:!0,roomUuid:t.room?t.room.uuid:null})}static newFrom(t){return(0,T8.default)(t,el)}constructor({uuid:t,date:n,content:r,userUuid:i,alias:s,roomUuid:a,read:o}={}){this.uuid=t,this.date=n,this.content=r,this.userUuid=i,this.alias=s,this.roomUuid=a,this.read=o,this.type="ChatMessage"}is(t){return this.uuid===t.uuid}isIncoming(t){return this.userUuid!==t}acknowledge(){return this.read=!0,this}}Xl.default=el;var $d={},fx=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($d,"__esModule",{value:!0});const A8=fx(aa),I8=fx(kn);let R8=class jo{static parse(t){return new jo({id:t.id,date:(0,A8.default)(t.timestamp*1e3).toDate(),duration:t.duration*1e3,caller:{name:t.caller_id_name,number:t.caller_id_num},unread:t.folder?t.folder.type==="new":null})}static parseMany(t){if(!t)return[];const n=t.folders.filter(a=>a.type==="new")[0].messages,r=t.folders.filter(a=>a.type==="old")[0].messages,i=n.map(a=>jo.parse(a)).map(a=>a.makeAsUnRead()),s=r.map(a=>jo.parse(a)).map(a=>a.acknowledge());return[...i,...s]}static newFrom(t){return(0,I8.default)(t,jo)}constructor({id:t,date:n,duration:r,caller:i,unread:s}){this.id=t,this.date=n,this.duration=r,this.caller=i,this.unread=s,this.type="Voicemail"}is(t){return t&&this.id===t.id}acknowledge(){return this.unread=!1,this}makeAsUnRead(){return this.unread=!0,this}contains(t){return t?this.caller.name.toUpperCase().includes(t.toUpperCase())||this.caller.number.includes(t):!0}};$d.default=R8;var Zl={},hx=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zl,"__esModule",{value:!0});const k8=hx(aa),P8=hx(kn),D8="active";class tl{static parseMany(t){return t?t.map(n=>tl.parse(n)):[]}static parse(t){return new tl({id:t.call_id,sipCallId:t.sip_call_id,callerName:t.caller_id_name,callerNumber:t.caller_id_number,calleeName:t.peer_caller_id_name,calleeNumber:t.peer_caller_id_number,dialedExtension:t.dialed_extension,isCaller:t.is_caller,isVideo:t.is_video,muted:t.muted,onHold:t.on_hold,status:t.status,lineId:t.line_id,startingTime:(0,k8.default)(t.creation_time).toDate(),talkingToIds:Object.keys(t.talking_to||{}),recording:t.record_state===D8})}static newFrom(t){return(0,P8.default)(t,tl)}constructor({id:t,sipCallId:n,callerName:r,callerNumber:i,calleeName:s,calleeNumber:a,dialedExtension:o,isCaller:l,isVideo:u,lineId:f,muted:c,onHold:d,status:h,startingTime:g,talkingToIds:v,recording:p}){this.id=t,this.sipCallId=n,this.callerName=r,this.callerNumber=i,this.calleeName=s,this.calleeNumber=a,this.dialedExtension=o,this.muted=c,this.onHold=d,this.isCaller=l,this.lineId=f,this.status=h,this.startingTime=g,this.talkingToIds=v||[],this.recording=p,this.isVideo=!!u,this.type="Call"}getElapsedTimeInSeconds(){return(Date.now()-+this.startingTime)/1e3}separateCalleeName(){const t=this.calleeName.split(" "),n=t[0],r=t.slice(1).join(" ");return{firstName:n,lastName:r}}is(t){return!!t&&this.id===t.id}hasACalleeName(){return this.calleeName.length>0}hasNumber(t){return this.calleeNumber===t}isUp(){return this.status==="Up"}isDown(){return this.status==="Down"}isRinging(){return this.isRingingIncoming()||this.isRingingOutgoing()}isRingingIncoming(){return this.status==="Ringing"}isRingingOutgoing(){return this.status==="Ring"}isFromTransfer(){return this.status==="Down"||this.status==="Ringing"}isOnHold(){return this.onHold}putOnHold(){this.onHold=!0}resume(){this.onHold=!1}isRecording(){return this.recording}}Zl.default=tl;var ch={},Md={},Vd={};Object.defineProperty(Vd,"__esModule",{value:!0});Vd.default=(e,t)=>{Object.keys(t).forEach(n=>{(!e[n]&&t[n]||typeof e[n]<"u"&&typeof t[n]<"u"&&e[n]!==t[n])&&(e[n]=t[n])})};var gx=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Md,"__esModule",{value:!0});const dh=Pv,F8=gx(kn),O8=gx(Vd);class Tc{constructor({answered:t,answeredBySystem:n,isCaller:r,displayName:i,callId:s,muted:a,videoMuted:o,number:l,paused:u,ringing:f,startTime:c,creationTime:d,endTime:h,cameraEnabled:g,dialedExtension:v,sipCallId:p,sipStatus:y,callerNumber:w,call:A,autoAnswer:I,ignored:k,screensharing:x,recording:C,recordingPaused:m,videoRemotelyDowngraded:_,sipSession:T,answerTime:E,conference:R}){this.callId=s,this.sipCallId=p,this.displayName=i,this.number=l,this.creationTime=d,this.startTime=c,this.endTime=h,this.isCaller=r,this.answered=t,this.answeredBySystem=n,this.ringing=f,this.paused=u,this.muted=a,this.videoMuted=o,this.callerNumber=w,this.cameraEnabled=g,this.dialedExtension=v||"",this.call=A,this.sipStatus=y,this.autoAnswer=I||!1,this.ignored=k||!1,this.screensharing=x||!1,this.recording=C||!1,this.recordingPaused=m||!1,this.videoRemotelyDowngraded=_,this.sipSession=T,this.answerTime=E||this.answerTime,this.conference=R,this.type="CallSession"}resume(){this.paused=!1}hold(){this.paused=!0}mute(){this.muted=!0}unmute(){this.muted=!1}muteVideo(){this.videoMuted=!0}unmuteVideo(){this.videoMuted=!1}answer(){this.answerTime=new Date}systemAnswer(){this.answeredBySystem=!0}enableCamera(){this.cameraEnabled=!0}disableCamera(){this.cameraEnabled=!1}ignore(){this.ignored=!0}startScreenSharing(){this.screensharing=!0}stopScreenSharing(){this.screensharing=!1}setIsConference(t){this.conference=t}isIncoming(){return!this.isCaller&&!this.answered}isOutgoing(){return this.isCaller&&!this.answered}isActive(){return this.answered||this.isOutgoing()}isAnswered(){return this.answered}isAnsweredBySystem(){return this.answeredBySystem}isRinging(){return this.ringing}isOnHold(){return this.paused}isMuted(){return this.muted}isVideoMuted(){return this.videoMuted}isCameraEnabled(){return this.cameraEnabled}isIgnored(){return this.ignored}isScreenSharing(){return this.screensharing}isRecording(){return this.recording}recordingIsPaused(){return this.recordingPaused}hasAnInitialInterceptionNumber(){return this.number.startsWith("*8")}isAnInterception(){return this.dialedExtension.startsWith("*8")}isEstablished(){return this.sipStatus===dh.SessionState.Established}isTerminating(){return this.sipStatus===dh.SessionState.Terminating}isTerminated(){return this.sipStatus===dh.SessionState.Terminated}isConference(){return this.conference}getElapsedTimeInSeconds(){return this.startTime?(Date.now()-this.startTime)/1e3:0}getId(){return this.sipCallId||this.callId}is(t){return t?this.isId(t.sipCallId)||this.isId(t.callId):!1}isId(t){return this.getId()===t||!!this.sipCallId&&this.sipCallId===t||!!this.callId&&this.callId===t}updateFrom(t){(0,O8.default)(this,t)}separateDisplayName(){const t=this.displayName.split(" "),n=t[0],r=t.slice(1).join(" ");return{firstName:n,lastName:r}}getTalkingToIds(){return this.call?this.call.talkingToIds:[]}setVideoRemotelyDowngraded(t){this.videoRemotelyDowngraded=t}isVideoRemotelyDowngraded(){return this.videoRemotelyDowngraded}static newFrom(t){return(0,F8.default)(t,Tc)}set answered(t){this.answerTime=t?this.answerTime||new Date:null}get answered(){return!!this.answerTime}toJSON(){const t=Object.assign({},this);return t.answered=this.answered,t}static parseCall(t){return new Tc({callId:t.id,sipCallId:t.sipCallId,displayName:t.calleeName||t.calleeNumber,number:t.calleeNumber,callerNumber:t.callerNumber,startTime:+t.startingTime,paused:t.isOnHold(),isCaller:t.isCaller,muted:t.muted,videoMuted:!1,screensharing:!1,recording:t.isRecording(),recordingPaused:!1,ringing:t.isRinging(),answered:t.isUp(),answeredBySystem:t.isUp()&&t.talkingToIds.length===0,cameraEnabled:t.isVideo,dialedExtension:t.dialedExtension,call:t,conference:!1})}}Md.default=Tc;var Tu={},yt={},Ty;function N8(){if(Ty)return yt;Ty=1;var e=Y&&Y.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(yt,"__esModule",{value:!0}),yt.getFetchOptions=yt.setFetchOptions=yt.setRequestTimeout=yt.setIsMobile=yt.setRefreshBackend=yt.setRefreshExpiration=yt.setOnRefreshTokenError=yt.setOnRefreshToken=yt.setRefreshDomainName=yt.setRefreshTenantId=yt.setRefreshToken=yt.setApiToken=yt.setCurrentServer=yt.setApiClientId=void 0;const t=e(bx());Y.wazoClients=Y.wazoClients||{},Y.wazoClientId=Y.wazoClientId||{},Y.wazoClientToken=Y.wazoClientToken||{},Y.wazoRefreshToken=Y.wazoRefreshToken||{},Y.wazoRefreshTenantId=Y.wazoRefreshTenantId||{},Y.wazoRefreshDomainName=Y.wazoRefreshDomainName||{},Y.wazoOnRefreshToken=Y.wazoOnRefreshToken||{},Y.wazoOnRefreshTokenError=Y.wazoOnRefreshTokenError||{},Y.wazoRefreshExpiration=Y.wazoRefreshExpiration||{},Y.wazoRefreshBackend=Y.wazoRefreshBackend||{},Y.wazoIsMobile=Y.wazoIsMobile||{},Y.wazoRequestApiTimeout=Y.wazoRequestApiTimeout||{},Y.wazoFetchOptions=Y.wazoFetchOptions||{};const n=(y,w=null)=>{Y.wazoClientId[String(w)]=y};yt.setApiClientId=n;const r=y=>{Y.wazoCurrentServer=y};yt.setCurrentServer=r;const i=(y,w=null)=>{Y.wazoClientToken[String(w)]=y};yt.setApiToken=i;const s=(y,w=null)=>{Y.wazoRefreshToken[String(w)]=y};yt.setRefreshToken=s;const a=(y,w=null)=>{console.warn("Use of `setRefreshTenantId` is deprecated, please use `setRefreshDomainName` instead"),Y.wazoRefreshTenantId[String(w)]=y};yt.setRefreshTenantId=a;const o=(y,w=null)=>{Y.wazoRefreshDomainName[String(w)]=y};yt.setRefreshDomainName=o;const l=(y,w=null)=>{Y.wazoOnRefreshToken[String(w)]=y};yt.setOnRefreshToken=l;const u=(y,w=null)=>{Y.wazoOnRefreshTokenError[String(w)]=y};yt.setOnRefreshTokenError=u;const f=(y,w=null)=>{Y.wazoRefreshExpiration[String(w)]=y};yt.setRefreshExpiration=f;const c=(y,w=null)=>{Y.wazoRefreshBackend[String(w)]=y};yt.setRefreshBackend=c;const d=(y,w=null)=>{Y.wazoIsMobile[String(w)]=y};yt.setIsMobile=d;const h=(y,w=null)=>{Y.wazoRequestApiTimeout[String(w)]=y};yt.setRequestTimeout=h;const g=(y,w=null)=>{Y.wazoFetchOptions[String(w)]=y};yt.setFetchOptions=g;const v=(y=null)=>(y?Y.wazoFetchOptions[y]:Y.wazoFetchOptions.null)||Y.wazoFetchOptions.null;yt.getFetchOptions=v;const p=y=>{const{server:w,token:A,clientId:I}=y.client,k=Y.wazoRefreshTenantId[w]||Y.wazoRefreshTenantId.null||y.refreshTenantId,x=Y.wazoRequestApiTimeout[w]||Y.wazoRequestApiTimeout.null;return y.setToken(Y.wazoClientToken[w]||Y.wazoClientToken.null||A),y.setClientId(Y.wazoClientId[w]||Y.wazoClientId.null||I),y.setRefreshToken(Y.wazoRefreshToken[w]||Y.wazoRefreshToken.null||y.refreshToken),k&&y.setRefreshTenantId(k),y.setRefreshDomainName(Y.wazoRefreshDomainName[w]||Y.wazoRefreshDomainName.null||y.refreshDomainName),y.setFetchOptions(Y.wazoFetchOptions[w]||Y.wazoFetchOptions.null||y.fetchOptions),y.setOnRefreshToken(Y.wazoOnRefreshToken[w]||Y.wazoOnRefreshToken.null||y.onRefreshToken),y.setOnRefreshTokenError(Y.wazoOnRefreshTokenError[w]||Y.wazoOnRefreshTokenError.null||y.onRefreshTokenError),y.setRefreshExpiration(Y.wazoRefreshExpiration[w]||Y.wazoRefreshExpiration.null||y.refreshExpiration),y.setRefreshBackend(Y.wazoRefreshBackend[w]||Y.wazoRefreshBackend.null||y.refreshBackend),y.setIsMobile(Y.wazoIsMobile[w]||Y.wazoIsMobile.null||y.isMobile),x&&y.setRequestTimeout(x),y};return yt.default=(y=null)=>{const w=y||Y.wazoCurrentServer||"";return w in Y.wazoClients||(Y.wazoClients[w]=new t.default({server:w})),p(Y.wazoClients[w])},yt}var Ay;function $8(){if(Ay)return Tu;Ay=1;var e=Y&&Y.__awaiter||function(s,a,o,l){function u(f){return f instanceof o?f:new o(function(c){c(f)})}return new(o||(o=Promise))(function(f,c){function d(v){try{g(l.next(v))}catch(p){c(p)}}function h(v){try{g(l.throw(v))}catch(p){c(p)}}function g(v){v.done?f(v.value):u(v.value).then(d,h)}g((l=l.apply(s,a||[])).next())})},t=Y&&Y.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Tu,"__esModule",{value:!0});const n=t(Zl),r=t(N8());let i=class{static fetchCallLogs(a,o){return e(this,void 0,void 0,function*(){return(0,r.default)().callLogd.listCallLogs(a,o)})}static fetchDistinctCallLogs(a,o,l="peer_exten"){return e(this,void 0,void 0,function*(){return(0,r.default)().callLogd.listDistinctCallLogs(a,o,l)})}static fetchActiveCalls(){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.listCalls()})}static fetchCallLogsFromDate(a,o){return e(this,void 0,void 0,function*(){return(0,r.default)().callLogd.listCallLogsFromDate(a,o)})}static search(a,o){return e(this,void 0,void 0,function*(){return(0,r.default)().callLogd.search(a,o)})}static searchBy(a,o,l){return e(this,void 0,void 0,function*(){return(0,r.default)().callLogd.searchBy(a,o,l)})}static fetchSIP(a,o){return e(this,void 0,void 0,function*(){const l=o||a.primaryLine();return(0,r.default)().confd.getUserLineSip(a.uuid,l?l.id:"")})}static cancelCall(a){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.cancelCall(a.callId)})}static makeCall(a,o,l=!1,u=!1){return e(this,void 0,void 0,function*(){const f=a?a.id:null,c=yield(0,r.default)().calld.makeCall(o,l,f,u);return n.default.parse(c)})}static relocateCall(a,o,l){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.relocateCall(a,"line",o,l)})}static hold(a){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.hold(a)})}static resume(a){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.resume(a)})}static mute(a){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.mute(a)})}static sendDTMF(a,o){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.sendDTMF(a,o)})}static unmute(a){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.unmute(a)})}static transferCall(a,o,l){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.transferCall(a,o,l)})}static cancelCallTransfer(a){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.cancelCallTransfer(a)})}static confirmCallTransfer(a){return e(this,void 0,void 0,function*(){return(0,r.default)().calld.confirmCallTransfer(a)})}};return Tu.default=i,Tu}var Iy;function M8(){return Iy||(Iy=1,function(e){var t=Y&&Y.__awaiter||function(u,f,c,d){function h(g){return g instanceof c?g:new c(function(v){v(g)})}return new(c||(c=Promise))(function(g,v){function p(A){try{w(d.next(A))}catch(I){v(I)}}function y(A){try{w(d.throw(A))}catch(I){v(I)}}function w(A){A.done?g(A.value):h(A.value).then(p,y)}w((d=d.apply(u,f||[])).next())})},n=Y&&Y.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSFER_FLOW_BLIND=e.TRANSFER_FLOW_ATTENDED=void 0;const r=n(Md),i=n(Gl),s=n($8()),a=n(yo());e.TRANSFER_FLOW_ATTENDED="attended",e.TRANSFER_FLOW_BLIND="blind";const o=a.default?a.default.loggerFor("cti-phone"):console;class l extends i.default{constructor(f,c=!1,d=!1){super(),o.info("CTI Phone created"),this.session=f,this.isMobile=c,this.callbackAllLines=d}getOptions(){return{accept:!1,decline:!0,mute:!0,hold:!1,transfer:!0,sendKey:!0,addParticipant:!1,record:!0,merge:!1}}hasAnActiveCall(){return!!this.currentCall}callCount(){return this.currentCall?1:0}isWebRTC(){return!1}getUserAgent(){return"cti-phone"}startHeartbeat(){}setOnHeartbeatTimeout(){}setOnHeartbeatCallback(){}stopHeartbeat(){}bindClientEvents(){}onConnect(){}onDisconnect(){}makeCall(f,c){return t(this,void 0,void 0,function*(){if(o.info("make CTI call",{number:f}),!f)return null;try{this.currentCall=yield s.default.makeCall(c,f,this.isMobile,this.callbackAllLines)}catch{}if(!this.currentCall)return null;const d=r.default.parseCall(this.currentCall);return this.eventEmitter.emit("onCallOutgoing",d),d})}accept(f){return f?(o.info("accept CTI call",{callId:f.getId(),number:f.number}),this.currentCall||(this.currentCall=f.call),Promise.resolve(f.getId())):Promise.resolve(null)}endCurrentCall(f){f&&(o.info("end current CTI call",{callId:f.getId(),number:f.number}),this.currentCall=void 0,this.eventEmitter.emit("onCallEnded",f))}hangup(f){return t(this,void 0,void 0,function*(){if(!f)return Promise.resolve(!1);o.info("hangup CTI call",{callId:f.getId(),number:f.number});try{return yield s.default.cancelCall(f),this.currentCall&&f.callId===this.currentCall.id&&this.endCurrentCall(f),this.eventEmitter.emit("onCallEnded",f),!0}catch(c){return o.error("hangup CTI call, error",c),this.eventEmitter.emit("onCallFailed",f),!1}})}ignore(){}reject(f){return t(this,void 0,void 0,function*(){f&&(o.info("reject CTI call",{callId:f.getId(),number:f.number}),yield s.default.cancelCall(f),this.eventEmitter.emit("onCallEnded",f))})}transfer(f,c){return t(this,void 0,void 0,function*(){f&&(o.info("transfer CTI call",{callId:f.getId(),number:f.number,to:c}),yield s.default.transferCall(f.callId,c,e.TRANSFER_FLOW_BLIND))})}indirectTransfer(){return Promise.resolve(!1)}initiateCTIIndirectTransfer(f,c){return t(this,void 0,void 0,function*(){if(f)return o.info("indirect CTI transfer",{callId:f.getId(),number:f.number,to:c}),s.default.transferCall(f.callId,c,e.TRANSFER_FLOW_ATTENDED)})}cancelCTIIndirectTransfer(f){return t(this,void 0,void 0,function*(){return o.info("cancel CTI transfer",{transferId:f}),s.default.cancelCallTransfer(f)})}confirmCTIIndirectTransfer(f){return t(this,void 0,void 0,function*(){return o.info("confirm CTI transfer",{transferId:f}),s.default.confirmCallTransfer(f)})}sendKey(f,c){f&&(o.info("send CTI key",{callId:f.getId(),number:f.number,digits:c}),s.default.sendDTMF(f.callId,c))}onConnectionMade(){o.info("on CTI connection made"),this.eventEmitter.emit("onCallAccepted")}close(){return t(this,void 0,void 0,function*(){return o.info("CTI close"),Promise.resolve()})}hold(f){return t(this,void 0,void 0,function*(){return f?(o.info("CTI hold",{callId:f.getId(),number:f.number}),s.default.hold(f.callId)):!1})}resume(f){return t(this,void 0,void 0,function*(){return f?(o.info("CTI resume",{callId:f.getId(),number:f.number}),s.default.resume(f.callId)):!1})}mute(f){return t(this,void 0,void 0,function*(){f&&(o.info("CTI mute",{callId:f.getId(),number:f.number}),yield s.default.mute(f.callId))})}unmute(f){return t(this,void 0,void 0,function*(){f&&(o.info("CTI unmute",{callId:f.getId(),number:f.number}),yield s.default.unmute(f.callId))})}putOnSpeaker(){}putOffSpeaker(){}turnCameraOff(){}turnCameraOn(){}changeAudioInputDevice(){return Promise.resolve(null)}changeVideoInputDevice(){return Promise.resolve(null)}changeAudioDevice(){}changeRingDevice(){}changeAudioVolume(){}changeRingVolume(){}hasVideo(){return!1}hasAVideoTrack(){return!1}getLocalStreamForCall(){return null}getRemoteStreamForCall(){return null}getLocalVideoStream(){return null}setActiveSipSession(){}isRegistered(){return!0}hasIncomingCallSession(){return!0}hasActiveRemoteVideoStream(){return!1}getCurrentCallSession(){return this.currentCall?r.default.parseCall(this.currentCall):null}enableRinging(){}sendMessage(){}disableRinging(){}getLocalStream(){return null}getRemoteStream(){return null}getRemoteVideoStream(){return null}getRemoteAudioStream(){return null}hasLocalVideo(){return!1}useLocalVideoElement(){}setMediaConstraints(){}}e.default=l}(ch)),ch}var Ry;function V8(){if(Ry)return Eu;Ry=1;var e=Y&&Y.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Eu,"__esModule",{value:!0});const t=e(gi()),n=e(Od),r=e(Xl),i=e($d),s=e(Zl),a=M8();return Eu.default=(o,l)=>({updatePresence:u=>o.put(`${l}/users/me/presences`,{presence:u},null,t.default.successResponseParser),listMessages:(u,f)=>{const c={};return u&&(c.participant_user_uuid=u),f&&(c.limit=f),o.get(`${l}/users/me/chats`,c).then(r.default.parseMany)},sendMessage:(u,f,c)=>{const d={alias:u,msg:f,to:c};return o.post(`${l}/users/me/chats`,d,null,t.default.successResponseParser)},makeCall:(u,f,c,d=!1)=>{const h={from_mobile:f,extension:u};return c&&(h.line_id=c),d&&(h.all_lines=!0),o.post(`${l}/users/me/calls`,h)},cancelCall:u=>o.delete(`${l}/users/me/calls/${u}`),listCalls:()=>o.get(`${l}/users/me/calls`).then(u=>s.default.parseMany(u.items)),relocateCall(u,f,c,d){const h={completions:["answer"],destination:f,initiator_call:u,auto_answer:!0};return(c||d)&&(h.location={}),c&&(h.location.line_id=c),d&&(h.location.contact=d),o.post(`${l}/users/me/relocates`,h).then(n.default.parse)},transferCall(u,f,c=a.TRANSFER_FLOW_BLIND){const d={exten:f,flow:c,initiator_call:u};return o.post(`${l}/users/me/transfers`,d)},cancelCallTransfer:u=>o.delete(`${l}/users/me/transfers/${u}`),confirmCallTransfer:u=>o.put(`${l}/users/me/transfers/${u}/complete`),listVoicemails:()=>o.get(`${l}/users/me/voicemails`,null).then(u=>i.default.parseMany(u)),deleteVoicemail:u=>o.delete(`${l}/users/me/voicemails/messages/${u}`,null),getPresence:u=>o.get(`${l}/users/${u}/presences`,null),getStatus:u=>o.get(`${l}/lines/${u}/presences`,null),fetchSwitchboardHeldCalls:u=>o.get(`${l}/switchboards/${u}/calls/held`,null),holdSwitchboardCall:(u,f)=>o.put(`${l}/switchboards/${u}/calls/held/${f}`,null,null,t.default.successResponseParser),answerSwitchboardHeldCall:(u,f)=>o.put(`${l}/switchboards/${u}/calls/held/${f}/answer`,null),fetchSwitchboardQueuedCalls:u=>o.get(`${l}/switchboards/${u}/calls/queued`,null),answerSwitchboardQueuedCall:(u,f)=>o.put(`${l}/switchboards/${u}/calls/queued/${f}/answer`,null),sendFax:(u,f,c=null)=>{const d={"Content-type":"application/pdf","X-Auth-Token":o.token},h=t.default.getQueryString({extension:u,caller_id:c});return o.post(`${l}/users/me/faxes?${h}`,f,d)}}),Eu}var wm={},vx={},Bd={};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.EnumType=void 0;var B8=function(){function e(t){this.value=t}return e}();Bd.EnumType=B8;var Ld={};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.VariableType=void 0;var L8=function(){function e(t){this.value=t}return e.prototype.toJSON=function(){return"$".concat(this.value)},e}();Ld.VariableType=L8;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.jsonToGraphQLQuery=e.configFields=void 0;var t=Bd,n=Ld;e.configFields=["__args","__alias","__aliasFor","__variables","__directives","__on","__all_on","__typeName","__name"];function r(c){if(c instanceof t.EnumType)return c.value;if(c instanceof n.VariableType)return"$".concat(c.value);if(typeof c!="object"||c===null)return JSON.stringify(c);if(Array.isArray(c))return"[".concat(c.map(function(h){return r(h)}).join(", "),"]");var d=Object.keys(c).map(function(h){return"".concat(h,": ").concat(r(c[h]))}).join(", ");return"{".concat(d,"}")}function i(c){var d=[];for(var h in c)d.push("".concat(h,": ").concat(r(c[h])));return d.join(", ")}function s(c){var d=[];for(var h in c)d.push("$".concat(h,": ").concat(c[h]));return d.join(", ")}function a(c){var d=Object.keys(c)[0],h=c[d];if(typeof h=="boolean"||typeof h=="object"&&Object.keys(h).length===0)return d;if(typeof h=="object"){var g=[];for(var v in h){var p=r(h[v]).replace(/"/g,"");g.push("".concat(v,": ").concat(p))}return"".concat(d,"(").concat(g.join(", "),")")}else throw new Error("Unsupported type for directive: ".concat(typeof h,`. Types allowed: object, boolean.
`)+"Offending object: ".concat(JSON.stringify(c)))}function o(c){return Array(c*4+1).join(" ")}function l(c,d){return e.configFields.indexOf(c)==-1&&d.indexOf(c)==-1}function u(c,d,h,g){Object.keys(c).filter(function(v){return l(v,g.ignoreFields)}).forEach(function(v){var p=c[v];if(typeof p=="object"){if(Array.isArray(p)&&(p=p.find(function(R){return R&&typeof R=="object"}),!p)){h.push(["".concat(v),d]);return}if(p&&Object.keys(p).filter(function(R){return p[R]!==!1||g.includeFalsyKeys}).length===0)return;var y=Object.keys(p).filter(function(R){return l(R,g.ignoreFields)}).length,w=y>0,A=typeof p.__args=="object"&&Object.keys(p.__args).length>0,I=typeof p.__directives=="object",k=p.__all_on instanceof Array,x=typeof p.__on=="object",C="".concat(v);if(typeof p.__name=="string"&&(C="".concat(C," ").concat(p.__name)),typeof p.__aliasFor=="string"&&(C="".concat(C,": ").concat(p.__aliasFor)),typeof p.__variables=="object"&&Object.keys(p.__variables).length>0)C="".concat(C," (").concat(s(p.__variables),")");else if(A||I){var m="",_="";I&&(_=Object.entries(p.__directives).map(function(R){var D;return"@".concat(a((D={},D[R[0]]=R[1],D)))}).join(" ")),A&&(m="(".concat(i(p.__args),")"));var T=I&&A?" ":"";C="".concat(C," ").concat(m).concat(T).concat(_)}if(h.push([C+(w||x||k?" {":""),d]),u(p,d+1,h,g),k&&p.__all_on.forEach(function(R){h.push(["...".concat(R),d+1])}),x){var E=p.__on instanceof Array?p.__on:[p.__on];E.forEach(function(R){var D=R.__typeName;h.push(["... on ".concat(D," {"),d+1]),u(R,d+2,h,g),h.push(["}",d+1])})}(w||x||k)&&h.push(["}",d])}else(g.includeFalsyKeys===!0||p)&&h.push(["".concat(v),d])})}function f(c,d){if(d===void 0&&(d={}),!c||typeof c!="object")throw new Error("query object not specified");if(Object.keys(c).length==0)throw new Error("query object has no data");d.ignoreFields instanceof Array||(d.ignoreFields=[]);var h=[];u(c,0,h,d);var g="";return h.forEach(function(v){var p=v[0],y=v[1];d.pretty?(g&&(g+=`
`),g+=o(y)+p):(g&&(g+=" "),g+=p)}),g}e.jsonToGraphQLQuery=f})(vx);var mx=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wm,"__esModule",{value:!0});const H8=vx,j8=mx(gi()),br=mx(hm),ky=e=>({email:e.email,firstname:e.firstName?e.firstName:"",lastname:e.lastName?e.lastName:"",number:e.phoneNumber?e.phoneNumber:"",entreprise:e.entreprise?e.entreprise:"",birthday:e.birthday?e.birthday:"",address:e.address?e.address:"",note:e.note?e.note:""});wm.default=(e,t)=>({search:(n,r,i=0,s=null)=>e.get(`${t}/directories/lookup/${n}`,{term:r}).then(a=>br.default.parseMany(a,i,s)),listPersonalContacts:(n=null)=>e.get(`${t}/personal`,n).then(r=>br.default.parseManyPersonal(r.items)),fetchPersonalContact:n=>e.get(`${t}/personal/${n}`).then(br.default.parsePersonal),addContact:n=>e.post(`${t}/personal`,ky(n)).then(br.default.parsePersonal),editContact:n=>e.put(`${t}/personal/${n.sourceId||n.id||""}`,ky(n)).then(br.default.parsePersonal),importContacts:n=>{const r={"Content-Type":"text/csv; charset=utf-8","X-Auth-Token":e.token};return e.post(`${t}/personal/import`,n,r).then(i=>br.default.parseManyPersonal(i.created))},deleteContact:n=>e.delete(`${t}/personal/${n}`),listFavorites:n=>e.get(`${t}/directories/favorites/${n}`).then(br.default.parseMany),markAsFavorite:(n,r)=>{const i=`${t}/directories/favorites/${n}/${r}`;return e.put(i,null,null,j8.default.successResponseParser)},removeFavorite:(n,r)=>e.delete(`${t}/directories/favorites/${n}/${r}`),fetchOffice365Source:n=>e.get(`${t}/directories/${n}/sources`,{backend:"office365"}),fetchOffice365Contacts:(n,r=null)=>n?e.get(`${t}/backends/office365/sources/${n.uuid}/contacts`,r).then(i=>br.default.parseManyOffice365(i.items,n)):null,fetchWazoSource:n=>e.get(`${t}/directories/${n}/sources`,{backend:"wazo"}),fetchWazoContacts:(n,r=null)=>n?e.get(`${t}/backends/wazo/sources/${n.uuid}/contacts`,r).then(i=>br.default.parseManyWazo(i.items,n)):null,fetchGoogleSource:n=>e.get(`${t}/directories/${n}/sources`,{backend:"google"}),fetchGoogleContacts:(n,r=null)=>n?e.get(`${t}/backends/google/sources/${n.uuid}/contacts`,r).then(i=>br.default.parseManyGoogle(i.items,n)):null,fetchConferenceSource:n=>e.get(`${t}/directories/${n}/sources`,{backend:"conference"}),fetchSourcesFor:(n,r)=>e.get(`${t}/directories/${n}/sources`,{backend:r}),fetchPhonebookContacts:(n,r=null)=>n?e.get(`${t}/backends/phonebook/sources/${n.uuid}/contacts`,r):null,fetchConferenceContacts:n=>n?e.get(`${t}/backends/conference/sources/${n.uuid}/contacts`).then(r=>br.default.parseManyConference(r.items,n)):null,findMultipleContactsByNumber:(n,r)=>{const i=(0,H8.jsonToGraphQLQuery)({me:{contacts:{__args:{profile:"default",extens:n},edges:{node:r||{firstname:!0,lastname:!0,wazoReverse:!0,wazoBackend:!0,email:!0,wazoSourceEntryId:!0,wazoSourceName:!0,"... on WazoContact":{userUuid:!0}}}}}});return e.post(`${t}/graphql`,{query:`{${i}}`}).then(br.default.manyGraphQlWithNumbersParser(n))}});var xm={},Cm={},Em={},q8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Em,"__esModule",{value:!0});const Py=q8(aa);class Ac{static parseMany(t=[]){return t?t.map(n=>Ac.parse(n)):[]}static parse(t){return new Ac({deleted:t.deleted,fileName:t.filename,end:t.end_time?(0,Py.default)(t.end_time).toDate():null,start:(0,Py.default)(t.start_time).toDate(),uuid:t.uuid})}constructor({deleted:t,end:n,fileName:r,start:i,uuid:s}){this.deleted=t,this.end=n,this.fileName=r,this.start=i,this.uuid=s}}Em.default=Ac;var Tm=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cm,"__esModule",{value:!0});const fh=Tm(aa),U8=Tm(kn),z8=Tm(Em);class Va{static merge(t,n){const r=(a,o,l)=>l.indexOf(a)===o,i=t.concat(n);return i.map(a=>a.id).filter(r).map(a=>i.find(o=>o&&o.id===a))}static parseMany(t){return!t||!t.items?[]:t.items.map(n=>Va.parse(n))}static parse(t){return new Va({answer:t.answer?(0,fh.default)(t.answer).toDate():null,answered:t.answered,callDirection:t.call_direction,destination:{extension:t.requested_extension||t.destination_extension||`meeting-${t.requested_name||t.destination_name||""}`,name:t.requested_name||t.destination_name||"",uuid:t.destination_user_uuid},source:{extension:t.source_extension,name:t.source_name,uuid:t.source_user_uuid},id:t.id,duration:(t.duration||0)*1e3,start:(0,fh.default)(t.start).toDate(),end:t.end?(0,fh.default)(t.end).toDate():null,recordings:z8.default.parseMany(t.recordings||[])})}static parseNew(t,n){const r=Va.parse(t);return r.newMissedCall=n&&n.hasExtension(t.requested_extension||t.destination_extension)&&!t.answered,r}static newFrom(t){return(0,U8.default)(t,Va)}constructor({answer:t,answered:n,callDirection:r,destination:i,source:s,id:a,duration:o,start:l,end:u,recordings:f}){this.answer=t,this.answered=n,this.callDirection=r,this.destination=i,this.source=s,this.id=a,this.duration=o,this.start=l,this.end=u,this.recordings=f||[],this.type="CallLog"}isFromSameParty(t,n){return this.theOtherParty(n).extension===t.theOtherParty(n).extension}theOtherParty(t){return this.callDirection==="inbound"?this.source:this.callDirection==="outbound"?this.destination:t&&t.hasExtension(this.source.extension)?this.destination:this.source}isNewMissedCall(){return this.newMissedCall}acknowledgeCall(){return this.newMissedCall=!1,this}isAcknowledged(){return this.newMissedCall}isAnswered(){return this.answered}isOutgoing(t){return this.callDirection==="internal"?t.hasExtension(this.source.extension):this.callDirection==="outbound"}isIncoming(t){return this.callDirection==="internal"?t.hasExtension(this.destination.extension):this.callDirection==="inbound"}isAnOutgoingCall(t){return console.warn(`@wazo/sdk 
      CallLog.isAnOutgoingcall(session) method is obsolete.
      Please use CallLog.isOutgoing(session).
    `),t.hasExtension(this.source.extension)&&this.answered}isAMissedOutgoingCall(t){return t.hasExtension(this.source.extension)&&!this.answered}isAnIncomingCall(t){return console.warn(`@wazo/sdk
      CallLog.isAnIncomingCall(session) method is obsolete.
      Please use CallLog.isIncoming(session).
    `),t.hasExtension(this.destination.extension)&&this.answered}isADeclinedCall(t){return!this.answered&&t.hasExtension(this.destination.extension)}getRecordings(){return this.recordings}}Cm.default=Va;var K8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xm,"__esModule",{value:!0});const $o=K8(Cm);xm.default=(e,t)=>({search:(n,r=5)=>e.get(`${t}/users/me/cdr`,{search:n,limit:r}).then($o.default.parseMany),searchBy:(n,r,i=5)=>e.get(`${t}/users/me/cdr`,{[n]:r,limit:i}).then($o.default.parseMany),listCallLogs:(n,r=5)=>e.get(`${t}/users/me/cdr`,{offset:n,limit:r}).then($o.default.parseMany),listDistinctCallLogs:(n,r=5,i=void 0)=>e.get(`${t}/users/me/cdr`,{offset:n,limit:r,distinct:i}).then($o.default.parseMany),listCallLogsFromDate:(n,r)=>e.get(`${t}/users/me/cdr`,{from:n.toISOString(),number:r}).then($o.default.parseMany)});var Am={},Im={},G8=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Im,"__esModule",{value:!0});const W8=G8(kn);class nl{static parseMany(t){return!t||!t.items?[]:t.items.map(n=>nl.parse(n))}static parse(t){return new nl({uuid:t.uuid,name:t.name,users:t.users})}static newFrom(t){return(0,W8.default)(t,nl)}constructor({uuid:t,name:n,users:r}={}){this.uuid=t,this.name=n,this.users=r,this.type="ChatRoom"}}Im.default=nl;var Si=Y&&Y.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{u(r.next(f))}catch(c){a(c)}}function l(f){try{u(r.throw(f))}catch(c){a(c)}}function u(f){f.done?s(f.value):i(f.value).then(o,l)}u((r=r.apply(e,t||[])).next())})},Hd=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Am,"__esModule",{value:!0});const hh=Hd(gi()),Y8=Hd(Pd),Dy=Hd(Im),Fy=Hd(Xl),gh=30;Am.default=(e,t)=>({updateState:(n,r)=>e.put(`${t}/users/${n}/presences`,{state:r},null,hh.default.successResponseParser),updateStatus:(n,r,i)=>{const s={state:r,status:i};return e.put(`${t}/users/${n}/presences`,s,null,hh.default.successResponseParser)},getState:n=>Si(void 0,void 0,void 0,function*(){return e.get(`${t}/users/${n}/presences`).then(r=>r.state)}),getContactStatusInfo:n=>Si(void 0,void 0,void 0,function*(){return e.get(`${t}/users/${n}/presences`).then(r=>r)}),getLineState:n=>Si(void 0,void 0,void 0,function*(){return e.get(`${t}/users/${n}/presences`).then(r=>Y8.default.getLinesState(r.lines))}),getMultipleLineState(n){return Si(this,void 0,void 0,function*(){const r={},i=n||[];if(i.length>gh){const s=i.reduce((o,l,u)=>(u%gh===0&&o.push(this.getMultipleLineState(i.slice(u,u+gh))),o),[]);return(yield Promise.all(s)).flat()}return i.length&&(r.user_uuid=i.join(",")),e.get(`${t}/users/presences`,r).then(s=>s.items)})},getUserRooms:()=>Si(void 0,void 0,void 0,function*(){return e.get(`${t}/users/me/rooms`).then(Dy.default.parseMany)}),createRoom:(n,r)=>Si(void 0,void 0,void 0,function*(){return e.post(`${t}/users/me/rooms`,{name:n,users:r}).then(Dy.default.parse)}),getRoomMessages:(n,r)=>Si(void 0,void 0,void 0,function*(){const i=hh.default.getQueryString(r||{});return e.get(`${t}/users/me/rooms/${n}/messages${i.length?`?${i}`:""}`).then(s=>Fy.default.parseMany(s))}),sendRoomMessage:(n,r)=>Si(void 0,void 0,void 0,function*(){return e.post(`${t}/users/me/rooms/${n}/messages`,r).then(Fy.default.parse)}),getMessages:n=>Si(void 0,void 0,void 0,function*(){return e.get(`${t}/users/me/rooms/messages`,n)})});var Rm={},km={},px=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(km,"__esModule",{value:!0});const J8=px(kn),X8=px(Vd);class rl{constructor({sourceId:t,destinationId:n,status:r,id:i}){this.sourceId=t,this.destinationId=n,this.status=r,this.id=i}static parseFromCallSession(t,n){return new rl({sourceId:t.getId(),destinationId:n.getId()})}static parseFromApi(t){return new rl({id:t.id,status:t.status,sourceId:t.initiator_call,destinationId:t.recipient_call})}destinationIs(t){return t.isId(this.destinationId)}sourceIs(t){return t.isId(this.sourceId)}updateFrom(t){(0,X8.default)(this,t)}static newFrom(t){return(0,J8.default)(t,rl)}}km.default=rl;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});class Dm{constructor({full:t}={}){this.full=t,this.type="MeetingStatus"}static parse(t){return new Dm({full:t.full})}}Pm.default=Dm;var Oy=Y&&Y.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{u(r.next(f))}catch(c){a(c)}}function l(f){try{u(r.throw(f))}catch(c){a(c)}}function u(f){f.done?s(f.value):i(f.value).then(o,l)}u((r=r.apply(e,t||[])).next())})},ca=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rm,"__esModule",{value:!0});const tn=ca(gi()),Z8=ca(Od),Q8=ca(Xl),eN=ca($d),tN=ca(Zl),nN=ca(km),rN=ca(Pm);Rm.default=(e,t)=>({updatePresence:n=>e.put(`${t}/users/me/presences`,{presence:n},null,tn.default.successResponseParser),listMessages:(n,r)=>{const i={};return n&&(i.participant_user_uuid=n),r&&(i.limit=r),e.get(`${t}/users/me/chats`,i).then(s=>Q8.default.parseMany(s))},sendMessage:(n,r,i)=>{const s={alias:n,msg:r,to:i};return e.post(`${t}/users/me/chats`,s,null,tn.default.successResponseParser)},makeCall:(n,r,i,s=!1)=>{const a={from_mobile:r,extension:n};return i&&(a.line_id=i),s&&(a.all_lines=!0),e.post(`${t}/users/me/calls`,a)},cancelCall:n=>e.delete(`${t}/users/me/calls/${n}`,null),listCalls:()=>e.get(`${t}/users/me/calls`,null).then(n=>tN.default.parseMany(n.items)),relocateCall(n,r,i,s){const a={completions:["answer"],destination:r,initiator_call:n,auto_answer:!0};return(i||s)&&(a.location={}),i&&(a.location.line_id=i),s&&(a.location.contact=s),e.post(`${t}/users/me/relocates`,a).then(o=>Z8.default.parse(o))},listVoicemails:()=>e.get(`${t}/users/me/voicemails`).then(n=>eN.default.parseMany(n)),deleteVoicemail:n=>e.delete(`${t}/users/me/voicemails/messages/${n}`),getVoicemailUrl:n=>{const r={token:e.token};return e.computeUrl("get",`${t}/users/me/voicemails/messages/${n.id}/recording`,r)},fetchSwitchboardHeldCalls:n=>e.get(`${t}/switchboards/${n}/calls/held`),holdSwitchboardCall:(n,r)=>e.put(`${t}/switchboards/${n}/calls/held/${r}`,null,null,tn.default.successResponseParser),answerSwitchboardHeldCall:(n,r,i=null)=>e.put(`${t}/switchboards/${n}/calls/held/${r}/answer${i?`?line_id=${i}`:""}`),fetchSwitchboardQueuedCalls:n=>e.get(`${t}/switchboards/${n}/calls/queued`),answerSwitchboardQueuedCall:(n,r,i=null)=>e.put(`${t}/switchboards/${n}/calls/queued/${r}/answer${i?`?line_id=${i}`:""}`),sendFax:(n,r,i=null)=>{const s={"Content-type":"application/pdf","X-Auth-Token":e.token},a=tn.default.getQueryString({extension:n,caller_id:i});return e.post(`${t}/users/me/faxes?${a}`,r,s)},getConferenceParticipantsAsUser:n=>Oy(void 0,void 0,void 0,function*(){return e.get(`${t}/users/me/conferences/${n}/participants`)}),getMeetingParticipantsAsUser:n=>Oy(void 0,void 0,void 0,function*(){return e.get(`${t}/users/me/meetings/${n}/participants`)}),banMeetingParticipant:(n,r)=>e.delete(`${t}/users/me/meetings/${n}/participants/${r}`,null,null,tn.default.successResponseParser),listTrunks:()=>e.get(`${t}/trunks`),mute:n=>e.put(`${t}/users/me/calls/${n}/mute/start`,null,null,tn.default.successResponseParser),unmute:n=>e.put(`${t}/users/me/calls/${n}/mute/stop`,null,null,tn.default.successResponseParser),hold:n=>e.put(`${t}/users/me/calls/${n}/hold/start`,null,null,tn.default.successResponseParser),resume:n=>e.put(`${t}/users/me/calls/${n}/hold/stop`,null,null,tn.default.successResponseParser),transferCall:(n,r,i)=>e.post(`${t}/users/me/transfers`,{initiator_call:n,exten:r,flow:i}).then(nN.default.parseFromApi),confirmCallTransfer:n=>e.put(`${t}/users/me/transfers/${n}/complete`,null,null,tn.default.successResponseParser),cancelCallTransfer:n=>e.delete(`${t}/users/me/transfers/${n}`,null,null,tn.default.successResponseParser),sendDTMF:(n,r)=>e.put(`${t}/users/me/calls/${n}/dtmf?digits=${encodeURIComponent(r)}`,null,null,tn.default.successResponseParser),isAhHocConferenceAPIEnabled:()=>e.head(`${t}/users/me/conferences/adhoc`,null,null,tn.default.successResponseParser),createAdHocConference:(n,r)=>e.post(`${t}/users/me/conferences/adhoc`,{host_call_id:n,participant_call_ids:r}),addAdHocConferenceParticipant:(n,r)=>e.put(`${t}/users/me/conferences/adhoc/${n}/participants/${r}`,null,null,tn.default.successResponseParser),removeAdHocConferenceParticipant:(n,r)=>e.delete(`${t}/users/me/conferences/adhoc/${n}/participants/${r}`,null,null,tn.default.successResponseParser),deleteAdHocConference:n=>e.delete(`${t}/users/me/conferences/adhoc/${n}`,null,null,tn.default.successResponseParser),startRecording:n=>e.put(`${t}/users/me/calls/${n}/record/start`,null,null,tn.default.successResponseParser),stopRecording:n=>e.put(`${t}/users/me/calls/${n}/record/stop`,null,null,tn.default.successResponseParser),pauseRecording:n=>e.put(`${t}/users/me/calls/${n}/record/pause`,null,null,tn.default.successResponseParser),resumeRecording:n=>e.put(`${t}/users/me/calls/${n}/record/resume`,null,null,tn.default.successResponseParser),guestGetMeetingStatus:n=>e.get(`${t}/guests/me/meetings/${n}/status`).then(rN.default.parse)});var Fm={},Om={};Object.defineProperty(Om,"__esModule",{value:!0});class Nm{static parse(t){return new Nm({context:t.context,extension:t.extension,id:t.id,logged:t.logged,number:t.number,paused:t.paused,pausedReason:t.paused_reason})}constructor({context:t,extension:n,id:r,logged:i,number:s,paused:a,pausedReason:o}){this.context=t,this.extension=n,this.id=r,this.logged=i,this.number=s,this.paused=a,this.pausedReason=o}}Om.default=Nm;var yx=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fm,"__esModule",{value:!0});const Zi=yx(gi()),Ny=yx(Om);Fm.default=(e,t)=>({getAgent:n=>e.get(`${t}/agents/by-id/${n}`,null).then(Ny.default.parse),login:(n,r,i)=>e.post(`${t}/agents/by-number/${n}/login`,{context:r,extension:i},null,Zi.default.successResponseParser),loginWithLineId:n=>e.post(`${t}/users/me/agents/login`,{line_id:n},null,Zi.default.successResponseParser),logout:n=>e.post(`${t}/agents/by-number/${n}/logoff`,null,null,Zi.default.successResponseParser),pause:n=>e.post(`${t}/agents/by-number/${n}/pause`,{reason:"songbird_reason"},null,Zi.default.successResponseParser),resume:n=>e.post(`${t}/agents/by-number/${n}/unpause`,null,null,Zi.default.successResponseParser),getStatus:()=>e.get(`${t}/users/me/agents`,null).then(Ny.default.parse),staticLogout:()=>e.post(`${t}/users/me/agents/logoff`,null,null,Zi.default.successResponseParser),staticPause:()=>e.post(`${t}/users/me/agents/pause`,{reason:"songbird_reason"},null,Zi.default.successResponseParser),staticResume:()=>e.post(`${t}/users/me/agents/unpause`,null,null,Zi.default.successResponseParser)});var $m={},Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});class Ic{static parse(t){return new Ic({name:t.name,events:t.events,config:t.config,uuid:t.uuid,service:t.service,eventsUserUuid:t.events_user_uuid,eventsWazoUuid:t.events_wazo_uuid,metadata:t.metadata,ownerTenantUuid:t.owner_tenant_uuid,ownerUserUuid:t.owner_user_uuid})}static parseMany(t){return t.items.map(n=>Ic.parse(n))}constructor({name:t,events:n,config:r,uuid:i,service:s,eventsUserUuid:a,eventsWazoUuid:o,metadata:l,ownerTenantUuid:u,ownerUserUuid:f}){this.name=t,this.events=n,this.config=r,this.uuid=i,this.service=s,this.eventsUserUuid=a,this.eventsWazoUuid=o,this.metadata=l,this.ownerTenantUuid=u,this.ownerUserUuid=f}}Mm.default=Ic;var iN=Y&&Y.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($m,"__esModule",{value:!0});const $y=iN(Mm);$m.default=(e,t)=>({getSubscriptions:()=>e.get(`${t}/users/me/subscriptions`).then($y.default.parseMany),getSubscription:n=>e.get(`${t}/users/me/subscriptions/${n}`).then($y.default.parse),createSubscription:n=>e.post(`${t}/users/me/subscriptions`,n),removeSubscription:n=>e.delete(`${t}/users/me/subscriptions/${n}`)});var Vm={},sN=Y&&Y.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(f){try{u(r.next(f))}catch(c){a(c)}}function l(f){try{u(r.throw(f))}catch(c){a(c)}}function u(f){f.done?s(f.value):i(f.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.default=(e,t)=>({action:(n,r={})=>e.post(`${t}/action/${n}`,r),getAors:n=>sN(void 0,void 0,void 0,function*(){return((yield e.post(`${t}/action/PJSIPShowEndpoint`,{Endpoint:n}))||[]).filter(i=>i.Event==="ContactStatusDetail")})});var My;function bx(){if(My)return wu;My=1;var e=Y&&Y.__awaiter||function(R,D,$,M){function O(L){return L instanceof $?L:new $(function(W){W(L)})}return new($||($=Promise))(function(L,W){function te(ee){try{Q(M.next(ee))}catch(ye){W(ye)}}function ie(ee){try{Q(M.throw(ee))}catch(ye){W(ye)}}function Q(ee){ee.done?L(ee.value):O(ee.value).then(te,ie)}Q((M=M.apply(R,D||[])).next())})},t=Y&&Y.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(wu,"__esModule",{value:!0});const n=t(jw),r=t(pm),i=t(ym),s=t(V8()),a=t(wm),o=t(xm),l=t(Am),u=t(Rm),f=t(Fm),c=t($m),d=t(Vm),h=t(gi()),g=t(yo()),v="0.1",p="1.0",y="1.1",w="1.0",A="0.1",I="1.0",k="1.0",x="1.0",C="1.0",m="1.0",_="1.0",T=g.default?g.default.loggerFor("api"):console;class E{constructor({server:D,agent:$=null,refreshToken:M,clientId:O,isMobile:L=!1,fetchOptions:W}){this.updateParameters({server:D,agent:$,clientId:O,fetchOptions:W}),this.refreshToken=M,this.isMobile=L||!1}initializeEndpoints(){this.auth=(0,n.default)(this.client,`auth/${v}`),this.application=(0,r.default)(this.client,`calld/${p}/applications`),this.confd=(0,i.default)(this.client,`confd/${y}`),this.ctidNg=(0,s.default)(this.client,`ctid-ng/${w}`),this.dird=(0,a.default)(this.client,`dird/${A}`),this.callLogd=(0,o.default)(this.client,`call-logd/${I}`),this.chatd=(0,l.default)(this.client,`chatd/${k}`),this.calld=(0,u.default)(this.client,`calld/${x}`),this.agentd=(0,f.default)(this.client,`agentd/${C}`),this.webhookd=(0,c.default)(this.client,`webhookd/${m}`),this.amid=(0,d.default)(this.client,`amid/${_}`)}updateParameters({server:D,agent:$,clientId:M,fetchOptions:O}){const L=this.refreshTokenCallback.bind(this);this.client=new h.default({server:D,agent:$,refreshTokenCallback:L,clientId:M,fetchOptions:O}),this.initializeEndpoints()}forceRefreshToken(){return e(this,void 0,void 0,function*(){return T.info("forcing refresh token, calling callback"),this.refreshTokenCallback()})}refreshTokenCallback(){return e(this,void 0,void 0,function*(){if(T.info("refresh token callback called",{refreshToken:this.refreshToken,refreshBackend:this.refreshBackend,refreshTenantId:this.refreshTenantId,refreshDomainName:this.refreshDomainName,refreshExpiration:this.refreshExpiration,isMobile:this.isMobile}),!this.refreshToken)return null;try{const D=yield this.auth.refreshToken(this.refreshToken,this.refreshBackend,this.refreshExpiration,this.isMobile,this.refreshTenantId,this.refreshDomainName);return D?(T.info("token refreshed",{token:D.token}),this.onRefreshToken&&this.onRefreshToken(D.token,D),this.setToken(D.token),D.token):null}catch(D){T.error("token refresh, error",D),this.onRefreshTokenError&&this.onRefreshTokenError(D)}return null})}setToken(D){this.client.setToken(D)}setTenant(D){this.client.setTenant(D)}setRefreshToken(D){this.refreshToken=D}setRequestTimeout(D){this.client.setRequestTimeout(D)}setClientId(D){this.client.clientId=D}setOnRefreshToken(D){this.onRefreshToken=D}setOnRefreshTokenError(D){this.onRefreshTokenError=D}setRefreshExpiration(D){this.refreshExpiration=D}setRefreshBackend(D){this.refreshBackend=D}setRefreshTenantId(D){console.warn("Use of `setRefreshTenantId` is deprecated, use `setRefreshDomainName` instead"),this.refreshTenantId=D}setRefreshDomainName(D){this.refreshDomainName=D}setIsMobile(D){this.isMobile=D}setFetchOptions(D){this.fetchOptions=D,this.client.setFetchOptions(D)}disableErrorLogging(){this.client.disableErrorLogging()}}return wu.default=E,wu}var Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});const aN=2e3,oN=5e3,lN=3;class uN{constructor(t=aN,n=oN,r=lN){this.heartbeatDelay=t,this.heartbeatTimeout=n,this.maxHeartbeats=r,this.hasHeartbeat=!1,this._heartbeatTries=0}setSendHeartbeat(t){this._sendHeartbeatCallback=t}setOnHeartbeatTimeout(t){this._onTimeoutCallback=t}stop(){this.hasHeartbeat=!1,this._heartbeatNotReceivedTimeout&&clearTimeout(this._heartbeatNotReceivedTimeout),this._heartbeatDelayTimeout&&clearTimeout(this._heartbeatDelayTimeout)}start(){this.stop(),this.hasHeartbeat=!0,this._heartbeatTries=0,this._sendHeartbeat()}onHeartbeat(){this._clearTimeouts(),this.hasHeartbeat&&this._sendHeartbeat()}_sendHeartbeat(){this._heartbeatTries>=this.maxHeartbeats||(this._clearTimeouts(),this._heartbeatDelayTimeout=setTimeout(()=>{this._heartbeatTries++,this._sendHeartbeatCallback&&this._sendHeartbeatCallback()},this.heartbeatDelay),this._onTimeoutCallback&&(this._heartbeatNotReceivedTimeout=setTimeout(this._onTimeoutCallback,this.heartbeatTimeout)))}_clearTimeouts(){this._heartbeatNotReceivedTimeout&&clearTimeout(this._heartbeatNotReceivedTimeout),this._heartbeatDelayTimeout&&clearTimeout(this._heartbeatDelayTimeout)}}Bm.default=uN;var jd={};Object.defineProperty(jd,"__esModule",{value:!0});jd.lastIndexOf=void 0;const cN=(e,t)=>{const n=e.length-1;for(let r=n;r>=0;r--)if(t(e[r]))return r;return-1};jd.lastIndexOf=cN;(function(e){var t=Y&&Y.__createBinding||(Object.create?function(ve,P,N,j){j===void 0&&(j=N);var U=Object.getOwnPropertyDescriptor(P,N);(!U||("get"in U?!P.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(ve,j,U)}:function(ve,P,N,j){j===void 0&&(j=N),ve[j]=P[N]}),n=Y&&Y.__setModuleDefault||(Object.create?function(ve,P){Object.defineProperty(ve,"default",{enumerable:!0,value:P})}:function(ve,P){ve.default=P}),r=Y&&Y.__importStar||function(ve){if(ve&&ve.__esModule)return ve;var P={};if(ve!=null)for(var N in ve)N!=="default"&&Object.prototype.hasOwnProperty.call(ve,N)&&t(P,ve,N);return n(P,ve),P},i=Y&&Y.__awaiter||function(ve,P,N,j){function U(J){return J instanceof N?J:new N(function(oe){oe(J)})}return new(N||(N=Promise))(function(J,oe){function fe(ze){try{Be(j.next(ze))}catch(ut){oe(ut)}}function Oe(ze){try{Be(j.throw(ze))}catch(ut){oe(ut)}}function Be(ze){ze.done?J(ze.value):U(ze.value).then(fe,Oe)}Be((j=j.apply(ve,P||[])).next())})},s=Y&&Y.__rest||function(ve,P){var N={};for(var j in ve)Object.prototype.hasOwnProperty.call(ve,j)&&P.indexOf(j)<0&&(N[j]=ve[j]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var U=0,j=Object.getOwnPropertySymbols(ve);U<j.length;U++)P.indexOf(j[U])<0&&Object.prototype.propertyIsEnumerable.call(ve,j[U])&&(N[j[U]]=ve[j[U]]);return N},a=Y&&Y.__importDefault||function(ve){return ve&&ve.__esModule?ve:{default:ve}};Object.defineProperty(e,"__esModule",{value:!0}),e.CanceledCallError=e.transportEvents=e.events=e.replaceLocalIpModifier=void 0;const o=Sk,l=Tk,u=Ik,f=Rk,c=oP,d=yP,h=SP,g=wP,v=Pv,p=xP,y=CP,w=a(EP),A=N_,I=r(jl),k=a(Gl),x=a(bx()),C=a(yo()),m=a(Bm),_=tm,T=jd,E=ve=>Promise.resolve(Object.assign(Object.assign({},JSON.parse(JSON.stringify(ve))),{sdp:ve.sdp.replace("c=IN IP4 0.0.0.0","c=IN IP4 127.0.0.1")}));e.replaceLocalIpModifier=E;const R=36,D=3e3,$=5e3,M=["STATUS_NULL","STATUS_NEW","STATUS_CONNECTING","STATUS_CONNECTED","STATUS_COMPLETED"],O=C.default?C.default.loggerFor("webrtc-client"):console,L=C.default?C.default.loggerFor("webrtc-stats"):console,W="registered",te="unregistered",ie="registrationFailed",Q="invite",ee="connected",ye="disconnected",we="transportError",$e="message",le="accepted",B="rejected",K="onTrack",z="onEarlyMedia",se="reinvite",Ee="onError",V="onScreenSharingReinvite",H="onNetworkStats",G="onDisconnected";e.events=[W,te,ie,Q],e.transportEvents=[ee,ye,we,$e];class re extends Error{}e.CanceledCallError=re;const ce=5,me=60*60*24;class Ce extends k.default{static isAPrivateIp(P){return/^(?:10|127|172\.(?:1[6-9]|2[0-9]|3[01])|192\.168)\..*/.exec(P)==null}static getIceServers(P){return Ce.isAPrivateIp(P)?[{urls:["stun:stun.l.google.com:19302","stun:stun4.l.google.com:19302"]}]:[]}constructor(P,N,j){super(),this.clientId=Math.ceil(Math.random()*1e3),O.info("sdk webrtc constructor",{clientId:this.clientId}),this.uaConfigOverrides=j,this.config=P,this.skipRegister=P.skipRegister,this._buildConfig(P,N).then(U=>{this.config=U,this.userAgent=this.createUserAgent(j)}),this.audioOutputDeviceId=P.audioOutputDeviceId,this.audioOutputVolume=P.audioOutputVolume||1,P.media&&(this.configureMedia(P.media),this.setMediaConstraints({audio:P.media.audio,video:P.media.video})),this.heldSessions={},this.statsIntervals={},this.connectionPromise=null,this.sipSessions={},this.conferences={},this.networkMonitoringInterval={},this.sessionNetworkStats={},this.forceClosed=!1,this._boundOnHeartbeat=this._onHeartbeat.bind(this),this.heartbeat=new m.default(P.heartbeatDelay,P.heartbeatTimeout,P.maxHeartbeats),this.heartbeat.setSendHeartbeat(this.pingServer.bind(this)),this.heartbeat.setOnHeartbeatTimeout(this._onHeartbeatTimeout.bind(this)),this.REGISTERED=W,this.UNREGISTERED=te,this.REGISTRATION_FAILED=ie,this.INVITE=Q,this.CONNECTED=ee,this.DISCONNECTED=ye,this.TRANSPORT_ERROR=we,this.MESSAGE=$e,this.ACCEPTED=le,this.REJECTED=B,this.ON_TRACK=K,this.ON_REINVITE=se,this.ON_ERROR=Ee,this.ON_SCREEN_SHARING_REINVITE=V,this.ON_NETWORK_STATS=H,this.ON_DISCONNECTED=G,this.ON_EARLY_MEDIA=z}configureMedia(P){this.hasAudio=!!P.audio,this.audioStreams={},this.audioElements={}}setMediaConstraints(P){this.video=P.video,this.audio=P.audio}createUserAgent(P){const N=this._createUaOptions(P);O.info("sdk webrtc, creating UA",{uaOptions:N,clientId:this.clientId}),N.delegate={onConnect:this.onConnect.bind(this),onDisconnect:this.onDisconnect.bind(this),onInvite:U=>{O.info("sdk webrtc on invite",{method:"delegate.onInvite",clientId:this.clientId,id:U.id,remoteURI:U.remoteURI}),this._setupSession(U);const J=!!U.request.getHeader("alert-info");this.eventEmitter.emit(Q,U,this.sessionWantsToDoVideo(U),J)}};const j=new c.UserAgent(N);return j.start(),j.transport&&j.transport.connectPromise&&j.transport.connectPromise.catch(U=>{O.warn("Transport connect error",U)}),j.transport.onMessage=U=>{const J=l.Parser.parseMessage(U,j.transport.logger);j.onTransportMessage(U),this.eventEmitter.emit($e,J),J&&J.method===u.C.MESSAGE&&j.userAgentCore.replyStateless(J,{statusCode:200})},j}isConnected(){var P;return!!(!((P=this.userAgent)===null||P===void 0)&&P.isConnected())}isConnecting(){var P,N;return((N=(P=this.userAgent)===null||P===void 0?void 0:P.transport)===null||N===void 0?void 0:N.state)===p.TransportState.Connecting}isRegistered(){return!!(this.registerer&&this.registerer.state===g.RegistererState.Registered)}onConnect(){var P;return O.info("sdk webrtc connected",{method:"delegate.onConnect",clientId:this.clientId}),this.eventEmitter.emit(ee),!this.isRegistered()&&(!((P=this.registerer)===null||P===void 0)&&P.waiting)&&this.registerer.waitingToggle(!1),this.register()}onDisconnect(P){var N;return i(this,void 0,void 0,function*(){O.info("sdk webrtc disconnected",{method:"delegate.onConnect",clientId:this.clientId,error:P}),this.connectionPromise=null,this.eventEmitter.emit(ye,P),this.isRegistered()&&(yield this.unregister(),!((N=this.registerer)===null||N===void 0)&&N.waiting&&this.registerer.waitingToggle(!1),this.eventEmitter.emit(te))})}register(P=0){var N;return i(this,void 0,void 0,function*(){const j={clientId:this.clientId,userAgent:!!this.userAgent,registered:this.isRegistered(),connectionPromise:!!this.connectionPromise,registerer:!!this.registerer,waiting:this.registerer&&this.registerer.waiting,tries:P,skipRegister:this.skipRegister};if(this.forceClosed=!1,this.skipRegister)return O.info("sdk webrtc skip register...",j),Promise.resolve();if(O.info("sdk webrtc registering...",j),this.userAgent||(O.info("sdk webrtc recreating User Agent"),this.userAgent=this.createUserAgent(this.uaConfigOverrides)),!this.userAgent||this.isRegistered())return O.info("sdk webrtc registering aborted, already registered or no UA can be created"),Promise.resolve();if(this.connectionPromise||!((N=this.registerer)===null||N===void 0)&&N.waiting)return O.info("sdk webrtc registering aborted due to a registration in progress.",{clientId:this.clientId}),Promise.resolve();const U=this._isWeb()?{}:{extraContactHeaderParams:["mobility=mobile"]},J=()=>{O.info("sdk webrtc registering failed",{tries:P,clientId:this.clientId,registerer:!!this.registerer,forceClosed:this.forceClosed}),!this.forceClosed&&(this.connectionPromise=null,this.registerer&&this.registerer.waiting&&this.registerer.waitingToggle(!1),P<=ce&&(O.info("sdk webrtc registering, retrying...",{clientId:this.clientId,tries:P}),setTimeout(()=>this.register(P+1),300)))};return this._connectIfNeeded().then(()=>{this.userAgent||(O.info("sdk webrtc recreating User Agent after connection"),this.userAgent=this.createUserAgent(this.uaConfigOverrides)),O.info("sdk webrtc registering, transport connected",{registerOptions:U,ua:!!this.userAgent,clientId:this.clientId}),this.registerer=new A.Registerer(this.userAgent,U),this.connectionPromise=null,this._monkeyPatchRegisterer(this.registerer),this.registerer.stateChange.addListener(fe=>{O.info("sdk webrtc registering, state changed",{newState:fe,clientId:this.clientId}),fe===g.RegistererState.Registered&&this.registerer&&this.registerer.state===g.RegistererState.Registered?this.eventEmitter.emit(W):fe===g.RegistererState.Unregistered&&this.eventEmitter.emit(te)});const oe={requestDelegate:{onReject:fe=>{O.error("sdk webrtc registering, rejected",{clientId:this.clientId,response:fe}),J()}}};return this.registerer.register(oe).catch(fe=>(O.error("sdk webrtc registering, error",fe),this.eventEmitter.emit(ie),fe))}).catch(oe=>{O.error("sdk webrtc registering, transport error",oe),J()})})}_monkeyPatchRegisterer(P){if(!P)return;const N=P.waitingToggle.bind(P),j=P.unregistered.bind(P);P.waitingToggle=U=>{!P||P.waiting===U||N(U)},P.unregistered=()=>{!P||P.state===g.RegistererState.Terminated||j()}}unregister(){return i(this,void 0,void 0,function*(){O.info("sdk webrtc unregistering..",{clientId:this.clientId,userAgent:!!this.userAgent,registerer:!!this.registerer});try{return new Promise((P,N)=>{if(!this.registerer)return P();const j=U=>{U===g.RegistererState.Unregistered&&(O.info("sdk webrtc unregistered",{clientId:this.clientId}),this.registerer&&this.registerer.stateChange.addListener(j),this._cleanupRegister(),P())};this.registerer.stateChange.addListener(j),this.registerer.unregister().then().catch(U=>{O.error("sdk webrtc unregistering, promise error",U),this._cleanupRegister(),N()})})}catch(P){O.error("sdk webrtc unregistering, error",P),this._cleanupRegister()}})}stop(){return O.info("sdk webrtc stop",{clientId:this.clientId,userAgent:!!this.userAgent}),this.userAgent?this.userAgent.stop().then(()=>this._cleanupRegister()).catch(P=>{O.warn("sdk webrtc stop, error",{message:P.message,stack:P.stack})}):Promise.resolve()}call(P,N,j=!1,U=!1){O.info("sdk webrtc creating call",{clientId:this.clientId,number:P,enableVideo:N,audioOnly:j,conference:U});const J={sessionDescriptionHandlerOptionsReInvite:{conference:U,audioOnly:j},earlyMedia:!0};j&&(J.sessionDescriptionHandlerModifiersReInvite=[d.stripVideo]);const oe=this._makeURI(P);let fe;oe?fe=this.userAgent?new A.Inviter(this.userAgent,oe,J):null:O.error("Null URI"),fe&&(this.storeSipSession(fe),this._setupSession(fe)),U&&(this.conferences[this.getSipSessionId(fe)]=!0);const Oe={requestDelegate:{onAccept:Be=>{var ze;!((ze=fe.sessionDescriptionHandler)===null||ze===void 0)&&ze.peerConnection&&(fe.sessionDescriptionHandler.peerConnection.sfu=U),this._onAccepted(fe,Be.session,!0)},onProgress:Be=>{Be.message.statusCode===183&&this._onEarlyProgress(Be.session)},onReject:Be=>{O.info("on call rejected",{id:fe.id,fromTag:fe.fromTag}),this._stopSendingStats(fe),this.stopNetworkMonitoring(fe),this.eventEmitter.emit(B,fe,Be)}},sessionDescriptionHandlerOptions:this.getMediaConfiguration(N||!1,U)};return Oe.sessionDescriptionHandlerOptions&&(Oe.sessionDescriptionHandlerOptions.audioOnly=j),Oe.sessionDescriptionHandlerModifiers=[e.replaceLocalIpModifier],j&&Oe.sessionDescriptionHandlerModifiers.push(d.stripVideo),fe.invitePromise=fe.invite(Oe).catch(Be=>{O.warn("sdk webrtc creating call, error",Be)}),fe}answer(P,N){if(O.info("sdk webrtc answer call",{clientId:this.clientId,id:P.id,enableVideo:N}),!P||!P.accept){const U="No session to answer, or not an invitation";return O.warn(U),Promise.reject(new Error(U))}const j={sessionDescriptionHandlerOptions:this.getMediaConfiguration(N||!1)};return this._accept(P,j).then(()=>{if(P.isCanceled){const U="accepted a canceled session (or was canceled during the accept phase).";throw O.error(U,{id:P.id}),this.onCallEnded(P),new re(U)}O.info("sdk webrtc answer, accepted."),this._onAccepted(P)}).catch(U=>{throw O.error(`answer call error for ${P?P.id:"n/a"}`,U),U})}hangup(P){return i(this,void 0,void 0,function*(){const{state:N,id:j}=P;O.info("sdk webrtc hangup call",{clientId:this.clientId,id:j,state:N});try{this._stopSendingStats(P),this._cleanupMedia(P),delete this.sipSessions[this.getSipSessionId(P)];const U=P instanceof A.Inviter,J={[v.SessionState.Initial]:U?this._cancel.bind(this,P):this._reject.bind(this,P),[v.SessionState.Establishing]:U?this._cancel.bind(this,P):this._reject.bind(this,P),[v.SessionState.Established]:this._bye.bind(this,P)};return J[N]?yield J[N]():yield this._bye(P)}catch(U){O.warn("sdk webrtc hangup, error",U)}return Promise.resolve(null)})}getStats(P){return i(this,void 0,void 0,function*(){const N=P.sessionDescriptionHandler.peerConnection;return N?N.getStats(null):null})}startNetworkMonitoring(P,N=1e3){const j=this.getSipSessionId(P);O.info("starting network inspection",{id:j,clientId:this.clientId}),this.sessionNetworkStats[j]=[],this.networkMonitoringInterval[j]=setInterval(()=>this._fetchNetworkStats(j),N)}stopNetworkMonitoring(P){const N=this.getSipSessionId(P),j=N in this.networkMonitoringInterval;O.info("stopping network inspection",{clientId:this.clientId,id:N,exists:j}),j&&(clearInterval(this.networkMonitoringInterval[N]),delete this.networkMonitoringInterval[N],delete this.sessionNetworkStats[N])}reject(P){return i(this,void 0,void 0,function*(){O.info("sdk webrtc reject call",{clientId:this.clientId,id:P.id});try{if(P instanceof A.Invitation)return this._reject(P);if(P instanceof A.Inviter)return this._cancel(P)}catch(N){O.warn("Error when rejecting call",N.message,N.stack)}})}close(P=!1){return i(this,void 0,void 0,function*(){if(O.info("sdk webrtc closing client",{clientId:this.clientId,userAgent:!!this.userAgent,force:P}),this.forceClosed=P,this._cleanupMedia(),this.connectionPromise=null,Object.values(this.audioElements).forEach(N=>{N.srcObject=null,N.pause()}),this.audioElements={},!!this.userAgent){this.stopHeartbeat(),this.userAgent&&(this.userAgent.delegate=void 0),this.userAgent.stateChange.removeAllListeners(),yield this._disconnectTransport(P),this._cleanupRegister();try{this.userAgent.transport.connectReject=()=>{},this.userAgent.stop().catch(console.error)}catch{}this.userAgent=null,O.info("sdk webrtc client closed",{clientId:this.clientId})}})}getNumber(P){return P?P.remoteIdentity.uri._normal.user:null}mute(P){O.info("sdk webrtc mute",{id:P.id}),this._toggleAudio(P,!0)}unmute(P){O.info("sdk webrtc unmute",{id:P.id}),this._toggleAudio(P,!1)}isAudioMuted(P){if(!P||!P.sessionDescriptionHandler)return!1;let N=!0;const j=P.sessionDescriptionHandler.peerConnection;if(!j)return!1;if(j.getSenders){if(!j.getSenders().length)return!1;j.getSenders().forEach(U=>{U&&U.track&&U.track.kind==="audio"&&(N=N&&!U.track.enabled)})}else{if(!j.getLocalStreams().length)return!1;j.getLocalStreams().forEach(U=>{U.getAudioTracks().forEach(J=>{N=N&&!J.enabled})})}return N}toggleCameraOn(P){O.info("sdk webrtc toggle camera on",{id:P.id}),this._toggleVideo(P,!1)}toggleCameraOff(P){O.info("sdk webrtc toggle camera off",{id:P.id}),this._toggleVideo(P,!0)}hold(P,N=!1,j=!1){const U=this.getSipSessionId(P),J=j||this.hasLocalVideo(U);if(O.info("sdk webrtc hold",{sessionId:U,keys:Object.keys(this.heldSessions),pendingReinvite:!!P.pendingReinvite,isConference:N,hasVideo:J}),U in this.heldSessions||P.pendingReinvite)return Promise.resolve();this.heldSessions[U]={hasVideo:J,isConference:N},this.mute(P),P.sessionDescriptionHandlerOptionsReInvite={hold:!0,conference:N};const oe=this.getMediaConfiguration(!1,N);return this._isWeb()||(oe.sessionDescriptionHandlerModifiers=[d.holdModifier]),oe.sessionDescriptionHandlerOptions={constraints:oe.constraints,hold:!0,conference:N},P.sessionDescriptionHandler&&(P.sessionDescriptionHandler.localMediaStreamConstraints=oe.constraints),P.invite(oe).catch(fe=>{O.warn("sdk webrtc re-invite during hold, error",fe)})}unhold(P,N=!1){const j=this.getSipSessionId(P),U=j in this.heldSessions&&this.heldSessions[j].hasVideo;if(O.info("sdk webrtc unhold",{sessionId:j,keys:Object.keys(this.heldSessions),pendingReinvite:!!P.pendingReinvite,isConference:N,hasVideo:U}),P.pendingReinvite)return Promise.resolve();this.unmute(P),delete this.heldSessions[this.getSipSessionId(P)],P.sessionDescriptionHandlerOptionsReInvite={hold:!1,conference:N};const J=this.getMediaConfiguration(!1,N);return this._isWeb()||(J.sessionDescriptionHandlerModifiers=[]),J.sessionDescriptionHandlerOptions={constraints:J.constraints,hold:!1,conference:N},P.invite(J).catch(oe=>{O.warn("sdk webrtc re-invite during resume, error",oe)})}upgradeToVideo(P,N,j){return i(this,void 0,void 0,function*(){const U=P.sessionDescriptionHandler.peerConnection;let J;if(j){const Oe=U.getTransceivers(),Be=(0,T.lastIndexOf)(Oe,ze=>ze.sender.track===null&&ze.mid&&ze.mid.indexOf("video")===-1);J=Be!==-1?Oe[Be].sender:null}else J=U&&U.getSenders&&U.getSenders().find(Oe=>Oe.track===null);if(!J)return;const oe=yield this.getStreamFromConstraints(N);if(!oe){console.warn(`Can't create media stream with: ${JSON.stringify(N||{})}`);return}if(N&&!N.audio){const Be=P.sessionDescriptionHandler.localMediaStream.getTracks().find(ze=>ze.kind==="audio");Be&&oe.addTrack(Be)}const fe=oe.getVideoTracks()[0];return fe&&J.replaceTrack(fe),this.setLocalMediaStream(this.getSipSessionId(P),oe),oe})}downgradeToAudio(P){const N=P.sessionDescriptionHandler.localMediaStream,j=P.sessionDescriptionHandler.peerConnection,U=N.getVideoTracks();j.getSenders&&j.getSenders().filter(J=>J.track&&J.track.kind==="video").forEach(J=>{J.replaceTrack(null)}),U.forEach(J=>{J.enabled=!1,J.stop(),N.removeTrack(J)})}getStreamFromConstraints(P,N=!1){return i(this,void 0,void 0,function*(){const j=P&&P.video,{constraints:U}=this.getMediaConfiguration(j,N,P);let J;try{J=yield(0,I.wazoMediaStreamFactory)(U)}catch{}return J?(J.local=!0,J):null})}getHeldSession(P){return this.heldSessions[P]}isCallHeld(P){return this.getSipSessionId(P)in this.heldSessions}isVideoRemotelyHeld(P){const N=this.getPeerConnection(P),j=N&&N.remoteDescription?N.remoteDescription.sdp:null;return j?(0,_.getVideoDirection)(j)==="sendonly":!1}sendDTMF(P,N){return P.sessionDescriptionHandler?(O.info("Sending DTMF",{id:this.getSipSessionId(P),tone:N}),P.sessionDescriptionHandler.sendDtmf(N)):!1}message(P,N){const j=this._makeURI(P);if(!this.userAgent||!j){O.warn("Null value on message",{uri:j,userAgent:this.userAgent});return}new h.Messager(this.userAgent,j,N).message()}transfer(P,N){this.hold(P),O.info("Transfering a session",{id:this.getSipSessionId(P),target:N});const j={requestDelegate:{onAccept:()=>{this.hangup(P)}}};setTimeout(()=>{const U=this._makeURI(N);if(!U){O.warn("transfer timeout: null URI");return}P.refer(U,j)},50)}atxfer(P){this.hold(P),O.info("webrtc transfer started",{id:this.getSipSessionId(P)});const N={newSession:null,init:j=>i(this,void 0,void 0,function*(){O.info("webrtc transfer initialized",{id:this.getSipSessionId(P),target:j}),N.newSession=yield this.call(j)}),complete:()=>{O.info("webrtc transfer completed",{id:this.getSipSessionId(P),referId:this.getSipSessionId(N.newSession)}),P.refer(N.newSession)},cancel:()=>{this.hangup(N.newSession),this.unhold(P)}};return N}sendMessage(P=null,N,j="text/plain"){if(P){O.info("send WebRTC message",{sipId:P.id,contentType:j});try{P.message({requestOptions:{body:{content:N,contentType:j,contentDisposition:""}}})}catch(U){console.warn(U)}}}pingServer(){var P;if(!this.isConnected())return;const N=(P=this.userAgent)===null||P===void 0?void 0:P.userAgentCore,j=this._makeURI(this.config.authorizationUser||""),U=new f.URI("sip","",this.config.host);if(j){const J=N==null?void 0:N.makeOutgoingRequestMessage("OPTIONS",U,j,U,{});if(J)return N==null?void 0:N.request(J);O.warn("pingServer: null message")}O.warn("pingServer: null fromURI")}getState(){return this.userAgent?M[this.userAgent.state]:o.UserAgentState.Stopped}getContactIdentifier(){return this.userAgent?`${this.userAgent.configuration.contactName}/${this.userAgent.contact.uri}`:null}isFirefox(){return this._isWeb()&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1}changeAudioOutputVolume(P){O.info("Changing audio output volume",{volume:P}),Object.values(this.audioElements).forEach(N=>{N instanceof HTMLAudioElement&&(N.volume=P)}),this.audioOutputVolume=P}changeAudioOutputDevice(P){O.info("Changing audio output device",{id:P}),this.audioOutputDeviceId=P,Object.values(this.audioElements).forEach(N=>{N.setSinkId&&N.setSinkId(P)})}changeAudioInputDevice(P,N,j){return i(this,void 0,void 0,function*(){const U=this.getAudioDeviceId();if(O.info("setting audio input device",{id:P,currentId:U,session:!!N}),!j&&P===U)return null;let J=P;if(P==="default"&&navigator.mediaDevices){const oe=yield navigator.mediaDevices.enumerateDevices(),fe=oe.find(Oe=>Oe.deviceId==="default");if(fe){const Oe=fe.label.replace("Default - ",""),Be=oe.find(ze=>ze.label===Oe);if(Be&&(J=Be.deviceId,!j&&J===U))return null}}if(this.audio&&(this.audio={deviceId:{exact:J}}),N&&navigator.mediaDevices){const fe=N.sessionDescriptionHandler.peerConnection,Oe={audio:{deviceId:{exact:J}}},Be=yield navigator.mediaDevices.getUserMedia(Oe),ze=Be.getAudioTracks()[0],ut=fe&&fe.getSenders&&fe.getSenders().find(Gt=>ze&&Gt&&Gt.track&&Gt.track.kind===ze.kind);return ut&&(ut.track&&(ze.enabled=ut.track.enabled),ut.replaceTrack(ze)),Be}return null})}changeVideoInputDevice(P,N){return i(this,void 0,void 0,function*(){if(this.setVideoInputDevice(P),N)return this.changeSessionVideoInputDevice(P,N)})}setVideoInputDevice(P){const N=this.getVideoDeviceId();if(O.info("setting video input device",{id:P,currentId:N}),P===N)return null;const j=typeof this.video=="object"?this.video:{};this.video=Object.assign(Object.assign({},j),{deviceId:{exact:P}})}changeSessionVideoInputDevice(P,N){if(!this.sessionWantsToDoVideo(N))return Promise.resolve();const U=N.sessionDescriptionHandler.peerConnection,J=this.getSipSessionId(N),oe=this.getLocalStream(J);O.info("changing video input device",{id:P,sessionId:J}),oe&&oe.getVideoTracks().filter(Oe=>Oe.enabled).forEach(Oe=>Oe.stop());const fe={video:P?{deviceId:{exact:P}}:!0};return navigator.mediaDevices.getUserMedia(fe).then(Oe=>i(this,void 0,void 0,function*(){const Be=Oe.getVideoTracks()[0];let ze=U&&U.getSenders&&U.getSenders().find(Gt=>Be&&Gt&&Gt.track&&Gt.track.kind===Be.kind),ut=!1;return ze||(ze=U&&U.getSenders&&U.getSenders().find(Gt=>!Gt.track)),ze&&(ut=ze.track?ze.track.enabled:!1,Be.enabled=ut,ut||Be.stop(),ze.replaceTrack(ut?Be:null)),this.eventEmitter.emit("onVideoInputChange",Oe),this.setLocalMediaStream(J,Oe),Oe}))}getAudioDeviceId(){return this.audio&&typeof this.audio=="object"&&"deviceId"in this.audio?this.audio.deviceId.exact:void 0}getVideoDeviceId(){return this.video&&typeof this.video=="object"&&"deviceId"in this.video?this.video.deviceId.exact:void 0}reinvite(P,N=null,j=!1,U=!1,J=!1){if(!P||P.pendingReinvite)return Promise.resolve();const oe=this.isAudioMuted(P),fe=N?N.video:this.sessionWantsToDoVideo(P),Oe=N&&N.screen,Be=N&&N.desktop;if(O.info("Sending reinvite",{clientId:this.clientId,id:this.getSipSessionId(P),newConstraints:N,conference:j,audioOnly:U,wasMuted:oe,shouldDoVideo:fe,shouldDoScreenSharing:Oe,desktop:Be}),N&&N.video){const ut=P.sessionDescriptionHandlerModifiersReInvite;P.sessionDescriptionHandlerModifiersReInvite=ut.filter(Gt=>Gt!==d.stripVideo)}P.sessionDescriptionHandlerOptionsReInvite=Object.assign(Object.assign({},P.sessionDescriptionHandlerOptionsReInvite),{conference:j,audioOnly:U});const{constraints:ze}=this.getMediaConfiguration(fe,j,N);return P.invite({requestDelegate:{onAccept:ut=>(P instanceof A.Inviter&&P.outgoingRequestMessage.body?P.outgoingRequestMessage.body.body=ut.message.body:P instanceof A.Invitation&&(P.incomingInviteRequest.message.body=ut.message.body),O.info("on re-INVITE accepted",{id:this.getSipSessionId(P),wasMuted:oe,shouldDoScreenSharing:Oe}),this.updateRemoteStream(this.getSipSessionId(P),!1),oe&&this.mute(P),this._onAccepted(P,ut.session,!1,!1),Oe&&this.eventEmitter.emit(V,P,ut,Be),this.eventEmitter.emit(se,P,ut))},sessionDescriptionHandlerModifiers:[e.replaceLocalIpModifier],requestOptions:{extraHeaders:[`Subject: ${Oe?"screenshare":"upgrade-video"}`]},sessionDescriptionHandlerOptions:{constraints:ze,conference:j,audioOnly:U,offerOptions:{iceRestart:J}}})}getUserMedia(P){return i(this,void 0,void 0,function*(){const N={audio:this._getAudioConstraints(),video:this._getVideoConstraints(P.video)};return navigator.mediaDevices.getUserMedia(N)})}getPeerConnection(P){const N=this.sipSessions[P];return N&&N.sessionDescriptionHandler?N.sessionDescriptionHandler.peerConnection:null}getLocalStream(P){var N;const j=this.sipSessions[P];return((N=j==null?void 0:j.sessionDescriptionHandler)===null||N===void 0?void 0:N.localMediaStream)||null}getLocalTracks(P){const N=this.getLocalStream(P);return N?N.getTracks():[]}hasLocalVideo(P){return this.getLocalTracks(P).some(this._isVideoTrack)}hasALocalVideoTrack(P){return this.getLocalTracks(P).some(N=>N.kind==="video")}getLocalVideoStream(P){return this.hasLocalVideo(P)?this.getLocalStream(P):null}getRemoteStream(P){var N;const j=this.sipSessions[P];return((N=j==null?void 0:j.sessionDescriptionHandler)===null||N===void 0?void 0:N.remoteMediaStream)||null}getRemoteTracks(P){const N=this.getRemoteStream(P);return N?N.getTracks():[]}hasRemoteVideo(P){return this.getRemoteTracks(P).some(this._isVideoTrack)}hasARemoteVideoTrack(P){return this.getRemoteTracks(P).some(N=>N.kind==="video")}getRemoteVideoStream(P){return this.isVideoRemotelyHeld(P)?null:this.hasRemoteVideo(P)?this.getRemoteStream(P):null}getRemoteVideoStreamFromPc(P){const N=this.getPeerConnection(P);return N?N.getRemoteStreams().find(j=>!!j.getVideoTracks().length):null}hasVideo(P){return this.hasLocalVideo(P)||this.hasRemoteVideo(P)}hasAVideoTrack(P){return this.hasALocalVideoTrack(P)||this.hasARemoteVideoTrack(P)}getSipSessionId(P){var N;return P?!((N=P.message)===null||N===void 0)&&N.callId?P.message.callId.substring(0,R):P instanceof A.Inviter&&P.outgoingRequestMessage?P.outgoingRequestMessage.callId.substring(0,R):(P.id||"").substring(0,R):""}waitForRegister(){return i(this,void 0,void 0,function*(){return new Promise(P=>this.on(W,P))})}sessionWantsToDoVideo(P){if(!P)return!1;const{body:N}=P.request||P,j=typeof N=="object"&&N?N.body:N;return(0,_.hasAnActiveVideo)(j)}hasHeartbeat(){return this.heartbeat.hasHeartbeat}startHeartbeat(){if(O.info("sdk webrtc start heartbeat",{userAgent:!!this.userAgent,clientId:this.clientId}),!this.userAgent){this.heartbeat.stop();return}this.eventEmitter.off($e,this._boundOnHeartbeat),this.eventEmitter.on($e,this._boundOnHeartbeat),this.heartbeat.start()}stopHeartbeat(){O.info("sdk webrtc stop heartbeat",{clientId:this.clientId}),this.heartbeat.stop()}setOnHeartbeatTimeout(P){this.heartbeatTimeoutCb=P}setOnHeartbeatCallback(P){this.heartbeatCb=P}onCallEnded(P){this._cleanupMedia(P),delete this.sipSessions[this.getSipSessionId(P)],this._stopSendingStats(P),this.stopNetworkMonitoring(P)}attemptReconnection(){O.info("attempt reconnection",{clientId:this.clientId,userAgent:!!this.userAgent}),this.userAgent&&this.userAgent.attemptReconnection()}storeSipSession(P){const N=this.getSipSessionId(P);O.info("storing sip session",{id:N,clientId:this.clientId}),this.sipSessions[N]=P}getSipSession(P){return P in this.sipSessions?this.sipSessions[P.substring(0,R)]:null}getSipSessionIds(){return Object.keys(this.sipSessions)}setLocalMediaStream(P,N){const j=this.sipSessions[P];j&&(O.info("setting local media stream",{sipSessionId:P,tracks:N?N.getTracks():null}),j.sessionDescriptionHandler&&(j.sessionDescriptionHandler._localMediaStream=N))}updateLocalStream(P,N){const j=this.sipSessions[P];if(!j)return;const U=this.getLocalStream(P);O.info("updating local stream",{sipSessionId:P,oldStream:!!U,tracks:N.getTracks()}),U&&this._cleanupStream(U),this.setLocalMediaStream(P,N),this._setupMedias(j,N)}updateRemoteStream(P,N=!0){const j=this.getRemoteStream(P),U=this.getPeerConnection(P);O.info("Updating remote stream",{sessionId:P,tracks:j?j.getTracks():null,receiverTracks:U&&U.getReceivers?U.getReceivers().map(J=>J.track):null}),!(!U||!j)&&(j.getTracks().forEach(J=>{(N||J.kind==="video")&&j.removeTrack(J)}),U.getReceivers&&U.getReceivers().forEach(J=>{(N||J.track.kind==="video")&&j.addTrack(J.track)}))}getMediaConfiguration(P,N=!1,j=null){const U=j&&"screen"in j?j.screen:!1,J=j&&"desktop"in j?j.desktop:!1,oe=j&&"audio"in j?j.audio:!0,fe=j&&typeof j.video=="object"?j.video.mandatory:{};return O.info("Retrieving media a configuration",{enableVideo:P,screenSharing:U,isDesktop:J,withAudio:oe,constraints:j}),{constraints:{audio:U?!J:oe?this._getAudioConstraints():!1,video:U?J?{mandatory:Object.assign({chromeMediaSource:"desktop"},fe||{})}:{cursor:"always"}:this._getVideoConstraints(P),screen:U,desktop:J,conference:N},enableVideo:P,conference:N,offerOptions:{OfferToReceiveAudio:this._hasAudio(),OfferToReceiveVideo:P,mandatory:{OfferToReceiveAudio:this._hasAudio(),OfferToReceiveVideo:P}}}}isConference(P){return P in this.conferences}createAudioElementFor(P){const N=document.createElement("audio");return N.setAttribute("id",`audio-${P}`),O.info("creating audio element",{sessionId:P,audioOutputDeviceId:this.audioOutputDeviceId}),N.setSinkId&&this.audioOutputDeviceId&&N.setSinkId(this.audioOutputDeviceId),document.body&&document.body.appendChild(N),this.audioElements[P]=N,N.volume=this.audioOutputVolume,N.autoplay=!0,N}_onTransportError(){O.error("on transport error"),this.eventEmitter.emit(we),this.attemptReconnection()}_onHeartbeat(P){const N=P&&typeof P=="object"?P.data:P;N&&N.indexOf("200 OK")!==-1&&this.hasHeartbeat()&&(O.info("on heartbeat received from Asterisk",{hasHeartbeat:this.hasHeartbeat()}),this.heartbeat.onHeartbeat(),this.heartbeatCb&&this.heartbeatCb())}_onHeartbeatTimeout(){return i(this,void 0,void 0,function*(){if(O.warn("sdk webrtc heartbeat timed out",{userAgent:!!this.userAgent,cb:!!this.heartbeatTimeoutCb}),this.heartbeatTimeoutCb&&this.heartbeatTimeoutCb(),this.userAgent&&this.userAgent.transport){if(!this.userAgent.transport.transitioningState&&!this.userAgent.transport.disconnectPromise)try{yield this.userAgent.transport.disconnect()}catch(P){O.error("Transport disconnection after heartbeat timeout, error",P)}this._onTransportError()}})}_isWeb(){return typeof window=="object"&&typeof document=="object"}_isVideoTrack(P){return P.kind==="video"&&P.readyState==="live"}_hasAudio(){return this.hasAudio}_getAudioConstraints(){var P,N;return!((N=(P=this.audio)===null||P===void 0?void 0:P.deviceId)===null||N===void 0)&&N.exact?this.audio:!0}_getVideoConstraints(P=!1){var N,j;return P?!((j=(N=this.video)===null||N===void 0?void 0:N.deviceId)===null||j===void 0)&&j.exact?this.video:!0:!1}_connectIfNeeded(){return O.info("connect if needed, checking",{connected:this.isConnected(),clientId:this.clientId}),this.userAgent||(O.info("need to recreate User Agent"),this.userAgent=this.createUserAgent(this.uaConfigOverrides)),this.isConnected()?(O.info("webrtc sdk, already connected"),Promise.resolve()):this.isConnecting()?(O.info("webrtc sdk, already connecting..."),this.connectionPromise=this.userAgent.transport.connectPromise,Promise.resolve(this.connectionPromise)):this.connectionPromise?(O.info("webrtc sdk, connection promise connecting..."),this.connectionPromise):(O.info("WebRTC UA needs to connect"),this.userAgent&&this.userAgent.state!==o.UserAgentState.Stopped&&this.userAgent.transitionState(o.UserAgentState.Stopped),this.userAgent.transport&&this.userAgent.transport.state!==p.TransportState.Disconnected&&this.userAgent.transport.transitionState(p.TransportState.Disconnected),this.connectionPromise=this.userAgent.start().catch(console.error),this.connectionPromise)}_buildConfig(P,N){if(!N)return new Promise(U=>U(P));const j=new x.default({server:`${P.host}:${String(P.port||443)}`});return j.setToken(N.token),j.setRefreshToken(N.refreshToken),j.confd.getUserLineSipFromToken(N.uuid).then(U=>Object.assign({authorizationUser:U.username,password:U.secret,uri:`${U.username}@${P.host}`},P))}_createUaOptions(P={}){let{host:N}=this.config,j=this.config.port||443;if(this.config.websocketSip){const oe=this.config.websocketSip.split(":");[N]=oe,j=Number(oe[1])}const{userUuid:U}=this.config,J={noAnswerTimeout:me,authorizationUsername:this.config.authorizationUser,authorizationPassword:this.config.password,displayName:this.config.displayName,hackIpInContact:!0,contactParams:{transport:"wss"},logBuiltinEnabled:this.config.log?this.config.log.builtinEnabled:null,logLevel:this.config.log?this.config.log.logLevel:null,logConnector:this.config.log?this.config.log.connector:null,uri:this._makeURI(this.config.authorizationUser||""),userAgentString:this.config.userAgentString||"wazo-sdk",reconnectionAttempts:1e4,reconnectionDelay:5,sessionDescriptionHandlerFactory:(oe,fe={})=>{const Oe=oe.userAgent.getLogger("sip.WazoSessionDescriptionHandler"),Be=this._isWeb(),ze="peerConnectionOptions"in fe&&fe.peerConnectionOptions.iceGatheringTimeout||D,ut=Object.assign(Object.assign({},fe),{iceGatheringTimeout:ze,peerConnectionConfiguration:Object.assign(Object.assign({},(0,y.defaultPeerConnectionConfiguration)()),fe.peerConnectionConfiguration||{})});return new I.default(Oe,I.wazoMediaStreamFactory,ut,Be,oe)},transportOptions:{traceSip:(P==null?void 0:P.traceSip)||!1,wsServers:`wss://${N}:${j}/api/asterisk/ws${U?`?userUuid=${U}`:""}`},sessionDescriptionHandlerFactoryOptions:{modifiers:[e.replaceLocalIpModifier],alwaysAcquireMediaFirst:this.isFirefox(),constraints:{audio:this._getAudioConstraints(),video:this._getVideoConstraints()},peerConnectionOptions:{iceCheckingTimeout:this.config.iceCheckingTimeout||1e3,iceGatheringTimeout:this.config.iceCheckingTimeout||1e3,rtcConfiguration:Object.assign(Object.assign({rtcpMuxPolicy:"require",iceServers:Ce.getIceServers(this.config.host)},this._getRtcOptions()),(P==null?void 0:P.peerConnectionOptions)||{})},peerConnectionConfiguration:Object.assign({rtcpMuxPolicy:"require",iceServers:Ce.getIceServers(this.config.host)},(P==null?void 0:P.peerConnectionOptions)||{})}};return P==null||delete P.traceSip,Object.assign(Object.assign({},J),P)}_getRtcOptions(){return{mandatory:{OfferToReceiveAudio:this._hasAudio(),OfferToReceiveVideo:!1}}}_setupSession(P){const N=this.getSipSessionId(P);P.delegate||(P.delegate={}),P.delegate.onSessionDescriptionHandler=J=>{J.on("error",oe=>{this.eventEmitter.emit(Ee,oe)}),J.peerConnectionDelegate={onicecandidateerror:oe=>{O.error("on icecandidate error",{address:oe.address,port:oe.port,errorCode:oe.errorCode,errorText:oe.errorText,url:oe.url})}}};const j=P.onInviteRequest.bind(P);let U=!1;P.onInviteRequest=J=>{U=this.hasARemoteVideoTrack(N),j(J)},P.delegate.onInvite=J=>{let oe=null,fe=null;return P.assertedIdentity&&(fe=P.assertedIdentity.uri.normal.user,oe=P.assertedIdentity.displayName||fe),O.info("re-invite received",{updatedCalleeName:oe,updatedNumber:fe,hadRemoteVideo:U}),P instanceof A.Invitation?P.incomingInviteRequest.message.body=J.body:P instanceof A.Inviter&&P.outgoingInviteRequest.message.body&&(P.outgoingInviteRequest.message.body.body=J.body),this.updateRemoteStream(N,!1),this._setupMedias(P),this.eventEmitter.emit(se,P,J,oe,fe,U)}}_onEarlyProgress(P){this._setupMedias(P);const N=this.getSipSessionId(P).substr(0,20);this.updateRemoteStream(N),O.info("Early media progress progress received",{sessionId:N}),this.eventEmitter.emit(z,P)}_onAccepted(P,N,j=!0,U=!0){var J;O.info("on call accepted",{id:P.id,clientId:this.clientId,remoteTag:P.remoteTag}),this.storeSipSession(P),this._setupMedias(P),this.updateRemoteStream(this.getSipSessionId(P),U);const oe=(J=P.sessionDescriptionHandler)===null||J===void 0?void 0:J.peerConnection,fe=Oe=>{const Be=this._isAudioOnly(P),{kind:ze,label:ut,readyState:Gt,id:ya,muted:pi}=Oe.track;O.info("on track event",{isAudioOnly:Be,kind:ze,label:ut,readyState:Gt,id:ya,muted:pi}),Be&&ze==="video"&&Oe.track.stop(),this.eventEmitter.emit(K,P,Oe)};P.sessionDescriptionHandler.peerConnection&&P.sessionDescriptionHandler.peerConnection.addEventListener("track",fe),P.sessionDescriptionHandler.remoteMediaStream.onaddtrack=fe,oe&&(oe.oniceconnectionstatechange=()=>{O.info("on ice connection state changed",{state:oe.iceConnectionState}),oe.iceConnectionState==="disconnected"&&this.eventEmitter.emit(G)}),j&&this.eventEmitter.emit(le,P,N),this._startSendingStats(P)}_isAudioOnly(P){return!!P.sessionDescriptionHandlerModifiersReInvite.find(N=>N===d.stripVideo)}_setupMedias(P,N=null){if(!this._isWeb()){O.info("Setup media on mobile, no need to setup html element, bailing");return}const j=this.getSipSessionId(P),U=this.isConference(j);if(j in this.audioElements){O.info("html element already exists for session",{sessionId:j});return}this._hasAudio()&&this._isWeb()&&!(j in this.audioElements)&&this.createAudioElementFor(j);const J=this.audioElements[j],oe=this.sipSessions[P.callId],fe=this.getRemoteStream(j),Oe=oe&&oe.sessionDescriptionHandler?oe.sessionDescriptionHandler.remoteMediaStream:null,Be=N||fe||Oe;if(!Be){O.info("Setup media no stream to attach, bailing");return}const ze=J.currentTime>0&&!J.paused&&!J.ended&&J.readyState>2;O.info("setting up media",{sessionId:j,streams:{new:!!N,remove:!!fe,early:!!Oe},hasAudio:this._hasAudio(),isConference:U,shouldPause:ze}),!U&&(ze&&J.pause(),J.srcObject=Be,J.volume=this.audioOutputVolume,J.play().catch(()=>{}))}_cleanupMedia(P){const N=this.getSipSessionId(P),j=this.getLocalStream(N);j&&this._cleanupStream(j);const U=J=>{const oe=this.audioElements[J];oe&&(oe.pause(),oe.parentNode&&oe.parentNode.removeChild(oe),oe.srcObject=null,delete this.audioElements[J])};this._hasAudio()&&this._isWeb()&&(P?U(this.getSipSessionId(P)):Object.keys(this.audioElements).forEach(J=>U(J)))}_cleanupStream(P){P.getTracks().filter(N=>N.enabled).forEach(N=>N.stop())}_toggleAudio(P,N){const j=P.sessionDescriptionHandler?P.sessionDescriptionHandler.peerConnection:null;j&&(j.getSenders?j.getSenders().forEach(U=>{U&&U.track&&U.track.kind==="audio"&&(U.track.enabled=!N)}):j.getLocalStreams().forEach(U=>{U.getAudioTracks().forEach(J=>{J.enabled=!N})}))}_toggleVideo(P,N){var j;const U=(j=P.sessionDescriptionHandler)===null||j===void 0?void 0:j.peerConnection;U.getSenders?U.getSenders().forEach(J=>{J&&J.track&&J.track.kind==="video"&&(J.track.enabled=!N)}):U.getLocalStreams().forEach(J=>{J.getVideoTracks().forEach(oe=>{oe.enabled=!N})})}_getRemoteStream(P){let N=null;return P&&P.getReceivers?(N=typeof Y<"u"&&Y.window&&Y.window.MediaStream?new Y.window.MediaStream:new window.MediaStream,P.getReceivers().forEach(j=>{const{track:U}=j;U&&N&&N.addTrack(U)})):P&&([N]=P.getRemoteStreams()),N}_cleanupRegister(){this.registerer&&(this.registerer.stateChange.removeAllListeners(),this.registerer=null)}_startSendingStats(P){const N=P.sessionDescriptionHandler.peerConnection;if(!N)return;const j=this.getSipSessionId(P);(0,w.default)(N,U=>{const{results:J,internal:oe,nomore:fe}=U,Oe=s(U,["results","internal","nomore"]);this.statsIntervals[j]=fe,L.trace("stats",Object.assign({sessionId:j},Oe))},$)}_stopSendingStats(P){const N=this.getSipSessionId(P);O.trace("Check for stopping stats",{sessionId:N,ids:Object.keys(this.statsIntervals)}),N in this.statsIntervals&&(O.trace("Stop sending stats for call",{sessionId:N}),this.statsIntervals[N](),delete this.statsIntervals[N])}_makeURI(P){return c.UserAgent.makeURI(`sip:${P}@${this.config.host}`)}_disconnectTransport(P=!1){return i(this,void 0,void 0,function*(){if(P&&this.userAgent&&this.userAgent.transport){this.userAgent.transport.disconnectResolve=()=>{},this.userAgent.transport._ws&&this.userAgent.transport._ws.close(1e3);return}if(this.userAgent&&this.userAgent.transport&&!this.userAgent.transport.disconnectPromise)try{yield this.userAgent.transport.disconnect()}catch(N){O.error("WebRTC transport disconnect, error",N)}})}_fetchNetworkStats(P){return i(this,void 0,void 0,function*(){const N=this.getSipSession(P),j=N?yield this.getStats(N):null;if(!j||!(P in this.sessionNetworkStats))return Promise.resolve(null);const U={audioBytesSent:0,videoBytesSent:0,videoBytesReceived:0,audioBytesReceived:0},J=this.sessionNetworkStats[P].length,oe=this.sessionNetworkStats[P][J-1],fe=oe?oe.audioBytesSent:0,Oe=oe?oe.audioContentSent:0,Be=oe?oe.videoBytesSent:0,ze=oe?oe.audioBytesReceived:0,ut=oe?oe.audioContentReceived:0,Gt=oe?oe.videoBytesReceived:0,ya=oe?oe.transportSent:0,pi=oe?oe.transportReceived:0;let Es=0,Tn=0,Wn=0,ba=0,xf=0,Cf=0,Ef=0,Tf=0,cu=0;j.forEach(lt=>{lt.type==="outbound-rtp"&&lt.kind==="audio"&&(Es+=Number(lt.bytesSent)+Number(lt.headerBytesSent),Wn+=Number(lt.bytesSent)),lt.type==="remote-outbound-rtp"&&lt.kind==="audio"&&(Es+=Number(lt.bytesSent)),lt.type==="outbound-rtp"&&lt.kind==="video"&&(xf+=Number(lt.bytesSent)+Number(lt.headerBytesSent)),lt.type==="inbound-rtp"&&lt.kind==="audio"&&(cu+=Number(lt.packetsLost),U.packetsReceived=Number(lt.packetsReceived),Tn+=Number(lt.bytesReceived)+Number(lt.headerBytesReceived),ba+=Number(lt.bytesReceived)),lt.type==="inbound-rtp"&&lt.kind==="video"&&(Cf+=Number(lt.bytesReceived)+Number(lt.headerBytesReceived)),lt.type==="outbound-rtp"&&lt.kind==="video"&&("framesPerSecond"in lt&&(U.framesPerSecond=Number(lt.framesPerSecond)),"framerateMean"in lt&&(U.framesPerSecond=Math.round(lt.framerateMean))),lt.type==="remote-inbound-rtp"&&lt.kind==="audio"&&(cu+=Number(lt.packetsLost),U.roundTripTime=Number(lt.roundTripTime),U.jitter=Number(lt.jitter)),lt.type==="remote-inbound-rtp"&&lt.kind==="video"&&(cu+=Number(lt.packetsLost)),lt.type==="transport"&&(Ef+=Number(lt.bytesSent),Tf+=Number(lt.bytesReceived))}),U.packetsLost=cu,U.totalAudioBytesSent=Es,U.audioBytesSent=Es-fe,U.totalAudioBytesReceived=Tn-ze,U.audioBytesReceived=Tn,U.totalAudioContentSent=Wn,U.audioContentSent=Wn-Oe,U.totalAudioBytesReceived=ba-ut,U.audioContentReceived=ba,U.totalVideoBytesSent=xf,U.videoBytesSent=xf-Be,U.totalVideoBytesReceived=Cf,U.videoBytesReceived=Cf-Gt,U.totalTransportSent=Ef-ya,U.transportSent=Ef,U.totalTransportReceived=Tf,U.transportReceived=Tf-pi,U.bandwidth=U.audioBytesSent+U.audioBytesReceived+U.videoBytesSent+U.videoBytesReceived+U.transportReceived+U.transportSent,this.sessionNetworkStats[P]&&(this.eventEmitter.emit(H,N,U,this.sessionNetworkStats[P]),this.sessionNetworkStats[P].push(U))})}_accept(P,N={}){return i(this,void 0,void 0,function*(){if(P.state===v.SessionState.Terminated||P.state===v.SessionState.Terminating){const j="Trying to accept a terminated sipSession.";throw O.warn(j,{state:P.state,sessionId:P.id}),new Error(j)}if(P.state!==v.SessionState.Initial){const j="Trying to accept a non Initial sipSession.";throw O.warn(j,{state:P.state,sessionId:P.id}),new Error(j)}if(!P.incomingInviteRequest.acceptable){const j="Trying to reject a non `acceptable` session";throw O.warn(j,{state:P.state,sessionId:P.id}),new Error(j)}try{return yield P.accept(N)}catch(j){O.warn("Session accept, error",j)}})}_reject(P,N={}){return i(this,void 0,void 0,function*(){if(P.state!==v.SessionState.Initial&&P.state!==v.SessionState.Establishing){O.warn("Trying to reject a session in a wrong state",{state:P.state,sessionId:P.id});return}if(!P.incomingInviteRequest.rejectable){O.warn("Trying to reject a non `rejectable` session",{state:P.state,sessionId:P.id});return}try{return yield P.reject(N)}catch(j){O.warn("Session reject, error",j)}})}_cancel(P,N={}){return i(this,void 0,void 0,function*(){if(P.state!==v.SessionState.Initial&&P.state!==v.SessionState.Establishing){O.warn("Trying to cancel a session in a wrong state",{state:P.state,sessionId:P.id});return}try{return yield P.cancel(N)}catch(j){O.warn("Session cancel, error",j)}})}_bye(P,N={}){return i(this,void 0,void 0,function*(){if(P.state!==v.SessionState.Established)return O.warn("Trying to end a session in a wrong state",{state:P.state,sessionId:P.id}),null;try{return yield P.bye(N)}catch(j){O.warn("Session bye, error",j)}return null})}}e.default=Ce})(kS);const dN=_v(kS);var fN={};(function(e){var t=Y&&Y.__awaiter||function(f,c,d,h){function g(v){return v instanceof d?v:new d(function(p){p(v)})}return new(d||(d=Promise))(function(v,p){function y(I){try{A(h.next(I))}catch(k){p(k)}}function w(I){try{A(h.throw(I))}catch(k){p(k)}}function A(I){I.done?v(I.value):g(I.value).then(y,w)}A((h=h.apply(f,c||[])).next())})},n=Y&&Y.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.events=e.MESSAGE_TYPE_SIGNAL=e.MESSAGE_TYPE_CHAT=e.ON_EARLY_MEDIA=e.ON_DISCONNECTED=e.ON_SIGNAL=e.ON_CHAT=e.ON_NETWORK_STATS=e.ON_MESSAGE_TRACK_UPDATED=e.ON_CALL_ERROR=e.ON_VIDEO_INPUT_CHANGE=e.ON_PLAY_PROGRESS_SOUND=e.ON_PLAY_HANGUP_SOUND=e.ON_PLAY_INBOUND_CALL_SIGNAL_SOUND=e.ON_PLAY_RING_SOUND=e.ON_TERMINATE_SOUND=e.ON_SHARE_SCREEN_ENDED=e.ON_SHARE_SCREEN_ENDING=e.ON_SHARE_SCREEN_STARTED=e.ON_REMOVE_STREAM=e.ON_VIDEO_STREAM=e.ON_AUDIO_STREAM=e.ON_TRACK=e.ON_REINVITE=e.ON_MESSAGE=e.ON_CALL_ENDING=e.ON_CALL_ENDED=e.ON_CALL_REJECTED=e.ON_CALL_FAILED=e.ON_CALL_CANCELED=e.ON_CAMERA_RESUMED=e.ON_CAMERA_DISABLED=e.ON_CALL_UNHELD=e.ON_CALL_HELD=e.ON_CALL_RESUMED=e.ON_CALL_UNMUTED=e.ON_CALL_MUTED=e.ON_CALL_OUTGOING=e.ON_CALL_INCOMING=e.ON_CALL_ANSWERED=e.ON_CALL_ACCEPTED=e.ON_PROGRESS=e.ON_UNREGISTERED=e.ON_REGISTERED=e.ON_USER_AGENT=void 0;const r=Pv,i=N_,s=n(Md),a=n(Gl),o=n(yo());e.ON_USER_AGENT="onUserAgent",e.ON_REGISTERED="onRegistered",e.ON_UNREGISTERED="onUnRegistered",e.ON_PROGRESS="onProgress",e.ON_CALL_ACCEPTED="onCallAccepted",e.ON_CALL_ANSWERED="onCallAnswered",e.ON_CALL_INCOMING="onCallIncoming",e.ON_CALL_OUTGOING="onCallOutgoing",e.ON_CALL_MUTED="onCallMuted",e.ON_CALL_UNMUTED="onCallUnmuted",e.ON_CALL_RESUMED="onCallResumed",e.ON_CALL_HELD="onCallHeld",e.ON_CALL_UNHELD="onCallUnHeld",e.ON_CAMERA_DISABLED="onCameraDisabled",e.ON_CAMERA_RESUMED="onCameraResumed",e.ON_CALL_CANCELED="onCallCanceled",e.ON_CALL_FAILED="onCallFailed",e.ON_CALL_REJECTED="onCallRejected",e.ON_CALL_ENDED="onCallEnded",e.ON_CALL_ENDING="onCallEnding",e.ON_MESSAGE="onMessage",e.ON_REINVITE="reinvite",e.ON_TRACK="onTrack",e.ON_AUDIO_STREAM="onAudioStream",e.ON_VIDEO_STREAM="onVideoStream",e.ON_REMOVE_STREAM="onRemoveStream",e.ON_SHARE_SCREEN_STARTED="onScreenShareStarted",e.ON_SHARE_SCREEN_ENDING="onScreenShareEnding",e.ON_SHARE_SCREEN_ENDED="onScreenShareEnded",e.ON_TERMINATE_SOUND="terminateSound",e.ON_PLAY_RING_SOUND="playRingingSound",e.ON_PLAY_INBOUND_CALL_SIGNAL_SOUND="playInboundCallSignalSound",e.ON_PLAY_HANGUP_SOUND="playHangupSound",e.ON_PLAY_PROGRESS_SOUND="playProgressSound",e.ON_VIDEO_INPUT_CHANGE="videoInputChange",e.ON_CALL_ERROR="onCallError",e.ON_MESSAGE_TRACK_UPDATED="onTrackUpdated",e.ON_NETWORK_STATS="onNetworkStats",e.ON_CHAT="phone/ON_CHAT",e.ON_SIGNAL="phone/ON_SIGNAL",e.ON_DISCONNECTED="onDisconnected",e.ON_EARLY_MEDIA="onEarlyMedia",e.MESSAGE_TYPE_CHAT="message/TYPE_CHAT",e.MESSAGE_TYPE_SIGNAL="message/TYPE_SIGNAL",e.events=[e.ON_USER_AGENT,e.ON_REGISTERED,e.ON_UNREGISTERED,e.ON_PROGRESS,e.ON_CALL_ACCEPTED,e.ON_CALL_ANSWERED,e.ON_CALL_INCOMING,e.ON_CALL_OUTGOING,e.ON_CALL_MUTED,e.ON_CALL_UNMUTED,e.ON_CALL_RESUMED,e.ON_CALL_HELD,e.ON_CALL_UNHELD,e.ON_CAMERA_DISABLED,e.ON_CALL_FAILED,e.ON_CALL_ENDED,e.ON_CALL_REJECTED,e.ON_MESSAGE,e.ON_REINVITE,e.ON_TRACK,e.ON_AUDIO_STREAM,e.ON_VIDEO_STREAM,e.ON_REMOVE_STREAM,e.ON_SHARE_SCREEN_ENDED,e.ON_TERMINATE_SOUND,e.ON_PLAY_RING_SOUND,e.ON_PLAY_INBOUND_CALL_SIGNAL_SOUND,e.ON_PLAY_HANGUP_SOUND,e.ON_PLAY_PROGRESS_SOUND,e.ON_VIDEO_INPUT_CHANGE,e.ON_SHARE_SCREEN_STARTED,e.ON_CALL_ERROR,e.ON_CHAT,e.ON_SIGNAL,e.ON_NETWORK_STATS,e.ON_DISCONNECTED,e.ON_EARLY_MEDIA];const l=o.default.loggerFor("webrtc-phone");class u extends a.default{constructor(c,d,h=!1,g){super(),this.client=c,this.allowVideo=h,this.callSessions={},this.audioOutputDeviceId=d,this.audioRingDeviceId=g||d,this.audioOutputVolume=1,this.audioRingVolume=1,this.incomingSessions=[],this.ringingEnabled=!0,this.shouldSendReinvite=!1,this.bindClientEvents(),this.acceptedSessions={},this.rejectedSessions={},this.ignoredSessions={}}register(){return l.info("WebRTC register",{client:!!this.client}),this.client?this.client.register().then(()=>(l.info("WebRTC register, registered"),this.bindClientEvents())).catch(c=>{console.error("register error",c,c.message,c.stack),l.error("WebRTC register error",{message:c.message,stack:c.stack})}):Promise.resolve()}unregister(){return!this.client||!this.client.isRegistered()?null:this.client.unregister()}stop(){this.client&&(l.info("WebRTC phone stop"),this.client.stop())}removeIncomingSessions(c){this.incomingSessions=this.incomingSessions.filter(d=>d!==c)}isWebRTC(){return!0}sendReinvite(c,d=null,h=!1,g=!1,v=!1){return t(this,void 0,void 0,function*(){const p=this.findSipSession(c);if(l.info("WebRTC phone - send reinvite",{sessionId:p?p.id:null,constraints:d,audioOnly:g,conference:h,iceRestart:v}),!p)return;const w=(d==null?void 0:d.screen)||(d==null?void 0:d.video);if(d&&!w){this._downgradeToAudio(c);return}if(!(w&&!(yield this._upgradeToVideo(c,d,h))))return this.client.reinvite(p,d,h,g,v)})}getUserAgent(){var c,d;return((d=(c=this.client)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.userAgentString)||"webrtc-phone"}startHeartbeat(){l.info("WebRTC phone - start heartbeat",{client:!!this.client,hasHeartbeat:this.client.hasHeartbeat()}),!(!this.client||this.client.hasHeartbeat())&&this.client.startHeartbeat()}stopHeartbeat(){l.info("WebRTC phone - stopHeartbeat",{client:!!this.client}),this.client&&this.client.stopHeartbeat()}setOnHeartbeatTimeout(c){this.client.setOnHeartbeatTimeout(c)}setOnHeartbeatCallback(c){this.client.setOnHeartbeatCallback(c)}reconnect(){l.info("WebRTC phone - reconnect",{client:!!this.client}),this.client&&this.client.attemptReconnection()}getOptions(){return{accept:!0,decline:!0,mute:!0,hold:!0,transfer:!0,sendKey:!0,addParticipant:!1,record:!0,merge:!0}}onConnect(){return this.client?this.client.onConnect():Promise.reject(new Error("No webrtc client"))}onDisconnect(){return this.client?this.client.onDisconnect():Promise.reject(new Error("No webrtc client"))}_downgradeToAudio(c,d=!0){const h=this.findSipSession(c);return h?(l.info("Downgrade to audio",{id:c?c.getId():null,withMessage:d}),this.client.downgradeToAudio(h),c&&(c.cameraEnabled=!1,this._updateCallSession(c)),d&&this._sendReinviteMessage(c,!1),!0):!1}_upgradeToVideo(c,d,h){return t(this,void 0,void 0,function*(){const g=this.findSipSession(c);if(!g)return Promise.resolve(!1);l.info("Upgrade to video",{id:c?c.getId():null,constraints:d,isConference:h});const v=d&&!!d.screen,p=d&&d.desktop,y=g.sessionDescriptionHandlerOptionsReInvite,w=y==null?void 0:y.audioOnly,A=yield this.client.upgradeToVideo(g,d,h);return c&&(c.cameraEnabled=!0,this._updateCallSession(c)),!!(!A||(this._sendReinviteMessage(c,!0),v&&this._onScreenSharing(A,g,c,!1,p),h&&w))})}_sendReinviteMessage(c,d){const h=this.findSipSession(c);l.info("Sending reinvite message",{id:c?c.getId():null,isUpgrade:d}),setTimeout(()=>{this.sendMessage(h,JSON.stringify({type:e.MESSAGE_TYPE_SIGNAL,content:{type:e.ON_MESSAGE_TRACK_UPDATED,update:d?"upgrade":"downgrade",sipCallId:h&&this.getSipSessionId(h),callId:c?c.callId:null,number:c?c.number:null,callerNumber:c?c.callerNumber:null}}))},2500)}_bindEvents(c){const d=this.getSipSessionId(c);if(c instanceof i.Invitation){const g=c._onCancel.bind(c);c._onCancel=v=>{l.trace("on sip session canceled",{callId:v.callId,sipSessionId:d}),g(v);const p=v.data.indexOf("cause=26")!==-1&&v.data.indexOf("completed elsewhere")!==-1,y=this._createCallSession(c);delete this.callSessions[d],this.eventEmitter.emit(e.ON_CALL_CANCELED,y,p)}}if(c.stateChange.addListener(g=>{switch(g){case r.SessionState.Establishing:return c instanceof i.Invitation?void 0:this.eventEmitter.emit(e.ON_PROGRESS,this._createCallSession(c,null,{incoming:!1,ringing:!0}),this.audioOutputDeviceId,this.audioOutputVolume);case r.SessionState.Terminating:l.info("WebRTC phone - call terminating",{sipId:c.id}),this.eventEmitter.emit(e.ON_CALL_ENDING,this._createCallSession(c));break;case r.SessionState.Terminated:{l.info("WebRTC phone - call terminated",{sipId:c.id});const v=this._createCallSession(c);v.endTime=new Date;const p=this._onCallTerminated(c);return this.eventEmitter.emit(e.ON_CALL_ENDED,v,p)}}}),!c.sessionDescriptionHandler)return;const{peerConnection:h}=c.sessionDescriptionHandler;h.ontrack=g=>{const v=g,[p]=v.streams,y=v&&v.track&&v.track.kind;return l.info("on track stream called on the peer connection",{callId:this.getSipSessionId(c),streamId:p?p.id:null,tracks:p?p.getTracks():null,kind:y}),y==="audio"?this.eventEmitter.emit(e.ON_AUDIO_STREAM,p):this.eventEmitter.emit(e.ON_VIDEO_STREAM,p,v.track.id,v,c)},h.onremovestream=g=>{l.info("on remove stream called on the peer connection",{id:g.stream.id,tracks:g.stream.getTracks()}),this.eventEmitter.emit(e.ON_REMOVE_STREAM,g.stream)}}startScreenSharing(c,d){return t(this,void 0,void 0,function*(){l.info("WebRTC - start screen sharing",{constraints:c,id:d?d.getId():null});const h=yield this.client.getStreamFromConstraints(c);if(!h)throw new Error(`Can't create media stream for screensharing with: ${JSON.stringify(c)}`);const g=h.getVideoTracks()[0],v=this.currentSipSession,p=v&&this.client.getPeerConnection(this.getSipSessionId(v)),y=p&&p.getSenders&&p.getSenders().find(k=>k&&k.track&&k.track.kind==="video"),w=v&&this.client.getLocalStream(this.getSipSessionId(v)),A=w?w.getTracks().find(k=>k.kind==="video"):null,I=!!A;return A&&w&&(A.enabled=!1,A.stop(),w.removeTrack(A)),w&&w.addTrack(g),y&&y.replaceTrack(g),this._onScreenSharing(h,v,d,I,c.desktop),h})}stopScreenSharing(c=!0,d){return t(this,void 0,void 0,function*(){if(!this.currentScreenShare)return;l.info("WebRTC phone - stop screen sharing",{restoreLocalStream:c});let h=null;try{if(this.currentScreenShare.stream&&this.currentScreenShare.stream.getTracks().filter(v=>v.enabled&&v.kind==="video").forEach(v=>v.stop()),c){const v=d||this.currentCallSession,p=this.isConference(v),w={audio:!1,video:this.currentScreenShare.hadVideo};this._downgradeToAudio(v,!1),yield new Promise(A=>setTimeout(A,500)),h=yield this.sendReinvite(v,w,p)}}catch(v){console.warn(v)}const g=this.currentSipSession;return this.eventEmitter.emit(e.ON_SHARE_SCREEN_ENDED,d&&g?this._createCallSession(g,d,{screensharing:!1}):null),this.currentScreenShare=null,h})}_onScreenSharing(c,d,h,g,v){const p=c.getVideoTracks()[0],y=this.getSipSessionId(d),w=this.client.getPeerConnection(y),A=w&&w.getSenders&&w.getSenders().find(I=>I&&I.track&&I.track.kind==="video");l.info("WebRTC phone - on screensharing",{hadVideo:g,id:this.getSipSessionId(d),screenTrack:p}),p&&(p.onended=()=>{l.info("WebRTC phone - on screenshare ended",{hadVideo:g,id:this.getSipSessionId(d),screenTrack:p}),this.eventEmitter.emit(e.ON_SHARE_SCREEN_ENDING,this._createCallSession(d,h))}),this.currentScreenShare={stream:c,hadVideo:g,sender:A,sipSessionId:y,desktop:v},this.client.setLocalMediaStream(this.getSipSessionId(d),c),this.eventEmitter.emit(e.ON_SHARE_SCREEN_STARTED,this._createCallSession(d,h,{screensharing:!0}),c)}_onCallAccepted(c,d){l.info("WebRTC phone - on call accepted",{sipId:c.id,cameraEnabled:d});const h=this._createAcceptedCallSession(c,d);this.currentSipSession=c,this.currentCallSession=h,this.eventEmitter.emit(e.ON_TERMINATE_SOUND,h,"call accepted");const g=this.getSipSessionId(c);return g&&this.removeIncomingSessions(g),h.answerTime=new Date,this._updateCallSession(h),this.eventEmitter.emit(e.ON_CALL_ACCEPTED,h,d),h}changeAudioDevice(c){l.info("WebRTC phone - change audio device",{deviceId:c}),this.audioOutputDeviceId=c,this.client.changeAudioOutputDevice(c)}createAudioElementFor(c){return this.client.createAudioElementFor(c)}changeRingDevice(c){l.info("WebRTC phone - changing ring device",{id:c}),this.audioRingDeviceId=c}changeAudioVolume(c){l.info("WebRTC phone - changing audio volume",{volume:c}),this.audioOutputVolume=c,this.client.changeAudioOutputVolume(c)}changeRingVolume(c){l.info("WebRTC phone - changing ring volume",{volume:c}),this.audioRingVolume=c}changeAudioInputDevice(c,d){return l.info("WebRTC phone - changeAudio input device",{deviceId:c}),this.client.changeAudioInputDevice(c,this.currentSipSession,d)}changeVideoInputDevice(c){return t(this,void 0,void 0,function*(){return l.info("WebRTC phone - change video input device",{deviceId:c}),this.client.changeVideoInputDevice(c,this.currentSipSession)})}changeSessionVideoInputDevice(c){return l.info("WebRTC phone - change session video input device",{deviceId:c}),this.currentSipSession&&this.client.changeSessionVideoInputDevice(c,this.currentSipSession)}_onCallTerminated(c){const d=this.getSipSessionId(c);l.info("WebRTC phone - on call terminated",{sipId:c.id,sipSessionId:d,ids:Object.keys(this.callSessions)});const h=this._createCallSession(c),g=this.isCurrentCallSipSession(h),v=h.is(this.getIncomingCallSession()),p=g?this.incomingSessions.length:v;v&&setTimeout(()=>{this.eventEmitter.emit(e.ON_TERMINATE_SOUND,h,"call terminated")},5),d&&this.removeIncomingSessions(d),delete this.callSessions[d],g&&(this.currentSipSession=void 0,this.currentCallSession=void 0);const y=this.hasIncomingCallSession();if(l.info("WebRTC phone - check to re-trigger incoming call",{sipId:c.id,shouldRetrigger:p,hasIncomingCallSession:y}),this.client.onCallEnded(c),y&&p){const w=this.getIncomingCallSession();setTimeout(()=>{this.ringingEnabled&&(this.currentCallSession?this.eventEmitter.emit(e.ON_PLAY_INBOUND_CALL_SIGNAL_SOUND,this.audioOutputDeviceId,this.audioOutputVolume,w):this.eventEmitter.emit(e.ON_PLAY_RING_SOUND,this.audioRingDeviceId,this.audioRingVolume,w)),this.eventEmitter.emit(e.ON_CALL_INCOMING,w,w==null?void 0:w.cameraEnabled)},100)}return h.getId()in this.ignoredSessions?!1:(c.isCanceled||setTimeout(()=>{this.eventEmitter.emit(e.ON_PLAY_HANGUP_SOUND,this.audioOutputDeviceId,this.audioOutputVolume,h)},10),g)}setActiveSipSession(c){const d=this.findSipSession(c);d&&(this.currentSipSession=d,this.currentCallSession=c)}hasAnActiveCall(){return!!this.currentSipSession}hasActiveRemoteVideoStream(){const c=this.currentSipSession;if(!c)return!1;const{peerConnection:d}=c.sessionDescriptionHandler,h=d.getRemoteStreams().find(g=>!!g.getVideoTracks().length);return h&&h.getVideoTracks().some(g=>!g.muted)}callCount(){return Object.keys(this.callSessions).length}isCurrentCallSipSession(c){return this.currentSipSession?this.currentSipSession&&this.getSipSessionId(this.currentSipSession)===c.getId():!1}hasVideo(c){return this.client.hasVideo(c.getId())}hasAVideoTrack(c){return this.client.hasAVideoTrack(c.getId())}getLocalStreamForCall(c){return l.warn("WebRTCPhone.getLocalStreamForCall is deprecated, use WebRTCPhone.getLocalStream instead"),this.getLocalStream(c)}getRemoteStreamForCall(c){return l.warn("WebRTCPhone.getRemoteStreamForCall is deprecated, use WebRTCPhone.getRemoteStream instead"),this.getRemoteVideoStream(c)}getRemoteStreamsForCall(c){return l.warn("WebRTCPhone.getRemoteStreamsForCall is deprecated, use WebRTCPhone.getRemoteStreams instead"),this.getRemoteStream(c)}accept(c,d){if(l.info("WebRTC phone - accept call",{id:c?c.getId():"n/a",cameraEnabled:d}),this.currentSipSession&&!this.isCurrentCallSipSession(c)&&this.holdSipSession(this.currentSipSession,this.currentCallSession,!0),!c)return l.warn("no CallSession to accept."),Promise.resolve(null);const h=this.getSipSessionIdFromCallSession(c);if(h&&!(h in this.callSessions))return l.warn("Call session already ended or not found, can't accept it.",{sipSessionId:h}),Promise.resolve(null);if(c.getId()in this.acceptedSessions)return l.warn("CallSession already accepted.",{id:c?c.getId():"n/a"}),Promise.resolve(c.sipCallId);this.shouldSendReinvite=!1,c.answerTime=new Date,this._updateCallSession(c),this.acceptedSessions[c.getId()]=!0,this.eventEmitter.emit(e.ON_CALL_ANSWERED,c);const g=this.client.getSipSession(c.getId());if(g)return l.info("accept call, session found",{sipId:g.id}),this.client.answer(g,this.allowVideo?d:!1).then(()=>c.sipCallId).catch(p=>{throw l.error(p),this.endCurrentCall(c),p});const v="No CallSession found to accept.";return l.warn(v,{id:c?c.getId():"n/a",ids:this.client.getSipSessionIds()}),c&&this.eventEmitter.emit(e.ON_CALL_ERROR,new Error(v),c),Promise.resolve(null)}isAccepted(c){return c&&c.getId()in this.acceptedSessions}reject(c){return t(this,void 0,void 0,function*(){if(l.info("reject WebRTC called",{id:c.getId()}),this.eventEmitter.emit(e.ON_TERMINATE_SOUND,c,"call rejected locally"),!c||c.getId()in this.rejectedSessions)return;this.shouldSendReinvite=!1,this.rejectedSessions[c.getId()]=!0;const d=this.findSipSession(c);d&&(l.info("WebRTC rejecting",{sipId:d.id}),this.client.hangup(d))})}ignore(c){return t(this,void 0,void 0,function*(){l.info("WebRTC ignore",{id:c.getId()}),this.eventEmitter.emit(e.ON_TERMINATE_SOUND,c,"ignoring call"),this.ignoredSessions[c.getId()]=!0,c.ignore()})}atxfer(c){const d=this.findSipSession(c);if(d)return l.info("WebRTC atxfer",{sipId:d.id}),this.client.atxfer(d)}hold(c,d=!0){l.info("WebRTC hold",{id:c.getId()});const h=this.findSipSession(c);return h?this.holdSipSession(h,c,d):null}unhold(c,d=!0){return console.warn("Please note that `phone.unhold()` is being deprecated; `phone.resume()` is the preferred method"),this.resume(c,d)}resume(c,d=!0){l.info("WebRTC resume called",{id:c?c.getId():null});const h=this.findSipSession(c);if(!h)return new Promise((v,p)=>p(new Error("No session to resume")));l.info("WebRTC resuming",{sipId:h.id}),this.currentSipSession&&this.currentSipSession.id!==h.id&&(l.info("WebRTC hold call after resume",{id:this.currentSipSession.id}),this.holdSipSession(this.currentSipSession,this.currentCallSession,d));const g=this.unholdSipSession(h,c,d);return this.currentSipSession=h,c&&(this.currentCallSession=c),g}holdSipSession(c,d,h=!0){return t(this,void 0,void 0,function*(){if(!c)return new Promise((w,A)=>A(new Error("No session to hold")));const g=this.getSipSessionId(c),v=this.client.hasLocalVideo(g);l.info("WebRTC hold sip session",{sipId:c.id,hasVideo:v}),this.currentScreenShare&&this.currentScreenShare.sipSessionId===g&&(this.lastScreenShare=this.currentScreenShare,yield this.stopScreenSharing(!1,d)),v&&(yield this.client.downgradeToAudio(c));const p=!!d&&d.isConference(),y=this.client.hold(c,p,v);return h&&this.eventEmitter.emit(e.ON_CALL_HELD,this._createCallSession(c,d)),y})}unholdSipSession(c,d,h=!0){return t(this,void 0,void 0,function*(){if(!c)return new Promise((k,x)=>x(new Error("No session to unhold")));const g=!!d&&d.isConference(),v=this.getSipSessionId(c);l.info("WebRTC unhold sip session",{sessionId:v,isConference:g});const{hasVideo:p}=this.client.getHeldSession(v)||{},y=this.lastScreenShare&&this.lastScreenShare.sipSessionId===v,w=this.lastScreenShare&&this.lastScreenShare.desktop,A=this.client.unhold(c,g);if(p){const k={audio:!1,video:!0,screen:y,desktop:w};yield this.client.upgradeToVideo(c,k,g)}const I=k=>{const x=this.lastScreenShare&&this.lastScreenShare.hadVideo;k&&this._onScreenSharing(k,c,d,x),this.lastScreenShare=null};if(h){d&&(d.muted=!1);const k=this._createCallSession(c,d);this.eventEmitter.emit(e.ON_CALL_UNHELD,k),this.eventEmitter.emit(e.ON_CALL_RESUMED,k)}return A.then(()=>{const k=d?this.getLocalVideoStream(d):null;return y&&I(k),k})})}mute(c,d=!0){l.info("WebRTC mute called",{id:c?c.getId():null});const h=this.findSipSession(c);if(!h)return;l.info("WebRTC muting",{sipId:h.id}),this.client.mute(h);const g=this._createCallSession(h,c,{muted:!0});this.currentCallSession&&g.is(this.currentCallSession)&&(this.currentCallSession=g),d&&this.eventEmitter.emit(e.ON_CALL_MUTED,g)}unmute(c,d=!0){l.info("WebRTC unmute called",{id:c?c.getId():null});const h=this.findSipSession(c);if(!h)return;l.info("WebRTC unmuting",{sipId:h.id}),this.client.unmute(h);const g=this._createCallSession(h,c,{muted:!1});this.currentCallSession&&g.is(this.currentCallSession)&&(this.currentCallSession=g),d&&this.eventEmitter.emit(e.ON_CALL_UNMUTED,g)}isAudioMuted(c){const d=this.findSipSession(c);return d?this.client.isAudioMuted(d):!0}turnCameraOn(c){const d=this.findSipSession(c);d&&(l.info("WebRTC turn camera on",{sipId:d.id}),this.client.toggleCameraOn(d),this.eventEmitter.emit(e.ON_CAMERA_RESUMED,this._createCameraResumedCallSession(d,c)))}turnCameraOff(c){const d=this.findSipSession(c);d&&(l.info("WebRTC turn camera off",{sipId:d.id}),this.client.toggleCameraOff(d),this.eventEmitter.emit(e.ON_CAMERA_DISABLED,this._createCameraDisabledCallSession(d,c)))}sendKey(c,d){const h=this.findSipSession(c);h&&(l.info("WebRTC send key",{sipId:h.id,tone:d}),this.client.sendDTMF(h,d))}makeCall(c,d,h,g=!1,v=!1){return t(this,void 0,void 0,function*(){if(l.info("make WebRTC call",{number:c,lineId:d?d.id:null,cameraEnabled:h,audioOnly:g,conference:v}),!c)return Promise.resolve(null);this.client.isRegistered()||(yield this.client.register()),this.currentSipSession&&this.holdSipSession(this.currentSipSession,this.currentCallSession,!0).catch(w=>{l.warn("Unable to hold current session when making another call",w)});let p;try{p=this.client.call(c,this.allowVideo?h:!1,g,v),this._bindEvents(p)}catch(w){return l.warn("make WebRTC call, error",{message:w.message,stack:w.stack}),Promise.resolve(null)}const y=this._createOutgoingCallSession(p,h||!1);return y.setIsConference(v),y.creationTime=new Date,this._updateCallSession(y),this.eventEmitter.emit(e.ON_PLAY_PROGRESS_SOUND,this.audioOutputDeviceId,this.audioOutputVolume),this.currentSipSession=p,this.currentCallSession=y,this.eventEmitter.emit(e.ON_CALL_OUTGOING,y),p.invitePromise&&p.invitePromise.catch(w=>{this.eventEmitter.emit(e.ON_CALL_ERROR,w,y)}),Promise.resolve(y)})}transfer(c,d){const h=this.findSipSession(c);h&&(l.info("WebRTC transfer",{sipId:h.id,target:d}),this.client.transfer(h,d))}indirectTransfer(c,d){return t(this,void 0,void 0,function*(){const h=this.client.getSipSession(c.sipCallId),g=this.client.getSipSession(d.sipCallId);return l.info("WebRTC indirect transfer",{sipId:h?h.id:null,target:g?g.id:null}),g?new Promise(v=>{const p={requestDelegate:{onAccept:()=>{setTimeout(()=>{this.hangup(d).then(v)},200)}}};return g.refer(h,p)}):Promise.reject()})}initiateCTIIndirectTransfer(){}cancelCTIIndirectTransfer(){}confirmCTIIndirectTransfer(){}hangup(c){return t(this,void 0,void 0,function*(){const d=this.findSipSession(c);if(!d)return console.error("Call is unknown to the WebRTC phone",c?c.sipCallId:null,c?c.callId:null),!1;const h=this.getSipSessionId(d);return l.info("WebRTC hangup",{sipId:d.id,sipSessionId:h}),yield this.client.hangup(d),c?this.endCurrentCall(c):h&&delete this.callSessions[h],this.shouldSendReinvite=!1,!0})}getStats(c){return t(this,void 0,void 0,function*(){const d=this.findSipSession(c);return d?this.client.getStats(d):null})}startNetworkMonitoring(c,d=1e3){const h=this.findSipSession(c);return h?this.client.startNetworkMonitoring(h,d):null}stopNetworkMonitoring(c){const d=this.findSipSession(c);return d?this.client.stopNetworkMonitoring(d):null}forceCancel(c){if(!(!c||!c.outgoingInviteRequest))try{c.outgoingInviteRequest.cancel()}catch(d){l.info("force cancel, error",d)}}endCurrentCall(c){const d=this.isCurrentCallSipSession(c);l.info("Ending current call",{id:c?c.getId():null,isCurrent:d}),d&&(this.currentSipSession=void 0,this.currentCallSession=null),this.eventEmitter.emit(e.ON_TERMINATE_SOUND,c,"locally ended")}onConnectionMade(){}isConference(c){return c?this.client&&this.client.isConference(c.sipCallId):!1}close(c=!1){return t(this,void 0,void 0,function*(){l.info("WebRTC close");try{yield Promise.race([this.unregister(),new Promise((d,h)=>setTimeout(()=>h(new Error("Unregister, timed out")),3e3))])}catch(d){l.error("WebRTC close, unregister error",d)}yield this.client.close(c),this.unbind(),this.incomingSessions=[],this.currentSipSession=void 0,this.currentCallSession=null,this.shouldSendReinvite=!1,this.rejectedSessions={}})}isRegistered(){return this.client&&this.client.isRegistered()}enableRinging(){l.info("WebRTC enable ringing"),this.ringingEnabled=!0}disableRinging(){l.info("WebRTC disable ringing"),this.ringingEnabled=!1}getCurrentCallSession(){return this.currentSipSession?this._createCallSession(this.currentSipSession,this.currentCallSession):null}hasIncomingCallSession(){return this.incomingSessions.length>0}getIncomingCallSession(){if(!this.hasIncomingCallSession())return null;const c=this.incomingSessions[0],d=this.client.getSipSession(c);return d?this._createCallSession(d):null}sendMessage(c=null,d,h="text/plain"){return this.client.sendMessage(c,d,h)}getLocalStream(c){return c?this.client.getLocalStream(c.sipCallId):null}getLocalVideoStream(c){return c?this.client.getLocalVideoStream(c.sipCallId):null}getLocalMediaStream(c){return l.warn("WebRTCPhone.getLocalMediaStream is deprecated, use WebRTCPhone.getLocalStream instead"),this.getLocalStream(c)}hasLocalVideo(c){return c?this.client.hasLocalVideo(c.sipCallId):!1}hasALocalVideoTrack(c){return c?this.client.hasALocalVideoTrack(c.sipCallId):!1}getRemoteStream(c){return c?this.client.getRemoteStream(c.sipCallId):null}getRemoteVideoStream(c){return c?this.client.getRemoteVideoStream(c.sipCallId):null}getRemoteVideoStreamFromPc(c){return c?this.client.getRemoteVideoStreamFromPc(c.sipCallId):null}hasRemoteVideo(c){return c?this.client.hasRemoteVideo(c.sipCallId):!1}setMediaConstraints(c){this.client.setMediaConstraints(c)}isVideoRemotelyHeld(c){return c?this.client.isVideoRemotelyHeld(c.sipCallId):!1}bindClientEvents(){this.client.unbind(),this.client.on(this.client.INVITE,(c,d)=>{const h=c.request.getHeader("Answer-Mode")==="Auto",g=this.allowVideo?d:!1;l.info("WebRTC invite received",{sipId:c.id,withVideo:g,autoAnswer:h});const v=this._createIncomingCallSession(c,g,null,h);this.incomingSessions.push(v.getId()),this._bindEvents(c),this.client.storeSipSession(c),this.currentSipSession?this.eventEmitter.emit(e.ON_PLAY_INBOUND_CALL_SIGNAL_SOUND,this.audioOutputDeviceId,this.audioOutputVolume,v):this.ringingEnabled&&this.eventEmitter.emit(e.ON_PLAY_RING_SOUND,this.audioRingDeviceId,this.audioRingVolume,v),v.creationTime=new Date,this._updateCallSession(v),this.eventEmitter.emit(e.ON_CALL_INCOMING,v,d)}),this.client.on(this.client.ON_REINVITE,(...c)=>{l.info("WebRTC on reinvite",{sessionId:c[0].id,inviteId:c[1].id,updatedCalleeName:c[2],updatedNumber:c[3]});const d=c[0];setTimeout(()=>{this._createCallSession(d,this.callSessions[this.getSipSessionId(d)]),this.eventEmitter.emit.apply(this.eventEmitter,[this.client.ON_REINVITE,...c])},2e3)}),this.client.on(this.client.ACCEPTED,c=>{const d=this.getSipSessionId(c),h=d in this.callSessions;if(l.info("WebRTC call accepted",{sipId:d,hasSession:h}),!h){l.warn("Call accepted ignored, session is no longer present in the WebRtcPhone",{sessionId:d});return}this._onCallAccepted(c,this.client.hasVideo(d)),this.audioOutputDeviceId&&this.client.changeAudioOutputDevice(this.audioOutputDeviceId)}),this.client.on("ended",()=>{}),this.client.on(this.client.ON_ERROR,c=>{l.error("WebRTC error",c),this.eventEmitter.emit(e.ON_CALL_ERROR,c)}),this.client.on(this.client.REJECTED,c=>{l.info("WebRTC call rejected",c.id);const d=this._createCallSession(c);delete this.callSessions[this.getSipSessionId(c)],d.endTime=new Date,this.eventEmitter.emit(e.ON_CALL_REJECTED,d)}),this.client.on(this.client.UNREGISTERED,()=>{l.info("WebRTC unregistered"),this.eventEmitter.emit(e.ON_UNREGISTERED)}),this.client.on(this.client.ON_DISCONNECTED,()=>{l.info("WebRTC disconnected"),this.eventEmitter.emit(e.ON_DISCONNECTED)}),this.client.on(this.client.ON_EARLY_MEDIA,c=>{l.info("WebRTC early media");const d=this._createCallSession(c);this.eventEmitter.emit(e.ON_EARLY_MEDIA,d)}),this.client.on(this.client.REGISTERED,()=>{var c,d;if(l.info("WebRTC registered",{shouldSendReinvite:this.shouldSendReinvite,state:this.currentSipSession?this.currentSipSession.state:null,currentSipSession:!!this.currentSipSession}),this.stopHeartbeat(),this.eventEmitter.emit(e.ON_REGISTERED),this.shouldSendReinvite&&this.currentSipSession&&this.currentSipSession.state===r.SessionState.Established){this.shouldSendReinvite=!1;const h=(d=(c=this.currentSipSession)===null||c===void 0?void 0:c.sessionDescriptionHandler)===null||d===void 0?void 0:d.peerConnection,g=h?h.sfu:!1,v=this.currentCallSession&&this.currentCallSession.cameraEnabled;try{this.sendReinvite(this.currentCallSession,null,g,!v,!0)}catch(p){l.error("WebRTC reinvite after register, error",{message:p.message,stack:p.stack})}}}),this.client.on(this.client.CONNECTED,()=>{l.info("WebRTC client connected"),this.stopHeartbeat()}),this.client.on(this.client.DISCONNECTED,()=>{l.info("WebRTC client disconnected"),this.eventEmitter.emit(e.ON_UNREGISTERED),this.client.hasHeartbeat()||this.startHeartbeat(),this.shouldSendReinvite=!0}),this.client.on(this.client.ON_TRACK,(c,d)=>{this.eventEmitter.emit(e.ON_TRACK,c,d)}),this.client.on("onVideoInputChange",c=>{this.eventEmitter.emit(e.ON_VIDEO_INPUT_CHANGE,c)}),this.client.on(this.client.MESSAGE,c=>{this._onMessage(c),this.eventEmitter.emit(e.ON_MESSAGE,c)}),this.client.on(this.client.ON_NETWORK_STATS,(c,d,h)=>{const g=this.getCallSession(this.getSipSessionId(c));this.eventEmitter.emit(e.ON_NETWORK_STATS,g,d,h)}),this.client.on(this.client.ON_SCREEN_SHARING_REINVITE,(c,d,h)=>{const g=this.getSipSessionId(c),v=this.client.getLocalStream(g),p=this.callSessions[g];l.info("Updrading directly in screensharing mode",{sipSessionId:g,tracks:(v==null?void 0:v.getTracks())||null}),this._onScreenSharing(v,c,p,!1,h)})}findSipSession(c){const d=this.client.getSipSessionIds(),h=d.findIndex(g=>c&&c.isId(g));if(h===-1){const g=this.currentSipSession?this.getSipSessionId(this.currentSipSession):this.client.getSipSessionIds()[0];return g?this.client.getSipSession(g):null}return this.client.getSipSession(d[h])}getCallSession(c){return this.callSessions[c]}getSipSessionId(c){return this.client.getSipSessionId(c)}getSipSessionIdFromCallSession(c){const d=this.findSipSession(c);return d?this.getSipSessionId(d):null}_updateCallSession(c){const d=this.getSipSessionIdFromCallSession(c);d&&(this.callSessions[d]=c)}_onMessage(c){if(!c||c.method!=="MESSAGE")return;let d;try{d=JSON.parse(c.body)}catch{return}const{type:h,content:g}=d;switch(h){case e.MESSAGE_TYPE_CHAT:this.eventEmitter.emit(e.ON_CHAT,g);break;case e.MESSAGE_TYPE_SIGNAL:{this.eventEmitter.emit(e.ON_SIGNAL,g);break}}}_createIncomingCallSession(c,d,h,g=!1){return this._createCallSession(c,h,{incoming:!0,ringing:!0,cameraEnabled:d,autoAnswer:g})}_createOutgoingCallSession(c,d,h){return this._createCallSession(c,h,{incoming:!1,ringing:!0,cameraEnabled:d})}_createAcceptedCallSession(c,d,h){return this._createCallSession(c,h,{cameraEnabled:d!==void 0?d:!1})}_createMutedCallSession(c,d){return this._createCallSession(c,d,{muted:!0})}_createUnmutedCallSession(c,d){return this._createCallSession(c,d,{muted:!1})}_createCameraResumedCallSession(c,d){return this._createCallSession(c,d,{videoMuted:!1})}_createCameraDisabledCallSession(c,d){return this._createCallSession(c,d,{videoMuted:!0})}_createCallSession(c,d,h={}){const g=c?c.remoteIdentity||c.assertedIdentity:null,v=g?g.uri._normal.user:null,{state:p}=c||{},y=this.getSipSessionId(c);d=d||this.callSessions[y];const w=new s.default(Object.assign({callId:d&&d.callId,sipCallId:y,sipStatus:p,displayName:g&&g.displayName||v,startTime:d?d.startTime:new Date,creationTime:d?d.creationTime:null,answerTime:d?d.answerTime:null,endTime:d?d.endTime:null,answered:p===r.SessionState.Established,paused:this.client.isCallHeld(c),isCaller:d?d.isCaller:"incoming"in h?!h.incoming:!1,cameraEnabled:d?d.isCameraEnabled():this.client.hasVideo(y),number:v,ringing:!1,muted:d?d.isMuted():this.client.isAudioMuted(c),videoMuted:d?d.isVideoMuted():!1,recording:d?d.isRecording():!1,recordingPaused:!1,sipSession:c,conference:!!d&&d.isConference()},h));return this.callSessions[y]=w,w}}e.default=u})(fN);class hN extends kr{constructor(t){super(t),this.api=this.adion.api,this.user=vo(),this.call=Av(),this.webrtc=ck(),this.init(),console.debug("WebRTCController initialized")}get config(){return{displayName:this.user.me.firstname+" "+this.user.me.lastname,host:this.user.sip.host,port:this.user.sip.port,media:{audio:!0,video:!0,localVideo:!0},log:1,userAgentString:Qa.USER_AGENT,iceCheckingTimeout:1e3,audioOutputDeviceId:null,heartbeatDelay:1e3,heartbeatTimeout:5e3,maxHeartbeats:4,authorizationUser:this.user.sip.username,password:this.user.sip.password,uri:this.user.sip.username}}get client(){return this.webrtc.client}get sessions(){return this.webrtc.sessions}get phone(){return this.webrtc.phone}init(){const t=new dN(this.config);this.webrtc.client=t,t.on("invite",n=>{this.call.active.incoming.push({id:n.id,number:n.remoteIdentity.displayName,name:n.remoteIdentity.friendlyName,start:new Date,muted:!1,hold:!1,recording:!1}),this.handleInvite(n)})}handleInvite(t){console.log("invite",t),this.webrtc.sessions.push(t),t._onCancel=()=>{this.handleCancel(t)},t.stateChange.on(n=>{this.handleStateChange(t,n)})}handleCancel(t){console.error("cancel",t),this.removeCall(t.id)}handleStateChange(t,n){n==="Terminated"&&this.removeCall(t.id)}getSession(t){return console.log(this.webrtc.sessions.find(n=>n.id===t),this.webrtc.sessions),this.webrtc.sessions.find(n=>n.id===t)}removeSession(t){this.webrtc.sessions.splice(this.webrtc.sessions.findIndex(n=>n.id===t),1)}sendDTMF(t,n){this.webrtc.client.sendDTMF(this.getSession(t),n)}mute(t){this.webrtc.client.mute(this.getSession(t)),this.changeCallMuted(t,!0)}unmute(t){this.webrtc.client.unmute(this.getSession(t)),this.changeCallMuted(t,!1)}new(t){this.adion.finder=!1,this.hold();const n=this.webrtc.client.call(t);this.webrtc.sessions.push(n),this.call.active.talking.push({id:n.id,number:t,name:t,start:new Date,muted:!1,hold:!1,recording:!1}),this.handleInvite(n)}answer(t){this.hold(),this.webrtc.client.answer(this.getSession(t)),this.moveCall(t,"talking")}reject(t){this.webrtc.client.reject(this.getSession(t)),this.removeCall(t)}hangup(t){this.webrtc.client.hangup(this.getSession(t)),this.removeCall(t)}hold(t=null){if(t===null){this.call.active.talking.forEach(n=>{this.hold(n.id)});return}this.webrtc.client.hold(this.getSession(t)),this.changeCallHold(t,!0),this.moveCall(t,"hold")}unhold(t){this.webrtc.client.unhold(this.getSession(t)),this.changeCallHold(t,!1),this.changeCallMuted(t,!1),this.moveCall(t,"talking")}startRecording(t){this.changeCallRecording(t,!0)}stopRecording(t){this.changeCallRecording(t,!1)}changeCallStatus(t,n){for(const r of this.call.categories)this.call.active[r].forEach(i=>{i.id===t&&(i.status=n)})}changeCallMuted(t,n){for(const r of this.call.categories)this.call.active[r].forEach(i=>{i.id===t&&(i.muted=n)})}changeCallHold(t,n){for(const r of this.call.categories)this.call.active[r].forEach(i=>{i.id===t&&(i.hold=n)})}changeCallRecording(t,n){for(const r of this.call.categories)this.call.active[r].forEach(i=>{i.id===t&&(i.recording=n)})}getCall(t){for(const n of this.call.categories)for(const r of this.call.active[n])if(r.id===t)return r}moveCall(t,n){for(const r of this.call.categories){const i=this.call.active[r].findIndex(s=>s.id===t);if(i!==-1){const[s]=this.call.active[r].splice(i,1);this.call.active[n].push(s);return}}}removeCall(t){this.removeSession(t);for(const n of this.call.categories){const r=this.call.active[n].findIndex(i=>i.id===t);if(r!==-1){this.call.active[n].splice(r,1);return}}}}const gN=ys("WebsocketStore",()=>{const e=ne(null),t=ne(null),n=ne({});return{destroy:async()=>{e.value&&await e.value.close(),e.value=null,t.value=null},client:e,base:t,events:n}});class vN extends kr{constructor(t){super(t),this.websocket=gN(),this.user=vo(),this.init(),console.debug("WebsocketController initialized")}get client(){return this.websocket.client}get events(){return this.websocket.events}init(){this.user.connected===void 0||!this.user.connected||this.websocket.client&&this.websocket.client.url||(this.websocket.base=`wss://${Qa.WS_URL}:${Qa.WS_PORT}/?ck=${this.user.key}&sk=${this.user.secret}`,this.info("Connexion en cours","Websocket"),this.websocket.client=new WebSocket(this.websocket.base),this.websocket.client.onopen=()=>{this.success("Connexion réussie","Websocket")},this.websocket.client.onmessage=t=>{const n=JSON.parse(t.data);this.emit("websocket-message",{event:n.event,data:n.data})},this.websocket.client.onclose=t=>{this.websocket.destroy(),this.user.connected&&(this.warning("Connexion perdue. Reconnexion en cours...","Websocket"),setTimeout(this.init(),1e3))},this.websocket.client.onerror=t=>{console.error("Websocket error",t)})}reset(){this.websocket.destroy(),this.init()}emit(t,n){console.debug(t,n),this.websocket.events[t]&&this.websocket.events[t].forEach(r=>r(n))}on(t,n){this.websocket.events[t]||(this.websocket.events[t]=[]),this.websocket.events[t].push(n)}}const mN=ys("TeamStore",()=>({members:ne([])}));class pN extends kr{constructor(t){super(t),this.api=this.adion.api,this.user=this.adion.user,this.presence=this.adion.presence,this.team=mN(),this.getMembers(),console.debug("TeamController initialized")}get members(){return this.team.members}async getMembers(){this.team.members=await this.api.get("/users"),this.user.push(this.team.members.find(t=>t.uuid===this.user.me.uuid))}search(t){const n=this.normalizeString(t.toLowerCase());return this.team.members.filter(r=>r.firstname&&this.normalizeString(r.firstname).toLowerCase().includes(n)||r.lastname&&this.normalizeString(r.lastname).toLowerCase().includes(n)||r.email&&this.normalizeString(r.email).toLowerCase().includes(n)||r.exten&&this.normalizeString(r.exten).toLowerCase().includes(n)||r.mobile_phone_number&&this.normalizeString(r.mobile_phone_number).toLowerCase().includes(n)||r.status&&this.normalizeString(r.status).toLowerCase().includes(n))}}const yN=ys("PresenceStore",()=>{const e=[{text:"Disponible",value:"available",color:"green",icon:"mdi-check-circle"},{text:"Absent",value:"away",color:"yellow",icon:"mdi-alert-circle"},{text:"Ne pas déranger",value:"dnd",color:"red",icon:"mdi-alert-octagon"},{text:"Déconnecté",value:"offline",color:"gray",icon:"mdi-close-circle"}],t=ne(!1);return{type:e,edit:t}});class bN extends kr{constructor(t){super(t),this.api=this.adion.api,this.ws=this.adion.ws,this.user=this.adion.user,this.team=this.adion.team,this.presence=yN(),this.ws.on("websocket-message",this.handleWs.bind(this)),console.debug("PresenceController initialized")}get type(){return this.presence.type}get edit(){return this.presence.edit}set edit(t){this.presence.edit=t}status(t=this.user.me.uuid){const n=this.team.members.find(r=>r.uuid===t);return n?n.status:null}editStatus(t){let n=this.team.members.findIndex(r=>r.uuid===this.user.me.uuid);this.team.members[n].status=t,this.edit=!1}editPresence(t){let n=this.team.members.findIndex(r=>r.uuid===this.user.me.uuid);this.team.members[n].state=t,this.edit=!1}state(t=this.user.me.uuid){if(!this.team.members.length)return this.presence.type.find(r=>r.value==="offline");const n=this.team.members.find(r=>r.uuid===t);return n.do_not_disturb?this.presence.type.find(r=>r.value==="dnd"):this.presence.type.find(r=>r.value===n.state)}handleWs(t){switch(t.event){case"chatd_presence_updated":this.update(t.data);break}}update(t){let n=this.team.members.findIndex(r=>r.uuid===t.uuid);this.team.members[n]={...this.team.members[n],...t},this.user.me.uuid===t.uuid&&this.user.push(t)}}class SN extends kr{constructor(t){super(t),this.callLog=this.adion.callLog,this.api=this.adion.api,this.callLog=this.adion.callLog,this.webrtc=this.adion.webrtc,this.team=this.adion.team,this.call=Av(),console.debug("CallController initialized")}get log(){return this.callLog.log}get active(){return this.call.active}new(t){this.webrtc.new(t)}answer(t){this.webrtc.answer(t)}hangup(t){this.webrtc.hangup(t)}reject(t){this.webrtc.reject(t)}mute(t){this.webrtc.mute(t)}unmute(t){this.webrtc.unmute(t)}hold(t){this.webrtc.hold(t)}unhold(t){this.webrtc.unhold(t)}dtmf(t,n){this.webrtc.sendDTMF(t,n)}startRecording(t){this.webrtc.startRecording(t)}stopRecording(t){this.webrtc.stopRecording(t)}}class _N extends kr{constructor(t){super(t),this.api=this.adion.api,this.call=Av(),this.getCallLog(),console.debug("CallLogController initialized")}getCallLog(t=500,n=1){this.api.get("/history",{limit:t,page:n}).then(r=>{r.length>0&&(this.push(r),this.getCallLog(t,n+1))})}push(t){this.call.log.push(...t),this.call.log=this.call.log.filter((n,r,i)=>i.findIndex(s=>s.id===n.id)===r)}get log(){return this.call.log}}const wN=ys("ContactStore",()=>({finder:ne(!1)}));class xN extends kr{constructor(t){super(t),this.contact=wN(),console.debug("ContactController initialized")}search(t){const n=this.formatTeamMembers(this.adion.team.members);return this.formatHistory(this.adion.call.log),{query:this.isPhoneNumber(t)?t:null,teams:n,directory:[{name:"Jane Doe",numbers:[{type:"Mobile",number:"+33612345678"}],extension:101,presence:"offline",avatar:null}],history:this.searchHistory(t)}}get finder(){return this.contact.finder}set finder(t){this.contact.finder=t}isPhoneNumber(t){return t==null||t==""?!1:t.match(/^\+?[0-9]+$/)!=null}formatTeamMembers(t){return t.map(n=>({name:`${n.firstname} ${n.lastname}`,numbers:[{type:n.mobile_phone_number?"Mobile":null,number:n.mobile_phone_number??null}].filter(r=>r.number),extension:n.exten,presence:n.state,avatar:n.avatar||null}))}searchHistory(t){return t?this.formatHistory(this.adion.call.log).filter(r=>r.number==t||r.extension==t||r.name==t).filter((r,i,s)=>i===s.findIndex(a=>a.extension===r.extension&&a.name===r.name&&a.number===r.number)):this.formatHistory(this.adion.call.log).filter((r,i,s)=>i===s.findIndex(a=>a.extension===r.extension&&a.name===r.name&&a.number===r.number))}formatHistory(t){return t.map(n=>({name:(n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension)&&this.adion.team.members.find(r=>r.exten==(n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension))?this.adion.team.members.find(r=>r.exten==(n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension)).firstname+" "+this.adion.team.members.find(r=>r.exten==(n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension)).lastname:null,number:n.call_direction=="outbound"?n.destination_extension:n.source_extension,extension:n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension,direction:n.call_direction,date:n.start,presence:(n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension)&&this.adion.team.members.find(r=>r.exten==(n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension))?this.adion.team.members.find(r=>r.exten==(n.call_direction=="outbound"?n.destination_internal_extension:n.source_internal_extension)).state:null,avatar:n.avatar||null}))}}const CN=ys("SettingStore",()=>{const e=ne({audio:{in:[],out:[]},video:[]}),t=ne(null),n=ne(null),r=ne(null),i=ne(null),s=ne(1),a=ne(1),o=ne(1);return{mediaDevices:e,selectedAudioIn:t,selectedAudioOut:n,selectedAudioRinger:r,selectedVideo:i,volumeIn:s,volumeOut:a,volumeRinger:o}},{persist:!0});class EN extends kr{constructor(t){super(t),this.api=this.adion.api,this.settings=CN(),this.initMediaDevices(),this.defineDefaultSettings(),console.debug("SettingController initialized")}get mediaDevices(){return this.settings.mediaDevices}get selectedAudioIn(){return this.settings.selectedAudioIn}set selectedAudioIn(t){this.settings.selectedAudioIn=t}get selectedAudioOut(){return this.settings.selectedAudioOut}set selectedAudioOut(t){this.settings.selectedAudioOut=t}get selectedAudioRinger(){this.settings.selectedAudioRinger}set selectedAudioRinger(t){this.settings.selectedAudioRinger=t}get selectedVideo(){return this.settings.selectedVideo}set selectedVideo(t){this.settings.selectedVideo=t}get volumeIn(){return this.settings.volumeIn}set volumeIn(t){this.settings.volumeIn=t}get volumeOut(){return this.settings.volumeOut}set volumeOut(t){this.settings.volumeOut=t}get volumeRinger(){this.settings.volumeRinger}set volumeRinger(t){this.settings.volumeRinger=t}initMediaDevices(t=null){navigator.mediaDevices.enumerateDevices().then(n=>{this.settings.mediaDevices.audio.in=n.filter(r=>r.kind==="audioinput"),this.settings.mediaDevices.audio.out=n.filter(r=>r.kind==="audiooutput"),this.settings.mediaDevices.video=n.filter(r=>r.kind==="videoinput")})}defineDefaultSettings(){this.settings.selectedAudioIn===null&&(this.settings.selectedAudioIn="default"),this.settings.selectedAudioOut===null&&(this.settings.selectedAudioOut="default"),this.settings.selectedAudioRinger===null&&(this.settings.selectedAudioRinger="default"),this.settings.selectedVideo===null&&(this.settings.selectedVideo="default")}}const TN=()=>({dependencies:{},controllers:[{name:"api",controller:RS,shortMethods:["get","put","post","delete","success","error","warning","info"]},{name:"auth",controller:ok,shortMethods:["login","logout"],shortData:["connected"]},{name:"navigator",controller:lk},{name:"user",controller:uk,shortData:["me"]},{name:"webrtc",controller:hN},{name:"ws",controller:vN,shortData:["client","events"]},{name:"team",controller:pN},{name:"presence",controller:bN},{name:"call",controller:SN},{name:"callLog",controller:_N},{name:"contact",controller:xN,shortData:["finder"],shortMethods:["search"]},{name:"setting",controller:EN}]}),vi=()=>{const{dependencies:e,controllers:t}=TN(),n={};return t.forEach(({name:r,controller:i,dependencies:s,shortMethods:a,shortData:o})=>{const l=new Proxy({},{get:(u,f,c)=>{if(!u.instance){const d={...e,...s};u.instance=i.getInstance?i.getInstance(d):new i(d),console.debug(`${r}Controller proxy instance created`)}return Reflect.get(u.instance,f,c)},set:(u,f,c)=>{if(!u.instance){const d={...e,...s};u.instance=i.getInstance?i.getInstance(d):new i(d)}return u.instance[f]=c,!0}});n[r]=l,a&&a.forEach(u=>{n[u]=(...f)=>n[r][u](...f)}),o&&o.forEach(u=>{Object.defineProperty(n,u,{get:()=>n[r][u],set:f=>{n[r][u]=f}})})}),n},qi=vi,xn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},AN={__name:"Control",props:{call:Object},emits:["create_call","show_dialpad"],setup(e,{emit:t}){const n=e,r=qi();function i(){n.call.hold===!0?r.call.unhold(n.call.id):r.call.hold(n.call.id)}function s(){n.call.muted===!0?r.call.unmute(n.call.id):r.call.mute(n.call.id)}function a(){n.call.recorded===!0?r.call.stopRecording(n.call.id):r.call.startRecording(n.call.id)}function o(){r.call.hangup(n.call.id)}return(l,u)=>{const f=ae("v-btn"),c=ae("v-col"),d=ae("v-row"),h=ae("v-container");return de(),ke(h,null,{default:q(()=>[b(d,{justify:"center"},{default:q(()=>[b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",size:"small",width:"80px",class:"rounded-pill mt-5 adion-btn-conf",icon:"mdi-account-group",disabled:""})]),_:1}),b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",size:"small",width:"80px",class:"rounded-pill mt-5 adion-btn-transfer",icon:"mdi-step-forward",disabled:""})]),_:1}),b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",size:"small",width:"80px",class:"rounded-pill mt-5 adion-btn-atransfer",icon:"mdi-step-forward-2",disabled:""})]),_:1})]),_:1}),b(d,{justify:"center"},{default:q(()=>[b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",height:"50px",width:"50px",class:"rounded-pill",icon:e.call.muted?"mdi-microphone-off":"mdi-microphone",onClick:s},null,8,["icon"])]),_:1}),b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",height:"50px",width:"50px",class:"rounded-pill",icon:e.call.hold?"mdi-play":"mdi-pause",onClick:i},null,8,["icon"])]),_:1}),b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",height:"50px",width:"50px",class:"rounded-pill",icon:"mdi-phone-plus",onClick:u[0]||(u[0]=g=>t("create_call"))})]),_:1}),b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",height:"50px",width:"50px",class:ri(["rounded-pill",e.call.record?"adion-recording":""]),icon:e.call.record?"mdi-record-rec":"mdi-record",onClick:a},null,8,["icon","class"])]),_:1}),b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",rounded:"",height:"50px",width:"50px",class:"rounded-pill",icon:"mdi-dialpad",onClick:u[1]||(u[1]=g=>t("show_dialpad"))})]),_:1}),b(c,{cols:"4"},{default:q(()=>[b(f,{outlined:"",disabled:"",rounded:"",height:"50px",width:"50px",class:"rounded-pill",icon:"mdi-video"})]),_:1}),b(c,{cols:"12",class:"adion-hangup"},{default:q(()=>[b(f,{outlined:"",size:"small",rounded:"",width:"80px",class:"rounded-pill mt-5",icon:"mdi-phone-hangup",onClick:o})]),_:1})]),_:1})]),_:1})}}},IN=xn(AN,[["__scopeId","data-v-d691e309"]]),RN={class:"adion-btn a-10"},kN={class:"adion-number"},PN={class:"adion-letter"},DN={__name:"Dialpad",props:{call:Object,input:Boolean,back:Boolean},emits:["close"],setup(e,{emit:t}){const n=e,r=qi(),i=ne(""),s=[{value:"1",text:"mess."},{value:"2",text:"abc"},{value:"3",text:"def"},{value:"4",text:"ghi"},{value:"5",text:"jkl"},{value:"6",text:"mno"},{value:"7",text:"pqrs"},{value:"8",text:"tuv"},{value:"9",text:"wxyz"},{value:"*",text:""},{value:"0",text:"+"},{value:"#",text:""}];function a(c){return["0","1","2","3","4","5","6","7","8","9","#","*","+"].includes(c)}function o(c){!a(c.key)&&c.key!=="Backspace"&&c.key!=="Tab"&&c.preventDefault()}function l(c){i.value+=c,n.back===!0&&(r.call.dtmf(n.call.id,c),console.log("DTMF",c))}function u(){t("close")}function f(){i.value.length>0&&n.back===!1&&r.call.new(i.value)}return(c,d)=>{const h=ae("v-text-field"),g=ae("v-col"),v=ae("v-btn"),p=ae("v-row"),y=ae("v-container");return de(),ke(y,null,{default:q(()=>[b(p,{justify:"center"},{default:q(()=>[e.input?(de(),ke(g,{key:0,cols:"12"},{default:q(()=>[b(h,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=w=>i.value=w),onKeydown:o,"single-line":"",rounded:"",class:"rounded-pill",density:"compact",variant:"outlined",type:"tel",onKeyup:Lh(f,["enter"]),autofocus:""},null,8,["modelValue","onKeyup"])]),_:1})):Je("",!0),(de(),et(Fe,null,zn(s,(w,A)=>b(g,{key:A,cols:"4"},{default:q(()=>[b(v,{outlined:"",rounded:"",height:"50px",width:"50px",class:"rounded-pill",onClick:I=>l(w.value)},{default:q(()=>[He("div",RN,[He("span",kN,Ue(w.value),1),He("span",PN,Ue(w.text),1)])]),_:2},1032,["onClick"])]),_:2},1024)),64)),e.back?(de(),ke(g,{key:1,cols:"12",class:"adion-back"},{default:q(()=>[b(v,{outlined:"",onClick:u,rounded:"",size:"small",width:"80px",class:"rounded-pill mt-5",icon:"mdi-undo"})]),_:1})):(de(),ke(g,{key:2,cols:"12",class:"adion-call"},{default:q(()=>[b(v,{outlined:"",onClick:f,rounded:"",size:"small",width:"80px",class:"rounded-pill mt-5",icon:"mdi-phone"})]),_:1}))]),_:1})]),_:1})}}},FN=xn(DN,[["__scopeId","data-v-28f26f1e"]]),ON={__name:"Avatar",props:{call:Object,avatar:String},setup(e){const t=e;let n;const r=ne(0);zt(()=>{i(),n=setInterval(i,500)}),sn(()=>{clearInterval(n)});const i=()=>{r.value=Math.floor((new Date-t.call.start)/1e3)},s=F(()=>{if(r.value>0){const o=Math.floor(r.value/60),l=r.value-o*60;return`${o}:`+(l<10?`0${l}`:l)}return null}),a=F(()=>{if(t.avatar)return t.avatar;if(t.call.name){const o=t.call.name.split(" ");return o.length>1?`https://ui-avatars.com/api/?color=fff&background=random&name=${o[0]}+${o[1]}`:`https://ui-avatars.com/api/color=fff&?background=random&name=${o[0]}`}return null});return(o,l)=>{const u=ae("v-col"),f=ae("v-img"),c=ae("v-icon"),d=ae("v-avatar"),h=ae("v-row"),g=ae("v-container");return de(),ke(g,null,{default:q(()=>[b(h,null,{default:q(()=>[e.call.name?(de(),ke(u,{key:0,cols:"12",class:"adion-call"},{default:q(()=>[He("h3",null,Ue(e.call.name),1),He("span",null,Ue(e.call.number),1)]),_:1})):(de(),ke(u,{key:1,cols:"12",class:"adion-call"},{default:q(()=>[He("h3",null,Ue(e.call.number),1)]),_:1})),b(u,{cols:"12",class:"adion-avatar"},{default:q(()=>[b(d,{rounded:"",class:"rounded-pill",size:"120px"},{default:q(()=>[a.value?(de(),ke(f,{key:0,src:a.value},null,8,["src"])):(de(),ke(c,{key:1},{default:q(()=>[Ge("mdi-account-circle")]),_:1}))]),_:1})]),_:1}),b(u,{cols:"12",class:"adion-duration"},{default:q(()=>[He("h6",null,Ue(s.value),1)]),_:1})]),_:1})]),_:1})}}},NN=xn(ON,[["__scopeId","data-v-3c0098b3"]]),$N={__name:"User",setup(e){const t=qi();return(n,r)=>{const i=ae("v-img"),s=ae("v-icon"),a=ae("v-avatar"),o=ae("v-badge"),l=ae("v-col"),u=ae("v-chip"),f=ae("v-row"),c=ae("v-skeleton-loader"),d=ae("v-container");return de(),ke(d,null,{default:q(()=>[Se(t).me.firstname?(de(),ke(f,{key:0},{default:q(()=>[b(l,{cols:"12",class:"adion-avatar"},{default:q(()=>[b(o,{color:Se(t).presence.state().color},{default:q(()=>[b(a,{rounded:"",class:"rounded-pill",size:"120px"},{default:q(()=>[Se(t).me.avatar?(de(),ke(i,{key:0,src:Se(t).me.avatar},null,8,["src"])):(de(),ke(s,{key:1},{default:q(()=>[Ge("mdi-account-circle")]),_:1}))]),_:1})]),_:1},8,["color"])]),_:1}),b(l,{cols:"12",class:"adion-presence pa-0 ma-0"},{default:q(()=>[b(u,{class:"ma-2",color:Se(t).presence.state().color,label:"",variant:"text",onClick:r[0]||(r[0]=h=>Se(t).presence.edit=!0)},{default:q(()=>[b(s,{start:"",icon:Se(t).presence.state().icon},null,8,["icon"]),Ge(" "+Ue(Se(t).presence.state().text),1)]),_:1},8,["color"])]),_:1}),b(l,{cols:"12",class:"adion-user pa-0 ma-0"},{default:q(()=>[He("h3",null,Ue(Se(t).me.firstname)+" "+Ue(Se(t).me.lastname),1),He("span",null,Ue(Se(t).me.exten),1)]),_:1})]),_:1})):(de(),ke(f,{key:1},{default:q(()=>[b(l,{cols:"12",class:"adion-avatar"},{default:q(()=>[b(a,{rounded:"",class:"rounded-pill",size:"120px"},{default:q(()=>[b(c,{class:"mx-auto border",type:"image",theme:"dark",width:"150"})]),_:1})]),_:1}),b(l,{cols:"12",class:"adion-user"},{default:q(()=>[b(c,{class:"mx-auto no-bg",type:"text",width:"150",height:"20",theme:"dark"}),b(c,{class:"mx-auto no-bg",type:"text",width:"100",theme:"dark"})]),_:1})]),_:1}))]),_:1})}}},MN=xn($N,[["__scopeId","data-v-05683de1"]]),VN={__name:"Clock",setup(e){const t=ne(""),n=ne("");function r(o){return o.replace(/\b(\w)/g,l=>l.toUpperCase())}function i(){const o=new Date,l={weekday:"long",year:"numeric",month:"long",day:"numeric"},u=o.toLocaleDateString("fr-FR",l);return r(u)}function s(){const o=new Date;t.value=o.toTimeString().slice(0,8),n.value=i()}let a;return zt(()=>{s(),a=setInterval(s,1e3)}),sn(()=>{clearInterval(a)}),(o,l)=>{const u=ae("v-col"),f=ae("v-row"),c=ae("v-container");return de(),ke(c,{class:"adion-clock"},{default:q(()=>[b(f,{class:"align-center"},{default:q(()=>[b(u,{cols:"12"},{default:q(()=>[He("h2",null,Ue(n.value),1),He("h1",null,Ue(t.value),1)]),_:1})]),_:1})]),_:1})}}},BN=xn(VN,[["__scopeId","data-v-77cc7c13"]]),LN={__name:"Hold",props:{call:String,number:String,name:String,start:Date},emits:["unhold"],setup(e,{emit:t}){const n=e;let r;const i=ne(0);zt(()=>{s(),r=setInterval(s,500)}),sn(()=>{clearInterval(r)});const s=()=>{i.value=Math.floor((new Date-n.start)/1e3)},a=F(()=>{if(i.value>0){const l=Math.floor(i.value/60),u=i.value-l*60;return`${l}:`+(u<10?`0${u}`:u)}return null}),o=()=>{t("unhold",n.call)};return(l,u)=>{const f=ae("v-icon"),c=ae("v-col"),d=ae("v-btn"),h=ae("v-row"),g=ae("v-container");return de(),ke(g,{class:"adion-hold"},{default:q(()=>[b(h,{class:"align-center"},{default:q(()=>[b(c,{cols:"2",style:{"text-align":"center"}},{default:q(()=>[b(f,null,{default:q(()=>[Ge("mdi-pause")]),_:1})]),_:1}),e.name?(de(),ke(c,{key:0,cols:"5",class:"adion-call"},{default:q(()=>[He("h3",null,Ue(e.name),1),He("span",null,Ue(e.number),1)]),_:1})):Je("",!0),b(c,{cols:"5",class:"adion-btn"},{default:q(()=>[He("h6",null,Ue(a.value),1),b(d,{outlined:"",rounded:"",width:"60px",class:"rounded-pill",size:"small",icon:"mdi-phone",onClick:o})]),_:1})]),_:1})]),_:1})}}},HN=xn(LN,[["__scopeId","data-v-427bb362"]]),jN=e=>(Kc("data-v-e8abc77c"),e=e(),Gc(),e),qN=jN(()=>He("h6",null,"18:24",-1)),UN={__name:"Incoming",props:{call:String,number:String,name:String,start:Date,avatar:String},emits:["answer","hangup"],setup(e,{emit:t}){const n=e,r=F(()=>{if(n.avatar)return n.avatar;if(n.name){const a=n.name.split(" ");return a.length>1?`https://ui-avatars.com/api/?color=fff&background=random&name=${a[0]}+${a[1]}`:`https://ui-avatars.com/api/color=fff&?background=random&name=${a[0]}`}return null}),i=()=>{t("answer",n.call)},s=()=>{t("hangup",n.call)};return(a,o)=>{const l=ae("v-img"),u=ae("v-icon"),f=ae("v-avatar"),c=ae("v-col"),d=ae("v-row"),h=ae("v-chip"),g=ae("v-container");return de(),ke(g,{class:"adion-incoming"},{default:q(()=>[b(d,{class:"align-center"},{default:q(()=>[b(c,{cols:"2",class:"adion-avatar"},{default:q(()=>[b(f,{rounded:"",class:"rounded-pill",size:"35px"},{default:q(()=>[r.value?(de(),ke(l,{key:0,src:r.value},null,8,["src"])):(de(),ke(u,{key:1},{default:q(()=>[Ge("mdi-account-circle")]),_:1}))]),_:1})]),_:1}),e.name?(de(),ke(c,{key:0,cols:"8",class:"adion-call"},{default:q(()=>[He("h3",null,Ue(e.name),1),He("span",null,Ue(e.number),1)]),_:1})):Je("",!0),b(c,{cols:"2"},{default:q(()=>[qN]),_:1})]),_:1}),b(d,{class:"mt-0 adion-btn",justify:"space-around"},{default:q(()=>[b(c,{cols:"5",class:"adion-decline pa-0 mt-2 mb-1"},{default:q(()=>[b(h,{onClick:s,size:"small","prepend-icon":"mdi-phone-hangup",class:"pl-5 pr-5",variant:"outlined",color:"red"},{default:q(()=>[Ge("Refuser")]),_:1})]),_:1}),b(c,{cols:"5",class:"adion-answer pa-0 mt-2 mb-1"},{default:q(()=>[b(h,{onClick:i,size:"small","prepend-icon":"mdi-phone",class:"pl-5 pr-5",variant:"outlined",color:"green"},{default:q(()=>[Ge("Répondre")]),_:1})]),_:1})]),_:1})]),_:1})}}},zN=xn(UN,[["__scopeId","data-v-e8abc77c"]]),KN={__name:"Status",setup(e){const t=qi(),n=ne(t.presence.status());return Qt(()=>{n.value=t.presence.status()}),(r,i)=>{const s=ae("v-toolbar-title"),a=ae("v-icon"),o=ae("v-btn"),l=ae("v-toolbar"),u=ae("v-card-subtitle"),f=ae("v-text-field"),c=ae("v-container"),d=ae("v-divider"),h=ae("v-chip"),g=ae("v-card"),v=ae("v-dialog");return de(),ke(v,{transition:"dialog-top-transition",width:"25vw",modelValue:Se(t).presence.edit,"onUpdate:modelValue":i[3]||(i[3]=p=>Se(t).presence.edit=p)},{default:q(()=>[b(g,{color:"grey-darken-4"},{default:q(()=>[b(l,{color:"grey-darken-4"},{default:q(()=>[b(s,null,{default:q(()=>[Ge(Ue(Se(t).me.firstname)+" "+Ue(Se(t).me.lastname)+" ",1),He("small",null,"("+Ue(Se(t).presence.state().text)+")",1)]),_:1}),b(o,{icon:"",onClick:i[0]||(i[0]=p=>Se(t).presence.edit=!1)},{default:q(()=>[b(a,null,{default:q(()=>[Ge("mdi-close")]),_:1})]),_:1})]),_:1}),b(u,{class:"mb-3"},{default:q(()=>[Ge("Définir un message personalisé:")]),_:1}),b(c,{class:"pt-0 align-center d-flex ga-5"},{default:q(()=>[b(f,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=p=>n.value=p),"single-line":"",rounded:"",class:"rounded-pill",density:"compact",variant:"solo","hide-details":""},null,8,["modelValue"]),Se(t).presence.status()!==n.value?(de(),ke(a,{key:0,onClick:i[2]||(i[2]=p=>Se(t).presence.editStatus(n.value))},{default:q(()=>[Ge("mdi-check")]),_:1})):Je("",!0)]),_:1}),b(d),b(u,{class:"mt-5"},{default:q(()=>[Ge("Changement de statut:")]),_:1}),b(c,{class:"d-flex ga-5 flex-wrap"},{default:q(()=>[(de(!0),et(Fe,null,zn(Se(t).presence.type,p=>(de(),ke(h,{key:p,color:p.color,onClick:y=>Se(t).presence.editPresence(p.value)},{default:q(()=>[p.icon?(de(),ke(a,{key:0,start:""},{default:q(()=>[Ge(Ue(p.icon),1)]),_:2},1024)):Je("",!0),Ge(" "+Ue(p.text),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Lm=e=>(Kc("data-v-96b6c49a"),e=e(),Gc(),e),GN={key:0},WN={key:0},YN={key:0},JN={key:0},XN={key:1},ZN={key:0},QN=Lm(()=>He("small",null,"Interne",-1)),e$=Lm(()=>He("br",null,null,-1)),t$=Lm(()=>He("br",null,null,-1)),n$={__name:"Item",props:{type:String,data:Object|String},setup(e){const t=e,n=qi();let r=ne(!1);F(()=>{if(t.data!==void 0){if(t.data.call_direction==="outbound")return t.data.destination_extension;if(t.data.call_direction==="inbound")return t.data.source_extension}});const i=F(()=>{const o=t.data.name.split(" ");return o.length>1?`${o[0]} ${o[1]}`:`${o[0]}`}),s=F(()=>t.type==="compose"?`https://ui-avatars.com/api/color=fff&?background=random&name=${t.data}`:t.type==="directory"?`https://ui-avatars.com/api/color=fff&?background=random&name=${t.data.name}`:`https://ui-avatars.com/api/color=fff&?background=random&name=${i.value}`),a=F(()=>{if(t.data.presence)switch(t.data.presence){case"online":return"success";case"offline":return"error";case"busy":return"warning";case"away":return"grey";default:return"grey"}return"grey"});return(o,l)=>{const u=ae("v-img"),f=ae("v-avatar"),c=ae("v-col"),d=ae("v-icon"),h=ae("v-row"),g=ae("v-card");return de(),et(Fe,null,[e.type==="compose"?(de(),ke(g,{key:0,class:"adion-hold",onClick:l[0]||(l[0]=v=>Se(n).call.new(e.data)),link:""},{default:q(()=>[b(h,{class:"align-center"},{default:q(()=>[b(c,{cols:"2",class:"adion-avatar"},{default:q(()=>[b(f,{rounded:"",class:"rounded-pill",size:"35px"},{default:q(()=>[b(u,{src:s.value},null,8,["src"])]),_:1})]),_:1}),e.data?(de(),ke(c,{key:0,cols:"8",class:"adion-user"},{default:q(()=>[He("h3",null,Ue(e.data),1)]),_:1})):Je("",!0),b(c,{cols:"2",class:"adion-btn"},{default:q(()=>[b(d,{size:"20"},{default:q(()=>[Ge("mdi-dialpad")]),_:1})]),_:1})]),_:1})]),_:1})):Je("",!0),e.type==="team"?(de(),ke(g,{key:1,class:"adion-hold",onClick:l[1]||(l[1]=v=>t.data.numbers.length>0?kt(r)?r.value=!Se(r):r=!Se(r):Se(n).call.new(e.data.extension)),link:""},{default:q(()=>[b(h,{class:"align-center"},{default:q(()=>[b(c,{cols:"2",class:"adion-avatar"},{default:q(()=>[b(f,{rounded:"",class:"rounded-pill",size:"35px"},{default:q(()=>[b(u,{src:s.value},null,8,["src"])]),_:1})]),_:1}),e.data.name?(de(),ke(c,{key:0,cols:"8",class:"adion-user"},{default:q(()=>[He("h3",null,[Ge(Ue(e.data.name)+" ",1),e.data.extension?(de(),et("small",GN,Ue(e.data.extension),1)):Je("",!0)]),(de(!0),et(Fe,null,zn(e.data.numbers,v=>(de(),et("p",{key:v.type},Ue(v.type)+": "+Ue(v.number),1))),128))]),_:1})):Je("",!0),b(c,{cols:"2",class:"adion-btn"},{default:q(()=>[b(d,{size:"20"},{default:q(()=>[Ge("mdi-account-group")]),_:1}),e.data.presence?(de(),et("span",{key:0,class:ri(["presence",e.data.presence])},null,2)):Je("",!0)]),_:1})]),_:1})]),_:1})):Je("",!0),e.type==="directory"?(de(),ke(g,{key:2,class:"adion-hold",onClick:l[2]||(l[2]=v=>e.data.numbers.length>1?kt(r)?r.value=!Se(r):r=!Se(r):Se(n).call.new(e.data.numbers[0].number)),link:""},{default:q(()=>[b(h,{class:"align-center"},{default:q(()=>[b(c,{cols:"2",class:"adion-avatar"},{default:q(()=>[b(f,{rounded:"",class:"rounded-pill",size:"35px"},{default:q(()=>[b(u,{src:s.value},null,8,["src"])]),_:1})]),_:1}),e.data.name?(de(),ke(c,{key:0,cols:"8",class:"adion-user"},{default:q(()=>[He("h3",null,[Ge(Ue(e.data.name)+" ",1),e.data.extension?(de(),et("small",WN,Ue(e.data.extension),1)):Je("",!0)]),(de(!0),et(Fe,null,zn(e.data.numbers,v=>(de(),et("p",{key:v.type},Ue(v.type)+": "+Ue(v.number),1))),128))]),_:1})):Je("",!0),b(c,{cols:"2",class:"adion-btn"},{default:q(()=>[b(d,{size:"20"},{default:q(()=>[Ge("mdi-book-account")]),_:1})]),_:1})]),_:1})]),_:1})):Je("",!0),e.type==="history"?(de(),ke(g,{key:3,class:"adion-hold",onClick:l[3]||(l[3]=v=>t.data.numbers?t.data.extension??Se(n).call.new(e.data.extension):Se(n).call.new(e.data.number)),link:""},{default:q(()=>[b(h,{class:"align-center"},{default:q(()=>[e.data.name?(de(),ke(c,{key:0,cols:"2",class:"adion-avatar"},{default:q(()=>[b(f,{rounded:"",class:"rounded-pill",size:"35px"},{default:q(()=>[b(u,{src:s.value},null,8,["src"])]),_:1})]),_:1})):(de(),ke(c,{key:1,cols:"2"},{default:q(()=>[b(f,{rounded:"",class:"rounded-pill",size:"35px"},{default:q(()=>[b(d,null,{default:q(()=>[Ge("mdi-account")]),_:1})]),_:1})]),_:1})),b(c,{cols:"8",class:"adion-user"},{default:q(()=>[e.data.name!==null?(de(),et("h3",YN,[Ge(Ue(e.data.name)+" ",1),e.data.extension?(de(),et("small",JN,Ue(e.data.extension),1)):Je("",!0)])):(de(),et("h3",XN,[Ge(Ue(e.data.number)+" ",1),e.data.extension?(de(),et("small",ZN,Ue(e.data.extension),1)):Je("",!0)])),He("p",null,Ue(new Date(e.data.date).toLocaleString("fr-FR",{hour:"numeric",minute:"numeric",day:"numeric",month:"numeric"})),1)]),_:1}),b(c,{cols:"2",class:"adion-btn"},{default:q(()=>[e.data.direction==="inbound"?(de(),ke(d,{key:0,size:"20"},{default:q(()=>[Ge("mdi-call-received")]),_:1})):Je("",!0),e.data.direction==="outbound"?(de(),ke(d,{key:1,size:"20"},{default:q(()=>[Ge("mdi-call-made")]),_:1})):Je("",!0),e.data.presence?(de(),ke(d,{key:2,size:"20"},{default:q(()=>[Ge("mdi-account-group")]),_:1})):Je("",!0),e.data.presence?(de(),et("span",{key:3,class:ri(["presence",e.data.presence])},null,2)):Je("",!0)]),_:1})]),_:1})]),_:1})):Je("",!0),Se(r)?(de(),ke(h,{key:4},{default:q(()=>[b(c,{cols:"11",class:"mx-auto"},{default:q(()=>[b(h,{"no-gutters":""},{default:q(()=>[e.data.extension?(de(),ke(c,{key:0,cols:"4",class:"pa-1"},{default:q(()=>[b(g,{onClick:l[4]||(l[4]=v=>Se(n).call.new(e.data.extension.toString())),link:"",color:a.value,class:"text-center"},{default:q(()=>[QN,e$,He("h5",null,Ue(e.data.extension.toString()),1)]),_:1},8,["color"])]),_:1})):Je("",!0),(de(!0),et(Fe,null,zn(e.data.numbers,v=>(de(),ke(c,{cols:"4",key:v.type,class:"pa-1"},{default:q(()=>[b(g,{onClick:p=>Se(n).call.new(v.number),link:"",class:"text-center"},{default:q(()=>[He("small",null,Ue(v.type),1),t$,He("h5",null,Ue(v.number),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):Je("",!0)],64)}}},r$=xn(n$,[["__scopeId","data-v-96b6c49a"]]),i$=He("span",{class:"ml-2"},"Rechercher un contact",-1),s$={key:0,class:"pl-5"},a$={key:2,class:"pl-5"},o$={key:4,class:"pl-5"},l$={key:6,class:"pl-5"},u$={__name:"Search",setup(e){const t=qi(),n=ne(""),r=ne({});return Qt(()=>{r.value=t.search(n.value)}),(i,s)=>{const a=ae("v-toolbar-title"),o=ae("v-icon"),l=ae("v-btn"),u=ae("v-toolbar"),f=ae("v-text-field"),c=ae("v-container"),d=r$,h=ae("v-col"),g=ae("v-row"),v=ae("v-card"),p=ae("v-dialog");return de(),ke(p,{transition:"dialog-top-transition",width:"25vw",modelValue:Se(t).finder,"onUpdate:modelValue":s[2]||(s[2]=y=>Se(t).finder=y)},{default:q(()=>[b(v,{color:"grey-darken-4"},{default:q(()=>[b(u,{color:"grey-darken-4"},{default:q(()=>[b(a,null,{default:q(()=>[i$]),_:1}),b(l,{icon:"",onClick:s[0]||(s[0]=y=>Se(t).finder=!1)},{default:q(()=>[b(o,null,{default:q(()=>[Ge("mdi-close")]),_:1})]),_:1})]),_:1}),b(c,{class:"pt-0"},{default:q(()=>[b(f,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=y=>n.value=y),label:"Extension, numéro, email, nom ou prénom...","single-line":"",rounded:"",autofocus:"",class:"rounded-pill",density:"compact",variant:"solo","hide-details":"",s:"mdi-magnify"},null,8,["modelValue"])]),_:1}),r.value.query?(de(),et("p",s$,"Composer")):Je("",!0),r.value.query?(de(),ke(g,{key:1,"no-gutters":"",class:"pb-4"},{default:q(()=>[b(h,{cols:"12",class:"pl-5 pr-5"},{default:q(()=>[b(d,{type:"compose",data:r.value.query},null,8,["data"])]),_:1})]),_:1})):Je("",!0),r.value.teams.length>0?(de(),et("p",a$,"Équipes")):Je("",!0),r.value.teams.length>0?(de(),ke(g,{key:3,"no-gutters":"",class:"pb-4"},{default:q(()=>[(de(!0),et(Fe,null,zn(r.value.teams,y=>(de(),ke(h,{cols:"12",class:"pl-5 pr-5",key:y},{default:q(()=>[b(d,{type:"team",data:y},null,8,["data"])]),_:2},1024))),128))]),_:1})):Je("",!0),r.value.directory.length>0?(de(),et("p",o$,"Répertoire")):Je("",!0),r.value.directory.length>0?(de(),ke(g,{key:5,"no-gutters":"",class:"pb-4"},{default:q(()=>[(de(!0),et(Fe,null,zn(r.value.directory,y=>(de(),ke(h,{cols:"12",class:"pl-5 pr-5",key:y},{default:q(()=>[b(d,{type:"directory",data:y},null,8,["data"])]),_:2},1024))),128))]),_:1})):Je("",!0),r.value.history.length>0?(de(),et("p",l$,"Historique")):Je("",!0),r.value.history.length>0?(de(),ke(g,{key:7,"no-gutters":"",class:"pb-4"},{default:q(()=>[(de(!0),et(Fe,null,zn(r.value.history,y=>(de(),ke(h,{cols:"12",class:"pl-5 pr-5",key:y},{default:q(()=>[b(d,{type:"history",data:y},null,8,["data"])]),_:2},1024))),128))]),_:1})):Je("",!0)]),_:1})]),_:1},8,["modelValue"])}}},c$={class:"top"},d$={class:"bottom pb-5"},f$={__name:"Softphone",setup(e){const t=qi(),n=ne(!1);let r=ne(!1),i=ne(!0);function s(u){u.altKey&&u.key==="q"&&a()}function a(){n.value=!n.value}function o(){r.value=!0,i.value=!1}function l(){i.value=!0,t.call.active.talking.length>0&&(r.value=!1)}return zt(()=>{window.addEventListener("keydown",s)}),sn(()=>{window.removeEventListener("keydown",s)}),Qt(()=>{t.call.active.talking===null&&(r.value=!0,i.value=!1)}),(u,f)=>{const c=u$,d=KN,h=zN,g=HN,v=BN,p=MN,y=NN,w=FN,A=IN,I=ae("v-container");return de(),ke(I,{class:"softphone"},{default:q(()=>[b(c),b(d),He("div",c$,[(de(!0),et(Fe,null,zn(Se(t).call.active.incoming,k=>(de(),ke(h,{key:k.number,call:k.id,number:k.number,name:k.name,start:k.start,onHangup:x=>Se(t).call.reject(k.id),onAnswer:x=>Se(t).call.answer(k.id)},null,8,["call","number","name","start","onHangup","onAnswer"]))),128)),(de(!0),et(Fe,null,zn(Se(t).call.active.hold,k=>(de(),ke(g,{key:k.number,call:k.id,number:k.number,name:k.name,start:k.start,onUnhold:x=>Se(t).call.unhold(k.id)},null,8,["call","number","name","start","onUnhold"]))),128)),Se(t).call.active.incoming.length===0&&Se(t).call.active.talking.length===0||Se(t).call.active.hold.length===0?(de(),ke(v,{key:0})):Je("",!0)]),He("div",d$,[Se(t).call.active.talking.length===0?(de(),ke(p,{key:0})):Je("",!0),Se(t).call.active.talking.length>0?(de(),ke(y,{key:1,call:Se(t).call.active.talking[0]},null,8,["call"])):Je("",!0),Se(t).call.active.talking.length>0&&!Se(i)?(de(),ke(w,{key:2,input:!1,back:!0,call:Se(t).call.active.talking[0],onClose:l},null,8,["call"])):Je("",!0),Se(t).call.active.talking.length==0?(de(),ke(w,{key:3,input:!0})):Je("",!0),Se(t).call.active.talking.length>0&&!Se(r)?(de(),ke(A,{key:4,call:Se(t).call.active.talking[0],onShow_dialpad:o,onCreate_call:a},null,8,["call"])):Je("",!0)])]),_:1})}}},h$=xn(f$,[["__scopeId","data-v-1236a77b"]]),g$={__name:"Navbar",setup(e){const t=vi();return(n,r)=>{const i=ae("v-list-item"),s=ae("v-list"),a=ae("v-divider"),o=ae("v-navigation-drawer");return de(),ke(o,{theme:"dark","expand-on-hover":"",rail:""},{append:q(()=>[b(s,{density:"compact",nav:""},{default:q(()=>[b(i,{"prepend-icon":"mdi-power-standby",onClick:r[1]||(r[1]=l=>Se(t).logout()),value:"logout",title:"Déconnexion"})]),_:1})]),default:q(()=>[b(s,null,{default:q(()=>[b(i,{to:"account","prepend-avatar":Se(t).me.avatar,title:Se(t).me.firstname+" "+Se(t).me.lastname,subtitle:Se(t).me.email},null,8,["prepend-avatar","title","subtitle"]),b(s,{density:"compact",nav:""},{default:q(()=>[b(i,{"prepend-icon":"mdi-magnify",onClick:r[0]||(r[0]=l=>Se(t).finder=!0),title:"Rechercher"})]),_:1})]),_:1}),b(a),b(s,{density:"compact",nav:""},{default:q(()=>[b(i,{to:"/","prepend-icon":"mdi-account-multiple",value:"teams",title:"Équipes"}),b(i,{to:"chat","prepend-icon":"mdi-forum",value:"chat",title:"Chat"}),b(i,{to:"meeting","prepend-icon":"mdi-webcam",value:"meeting",title:"Conférence"}),b(i,{to:"history","prepend-icon":"mdi-phone-clock",value:"history",title:"Journal d'appel"}),b(i,{to:"wallboard","prepend-icon":"mdi-chart-box",value:"dashboard",title:"Wallboard"}),b(i,{to:"contacts","prepend-icon":"mdi-contacts",value:"contacts",title:"Contacts"}),b(i,{to:"voicemail","prepend-icon":"mdi-voicemail",value:"voicemail",title:"Messagerie vocale"}),b(i,{to:"settings","prepend-icon":"mdi-cog",value:"settings",title:"Paramètres"})]),_:1})]),_:1})}}},v$={},m$={class:"adion-container"},p$={class:"adion-softphone bg-surface-variant pa-0"};function y$(e,t){const n=g$,r=ae("router-view"),i=ae("v-main"),s=h$,a=ae("v-container"),o=ae("v-app");return de(),ke(o,null,{default:q(()=>[b(n),b(a,{fluid:"",class:"fill-height pa-0 ma-0"},{default:q(()=>[He("div",m$,[b(i,{class:"mx-10 my-5"},{default:q(()=>[b(r)]),_:1})]),He("div",p$,[b(s)])]),_:1})]),_:1})}const b$=xn(v$,[["render",y$]]),S$=He("div",{style:{height:"100vh",background:"url('auth_background.png') center/cover no-repeat"}},null,-1),_$=He("div",{class:"text-subtitle-1 text-medium-emphasis"},"Compte",-1),w$=He("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},"Mot de passe",-1),x$={__name:"Auth",setup(e){const t=vi(),n=ne(!1),r=ne(!1),i=ne(!1),s=ne(""),a=ne(""),o=ne(null),l={required:f=>!!f||"Champ requis",email:f=>/.+@.+/.test(f)||"Adresse email non valide"};function u(){r.value=!0,i.value=!1,o.value.validate()&&t.login("k.paly@myadion.com","159753852").catch(f=>{r.value=!1,i.value=f})}return(f,c)=>{const d=ae("v-col"),h=ae("v-text-field"),g=ae("v-btn"),v=ae("v-form"),p=ae("v-alert"),y=ae("v-card"),w=ae("v-row"),A=ae("v-progress-circular"),I=ae("v-container"),k=ae("v-main"),x=ae("v-app");return de(),ke(x,null,{default:q(()=>[b(k,null,{default:q(()=>[b(I,{fluid:"","fill-height":"",class:"pa-0"},{default:q(()=>[b(w,{"no-gutters":""},{default:q(()=>[b(d,{cols:"12",md:"9",class:"hide-on-sm-and-down"},{default:q(()=>[S$]),_:1}),b(d,{cols:"12",md:"3"},{default:q(()=>[r.value?(de(),ke(w,{key:1,align:"center",justify:"center",style:{height:"100vh",margin:"0","background-color":"#222"}},{default:q(()=>[b(A,{indeterminate:"",color:"blue"})]),_:1})):(de(),ke(w,{key:0,align:"center",justify:"center",style:{height:"100vh",margin:"0"}},{default:q(()=>[b(y,{flat:"",style:{width:"80%"}},{default:q(()=>[b(v,{ref_key:"form",ref:o},{default:q(()=>[_$,b(h,{autocomplete:"email",rules:[l.required,l.email],density:"compact",placeholder:"Entrez votre adresse mail","prepend-inner-icon":"mdi-email-outline",variant:"outlined",modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=C=>s.value=C),required:"",onKeyup:Lh(u,["enter"])},null,8,["rules","modelValue","onKeyup"]),w$,b(h,{autocomplete:"password","append-inner-icon":n.value?"mdi-eye-off":"mdi-eye",type:n.value?"text":"password",rules:[l.required],density:"compact",placeholder:"Entrez votre mot de passe","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":c[1]||(c[1]=C=>n.value=!n.value),modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=C=>a.value=C),required:"",onKeyup:Lh(u,["enter"])},null,8,["append-inner-icon","type","rules","modelValue","onKeyup"]),b(g,{block:"",class:"mb-8",color:"blue",size:"large",variant:"tonal",onClick:u},{default:q(()=>[Ge("Connexion")]),_:1})]),_:1},512),b(p,{modelValue:i.value,"onUpdate:modelValue":c[3]||(c[3]=C=>i.value=C),dense:"",outlined:"",type:"error",color:"error",icon:"mdi-alert-circle-outline"},{default:q(()=>[Ge(Ue(i.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},C$=He("div",{style:{height:"100vh",background:"url('auth_background.png') center/cover no-repeat"}},null,-1),E$={__name:"Permission",setup(e){const t=vi();return(n,r)=>{const i=ae("v-col"),s=ae("v-card-title"),a=ae("v-card-text"),o=ae("v-spacer"),l=ae("v-btn"),u=ae("v-card-actions"),f=ae("v-card"),c=ae("v-row"),d=ae("v-container"),h=ae("v-main"),g=ae("v-app");return de(),ke(g,null,{default:q(()=>[b(h,null,{default:q(()=>[b(d,{fluid:"","fill-height":"",class:"pa-0"},{default:q(()=>[b(c,{"no-gutters":""},{default:q(()=>[b(i,{cols:"12",md:"9",class:"hide-on-sm-and-down"},{default:q(()=>[C$]),_:1}),b(i,{cols:"12",md:"3"},{default:q(()=>[b(c,{align:"center",justify:"center",style:{height:"100vh",margin:"0"}},{default:q(()=>[b(f,{flat:"",style:{width:"80%"}},{default:q(()=>[b(s,{class:"headline"},{default:q(()=>[Ge("Autorisations requises")]),_:1}),b(a,null,{default:q(()=>[Ge(" Cette application nécessite l'accès à certains périphériques de votre ordinateur pour fonctionner correctement. Veuillez accorder les autorisations nécessaires pour continuer. ")]),_:1}),b(u,null,{default:q(()=>[b(o),b(l,{color:"primary",text:"",onClick:r[0]||(r[0]=v=>Se(t).navigator.request())},{default:q(()=>[Ge("Demander les autorisations")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},T$={class:"debug"},A$={__name:"Debug",setup(e){const t=vi();return(n,r)=>{const i=ae("v-card-title"),s=ae("v-card-text"),a=ae("v-card"),o=ae("v-col"),l=ae("v-row");return de(),et("div",T$,[b(l,null,{default:q(()=>[b(o,{cols:"6"},{default:q(()=>[b(a,null,{default:q(()=>[b(i,null,{default:q(()=>[Ge("CallStore > active")]),_:1}),b(s,null,{default:q(()=>[He("pre",null,Ue(Se(t).call.call.active),1)]),_:1})]),_:1})]),_:1}),b(o,{cols:"6"},{default:q(()=>[b(a,null,{default:q(()=>[b(i,null,{default:q(()=>[Ge("WebRTCStore > sessions")]),_:1}),b(s,null,{default:q(()=>[He("pre",null,Ue(Se(t).webrtc.webrtc.sessions),1)]),_:1})]),_:1})]),_:1}),b(o,{cols:"6"},{default:q(()=>[b(a,null,{default:q(()=>[b(i,null,{default:q(()=>[Ge("WebsocketStore")]),_:1}),b(s,null,{default:q(()=>[He("pre",null,Ue(Se(t).ws.websocket),1)]),_:1})]),_:1})]),_:1})]),_:1})])}}},I$=xn(A$,[["__scopeId","data-v-fff5ca97"]]),R$={__name:"App",setup(e){const t=vi(),n=ne(!1);return window.addEventListener("keydown",r=>{r.ctrlKey&&r.key==="f"&&(r.preventDefault(),t.finder=!0),r.key==="F12"&&(r.preventDefault(),n.value=!n.value,t.info(n.value?"Activé":"Désactivé","Mode développeur"))}),(r,i)=>{const s=ae("notifications");return de(),et(Fe,null,[b(s,{position:"bottom right"}),!Se(t).navigator.permissionsGranted&&Se(t).navigator.permissionsGranted!==null?(de(),ke(E$,{key:0})):Je("",!0),Se(t).connected&&Se(t).navigator.permissionsGranted?(de(),ke(b$,{key:1})):Je("",!0),!Se(t).connected&&Se(t).navigator.permissionsGranted?(de(),ke(x$,{key:2})):Je("",!0),n.value?(de(),ke(I$,{key:3})):Je("",!0)],64)}}};function k$(e){return typeof e=="object"&&e!==null}function Vy(e,t){return e=k$(e)?e:Object.create(null),new Proxy(e,{get(n,r,i){return r==="key"?Reflect.get(n,r,i):Reflect.get(n,r,i)||Reflect.get(t,r,i)}})}function P$(e,t){return t.reduce((n,r)=>n==null?void 0:n[r],e)}function D$(e,t,n){return t.slice(0,-1).reduce((r,i)=>/^(__proto__)$/.test(i)?{}:r[i]=r[i]||{},e)[t[t.length-1]]=n,e}function F$(e,t){return t.reduce((n,r)=>{const i=r.split(".");return D$(n,i,P$(e,i))},{})}function By(e,{storage:t,serializer:n,key:r,debug:i}){try{const s=t==null?void 0:t.getItem(r);s&&e.$patch(n==null?void 0:n.deserialize(s))}catch(s){i&&console.error(s)}}function Ly(e,{storage:t,serializer:n,key:r,paths:i,debug:s}){try{const a=Array.isArray(i)?F$(e,i):e;t.setItem(r,n.serialize(a))}catch(a){s&&console.error(a)}}function O$(e={}){return t=>{const{auto:n=!1}=e,{options:{persist:r=n},store:i,pinia:s}=t;if(!r)return;if(!(i.$id in s.state.value)){const o=s._s.get(i.$id.replace("__hot:",""));o&&Promise.resolve().then(()=>o.$persist());return}const a=(Array.isArray(r)?r.map(o=>Vy(o,e)):[Vy(r,e)]).map(({storage:o=localStorage,beforeRestore:l=null,afterRestore:u=null,serializer:f={serialize:JSON.stringify,deserialize:JSON.parse},key:c=i.$id,paths:d=null,debug:h=!1})=>{var g;return{storage:o,beforeRestore:l,afterRestore:u,serializer:f,key:((g=e.key)!=null?g:v=>v)(typeof c=="string"?c:c(i.$id)),paths:d,debug:h}});i.$persist=()=>{a.forEach(o=>{Ly(i.$state,o)})},i.$hydrate=({runHooks:o=!0}={})=>{a.forEach(l=>{const{beforeRestore:u,afterRestore:f}=l;o&&(u==null||u(t)),By(i,l),o&&(f==null||f(t))})},a.forEach(o=>{const{beforeRestore:l,afterRestore:u}=o;l==null||l(t),By(i,o),u==null||u(t),i.$subscribe((f,c)=>{Ly(c,o)},{detached:!0})})}}var N$=O$();const Pt=typeof window<"u",Hm=Pt&&"IntersectionObserver"in window,$$=Pt&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),Hy=Pt&&"EyeDropper"in window;function jy(e,t,n){M$(e,t),t.set(e,n)}function M$(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function V$(e,t,n){var r=Sx(e,t,"set");return B$(e,r,n),n}function B$(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function ks(e,t){var n=Sx(e,t,"get");return L$(e,n)}function Sx(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function L$(e,t){return t.get?t.get.call(e):t.value}function _x(e,t,n){const r=t.length-1;if(r<0)return e===void 0?n:e;for(let i=0;i<r;i++){if(e==null)return n;e=e[t[i]]}return e==null||e[t[r]]===void 0?n:e[t[r]]}function Ss(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(r=>Ss(e[r],t[r]))}function Ys(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),_x(e,t.split("."),n))}function Sn(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const i=t(e,n);return typeof i>"u"?n:i}if(typeof t=="string")return Ys(e,t,n);if(Array.isArray(t))return _x(e,t,n);if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}function ni(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,r)=>t+r)}function De(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(e==null||e===""))return isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${t}`:void 0}function Rc(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function El(e){if(e&&"$el"in e){const t=e.$el;return(t==null?void 0:t.nodeType)===Node.TEXT_NODE?t.nextElementSibling:t}return e}const qy=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),ug=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function wx(e){return Object.keys(e)}function Bs(e,t){return t.every(n=>e.hasOwnProperty(n))}function xx(e,t){const n={},r=new Set(Object.keys(e));for(const i of t)r.has(i)&&(n[i]=e[i]);return n}function cg(e,t,n){const r=Object.create(null),i=Object.create(null);for(const s in e)t.some(a=>a instanceof RegExp?a.test(s):a===s)&&!(n!=null&&n.some(a=>a===s))?r[s]=e[s]:i[s]=e[s];return[r,i]}function gn(e,t){const n={...e};return t.forEach(r=>delete n[r]),n}function Cx(e,t){const n={};return t.forEach(r=>n[r]=e[r]),n}const Ex=/^on[^a-z]/,qd=e=>Ex.test(e),H$=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],j$=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function q$(e){return e.isComposing&&j$.includes(e.key)}function _s(e){const[t,n]=cg(e,[Ex]),r=gn(t,H$),[i,s]=cg(n,["class","style","id",/^data-/]);return Object.assign(i,t),Object.assign(s,r),[i,s]}function Wt(e){return e==null?[]:Array.isArray(e)?e:[e]}function U$(e,t){let n=0;const r=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];clearTimeout(n),n=setTimeout(()=>e(...s),Se(t))};return r.clear=()=>{clearTimeout(n)},r.immediate=e,r}function rn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function Uy(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function zy(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function Ky(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function z$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let r=0;for(;r<e.length;)n.push(e.substr(r,t)),r+=t;return n}function Gy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let r=-1;for(;Math.abs(e)>=t&&r<n.length-1;)e/=t,++r;return`${e.toFixed(1)} ${n[r]}B`}function Cr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r={};for(const i in e)r[i]=e[i];for(const i in t){const s=e[i],a=t[i];if(Rc(s)&&Rc(a)){r[i]=Cr(s,a,n);continue}if(Array.isArray(s)&&Array.isArray(a)&&n){r[i]=n(s,a);continue}r[i]=a}return r}function Tx(e){return e.map(t=>t.type===Fe?Tx(t.children):t).flat()}function Ks(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Ks.cache.has(e))return Ks.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Ks.cache.set(e,t),t}Ks.cache=new Map;function il(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>il(e,n)).flat(1);if(Array.isArray(t.children))return t.children.map(n=>il(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return il(e,t.component.subTree).flat(1)}return[]}var Au=new WeakMap,Ia=new WeakMap;class K${constructor(t){jy(this,Au,{writable:!0,value:[]}),jy(this,Ia,{writable:!0,value:0}),this.size=t}push(t){ks(this,Au)[ks(this,Ia)]=t,V$(this,Ia,(ks(this,Ia)+1)%this.size)}values(){return ks(this,Au).slice(ks(this,Ia)).concat(ks(this,Au).slice(0,ks(this,Ia)))}}function G$(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function jm(e){const t=bn({}),n=F(e);return Qt(()=>{for(const r in n.value)t[r]=n.value[r]},{flush:"sync"}),Bl(t)}function kc(e,t){return e.includes(t)}function Ax(e){return e[2].toLowerCase()+e.slice(3)}const er=()=>[Function,Array];function Wy(e,t){return t="on"+li(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function qm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(Array.isArray(e))for(const i of e)i(...n);else typeof e=="function"&&e(...n)}function Tl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(r=>`${r}${t?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function Ix(e,t,n){let r,i=e.indexOf(document.activeElement);const s=t==="next"?1:-1;do i+=s,r=e[i];while((!r||r.offsetParent==null||!((n==null?void 0:n(r))??!0))&&i<e.length&&i>=0);return r}function ro(e,t){var r,i,s,a;const n=Tl(e);if(!t)(e===document.activeElement||!e.contains(document.activeElement))&&((r=n[0])==null||r.focus());else if(t==="first")(i=n[0])==null||i.focus();else if(t==="last")(s=n.at(-1))==null||s.focus();else if(typeof t=="number")(a=n[t])==null||a.focus();else{const o=Ix(n,t);o?o.focus():ro(e,t==="next"?"first":"last")}}function Iu(e){return e==null||typeof e=="string"&&e.trim()===""}function Rx(){}function io(e,t){if(!(Pt&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function Ud(e){return e.some(t=>ml(t)?t.type===ur?!1:t.type!==Fe||Ud(t.children):!0)?e:null}const kx=["top","bottom"],W$=["start","end","left","right"];function dg(e,t){let[n,r]=e.split(" ");return r||(r=kc(kx,n)?"start":kc(W$,n)?"top":"center"),{side:fg(n,t),align:fg(r,t)}}function fg(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function vh(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function mh(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function Yy(e){return{side:e.align,align:e.side}}function Jy(e){return kc(kx,e.side)?"y":"x"}class Gs{constructor(t){let{x:n,y:r,width:i,height:s}=t;this.x=n,this.y=r,this.width=i,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function Xy(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function Px(e){return Array.isArray(e)?new Gs({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function Um(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),r=n.transform;if(r){let i,s,a,o,l;if(r.startsWith("matrix3d("))i=r.slice(9,-1).split(/, /),s=+i[0],a=+i[5],o=+i[12],l=+i[13];else if(r.startsWith("matrix("))i=r.slice(7,-1).split(/, /),s=+i[0],a=+i[3],o=+i[4],l=+i[5];else return new Gs(t);const u=n.transformOrigin,f=t.x-o-(1-s)*parseFloat(u),c=t.y-l-(1-a)*parseFloat(u.slice(u.indexOf(" ")+1)),d=s?t.width/s:e.offsetWidth+1,h=a?t.height/a:e.offsetHeight+1;return new Gs({x:f,y:c,width:d,height:h})}else return new Gs(t)}function Ls(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let r;try{r=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof r.finished>"u"&&(r.finished=new Promise(i=>{r.onfinish=()=>{i(r)}})),r}const Yu=new WeakMap;function Y$(e,t){Object.keys(t).forEach(n=>{if(qd(n)){const r=Ax(n),i=Yu.get(e);if(t[n]==null)i==null||i.forEach(s=>{const[a,o]=s;a===r&&(e.removeEventListener(r,o),i.delete(s))});else if(!i||![...i].some(s=>s[0]===r&&s[1]===t[n])){e.addEventListener(r,t[n]);const s=i||new Set;s.add([r,t[n]]),Yu.has(e)||Yu.set(e,s)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function J$(e,t){Object.keys(t).forEach(n=>{if(qd(n)){const r=Ax(n),i=Yu.get(e);i==null||i.forEach(s=>{const[a,o]=s;a===r&&(e.removeEventListener(r,o),i.delete(s))})}else e.removeAttribute(n)})}const Ra=2.4,Zy=.2126729,Qy=.7151522,e1=.072175,X$=.55,Z$=.58,Q$=.57,eM=.62,Ru=.03,t1=1.45,tM=5e-4,nM=1.25,rM=1.25,n1=.078,r1=12.82051282051282,ku=.06,i1=.001;function s1(e,t){const n=(e.r/255)**Ra,r=(e.g/255)**Ra,i=(e.b/255)**Ra,s=(t.r/255)**Ra,a=(t.g/255)**Ra,o=(t.b/255)**Ra;let l=n*Zy+r*Qy+i*e1,u=s*Zy+a*Qy+o*e1;if(l<=Ru&&(l+=(Ru-l)**t1),u<=Ru&&(u+=(Ru-u)**t1),Math.abs(u-l)<tM)return 0;let f;if(u>l){const c=(u**X$-l**Z$)*nM;f=c<i1?0:c<n1?c-c*r1*ku:c-ku}else{const c=(u**eM-l**Q$)*rM;f=c>-i1?0:c>-n1?c-c*r1*ku:c+ku}return f*100}function iM(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const Pc=.20689655172413793,sM=e=>e>Pc**3?Math.cbrt(e):e/(3*Pc**2)+4/29,aM=e=>e>Pc?e**3:3*Pc**2*(e-4/29);function Dx(e){const t=sM,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function Fx(e){const t=aM,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const oM=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],lM=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,uM=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],cM=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function Ox(e){const t=Array(3),n=lM,r=oM;for(let i=0;i<3;++i)t[i]=Math.round(rn(n(r[i][0]*e[0]+r[i][1]*e[1]+r[i][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function zm(e){let{r:t,g:n,b:r}=e;const i=[0,0,0],s=cM,a=uM;t=s(t/255),n=s(n/255),r=s(r/255);for(let o=0;o<3;++o)i[o]=a[o][0]*t+a[o][1]*n+a[o][2]*r;return i}function hg(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function dM(e){return hg(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const a1=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,fM={rgb:(e,t,n,r)=>({r:e,g:t,b:n,a:r}),rgba:(e,t,n,r)=>({r:e,g:t,b:n,a:r}),hsl:(e,t,n,r)=>o1({h:e,s:t,l:n,a:r}),hsla:(e,t,n,r)=>o1({h:e,s:t,l:n,a:r}),hsv:(e,t,n,r)=>Oi({h:e,s:t,v:n,a:r}),hsva:(e,t,n,r)=>Oi({h:e,s:t,v:n,a:r})};function Er(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&a1.test(e)){const{groups:t}=e.match(a1),{fn:n,values:r}=t,i=r.split(/,\s*/).map(s=>s.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(s)/100:parseFloat(s));return fM[n](...i)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),Bx(t)}else if(typeof e=="object"){if(Bs(e,["r","g","b"]))return e;if(Bs(e,["h","s","l"]))return Oi(Km(e));if(Bs(e,["h","s","v"]))return Oi(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function Oi(e){const{h:t,s:n,v:r,a:i}=e,s=o=>{const l=(o+t/60)%6;return r-r*n*Math.max(Math.min(l,4-l,1),0)},a=[s(5),s(3),s(1)].map(o=>Math.round(o*255));return{r:a[0],g:a[1],b:a[2],a:i}}function o1(e){return Oi(Km(e))}function zd(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r);let a=0;i!==s&&(i===t?a=60*(0+(n-r)/(i-s)):i===n?a=60*(2+(r-t)/(i-s)):i===r&&(a=60*(4+(t-n)/(i-s)))),a<0&&(a=a+360);const o=i===0?0:(i-s)/i,l=[a,o,i];return{h:l[0],s:l[1],v:l[2],a:e.a}}function Nx(e){const{h:t,s:n,v:r,a:i}=e,s=r-r*n/2,a=s===1||s===0?0:(r-s)/Math.min(s,1-s);return{h:t,s:a,l:s,a:i}}function Km(e){const{h:t,s:n,l:r,a:i}=e,s=r+n*Math.min(r,1-r),a=s===0?0:2-2*r/s;return{h:t,s:a,v:s,a:i}}function $x(e){let{r:t,g:n,b:r,a:i}=e;return i===void 0?`rgb(${t}, ${n}, ${r})`:`rgba(${t}, ${n}, ${r}, ${i})`}function Mx(e){return $x(Oi(e))}function Pu(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function Vx(e){let{r:t,g:n,b:r,a:i}=e;return`#${[Pu(t),Pu(n),Pu(r),i!==void 0?Pu(Math.round(i*255)):""].join("")}`}function Bx(e){e=hM(e);let[t,n,r,i]=z$(e,2).map(s=>parseInt(s,16));return i=i===void 0?i:i/255,{r:t,g:n,b:r,a:i}}function Lx(e){const t=Bx(e);return zd(t)}function Hx(e){return Vx(Oi(e))}function hM(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=zy(zy(e,6),8,"F")),e}function gM(e,t){const n=Dx(zm(e));return n[0]=n[0]+t*10,Ox(Fx(n))}function vM(e,t){const n=Dx(zm(e));return n[0]=n[0]-t*10,Ox(Fx(n))}function gg(e){const t=Er(e);return zm(t)[1]}function mM(e,t){const n=gg(e),r=gg(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function jx(e){const t=Math.abs(s1(Er(0),Er(e)));return Math.abs(s1(Er(16777215),Er(e)))>Math.min(t,50)?"#fff":"#000"}function Z(e,t){return n=>Object.keys(e).reduce((r,i)=>{const a=typeof e[i]=="object"&&e[i]!=null&&!Array.isArray(e[i])?e[i]:{type:e[i]};return n&&i in n?r[i]={...a,default:n[i]}:r[i]=a,t&&!r[i].source&&(r[i].source=t),r},{})}const Ne=Z({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component"),so=Symbol.for("vuetify:defaults");function pM(e){return ne(e)}function Gm(){const e=it(so);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function Bt(e,t){const n=Gm(),r=ne(e),i=F(()=>{if(Se(t==null?void 0:t.disabled))return n.value;const a=Se(t==null?void 0:t.scoped),o=Se(t==null?void 0:t.reset),l=Se(t==null?void 0:t.root);if(r.value==null&&!(a||o||l))return n.value;let u=Cr(r.value,{prev:n.value});if(a)return u;if(o||l){const f=Number(o||1/0);for(let c=0;c<=f&&!(!u||!("prev"in u));c++)u=u.prev;return u&&typeof l=="string"&&l in u&&(u=Cr(Cr(u,{prev:u}),u[l])),u}return u.prev?Cr(u.prev,u):u});return At(so,i),i}function yM(e,t){var n,r;return typeof((n=e.props)==null?void 0:n[t])<"u"||typeof((r=e.props)==null?void 0:r[Ks(t)])<"u"}function bM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gm();const r=an("useDefaults");if(t=t??r.type.name??r.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const i=F(()=>{var l;return(l=n.value)==null?void 0:l[e._as??t]}),s=new Proxy(e,{get(l,u){var c,d,h,g;const f=Reflect.get(l,u);return u==="class"||u==="style"?[(c=i.value)==null?void 0:c[u],f].filter(v=>v!=null):typeof u=="string"&&!yM(r.vnode,u)?((d=i.value)==null?void 0:d[u])??((g=(h=n.value)==null?void 0:h.global)==null?void 0:g[u])??f:f}}),a=Ae();Qt(()=>{if(i.value){const l=Object.entries(i.value).filter(u=>{let[f]=u;return f.startsWith(f[0].toUpperCase())});a.value=l.length?Object.fromEntries(l):void 0}else a.value=void 0});function o(){const l=CM(so,r);At(so,F(()=>a.value?Cr((l==null?void 0:l.value)??{},a.value):l==null?void 0:l.value))}return{props:s,provideSubDefaults:o}}function hr(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=Z(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(r){return xx(r,t)},e.props._as=String,e.setup=function(r,i){const s=Gm();if(!s.value)return e._setup(r,i);const{props:a,provideSubDefaults:o}=bM(r,r._as??e.name,s),l=e._setup(a,i);return o(),l}}return e}function ge(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?hr:go)(t)}function SM(e,t){return t.props=e,t}function gr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return ge()({name:n??li(Ir(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...Ne()},setup(r,i){let{slots:s}=i;return()=>{var a;return ui(r.tag,{class:[e,r.class],style:r.style},(a=s.default)==null?void 0:a.call(s))}}})}function qx(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const Al="cubic-bezier(0.4, 0, 0.2, 1)",_M="cubic-bezier(0.0, 0, 0.2, 1)",wM="cubic-bezier(0.4, 0, 1, 1)";function l1(e,t,n){return Object.keys(e).filter(r=>qd(r)&&r.endsWith(t)).reduce((r,i)=>(r[i.slice(0,-t.length)]=s=>e[i](s,n(s)),r),{})}function an(e,t){const n=pv();if(!n)throw new Error(`[Vuetify] ${e} ${t||"must be called from inside a setup function"}`);return n}function mi(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=an(e).type;return Ks((t==null?void 0:t.aliasName)||(t==null?void 0:t.name))}let Ux=0,Ju=new WeakMap;function Ln(){const e=an("getUid");if(Ju.has(e))return Ju.get(e);{const t=Ux++;return Ju.set(e,t),t}}Ln.reset=()=>{Ux=0,Ju=new WeakMap};function Wm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?xM(e):Ym(e))return e;e=e.parentElement}return document.scrollingElement}function Dc(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(Ym(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function Ym(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function xM(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function CM(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:an("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}function EM(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function _e(e){const t=an("useRender");t.render=e}const vg={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function TM(e,t){const n=[];let r=[];const i=zx(e),s=Kx(e),a=(i.getDay()-vg[t.slice(-2).toUpperCase()]+7)%7,o=(s.getDay()-vg[t.slice(-2).toUpperCase()]+7)%7;for(let l=0;l<a;l++){const u=new Date(i);u.setDate(u.getDate()-(a-l)),r.push(u)}for(let l=1;l<=s.getDate();l++){const u=new Date(e.getFullYear(),e.getMonth(),l);r.push(u),r.length===7&&(n.push(r),r=[])}for(let l=1;l<7-o;l++){const u=new Date(s);u.setDate(u.getDate()+l),r.push(u)}return n.push(r),n}function zx(e){return new Date(e.getFullYear(),e.getMonth(),1)}function Kx(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function AM(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const IM=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function Gx(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(IM.test(e))return AM(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const u1=new Date(2e3,0,2);function RM(e){const t=vg[e.slice(-2).toUpperCase()];return ni(7).map(n=>{const r=new Date(u1);return r.setDate(u1.getDate()+t+n),new Intl.DateTimeFormat(e,{weekday:"narrow"}).format(r)})}function kM(e,t,n,r){const i=Gx(e)??new Date,s=r==null?void 0:r[t];if(typeof s=="function")return s(i,t,n);let a={};switch(t){case"fullDateWithWeekday":a={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":a={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":a={day:"2-digit",month:"2-digit",year:"numeric"};break;case"monthAndDate":a={month:"long",day:"numeric"};break;case"monthAndYear":a={month:"long",year:"numeric"};break;case"month":a={month:"long"};break;case"monthShort":a={month:"short"};break;case"dayOfMonth":a={day:"numeric"};break;case"shortDate":a={year:"2-digit",month:"numeric",day:"numeric"};break;case"year":a={year:"numeric"};break;default:a=s??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,a).format(i)}function PM(e,t){const n=e.toJsDate(t),r=n.getFullYear(),i=Ky(String(n.getMonth()+1),2,"0"),s=Ky(String(n.getDate()),2,"0");return`${r}-${i}-${s}`}function DM(e){const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)}function FM(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function OM(e,t){const n=new Date(e);return n.setMonth(n.getMonth()+t),n}function NM(e){return e.getFullYear()}function $M(e){return e.getMonth()}function MM(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function VM(e){return new Date(e.getFullYear(),0,1)}function BM(e){return new Date(e.getFullYear(),11,31)}function LM(e,t){return mg(e,t[0])&&jM(e,t[1])}function HM(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function mg(e,t){return e.getTime()>t.getTime()}function jM(e,t){return e.getTime()<t.getTime()}function c1(e,t){return e.getTime()===t.getTime()}function qM(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function UM(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function zM(e,t,n){const r=new Date(e),i=new Date(t);return n==="month"?r.getMonth()-i.getMonth()+(r.getFullYear()-i.getFullYear())*12:Math.floor((r.getTime()-i.getTime())/(1e3*60*60*24))}function KM(e,t){const n=new Date(e);return n.setMonth(t),n}function GM(e,t){const n=new Date(e);return n.setFullYear(t),n}function WM(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function YM(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class JM{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return Gx(t)}toJsDate(t){return t}toISO(t){return PM(this,t)}parseISO(t){return DM(t)}addDays(t,n){return FM(t,n)}addMonths(t,n){return OM(t,n)}getWeekArray(t){return TM(t,this.locale)}startOfMonth(t){return zx(t)}endOfMonth(t){return Kx(t)}format(t,n){return kM(t,n,this.locale,this.formats)}isEqual(t,n){return c1(t,n)}isValid(t){return HM(t)}isWithinRange(t,n){return LM(t,n)}isAfter(t,n){return mg(t,n)}isBefore(t,n){return!mg(t,n)&&!c1(t,n)}isSameDay(t,n){return qM(t,n)}isSameMonth(t,n){return UM(t,n)}setMonth(t,n){return KM(t,n)}setYear(t,n){return GM(t,n)}getDiff(t,n,r){return zM(t,n,r)}getWeekdays(){return RM(this.locale)}getYear(t){return NM(t)}getMonth(t){return $M(t)}getNextMonth(t){return MM(t)}startOfDay(t){return WM(t)}endOfDay(t){return YM(t)}startOfYear(t){return VM(t)}endOfYear(t){return BM(t)}}const pg=Symbol.for("vuetify:date-adapter");function XM(e,t){var i;const n=Cr({adapter:JM,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e),r=bn(typeof n.adapter=="function"?new n.adapter({locale:((i=n.locale)==null?void 0:i[t.current.value])??t.current.value,formats:n.formats}):n.adapter);return Re(t.current,s=>{const a=n.locale?n.locale[s]:s;r.locale=a??r.locale}),r}function Kd(){const e=it(pg);if(!e)throw new Error("[Vuetify] Could not find injected date adapter");return e}function ZM(e,t){const n=e.toJsDate(t);let r=e.getYear(n),i=e.startOfYear(n);if(n<i)r=r-1,i=e.startOfYear(e.setYear(n,r));else{const o=e.startOfYear(e.setYear(n,r+1));n>=o&&(r=r+1,i=o)}const s=Math.abs(n.getTime()-i.getTime()),a=Math.ceil(s/(1e3*60*60*24));return Math.floor(a/7)+1}const Gd=["sm","md","lg","xl","xxl"],yg=Symbol.for("vuetify:display"),d1={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},QM=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d1;return Cr(d1,e)};function f1(e){return Pt&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function h1(e){return Pt&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function g1(e){const t=Pt&&!e?window.navigator.userAgent:"ssr";function n(g){return!!t.match(g)}const r=n(/android/i),i=n(/iphone|ipad|ipod/i),s=n(/cordova/i),a=n(/electron/i),o=n(/chrome/i),l=n(/edge/i),u=n(/firefox/i),f=n(/opera/i),c=n(/win/i),d=n(/mac/i),h=n(/linux/i);return{android:r,ios:i,cordova:s,electron:a,chrome:o,edge:l,firefox:u,opera:f,win:c,mac:d,linux:h,touch:$$,ssr:t==="ssr"}}function eV(e,t){const{thresholds:n,mobileBreakpoint:r}=QM(e),i=Ae(h1(t)),s=Ae(g1(t)),a=bn({}),o=Ae(f1(t));function l(){i.value=h1(),o.value=f1()}function u(){l(),s.value=g1()}return Qt(()=>{const f=o.value<n.sm,c=o.value<n.md&&!f,d=o.value<n.lg&&!(c||f),h=o.value<n.xl&&!(d||c||f),g=o.value<n.xxl&&!(h||d||c||f),v=o.value>=n.xxl,p=f?"xs":c?"sm":d?"md":h?"lg":g?"xl":"xxl",y=typeof r=="number"?r:n[r],w=o.value<y;a.xs=f,a.sm=c,a.md=d,a.lg=h,a.xl=g,a.xxl=v,a.smAndUp=!f,a.mdAndUp=!(f||c),a.lgAndUp=!(f||c||d),a.xlAndUp=!(f||c||d||h),a.smAndDown=!(d||h||g||v),a.mdAndDown=!(h||g||v),a.lgAndDown=!(g||v),a.xlAndDown=!v,a.name=p,a.height=i.value,a.width=o.value,a.mobile=w,a.mobileBreakpoint=r,a.platform=s.value,a.thresholds=n}),Pt&&window.addEventListener("resize",l,{passive:!0}),{...Bl(a),update:u,ssr:!!t}}const Jm=Z({mobileBreakpoint:[Number,String]},"display");function da(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();const n=it(yg);if(!n)throw new Error("Could not find Vuetify display injection");const r=F(()=>{if(!e.mobileBreakpoint)return n.mobile.value;const s=typeof e.mobileBreakpoint=="number"?e.mobileBreakpoint:n.thresholds.value[e.mobileBreakpoint];return n.width.value<s}),i=F(()=>t?{[`${t}--mobile`]:r.value}:{});return{...n,displayClasses:i,mobile:r}}const Wx={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",eyeDropper:"mdi-eyedropper"},Yx={component:e=>ui(Yd,{...e,class:"mdi"})},tt=[String,Function,Object,Array],bg=Symbol.for("vuetify:icons"),Wd=Z({icon:{type:tt},tag:{type:String,required:!0}},"icon"),Sg=ge()({name:"VComponentIcon",props:Wd(),setup(e,t){let{slots:n}=t;return()=>{const r=e.icon;return b(e.tag,null,{default:()=>{var i;return[e.icon?b(r,null,null):(i=n.default)==null?void 0:i.call(n)]}})}}}),Xm=hr({name:"VSvgIcon",inheritAttrs:!1,props:Wd(),setup(e,t){let{attrs:n}=t;return()=>b(e.tag,xe(n,{style:null}),{default:()=>[b("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(r=>Array.isArray(r)?b("path",{d:r[0],"fill-opacity":r[1]},null):b("path",{d:r},null)):b("path",{d:e.icon},null)])]})}}),tV=hr({name:"VLigatureIcon",props:Wd(),setup(e){return()=>b(e.tag,null,{default:()=>[e.icon]})}}),Yd=hr({name:"VClassIcon",props:Wd(),setup(e){return()=>b(e.tag,{class:e.icon},null)}}),nV={svg:{component:Xm},class:{component:Yd}};function rV(e){return Cr({defaultSet:"mdi",sets:{...nV,mdi:Yx},aliases:{...Wx,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},e)}const iV=e=>{const t=it(bg);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:F(()=>{var l;const r=Se(e);if(!r)return{component:Sg};let i=r;if(typeof i=="string"&&(i=i.trim(),i.startsWith("$")&&(i=(l=t.aliases)==null?void 0:l[i.slice(1)])),!i)throw new Error(`Could not find aliased icon "${r}"`);if(Array.isArray(i))return{component:Xm,icon:i};if(typeof i!="string")return{component:Sg,icon:i};const s=Object.keys(t.sets).find(u=>typeof i=="string"&&i.startsWith(`${u}:`)),a=s?i.slice(s.length+1):i;return{component:t.sets[s??t.defaultSet].component,icon:a}})}},sV={badge:"Badge",open:"Open",close:"Close",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},aV={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function jr(e,t){let n;function r(){n=Ml(),n.run(()=>t.length?t(()=>{n==null||n.stop(),r()}):t())}Re(e,i=>{i&&!n?r():i||(n==null||n.stop(),n=void 0)},{immediate:!0}),In(()=>{n==null||n.stop()})}function Ke(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:c=>c,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:c=>c;const s=an("useProxiedModel"),a=ne(e[t]!==void 0?e[t]:n),o=Ks(t),u=F(o!==t?()=>{var c,d,h,g;return e[t],!!(((c=s.vnode.props)!=null&&c.hasOwnProperty(t)||(d=s.vnode.props)!=null&&d.hasOwnProperty(o))&&((h=s.vnode.props)!=null&&h.hasOwnProperty(`onUpdate:${t}`)||(g=s.vnode.props)!=null&&g.hasOwnProperty(`onUpdate:${o}`)))}:()=>{var c,d;return e[t],!!((c=s.vnode.props)!=null&&c.hasOwnProperty(t)&&((d=s.vnode.props)!=null&&d.hasOwnProperty(`onUpdate:${t}`)))});jr(()=>!u.value,()=>{Re(()=>e[t],c=>{a.value=c})});const f=F({get(){const c=e[t];return r(u.value?c:a.value)},set(c){const d=i(c),h=st(u.value?e[t]:a.value);h===d||r(h)===c||(a.value=d,s==null||s.emit(`update:${t}`,d))}});return Object.defineProperty(f,"externalValue",{get:()=>u.value?e[t]:a.value}),f}const v1="$vuetify.",m1=(e,t)=>e.replace(/\{(\d+)\}/g,(n,r)=>String(t[+r])),Jx=(e,t,n)=>function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];if(!r.startsWith(v1))return m1(r,s);const o=r.replace(v1,""),l=e.value&&n.value[e.value],u=t.value&&n.value[t.value];let f=Ys(l,o,null);return f||(`${r}${e.value}`,f=Ys(u,o,null)),f||(f=r),typeof f!="string"&&(f=r),m1(f,s)};function Xx(e,t){return(n,r)=>new Intl.NumberFormat([e.value,t.value],r).format(n)}function ph(e,t,n){const r=Ke(e,t,e[t]??n.value);return r.value=e[t]??n.value,Re(n,i=>{e[t]==null&&(r.value=n.value)}),r}function Zx(e){return t=>{const n=ph(t,"locale",e.current),r=ph(t,"fallback",e.fallback),i=ph(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:r,messages:i,t:Jx(n,r,i),n:Xx(n,r),provide:Zx({current:n,fallback:r,messages:i})}}}function oV(e){const t=Ae((e==null?void 0:e.locale)??"en"),n=Ae((e==null?void 0:e.fallback)??"en"),r=ne({en:sV,...e==null?void 0:e.messages});return{name:"vuetify",current:t,fallback:n,messages:r,t:Jx(t,n,r),n:Xx(t,n),provide:Zx({current:t,fallback:n,messages:r})}}const ao=Symbol.for("vuetify:locale");function lV(e){return e.name!=null}function uV(e){const t=e!=null&&e.adapter&&lV(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:oV(e),n=dV(t,e);return{...t,...n}}function on(){const e=it(ao);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function cV(e){const t=it(ao);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),r=fV(n,t.rtl,e),i={...n,...r};return At(ao,i),i}function dV(e,t){const n=ne((t==null?void 0:t.rtl)??aV),r=F(()=>n.value[e.current.value]??!1);return{isRtl:r,rtl:n,rtlClasses:F(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function fV(e,t,n){const r=F(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:r,rtl:t,rtlClasses:F(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function Cn(){const e=it(ao);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}const Il=Symbol.for("vuetify:theme"),dt=Z({theme:String},"theme"),Mo={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function hV(){var n,r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mo;if(!e)return{...Mo,isDisabled:!0};const t={};for(const[i,s]of Object.entries(e.themes??{})){const a=s.dark||i==="dark"?(n=Mo.themes)==null?void 0:n.dark:(r=Mo.themes)==null?void 0:r.light;t[i]=Cr(a,s)}return Cr(Mo,{...e,themes:t})}function gV(e){const t=hV(e),n=ne(t.defaultTheme),r=ne(t.themes),i=F(()=>{const f={};for(const[c,d]of Object.entries(r.value)){const h=f[c]={...d,colors:{...d.colors}};if(t.variations)for(const g of t.variations.colors){const v=h.colors[g];if(v)for(const p of["lighten","darken"]){const y=p==="lighten"?gM:vM;for(const w of ni(t.variations[p],1))h.colors[`${g}-${p}-${w}`]=Vx(y(Er(v),w))}}for(const g of Object.keys(h.colors)){if(/^on-[a-z]/.test(g)||h.colors[`on-${g}`])continue;const v=`on-${g}`,p=Er(h.colors[g]);h.colors[v]=jx(p)}}return f}),s=F(()=>i.value[n.value]),a=F(()=>{const f=[];s.value.dark&&Ps(f,":root",["color-scheme: dark"]),Ps(f,":root",p1(s.value));for(const[g,v]of Object.entries(i.value))Ps(f,`.v-theme--${g}`,[`color-scheme: ${v.dark?"dark":"normal"}`,...p1(v)]);const c=[],d=[],h=new Set(Object.values(i.value).flatMap(g=>Object.keys(g.colors)));for(const g of h)/^on-[a-z]/.test(g)?Ps(d,`.${g}`,[`color: rgb(var(--v-theme-${g})) !important`]):(Ps(c,`.bg-${g}`,[`--v-theme-overlay-multiplier: var(--v-theme-${g}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${g})) !important`,`color: rgb(var(--v-theme-on-${g})) !important`]),Ps(d,`.text-${g}`,[`color: rgb(var(--v-theme-${g})) !important`]),Ps(d,`.border-${g}`,[`--v-border-color: var(--v-theme-${g})`]));return f.push(...c,...d),f.map((g,v)=>v===0?g:`    ${g}`).join("")});function o(){return{style:[{children:a.value,id:"vuetify-theme-stylesheet",nonce:t.cspNonce||!1}]}}function l(f){if(t.isDisabled)return;const c=f._context.provides.usehead;if(c)if(c.push){const h=c.push(o);Pt&&Re(a,()=>{h.patch(o)})}else Pt?(c.addHeadObjs(F(o)),Qt(()=>c.updateDOM())):c.addHeadObjs(o());else{let g=function(){if(typeof document<"u"&&!h){const v=document.createElement("style");v.type="text/css",v.id="vuetify-theme-stylesheet",t.cspNonce&&v.setAttribute("nonce",t.cspNonce),h=v,document.head.appendChild(h)}h&&(h.innerHTML=a.value)};var d=g;let h=Pt?document.getElementById("vuetify-theme-stylesheet"):null;Pt?Re(a,g,{immediate:!0}):g()}}const u=F(()=>t.isDisabled?void 0:`v-theme--${n.value}`);return{install:l,isDisabled:t.isDisabled,name:n,themes:r,current:s,computedThemes:i,themeClasses:u,styles:a,global:{name:n,current:s}}}function xt(e){an("provideTheme");const t=it(Il,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=F(()=>e.theme??t.name.value),r=F(()=>t.themes.value[n.value]),i=F(()=>t.isDisabled?void 0:`v-theme--${n.value}`),s={...t,name:n,current:r,themeClasses:i};return At(Il,s),s}function Qx(){an("useTheme");const e=it(Il,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Ps(e,t,n){e.push(`${t} {
`,...n.map(r=>`  ${r};
`),`}
`)}function p1(e){const t=e.dark?2:1,n=e.dark?1:2,r=[];for(const[i,s]of Object.entries(e.colors)){const a=Er(s);r.push(`--v-theme-${i}: ${a.r},${a.g},${a.b}`),i.startsWith("on-")||r.push(`--v-theme-${i}-overlay-multiplier: ${gg(s)>.18?t:n}`)}for(const[i,s]of Object.entries(e.variables)){const a=typeof s=="string"&&s.startsWith("#")?Er(s):void 0,o=a?`${a.r}, ${a.g}, ${a.b}`:void 0;r.push(`--v-${i}: ${o??s}`)}return r}function ai(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=ne(),r=ne();if(Pt){const i=new ResizeObserver(s=>{e==null||e(s,i),s.length&&(t==="content"?r.value=s[0].contentRect:r.value=s[0].target.getBoundingClientRect())});sn(()=>{i.disconnect()}),Re(n,(s,a)=>{a&&(i.unobserve(El(a)),r.value=void 0),s&&i.observe(El(s))},{flush:"post"})}return{resizeRef:n,contentRect:Vl(r)}}const Fc=Symbol.for("vuetify:layout"),eC=Symbol.for("vuetify:layout-item"),y1=1e3,tC=Z({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),xo=Z({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function vV(){const e=it(Fc);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function Co(e){const t=it(Fc);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${Ln()}`,r=an("useLayoutItem");At(eC,{id:n});const i=Ae(!1);Vb(()=>i.value=!0),Mb(()=>i.value=!1);const{layoutItemStyles:s,layoutItemScrimStyles:a}=t.register(r,{...e,active:F(()=>i.value?!1:e.active.value),id:n});return sn(()=>t.unregister(n)),{layoutItemStyles:s,layoutRect:t.layoutRect,layoutItemScrimStyles:a}}const mV=(e,t,n,r)=>{let i={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...i}}];for(const a of e){const o=t.get(a),l=n.get(a),u=r.get(a);if(!o||!l||!u)continue;const f={...i,[o.value]:parseInt(i[o.value],10)+(u.value?parseInt(l.value,10):0)};s.push({id:a,layer:f}),i=f}return s};function nC(e){const t=it(Fc,null),n=F(()=>t?t.rootZIndex.value-100:y1),r=ne([]),i=bn(new Map),s=bn(new Map),a=bn(new Map),o=bn(new Map),l=bn(new Map),{resizeRef:u,contentRect:f}=ai(),c=F(()=>{const x=new Map,C=e.overlaps??[];for(const m of C.filter(_=>_.includes(":"))){const[_,T]=m.split(":");if(!r.value.includes(_)||!r.value.includes(T))continue;const E=i.get(_),R=i.get(T),D=s.get(_),$=s.get(T);!E||!R||!D||!$||(x.set(T,{position:E.value,amount:parseInt(D.value,10)}),x.set(_,{position:R.value,amount:-parseInt($.value,10)}))}return x}),d=F(()=>{const x=[...new Set([...a.values()].map(m=>m.value))].sort((m,_)=>m-_),C=[];for(const m of x){const _=r.value.filter(T=>{var E;return((E=a.get(T))==null?void 0:E.value)===m});C.push(..._)}return mV(C,i,s,o)}),h=F(()=>!Array.from(l.values()).some(x=>x.value)),g=F(()=>d.value[d.value.length-1].layer),v=F(()=>({"--v-layout-left":De(g.value.left),"--v-layout-right":De(g.value.right),"--v-layout-top":De(g.value.top),"--v-layout-bottom":De(g.value.bottom),...h.value?void 0:{transition:"none"}})),p=F(()=>d.value.slice(1).map((x,C)=>{let{id:m}=x;const{layer:_}=d.value[C],T=s.get(m),E=i.get(m);return{id:m,..._,size:Number(T.value),position:E.value}})),y=x=>p.value.find(C=>C.id===x),w=an("createLayout"),A=Ae(!1);zt(()=>{A.value=!0}),At(Fc,{register:(x,C)=>{let{id:m,order:_,position:T,layoutSize:E,elementSize:R,active:D,disableTransitions:$,absolute:M}=C;a.set(m,_),i.set(m,T),s.set(m,E),o.set(m,D),$&&l.set(m,$);const L=il(eC,w==null?void 0:w.vnode).indexOf(x);L>-1?r.value.splice(L,0,m):r.value.push(m);const W=F(()=>p.value.findIndex(ee=>ee.id===m)),te=F(()=>n.value+d.value.length*2-W.value*2),ie=F(()=>{const ee=T.value==="left"||T.value==="right",ye=T.value==="right",we=T.value==="bottom",$e={[T.value]:0,zIndex:te.value,transform:`translate${ee?"X":"Y"}(${(D.value?0:-110)*(ye||we?-1:1)}%)`,position:M.value||n.value!==y1?"absolute":"fixed",...h.value?void 0:{transition:"none"}};if(!A.value)return $e;const le=p.value[W.value];if(!le)throw new Error(`[Vuetify] Could not find layout item "${m}"`);const B=c.value.get(m);return B&&(le[B.position]+=B.amount),{...$e,height:ee?`calc(100% - ${le.top}px - ${le.bottom}px)`:R.value?`${R.value}px`:void 0,left:ye?void 0:`${le.left}px`,right:ye?`${le.right}px`:void 0,top:T.value!=="bottom"?`${le.top}px`:void 0,bottom:T.value!=="top"?`${le.bottom}px`:void 0,width:ee?R.value?`${R.value}px`:void 0:`calc(100% - ${le.left}px - ${le.right}px)`}}),Q=F(()=>({zIndex:te.value-1}));return{layoutItemStyles:ie,layoutItemScrimStyles:Q,zIndex:te}},unregister:x=>{a.delete(x),i.delete(x),s.delete(x),o.delete(x),l.delete(x),r.value=r.value.filter(C=>C!==x)},mainRect:g,mainStyles:v,getLayoutItem:y,items:p,layoutRect:f,rootZIndex:n});const I=F(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),k=F(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:I,layoutStyles:k,getLayoutItem:y,items:p,layoutRect:f,layoutRef:u}}function Zm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,r=Cr(t,n),{aliases:i={},components:s={},directives:a={}}=r,o=pM(r.defaults),l=eV(r.display,r.ssr),u=gV(r.theme),f=rV(r.icons),c=uV(r.locale),d=XM(r.date,c);return{install:g=>{for(const v in a)g.directive(v,a[v]);for(const v in s)g.component(v,s[v]);for(const v in i)g.component(v,hr({...i[v],name:v,aliasName:i[v].name}));if(u.install(g),g.provide(so,o),g.provide(yg,l),g.provide(Il,u),g.provide(bg,f),g.provide(ao,c),g.provide(pg,d),Pt&&r.ssr)if(g.$nuxt)g.$nuxt.hook("app:suspense:resolve",()=>{l.update()});else{const{mount:v}=g;g.mount=function(){const p=v(...arguments);return ht(()=>l.update()),g.mount=v,p}}Ln.reset(),g.mixin({computed:{$vuetify(){return bn({defaults:ka.call(this,so),display:ka.call(this,yg),theme:ka.call(this,Il),icons:ka.call(this,bg),locale:ka.call(this,ao),date:ka.call(this,pg)})}}})},defaults:o,display:l,theme:u,icons:f,locale:c,date:d}}const pV="3.4.2";Zm.version=pV;function ka(e){var r,i;const t=this.$,n=((r=t.parent)==null?void 0:r.provides)??((i=t.vnode.appContext)==null?void 0:i.provides);if(n&&e in n)return n[e]}const yV=Z({...Ne(),...tC({fullHeight:!0}),...dt()},"VApp"),bV=ge()({name:"VApp",props:yV(),setup(e,t){let{slots:n}=t;const r=xt(e),{layoutClasses:i,getLayoutItem:s,items:a,layoutRef:o}=nC(e),{rtlClasses:l}=Cn();return _e(()=>{var u;return b("div",{ref:o,class:["v-application",r.themeClasses.value,i.value,l.value,e.class],style:[e.style]},[b("div",{class:"v-application__wrap"},[(u=n.default)==null?void 0:u.call(n)])])}),{getLayoutItem:s,items:a,theme:r}}}),rt=Z({tag:{type:String,default:"div"}},"tag"),rC=Z({text:String,...Ne(),...rt()},"VToolbarTitle"),Qm=ge()({name:"VToolbarTitle",props:rC(),setup(e,t){let{slots:n}=t;return _e(()=>{const r=!!(n.default||n.text||e.text);return b(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var i;return[r&&b("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,(i=n.default)==null?void 0:i.call(n)])]}})}),{}}}),SV=Z({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function vr(e,t,n){return ge()({name:e,props:SV({mode:n,origin:t}),setup(r,i){let{slots:s}=i;const a={onBeforeEnter(o){r.origin&&(o.style.transformOrigin=r.origin)},onLeave(o){if(r.leaveAbsolute){const{offsetTop:l,offsetLeft:u,offsetWidth:f,offsetHeight:c}=o;o._transitionInitialStyles={position:o.style.position,top:o.style.top,left:o.style.left,width:o.style.width,height:o.style.height},o.style.position="absolute",o.style.top=`${l}px`,o.style.left=`${u}px`,o.style.width=`${f}px`,o.style.height=`${c}px`}r.hideOnLeave&&o.style.setProperty("display","none","important")},onAfterLeave(o){if(r.leaveAbsolute&&(o!=null&&o._transitionInitialStyles)){const{position:l,top:u,left:f,width:c,height:d}=o._transitionInitialStyles;delete o._transitionInitialStyles,o.style.position=l||"",o.style.top=u||"",o.style.left=f||"",o.style.width=c||"",o.style.height=d||""}}};return()=>{const o=r.group?bv:ii;return ui(o,{name:r.disabled?"":e,css:!r.disabled,...r.group?void 0:{mode:r.mode},...r.disabled?{}:a},s.default)}}})}function iC(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return ge()({name:e,props:{mode:{type:String,default:n},disabled:Boolean},setup(r,i){let{slots:s}=i;return()=>ui(ii,{name:r.disabled?"":e,css:!r.disabled,...r.disabled?{}:t},s.default)}})}function sC(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",r=Ir(`offset-${n}`);return{onBeforeEnter(a){a._parent=a.parentNode,a._initialStyle={transition:a.style.transition,overflow:a.style.overflow,[n]:a.style[n]}},onEnter(a){const o=a._initialStyle;a.style.setProperty("transition","none","important"),a.style.overflow="hidden";const l=`${a[r]}px`;a.style[n]="0",a.offsetHeight,a.style.transition=o.transition,e&&a._parent&&a._parent.classList.add(e),requestAnimationFrame(()=>{a.style[n]=l})},onAfterEnter:s,onEnterCancelled:s,onLeave(a){a._initialStyle={transition:"",overflow:a.style.overflow,[n]:a.style[n]},a.style.overflow="hidden",a.style[n]=`${a[r]}px`,a.offsetHeight,requestAnimationFrame(()=>a.style[n]="0")},onAfterLeave:i,onLeaveCancelled:i};function i(a){e&&a._parent&&a._parent.classList.remove(e),s(a)}function s(a){const o=a._initialStyle[n];a.style.overflow=a._initialStyle.overflow,o!=null&&(a.style[n]=o),delete a._initialStyle}}const _V=Z({target:[Object,Array]},"v-dialog-transition"),Jd=ge()({name:"VDialogTransition",props:_V(),setup(e,t){let{slots:n}=t;const r={onBeforeEnter(i){i.style.pointerEvents="none",i.style.visibility="hidden"},async onEnter(i,s){var d;await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),i.style.visibility="";const{x:a,y:o,sx:l,sy:u,speed:f}=S1(e.target,i),c=Ls(i,[{transform:`translate(${a}px, ${o}px) scale(${l}, ${u})`,opacity:0},{}],{duration:225*f,easing:_M});(d=b1(i))==null||d.forEach(h=>{Ls(h,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*f,easing:Al})}),c.finished.then(()=>s())},onAfterEnter(i){i.style.removeProperty("pointer-events")},onBeforeLeave(i){i.style.pointerEvents="none"},async onLeave(i,s){var d;await new Promise(h=>requestAnimationFrame(h));const{x:a,y:o,sx:l,sy:u,speed:f}=S1(e.target,i);Ls(i,[{},{transform:`translate(${a}px, ${o}px) scale(${l}, ${u})`,opacity:0}],{duration:125*f,easing:wM}).finished.then(()=>s()),(d=b1(i))==null||d.forEach(h=>{Ls(h,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*f,easing:Al})})},onAfterLeave(i){i.style.removeProperty("pointer-events")}};return()=>e.target?b(ii,xe({name:"dialog-transition"},r,{css:!1}),n):b(ii,{name:"dialog-transition"},n)}});function b1(e){var n;const t=(n=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return t&&[...t]}function S1(e,t){const n=Px(e),r=Um(t),[i,s]=getComputedStyle(t).transformOrigin.split(" ").map(y=>parseFloat(y)),[a,o]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;a==="left"||o==="left"?l-=n.width/2:(a==="right"||o==="right")&&(l+=n.width/2);let u=n.top+n.height/2;a==="top"||o==="top"?u-=n.height/2:(a==="bottom"||o==="bottom")&&(u+=n.height/2);const f=n.width/r.width,c=n.height/r.height,d=Math.max(1,f,c),h=f/d||0,g=c/d||0,v=r.width*r.height/(window.innerWidth*window.innerHeight),p=v>.12?Math.min(1.5,(v-.12)*10+1):1;return{x:l-(i+r.left),y:u-(s+r.top),sx:h,sy:g,speed:p}}const wV=vr("fab-transition","center center","out-in"),xV=vr("dialog-bottom-transition"),CV=vr("dialog-top-transition"),Oc=vr("fade-transition"),ep=vr("scale-transition"),EV=vr("scroll-x-transition"),TV=vr("scroll-x-reverse-transition"),AV=vr("scroll-y-transition"),IV=vr("scroll-y-reverse-transition"),RV=vr("slide-x-transition"),kV=vr("slide-x-reverse-transition"),tp=vr("slide-y-transition"),PV=vr("slide-y-reverse-transition"),Xd=iC("expand-transition",sC()),np=iC("expand-x-transition",sC("",!0)),DV=Z({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),ft=ge(!1)({name:"VDefaultsProvider",props:DV(),setup(e,t){let{slots:n}=t;const{defaults:r,disabled:i,reset:s,root:a,scoped:o}=Bl(e);return Bt(r,{reset:s,root:a,scoped:o,disabled:i}),()=>{var l;return(l=n.default)==null?void 0:l.call(n)}}}),Kn=Z({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Gn(e){return{dimensionStyles:F(()=>({height:De(e.height),maxHeight:De(e.maxHeight),maxWidth:De(e.maxWidth),minHeight:De(e.minHeight),minWidth:De(e.minWidth),width:De(e.width)}))}}function FV(e){return{aspectStyles:F(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const aC=Z({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...Ne(),...Kn()},"VResponsive"),_g=ge()({name:"VResponsive",props:aC(),setup(e,t){let{slots:n}=t;const{aspectStyles:r}=FV(e),{dimensionStyles:i}=Gn(e);return _e(()=>{var s;return b("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[i.value,e.style]},[b("div",{class:"v-responsive__sizer",style:r.value},null),(s=n.additional)==null?void 0:s.call(n),n.default&&b("div",{class:["v-responsive__content",e.contentClass]},[n.default()])])}),{}}}),Ui=Z({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),Tr=(e,t)=>{let{slots:n}=t;const{transition:r,disabled:i,...s}=e,{component:a=ii,...o}=typeof r=="object"?r:{};return ui(a,xe(typeof r=="string"?{name:i?"":r}:o,s,{disabled:i}),n)};function OV(e,t){if(!Hm)return;const n=t.modifiers||{},r=t.value,{handler:i,options:s}=typeof r=="object"?r:{handler:r,options:{}},a=new IntersectionObserver(function(){var c;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const u=(c=e._observe)==null?void 0:c[t.instance.$.uid];if(!u)return;const f=o.some(d=>d.isIntersecting);i&&(!n.quiet||u.init)&&(!n.once||f||u.init)&&i(f,o,l),f&&n.once?oC(e,t):u.init=!0},s);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:a},a.observe(e)}function oC(e,t){var r;const n=(r=e._observe)==null?void 0:r[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const Ql={mounted:OV,unmounted:oC},lC=Z({alt:String,cover:Boolean,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...aC(),...Ne(),...Ui()},"VImg"),Js=ge()({name:"VImg",directives:{intersect:Ql},props:lC(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:r}=t;const i=an("VImg"),s=Ae(""),a=ne(),o=Ae(e.eager?"loading":"idle"),l=Ae(),u=Ae(),f=F(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),c=F(()=>f.value.aspect||l.value/u.value||0);Re(()=>e.src,()=>{d(o.value!=="idle")}),Re(c,(_,T)=>{!_&&T&&a.value&&y(a.value)}),Jc(()=>d());function d(_){if(!(e.eager&&_)&&!(Hm&&!_&&!e.eager)){if(o.value="loading",f.value.lazySrc){const T=new Image;T.src=f.value.lazySrc,y(T,null)}f.value.src&&ht(()=>{var T;n("loadstart",((T=a.value)==null?void 0:T.currentSrc)||f.value.src),setTimeout(()=>{var E;if(!i.isUnmounted)if((E=a.value)!=null&&E.complete){if(a.value.naturalWidth||g(),o.value==="error")return;c.value||y(a.value,null),o.value==="loading"&&h()}else c.value||y(a.value),v()})})}}function h(){var _;i.isUnmounted||(v(),y(a.value),o.value="loaded",n("load",((_=a.value)==null?void 0:_.currentSrc)||f.value.src))}function g(){var _;i.isUnmounted||(o.value="error",n("error",((_=a.value)==null?void 0:_.currentSrc)||f.value.src))}function v(){const _=a.value;_&&(s.value=_.currentSrc||_.src)}let p=-1;sn(()=>{clearTimeout(p)});function y(_){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const E=()=>{if(clearTimeout(p),i.isUnmounted)return;const{naturalHeight:R,naturalWidth:D}=_;R||D?(l.value=D,u.value=R):!_.complete&&o.value==="loading"&&T!=null?p=window.setTimeout(E,T):(_.currentSrc.endsWith(".svg")||_.currentSrc.startsWith("data:image/svg+xml"))&&(l.value=1,u.value=1)};E()}const w=F(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),A=()=>{var E;if(!f.value.src||o.value==="idle")return null;const _=b("img",{class:["v-img__img",w.value],style:{objectPosition:e.position},src:f.value.src,srcset:f.value.srcset,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:a,onLoad:h,onError:g},null),T=(E=r.sources)==null?void 0:E.call(r);return b(Tr,{transition:e.transition,appear:!0},{default:()=>[qt(T?b("picture",{class:"v-img__picture"},[T,_]):_,[[ci,o.value==="loaded"]])]})},I=()=>b(Tr,{transition:e.transition},{default:()=>[f.value.lazySrc&&o.value!=="loaded"&&b("img",{class:["v-img__img","v-img__img--preload",w.value],style:{objectPosition:e.position},src:f.value.lazySrc,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),k=()=>r.placeholder?b(Tr,{transition:e.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!r.error)&&b("div",{class:"v-img__placeholder"},[r.placeholder()])]}):null,x=()=>r.error?b(Tr,{transition:e.transition,appear:!0},{default:()=>[o.value==="error"&&b("div",{class:"v-img__error"},[r.error()])]}):null,C=()=>e.gradient?b("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,m=Ae(!1);{const _=Re(c,T=>{T&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{m.value=!0})}),_())})}return _e(()=>{const _=_g.filterProps(e);return qt(b(_g,xe({class:["v-img",{"v-img--booting":!m.value},e.class],style:[{width:De(e.width==="auto"?l.value:e.width)},e.style]},_,{aspectRatio:c.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>b(Fe,null,[b(A,null,null),b(I,null,null),b(C,null,null),b(k,null,null),b(x,null,null)]),default:r.default}),[[nr("intersect"),{handler:d,options:e.options},null,{once:!0}]])}),{currentSrc:s,image:a,state:o,naturalWidth:l,naturalHeight:u}}}),mr=Z({border:[Boolean,Number,String]},"border");function Fr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();return{borderClasses:F(()=>{const r=kt(e)?e.value:e.border,i=[];if(r===!0||r==="")i.push(`${t}--border`);else if(typeof r=="string"||r===0)for(const s of String(r).split(" "))i.push(`border-${s}`);return i})}}function rp(e){return jm(()=>{const t=[],n={};if(e.value.background)if(hg(e.value.background)){if(n.backgroundColor=e.value.background,!e.value.text&&dM(e.value.background)){const r=Er(e.value.background);if(r.a==null||r.a===1){const i=jx(r);n.color=i,n.caretColor=i}}}else t.push(`bg-${e.value.background}`);return e.value.text&&(hg(e.value.text)?(n.color=e.value.text,n.caretColor=e.value.text):t.push(`text-${e.value.text}`)),{colorClasses:t,colorStyles:n}})}function Mn(e,t){const n=F(()=>({text:kt(e)?e.value:t?e[t]:null})),{colorClasses:r,colorStyles:i}=rp(n);return{textColorClasses:r,textColorStyles:i}}function Ot(e,t){const n=F(()=>({background:kt(e)?e.value:t?e[t]:null})),{colorClasses:r,colorStyles:i}=rp(n);return{backgroundColorClasses:r,backgroundColorStyles:i}}const ln=Z({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function En(e){return{elevationClasses:F(()=>{const n=kt(e)?e.value:e.elevation,r=[];return n==null||r.push(`elevation-${n}`),r})}}const Ht=Z({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function Kt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();return{roundedClasses:F(()=>{const r=kt(e)?e.value:e.rounded,i=[];if(r===!0||r==="")i.push(`${t}--rounded`);else if(typeof r=="string"||r===0)for(const s of String(r).split(" "))i.push(`rounded-${s}`);return i})}}const NV=[null,"prominent","default","comfortable","compact"],uC=Z({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>NV.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...mr(),...Ne(),...ln(),...Ht(),...rt({tag:"header"}),...dt()},"VToolbar"),wg=ge()({name:"VToolbar",props:uC(),setup(e,t){var h;let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:i}=Ot(he(e,"color")),{borderClasses:s}=Fr(e),{elevationClasses:a}=En(e),{roundedClasses:o}=Kt(e),{themeClasses:l}=xt(e),{rtlClasses:u}=Cn(),f=Ae(!!(e.extended||(h=n.extension)!=null&&h.call(n))),c=F(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),d=F(()=>f.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return Bt({VBtn:{variant:"text"}}),_e(()=>{var y;const g=!!(e.title||n.title),v=!!(n.image||e.image),p=(y=n.extension)==null?void 0:y.call(n);return f.value=!!(e.extended||p),b(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},r.value,s.value,a.value,o.value,l.value,u.value,e.class],style:[i.value,e.style]},{default:()=>[v&&b("div",{key:"image",class:"v-toolbar__image"},[n.image?b(ft,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):b(Js,{key:"image-img",cover:!0,src:e.image},null)]),b(ft,{defaults:{VTabs:{height:De(c.value)}}},{default:()=>{var w,A,I;return[b("div",{class:"v-toolbar__content",style:{height:De(c.value)}},[n.prepend&&b("div",{class:"v-toolbar__prepend"},[(w=n.prepend)==null?void 0:w.call(n)]),g&&b(Qm,{key:"title",text:e.title},{text:n.title}),(A=n.default)==null?void 0:A.call(n),n.append&&b("div",{class:"v-toolbar__append"},[(I=n.append)==null?void 0:I.call(n)])])]}}),b(ft,{defaults:{VTabs:{height:De(d.value)}}},{default:()=>[b(Xd,null,{default:()=>[f.value&&b("div",{class:"v-toolbar__extension",style:{height:De(d.value)}},[p])]})]})]})}),{contentHeight:c,extensionHeight:d}}}),$V=Z({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function MV(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let r=0;const i=ne(null),s=Ae(0),a=Ae(0),o=Ae(0),l=Ae(!1),u=Ae(!1),f=F(()=>Number(e.scrollThreshold)),c=F(()=>rn((f.value-s.value)/f.value||0)),d=()=>{const h=i.value;!h||n&&!n.value||(r=s.value,s.value="window"in h?h.pageYOffset:h.scrollTop,u.value=s.value<r,o.value=Math.abs(s.value-f.value))};return Re(u,()=>{a.value=a.value||s.value}),Re(l,()=>{a.value=0}),zt(()=>{Re(()=>e.scrollTarget,h=>{var v;const g=h?document.querySelector(h):window;g&&g!==i.value&&((v=i.value)==null||v.removeEventListener("scroll",d),i.value=g,i.value.addEventListener("scroll",d,{passive:!0}))},{immediate:!0})}),sn(()=>{var h;(h=i.value)==null||h.removeEventListener("scroll",d)}),n&&Re(n,d,{immediate:!0}),{scrollThreshold:f,currentScroll:s,currentThreshold:o,isScrollActive:l,scrollRatio:c,isScrollingUp:u,savedScroll:a}}function fa(){const e=Ae(!1);return zt(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:F(()=>e.value?void 0:{transition:"none !important"}),isBooted:Vl(e)}}const VV=Z({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...uC(),...xo(),...$V(),height:{type:[Number,String],default:64}},"VAppBar"),BV=ge()({name:"VAppBar",props:VV(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=ne(),i=Ke(e,"modelValue"),s=F(()=>{var w;const y=new Set(((w=e.scrollBehavior)==null?void 0:w.split(" "))??[]);return{hide:y.has("hide"),inverted:y.has("inverted"),collapse:y.has("collapse"),elevate:y.has("elevate"),fadeImage:y.has("fade-image")}}),a=F(()=>{const y=s.value;return y.hide||y.inverted||y.collapse||y.elevate||y.fadeImage||!i.value}),{currentScroll:o,scrollThreshold:l,isScrollingUp:u,scrollRatio:f}=MV(e,{canScroll:a}),c=F(()=>e.collapse||s.value.collapse&&(s.value.inverted?f.value>0:f.value===0)),d=F(()=>e.flat||s.value.elevate&&(s.value.inverted?o.value>0:o.value===0)),h=F(()=>s.value.fadeImage?s.value.inverted?1-f.value:f.value:void 0),g=F(()=>{var A,I;if(s.value.hide&&s.value.inverted)return 0;const y=((A=r.value)==null?void 0:A.contentHeight)??0,w=((I=r.value)==null?void 0:I.extensionHeight)??0;return y+w});jr(F(()=>!!e.scrollBehavior),()=>{Qt(()=>{s.value.hide?s.value.inverted?i.value=o.value>l.value:i.value=u.value||o.value<l.value:i.value=!0})});const{ssrBootStyles:v}=fa(),{layoutItemStyles:p}=Co({id:e.name,order:F(()=>parseInt(e.order,10)),position:he(e,"location"),layoutSize:g,elementSize:Ae(void 0),active:i,absolute:he(e,"absolute")});return _e(()=>{const y=wg.filterProps(e);return b(wg,xe({ref:r,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...p.value,"--v-toolbar-image-opacity":h.value,height:void 0,...v.value},e.style]},y,{collapse:c.value,flat:d.value}),n)}),{}}}),LV=[null,"default","comfortable","compact"],vn=Z({density:{type:String,default:"default",validator:e=>LV.includes(e)}},"density");function Hn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();return{densityClasses:F(()=>`${t}--density-${e.density}`)}}const HV=["elevated","flat","tonal","outlined","text","plain"];function ha(e,t){return b(Fe,null,[e&&b("span",{key:"overlay",class:`${t}__overlay`},null),b("span",{key:"underlay",class:`${t}__underlay`},null)])}const Or=Z({color:String,variant:{type:String,default:"elevated",validator:e=>HV.includes(e)}},"variant");function ga(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();const n=F(()=>{const{variant:s}=Se(e);return`${t}--variant-${s}`}),{colorClasses:r,colorStyles:i}=rp(F(()=>{const{variant:s,color:a}=Se(e);return{[["elevated","flat"].includes(s)?"background":"text"]:a}}));return{colorClasses:r,colorStyles:i,variantClasses:n}}const cC=Z({divided:Boolean,...mr(),...Ne(),...vn(),...ln(),...Ht(),...rt(),...dt(),...Or()},"VBtnGroup"),xg=ge()({name:"VBtnGroup",props:cC(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{densityClasses:i}=Hn(e),{borderClasses:s}=Fr(e),{elevationClasses:a}=En(e),{roundedClasses:o}=Kt(e);Bt({VBtn:{height:"auto",color:he(e,"color"),density:he(e,"density"),flat:!0,variant:he(e,"variant")}}),_e(()=>b(e.tag,{class:["v-btn-group",{"v-btn-group--divided":e.divided},r.value,s.value,i.value,a.value,o.value,e.class],style:e.style},n))}}),va=Z({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),ma=Z({value:null,disabled:Boolean,selectedClass:String},"group-item");function pa(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=an("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=Ln();At(Symbol.for(`${t.description}:id`),i);const s=it(t,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const a=he(e,"value"),o=F(()=>!!(s.disabled.value||e.disabled));s.register({id:i,value:a,disabled:o},r),sn(()=>{s.unregister(i)});const l=F(()=>s.isSelected(i)),u=F(()=>l.value&&[s.selectedClass.value,e.selectedClass]);return Re(l,f=>{r.emit("group:selected",{value:f})}),{id:i,isSelected:l,toggle:()=>s.select(i,!l.value),select:f=>s.select(i,f),selectedClass:u,value:a,disabled:o,group:s}}function ws(e,t){let n=!1;const r=bn([]),i=Ke(e,"modelValue",[],d=>d==null?[]:dC(r,Wt(d)),d=>{const h=qV(r,d);return e.multiple?h:h[0]}),s=an("useGroup");function a(d,h){const g=d,v=Symbol.for(`${t.description}:id`),y=il(v,s==null?void 0:s.vnode).indexOf(h);y>-1?r.splice(y,0,g):r.push(g)}function o(d){if(n)return;l();const h=r.findIndex(g=>g.id===d);r.splice(h,1)}function l(){const d=r.find(h=>!h.disabled);d&&e.mandatory==="force"&&!i.value.length&&(i.value=[d.id])}zt(()=>{l()}),sn(()=>{n=!0});function u(d,h){const g=r.find(v=>v.id===d);if(!(h&&(g!=null&&g.disabled)))if(e.multiple){const v=i.value.slice(),p=v.findIndex(w=>w===d),y=~p;if(h=h??!y,y&&e.mandatory&&v.length<=1||!y&&e.max!=null&&v.length+1>e.max)return;p<0&&h?v.push(d):p>=0&&!h&&v.splice(p,1),i.value=v}else{const v=i.value.includes(d);if(e.mandatory&&v)return;i.value=h??!v?[d]:[]}}function f(d){if(e.multiple,i.value.length){const h=i.value[0],g=r.findIndex(y=>y.id===h);let v=(g+d)%r.length,p=r[v];for(;p.disabled&&v!==g;)v=(v+d)%r.length,p=r[v];if(p.disabled)return;i.value=[r[v].id]}else{const h=r.find(g=>!g.disabled);h&&(i.value=[h.id])}}const c={register:a,unregister:o,selected:i,select:u,disabled:he(e,"disabled"),prev:()=>f(r.length-1),next:()=>f(1),isSelected:d=>i.value.includes(d),selectedClass:F(()=>e.selectedClass),items:F(()=>r),getItemIndex:d=>jV(r,d)};return At(t,c),c}function jV(e,t){const n=dC(e,[t]);return n.length?e.findIndex(r=>r.id===n[0]):-1}function dC(e,t){const n=[];return t.forEach(r=>{const i=e.find(a=>Ss(r,a.value)),s=e[r];(i==null?void 0:i.value)!=null?n.push(i.id):s!=null&&n.push(s.id)}),n}function qV(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>s.id===r);if(~i){const s=e[i];n.push(s.value!=null?s.value:i)}}),n}const ip=Symbol.for("vuetify:v-btn-toggle"),UV=Z({...cC(),...va()},"VBtnToggle"),zV=ge()({name:"VBtnToggle",props:UV(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:r,next:i,prev:s,select:a,selected:o}=ws(e,ip);return _e(()=>{const l=xg.filterProps(e);return b(xg,xe({class:["v-btn-toggle",e.class]},l,{style:e.style}),{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:r,next:i,prev:s,select:a,selected:o})]}})}),{next:i,prev:s,select:a}}}),KV=["x-small","small","default","large","x-large"],zi=Z({size:{type:[String,Number],default:"default"}},"size");function Eo(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();return jm(()=>{let n,r;return kc(KV,e.size)?n=`${t}--size-${e.size}`:e.size&&(r={width:De(e.size),height:De(e.size)}),{sizeClasses:n,sizeStyles:r}})}const GV=Z({color:String,start:Boolean,end:Boolean,icon:tt,...Ne(),...zi(),...rt({tag:"i"}),...dt()},"VIcon"),Tt=ge()({name:"VIcon",props:GV(),setup(e,t){let{attrs:n,slots:r}=t;const i=ne(),{themeClasses:s}=xt(e),{iconData:a}=iV(F(()=>i.value||e.icon)),{sizeClasses:o}=Eo(e),{textColorClasses:l,textColorStyles:u}=Mn(he(e,"color"));return _e(()=>{var c,d;const f=(c=r.default)==null?void 0:c.call(r);return f&&(i.value=(d=Tx(f).filter(h=>h.type===Ll&&h.children&&typeof h.children=="string")[0])==null?void 0:d.children),b(a.value.component,{tag:e.tag,icon:a.value.icon,class:["v-icon","notranslate",s.value,o.value,l.value,{"v-icon--clickable":!!n.onClick,"v-icon--start":e.start,"v-icon--end":e.end},e.class],style:[o.value?void 0:{fontSize:De(e.size),height:De(e.size),width:De(e.size)},u.value,e.style],role:n.onClick?"button":void 0,"aria-hidden":!n.onClick},{default:()=>[f]})}),{}}});function Zd(e,t){const n=ne(),r=Ae(!1);if(Hm){const i=new IntersectionObserver(s=>{e==null||e(s,i),r.value=!!s.find(a=>a.isIntersecting)},t);sn(()=>{i.disconnect()}),Re(n,(s,a)=>{a&&(i.unobserve(a),r.value=!1),s&&i.observe(s)},{flush:"post"})}return{intersectionRef:n,isIntersecting:r}}const WV=Z({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ne(),...zi(),...rt({tag:"div"}),...dt()},"VProgressCircular"),oo=ge()({name:"VProgressCircular",props:WV(),setup(e,t){let{slots:n}=t;const r=20,i=2*Math.PI*r,s=ne(),{themeClasses:a}=xt(e),{sizeClasses:o,sizeStyles:l}=Eo(e),{textColorClasses:u,textColorStyles:f}=Mn(he(e,"color")),{textColorClasses:c,textColorStyles:d}=Mn(he(e,"bgColor")),{intersectionRef:h,isIntersecting:g}=Zd(),{resizeRef:v,contentRect:p}=ai(),y=F(()=>Math.max(0,Math.min(100,parseFloat(e.modelValue)))),w=F(()=>Number(e.width)),A=F(()=>l.value?Number(e.size):p.value?p.value.width:Math.max(w.value,32)),I=F(()=>r/(1-w.value/A.value)*2),k=F(()=>w.value/A.value*I.value),x=F(()=>De((100-y.value)/100*i));return Qt(()=>{h.value=s.value,v.value=s.value}),_e(()=>b(e.tag,{ref:s,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":g.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},a.value,o.value,u.value,e.class],style:[l.value,f.value,e.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:y.value},{default:()=>[b("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${I.value} ${I.value}`},[b("circle",{class:["v-progress-circular__underlay",c.value],style:d.value,fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":k.value,"stroke-dasharray":i,"stroke-dashoffset":0},null),b("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":k.value,"stroke-dasharray":i,"stroke-dashoffset":x.value},null)]),n.default&&b("div",{class:"v-progress-circular__content"},[n.default({value:y.value})])]})),{}}}),_1={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},xs=Z({location:String},"location");function Cs(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=Cn();return{locationStyles:F(()=>{if(!e.location)return{};const{side:s,align:a}=dg(e.location.split(" ").length>1?e.location:`${e.location} center`,r.value);function o(u){return n?n(u):0}const l={};return s!=="center"&&(t?l[_1[s]]=`calc(100% - ${o(s)}px)`:l[s]=0),a!=="center"?t?l[_1[a]]=`calc(100% - ${o(a)}px)`:l[a]=0:(s==="center"?l.top=l.left="50%":l[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",l.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),l})}}const YV=Z({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Ne(),...xs({location:"top"}),...Ht(),...rt(),...dt()},"VProgressLinear"),Qd=ge()({name:"VProgressLinear",props:YV(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),{isRtl:i,rtlClasses:s}=Cn(),{themeClasses:a}=xt(e),{locationStyles:o}=Cs(e),{textColorClasses:l,textColorStyles:u}=Mn(e,"color"),{backgroundColorClasses:f,backgroundColorStyles:c}=Ot(F(()=>e.bgColor||e.color)),{backgroundColorClasses:d,backgroundColorStyles:h}=Ot(e,"color"),{roundedClasses:g}=Kt(e),{intersectionRef:v,isIntersecting:p}=Zd(),y=F(()=>parseInt(e.max,10)),w=F(()=>parseInt(e.height,10)),A=F(()=>parseFloat(e.bufferValue)/y.value*100),I=F(()=>parseFloat(r.value)/y.value*100),k=F(()=>i.value!==e.reverse),x=F(()=>e.indeterminate?"fade-transition":"slide-x-transition"),C=F(()=>e.bgOpacity==null?e.bgOpacity:parseFloat(e.bgOpacity));function m(_){if(!v.value)return;const{left:T,right:E,width:R}=v.value.getBoundingClientRect(),D=k.value?R-_.clientX+(E-R):_.clientX-T;r.value=Math.round(D/R*y.value)}return _e(()=>b(e.tag,{ref:v,class:["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&p.value,"v-progress-linear--reverse":k.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},g.value,a.value,s.value,e.class],style:[{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?De(w.value):0,"--v-progress-linear-height":De(w.value),...o.value},e.style],role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:I.value,onClick:e.clickable&&m},{default:()=>[e.stream&&b("div",{key:"stream",class:["v-progress-linear__stream",l.value],style:{...u.value,[k.value?"left":"right"]:De(-w.value),borderTop:`${De(w.value/2)} dotted`,opacity:C.value,top:`calc(50% - ${De(w.value/4)})`,width:De(100-A.value,"%"),"--v-progress-linear-stream-to":De(w.value*(k.value?1:-1))}},null),b("div",{class:["v-progress-linear__background",f.value],style:[c.value,{opacity:C.value,width:De(e.stream?A.value:100,"%")}]},null),b(ii,{name:x.value},{default:()=>[e.indeterminate?b("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(_=>b("div",{key:_,class:["v-progress-linear__indeterminate",_,d.value],style:h.value},null))]):b("div",{class:["v-progress-linear__determinate",d.value],style:[h.value,{width:De(I.value,"%")}]},null)]}),n.default&&b("div",{class:"v-progress-linear__content"},[n.default({value:I.value,buffer:A.value})])]})),{}}}),ef=Z({loading:[Boolean,String]},"loader");function eu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();return{loaderClasses:F(()=>({[`${t}--loading`]:e.loading}))}}function tf(e,t){var r;let{slots:n}=t;return b("div",{class:`${e.name}__loader`},[((r=n.default)==null?void 0:r.call(n,{color:e.color,isActive:e.active}))||b(Qd,{active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const JV=["static","relative","fixed","absolute","sticky"],To=Z({position:{type:String,validator:e=>JV.includes(e)}},"position");function Ao(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();return{positionClasses:F(()=>e.position?`${t}--${e.position}`:void 0)}}function fC(){var e,t;return(t=(e=an("useRouter"))==null?void 0:e.proxy)==null?void 0:t.$router}function tu(e,t){const n=qb("RouterLink"),r=F(()=>!!(e.href||e.to)),i=F(()=>(r==null?void 0:r.value)||Wy(t,"click")||Wy(e,"click"));if(typeof n=="string")return{isLink:r,isClickable:i,href:he(e,"href")};const s=e.to?n.useLink(e):void 0;return{isLink:r,isClickable:i,route:s==null?void 0:s.route,navigate:s==null?void 0:s.navigate,isActive:s&&F(()=>{var a,o;return e.exact?(a=s.isExactActive)==null?void 0:a.value:(o=s.isActive)==null?void 0:o.value}),href:F(()=>e.to?s==null?void 0:s.route.value.href:e.href)}}const nu=Z({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let yh=!1;function XV(e,t){let n=!1,r,i;Pt&&(ht(()=>{window.addEventListener("popstate",s),r=e==null?void 0:e.beforeEach((a,o,l)=>{yh?n?t(l):l():setTimeout(()=>n?t(l):l()),yh=!0}),i=e==null?void 0:e.afterEach(()=>{yh=!1})}),In(()=>{window.removeEventListener("popstate",s),r==null||r(),i==null||i()}));function s(a){var o;(o=a.state)!=null&&o.replaced||(n=!0,setTimeout(()=>n=!1))}}function ZV(e,t){Re(()=>{var n;return(n=e.isActive)==null?void 0:n.value},n=>{e.isLink.value&&n&&t&&ht(()=>{t(!0)})},{immediate:!0})}const Cg=Symbol("rippleStop"),QV=80;function w1(e,t){e.style.transform=t,e.style.webkitTransform=t}function Eg(e){return e.constructor.name==="TouchEvent"}function hC(e){return e.constructor.name==="KeyboardEvent"}const eB=function(e,t){var c;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=0,i=0;if(!hC(e)){const d=t.getBoundingClientRect(),h=Eg(e)?e.touches[e.touches.length-1]:e;r=h.clientX-d.left,i=h.clientY-d.top}let s=0,a=.3;(c=t._ripple)!=null&&c.circle?(a=.15,s=t.clientWidth/2,s=n.center?s:s+Math.sqrt((r-s)**2+(i-s)**2)/4):s=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const o=`${(t.clientWidth-s*2)/2}px`,l=`${(t.clientHeight-s*2)/2}px`,u=n.center?o:`${r-s}px`,f=n.center?l:`${i-s}px`;return{radius:s,scale:a,x:u,y:f,centerX:o,centerY:l}},Nc={show(e,t){var h;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((h=t==null?void 0:t._ripple)!=null&&h.enabled))return;const r=document.createElement("span"),i=document.createElement("span");r.appendChild(i),r.className="v-ripple__container",n.class&&(r.className+=` ${n.class}`);const{radius:s,scale:a,x:o,y:l,centerX:u,centerY:f}=eB(e,t,n),c=`${s*2}px`;i.className="v-ripple__animation",i.style.width=c,i.style.height=c,t.appendChild(r);const d=window.getComputedStyle(t);d&&d.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),w1(i,`translate(${o}, ${l}) scale3d(${a},${a},${a})`),i.dataset.activated=String(performance.now()),setTimeout(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),w1(i,`translate(${u}, ${f}) scale3d(1,1,1)`)},0)},hide(e){var s;if(!((s=e==null?void 0:e._ripple)!=null&&s.enabled))return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=t[t.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const r=performance.now()-Number(n.dataset.activated),i=Math.max(250-r,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var o;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((o=n.parentNode)==null?void 0:o.parentNode)===e&&e.removeChild(n.parentNode)},300)},i)}};function gC(e){return typeof e>"u"||!!e}function Rl(e){const t={},n=e.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||e[Cg])){if(e[Cg]=!0,Eg(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||hC(e),n._ripple.class&&(t.class=n._ripple.class),Eg(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Nc.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var r;(r=n==null?void 0:n._ripple)!=null&&r.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},QV)}else Nc.show(e,n,t)}}function x1(e){e[Cg]=!0}function lr(e){const t=e.currentTarget;if(t!=null&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{lr(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Nc.hide(t)}}function vC(e){const t=e.currentTarget;t!=null&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let kl=!1;function mC(e){!kl&&(e.keyCode===qy.enter||e.keyCode===qy.space)&&(kl=!0,Rl(e))}function pC(e){kl=!1,lr(e)}function yC(e){kl&&(kl=!1,lr(e))}function bC(e,t,n){const{value:r,modifiers:i}=t,s=gC(r);if(s||Nc.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=s,e._ripple.centered=i.center,e._ripple.circle=i.circle,Rc(r)&&r.class&&(e._ripple.class=r.class),s&&!n){if(i.stop){e.addEventListener("touchstart",x1,{passive:!0}),e.addEventListener("mousedown",x1);return}e.addEventListener("touchstart",Rl,{passive:!0}),e.addEventListener("touchend",lr,{passive:!0}),e.addEventListener("touchmove",vC,{passive:!0}),e.addEventListener("touchcancel",lr),e.addEventListener("mousedown",Rl),e.addEventListener("mouseup",lr),e.addEventListener("mouseleave",lr),e.addEventListener("keydown",mC),e.addEventListener("keyup",pC),e.addEventListener("blur",yC),e.addEventListener("dragstart",lr,{passive:!0})}else!s&&n&&SC(e)}function SC(e){e.removeEventListener("mousedown",Rl),e.removeEventListener("touchstart",Rl),e.removeEventListener("touchend",lr),e.removeEventListener("touchmove",vC),e.removeEventListener("touchcancel",lr),e.removeEventListener("mouseup",lr),e.removeEventListener("mouseleave",lr),e.removeEventListener("keydown",mC),e.removeEventListener("keyup",pC),e.removeEventListener("dragstart",lr),e.removeEventListener("blur",yC)}function tB(e,t){bC(e,t,!1)}function nB(e){delete e._ripple,SC(e)}function rB(e,t){if(t.value===t.oldValue)return;const n=gC(t.oldValue);bC(e,t,n)}const Ki={mounted:tB,unmounted:nB,updated:rB},sp=Z({active:{type:Boolean,default:void 0},symbol:{type:null,default:ip},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:tt,appendIcon:tt,block:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...mr(),...Ne(),...vn(),...Kn(),...ln(),...ma(),...ef(),...xs(),...To(),...Ht(),...nu(),...zi(),...rt({tag:"button"}),...dt(),...Or({variant:"elevated"})},"VBtn"),pt=ge()({name:"VBtn",directives:{Ripple:Ki},props:sp(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:i}=xt(e),{borderClasses:s}=Fr(e),{colorClasses:a,colorStyles:o,variantClasses:l}=ga(e),{densityClasses:u}=Hn(e),{dimensionStyles:f}=Gn(e),{elevationClasses:c}=En(e),{loaderClasses:d}=eu(e),{locationStyles:h}=Cs(e),{positionClasses:g}=Ao(e),{roundedClasses:v}=Kt(e),{sizeClasses:p,sizeStyles:y}=Eo(e),w=pa(e,e.symbol,!1),A=tu(e,n),I=F(()=>{var _;return e.active!==void 0?e.active:A.isLink.value?(_=A.isActive)==null?void 0:_.value:w==null?void 0:w.isSelected.value}),k=F(()=>(w==null?void 0:w.disabled.value)||e.disabled),x=F(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),C=F(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function m(_){var T;k.value||A.isLink.value&&(_.metaKey||_.ctrlKey||_.shiftKey||_.button!==0||n.target==="_blank")||((T=A.navigate)==null||T.call(A,_),w==null||w.toggle())}return ZV(A,w==null?void 0:w.select),_e(()=>{var $,M;const _=A.isLink.value?"a":e.tag,T=!!(e.prependIcon||r.prepend),E=!!(e.appendIcon||r.append),R=!!(e.icon&&e.icon!==!0),D=(w==null?void 0:w.isSelected.value)&&(!A.isLink.value||(($=A.isActive)==null?void 0:$.value))||!w||((M=A.isActive)==null?void 0:M.value);return qt(b(_,{type:_==="a"?void 0:"button",class:["v-btn",w==null?void 0:w.selectedClass.value,{"v-btn--active":I.value,"v-btn--block":e.block,"v-btn--disabled":k.value,"v-btn--elevated":x.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},i.value,s.value,D?a.value:void 0,u.value,c.value,d.value,g.value,v.value,p.value,l.value,e.class],style:[D?o.value:void 0,f.value,h.value,y.value,e.style],disabled:k.value||void 0,href:A.href.value,onClick:m,value:C.value},{default:()=>{var O;return[ha(!0,"v-btn"),!e.icon&&T&&b("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?b(ft,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},r.prepend):b(Tt,{key:"prepend-icon",icon:e.prependIcon},null)]),b("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&R?b(Tt,{key:"content-icon",icon:e.icon},null):b(ft,{key:"content-defaults",disabled:!R,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var L;return[((L=r.default)==null?void 0:L.call(r))??e.text]}})]),!e.icon&&E&&b("span",{key:"append",class:"v-btn__append"},[r.append?b(ft,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},r.append):b(Tt,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&b("span",{key:"loader",class:"v-btn__loader"},[((O=r.loader)==null?void 0:O.call(r))??b(oo,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"23",width:"2"},null)])]}}),[[nr("ripple"),!k.value&&e.ripple,null]])}),{}}}),iB=Z({...sp({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),sB=ge()({name:"VAppBarNavIcon",props:iB(),setup(e,t){let{slots:n}=t;return _e(()=>b(pt,xe(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),aB=ge()({name:"VAppBarTitle",props:rC(),setup(e,t){let{slots:n}=t;return _e(()=>b(Qm,xe(e,{class:"v-app-bar-title"}),n)),{}}}),_C=gr("v-alert-title"),oB=["success","info","warning","error"],lB=Z({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:tt,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>oB.includes(e)},...Ne(),...vn(),...Kn(),...ln(),...xs(),...To(),...Ht(),...rt(),...dt(),...Or({variant:"flat"})},"VAlert"),uB=ge()({name:"VAlert",props:lB(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const i=Ke(e,"modelValue"),s=F(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),a=F(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:o}=xt(e),{colorClasses:l,colorStyles:u,variantClasses:f}=ga(a),{densityClasses:c}=Hn(e),{dimensionStyles:d}=Gn(e),{elevationClasses:h}=En(e),{locationStyles:g}=Cs(e),{positionClasses:v}=Ao(e),{roundedClasses:p}=Kt(e),{textColorClasses:y,textColorStyles:w}=Mn(he(e,"borderColor")),{t:A}=on(),I=F(()=>({"aria-label":A(e.closeLabel),onClick(k){i.value=!1,n("click:close",k)}}));return()=>{const k=!!(r.prepend||s.value),x=!!(r.title||e.title),C=!!(r.close||e.closable);return i.value&&b(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},o.value,l.value,c.value,h.value,v.value,p.value,f.value,e.class],style:[u.value,d.value,g.value,e.style],role:"alert"},{default:()=>{var m,_;return[ha(!1,"v-alert"),e.border&&b("div",{key:"border",class:["v-alert__border",y.value],style:w.value},null),k&&b("div",{key:"prepend",class:"v-alert__prepend"},[r.prepend?b(ft,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{density:e.density,icon:s.value,size:e.prominent?44:28}}},r.prepend):b(Tt,{key:"prepend-icon",density:e.density,icon:s.value,size:e.prominent?44:28},null)]),b("div",{class:"v-alert__content"},[x&&b(_C,{key:"title"},{default:()=>{var T;return[((T=r.title)==null?void 0:T.call(r))??e.title]}}),((m=r.text)==null?void 0:m.call(r))??e.text,(_=r.default)==null?void 0:_.call(r)]),r.append&&b("div",{key:"append",class:"v-alert__append"},[r.append()]),C&&b("div",{key:"close",class:"v-alert__close"},[r.close?b(ft,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var T;return[(T=r.close)==null?void 0:T.call(r,{props:I.value})]}}):b(pt,xe({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},I.value),null)])]}})}}}),cB=Z({text:String,clickable:Boolean,...Ne(),...dt()},"VLabel"),Io=ge()({name:"VLabel",props:cB(),setup(e,t){let{slots:n}=t;return _e(()=>{var r;return b("label",{class:["v-label",{"v-label--clickable":e.clickable},e.class],style:e.style},[e.text,(r=n.default)==null?void 0:r.call(n)])}),{}}}),wC=Symbol.for("vuetify:selection-control-group"),ap=Z({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:tt,trueIcon:tt,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:Ss},...Ne(),...vn(),...dt()},"SelectionControlGroup"),dB=Z({...ap({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),xC=ge()({name:"VSelectionControlGroup",props:dB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),i=Ln(),s=F(()=>e.id||`v-selection-control-group-${i}`),a=F(()=>e.name||s.value),o=new Set;return At(wC,{modelValue:r,forceUpdate:()=>{o.forEach(l=>l())},onForceUpdate:l=>{o.add(l),In(()=>{o.delete(l)})}}),Bt({[e.defaultsTarget]:{color:he(e,"color"),disabled:he(e,"disabled"),density:he(e,"density"),error:he(e,"error"),inline:he(e,"inline"),modelValue:r,multiple:F(()=>!!e.multiple||e.multiple==null&&Array.isArray(r.value)),name:a,falseIcon:he(e,"falseIcon"),trueIcon:he(e,"trueIcon"),readonly:he(e,"readonly"),ripple:he(e,"ripple"),type:he(e,"type"),valueComparator:he(e,"valueComparator")}}),_e(()=>{var l;return b("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(l=n.default)==null?void 0:l.call(n)])}),{}}}),nf=Z({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Ne(),...ap()},"VSelectionControl");function fB(e){const t=it(wC,void 0),{densityClasses:n}=Hn(e),r=Ke(e,"modelValue"),i=F(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),s=F(()=>e.falseValue!==void 0?e.falseValue:!1),a=F(()=>!!e.multiple||e.multiple==null&&Array.isArray(r.value)),o=F({get(){const h=t?t.modelValue.value:r.value;return a.value?Wt(h).some(g=>e.valueComparator(g,i.value)):e.valueComparator(h,i.value)},set(h){if(e.readonly)return;const g=h?i.value:s.value;let v=g;a.value&&(v=h?[...Wt(r.value),g]:Wt(r.value).filter(p=>!e.valueComparator(p,i.value))),t?t.modelValue.value=v:r.value=v}}),{textColorClasses:l,textColorStyles:u}=Mn(F(()=>{if(!(e.error||e.disabled))return o.value?e.color:e.baseColor})),{backgroundColorClasses:f,backgroundColorStyles:c}=Ot(F(()=>o.value&&!e.error&&!e.disabled?e.color:void 0)),d=F(()=>o.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:i,falseValue:s,model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:f,backgroundColorStyles:c,icon:d}}const Xs=ge()({name:"VSelectionControl",directives:{Ripple:Ki},inheritAttrs:!1,props:nf(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{group:i,densityClasses:s,icon:a,model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:f,backgroundColorStyles:c,trueValue:d}=fB(e),h=Ln(),g=F(()=>e.id||`input-${h}`),v=Ae(!1),p=Ae(!1),y=ne();i==null||i.onForceUpdate(()=>{y.value&&(y.value.checked=o.value)});function w(k){v.value=!0,io(k.target,":focus-visible")!==!1&&(p.value=!0)}function A(){v.value=!1,p.value=!1}function I(k){e.readonly&&i&&ht(()=>i.forceUpdate()),o.value=k.target.checked}return _e(()=>{var _,T;const k=r.label?r.label({label:e.label,props:{for:g.value}}):e.label,[x,C]=_s(n),m=b("input",xe({ref:y,checked:o.value,disabled:!!(e.readonly||e.disabled),id:g.value,onBlur:A,onFocus:w,onInput:I,"aria-disabled":!!(e.readonly||e.disabled),type:e.type,value:d.value,name:e.name,"aria-checked":e.type==="checkbox"?o.value:void 0},C),null);return b("div",xe({class:["v-selection-control",{"v-selection-control--dirty":o.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":v.value,"v-selection-control--focus-visible":p.value,"v-selection-control--inline":e.inline},s.value,e.class]},x,{style:e.style}),[b("div",{class:["v-selection-control__wrapper",l.value],style:u.value},[(_=r.default)==null?void 0:_.call(r,{backgroundColorClasses:f,backgroundColorStyles:c}),qt(b("div",{class:["v-selection-control__input"]},[((T=r.input)==null?void 0:T.call(r,{model:o,textColorClasses:l,textColorStyles:u,backgroundColorClasses:f,backgroundColorStyles:c,inputNode:m,icon:a.value,props:{onFocus:w,onBlur:A,id:g.value}}))??b(Fe,null,[a.value&&b(Tt,{key:"icon",icon:a.value},null),m])]),[[nr("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),k&&b(Io,{for:g.value,clickable:!0,onClick:E=>E.stopPropagation()},{default:()=>[k]})])}),{isFocused:v,input:y}}}),CC=Z({indeterminate:Boolean,indeterminateIcon:{type:tt,default:"$checkboxIndeterminate"},...nf({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Ni=ge()({name:"VCheckboxBtn",props:CC(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"indeterminate"),i=Ke(e,"modelValue");function s(l){r.value&&(r.value=!1)}const a=F(()=>r.value?e.indeterminateIcon:e.falseIcon),o=F(()=>r.value?e.indeterminateIcon:e.trueIcon);return _e(()=>{const l=gn(Xs.filterProps(e),["modelValue"]);return b(Xs,xe(l,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,s],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:a.value,trueIcon:o.value,"aria-checked":r.value?"mixed":void 0}),n)}),{}}});function EC(e){const{t}=on();function n(r){let{name:i}=r;const s={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],a=e[`onClick:${i}`],o=a&&s?t(`$vuetify.input.${s}`,e.label??""):void 0;return b(Tt,{icon:e[`${i}Icon`],"aria-label":o,onClick:a},null)}return{InputIcon:n}}const hB=Z({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ne(),...Ui({transition:{component:tp,leaveAbsolute:!0,group:!0}})},"VMessages"),TC=ge()({name:"VMessages",props:hB(),setup(e,t){let{slots:n}=t;const r=F(()=>Wt(e.messages)),{textColorClasses:i,textColorStyles:s}=Mn(F(()=>e.color));return _e(()=>b(Tr,{transition:e.transition,tag:"div",class:["v-messages",i.value,e.class],style:[s.value,e.style],role:"alert","aria-live":"polite"},{default:()=>[e.active&&r.value.map((a,o)=>b("div",{class:"v-messages__message",key:`${o}-${r.value}`},[n.message?n.message({message:a}):a]))]})),{}}}),ru=Z({focused:Boolean,"onUpdate:focused":er()},"focus");function Gi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi();const n=Ke(e,"focused"),r=F(()=>({[`${t}--focused`]:n.value}));function i(){n.value=!0}function s(){n.value=!1}return{focusClasses:r,isFocused:n,focus:i,blur:s}}const AC=Symbol.for("vuetify:form"),gB=Z({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function vB(e){const t=Ke(e,"modelValue"),n=F(()=>e.disabled),r=F(()=>e.readonly),i=Ae(!1),s=ne([]),a=ne([]);async function o(){const f=[];let c=!0;a.value=[],i.value=!0;for(const d of s.value){const h=await d.validate();if(h.length>0&&(c=!1,f.push({id:d.id,errorMessages:h})),!c&&e.fastFail)break}return a.value=f,i.value=!1,{valid:c,errors:a.value}}function l(){s.value.forEach(f=>f.reset())}function u(){s.value.forEach(f=>f.resetValidation())}return Re(s,()=>{let f=0,c=0;const d=[];for(const h of s.value)h.isValid===!1?(c++,d.push({id:h.id,errorMessages:h.errorMessages})):h.isValid===!0&&f++;a.value=d,t.value=c>0?!1:f===s.value.length?!0:null},{deep:!0}),At(AC,{register:f=>{let{id:c,validate:d,reset:h,resetValidation:g}=f;s.value.some(v=>v.id===c),s.value.push({id:c,validate:d,reset:h,resetValidation:g,isValid:null,errorMessages:[]})},unregister:f=>{s.value=s.value.filter(c=>c.id!==f)},update:(f,c,d)=>{const h=s.value.find(g=>g.id===f);h&&(h.isValid=c,h.errorMessages=d)},isDisabled:n,isReadonly:r,isValidating:i,isValid:t,items:s,validateOn:he(e,"validateOn")}),{errors:a,isDisabled:n,isReadonly:r,isValidating:i,isValid:t,items:s,validate:o,reset:l,resetValidation:u}}function rf(){return it(AC,null)}const IC=Z({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...ru()},"validation");function RC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ln();const r=Ke(e,"modelValue"),i=F(()=>e.validationValue===void 0?r.value:e.validationValue),s=rf(),a=ne([]),o=Ae(!0),l=F(()=>!!(Wt(r.value===""?null:r.value).length||Wt(i.value===""?null:i.value).length)),u=F(()=>!!(e.disabled??(s==null?void 0:s.isDisabled.value))),f=F(()=>!!(e.readonly??(s==null?void 0:s.isReadonly.value))),c=F(()=>{var I;return(I=e.errorMessages)!=null&&I.length?Wt(e.errorMessages).concat(a.value).slice(0,Math.max(0,+e.maxErrors)):a.value}),d=F(()=>{let I=(e.validateOn??(s==null?void 0:s.validateOn.value))||"input";I==="lazy"&&(I="input lazy");const k=new Set((I==null?void 0:I.split(" "))??[]);return{blur:k.has("blur")||k.has("input"),input:k.has("input"),submit:k.has("submit"),lazy:k.has("lazy")}}),h=F(()=>{var I;return e.error||(I=e.errorMessages)!=null&&I.length?!1:e.rules.length?o.value?a.value.length||d.value.lazy?null:!0:!a.value.length:!0}),g=Ae(!1),v=F(()=>({[`${t}--error`]:h.value===!1,[`${t}--dirty`]:l.value,[`${t}--disabled`]:u.value,[`${t}--readonly`]:f.value})),p=F(()=>e.name??Se(n));Jc(()=>{s==null||s.register({id:p.value,validate:A,reset:y,resetValidation:w})}),sn(()=>{s==null||s.unregister(p.value)}),zt(async()=>{d.value.lazy||await A(!0),s==null||s.update(p.value,h.value,c.value)}),jr(()=>d.value.input,()=>{Re(i,()=>{if(i.value!=null)A();else if(e.focused){const I=Re(()=>e.focused,k=>{k||A(),I()})}})}),jr(()=>d.value.blur,()=>{Re(()=>e.focused,I=>{I||A()})}),Re(h,()=>{s==null||s.update(p.value,h.value,c.value)});function y(){r.value=null,ht(w)}function w(){o.value=!0,d.value.lazy?a.value=[]:A(!0)}async function A(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const k=[];g.value=!0;for(const x of e.rules){if(k.length>=+(e.maxErrors??1))break;const m=await(typeof x=="function"?x:()=>x)(i.value);if(m!==!0){if(m!==!1&&typeof m!="string"){console.warn(`${m} is not a valid value. Rule functions must return boolean true or a string.`);continue}k.push(m||"")}}return a.value=k,g.value=!1,o.value=I,a.value}return{errorMessages:c,isDirty:l,isDisabled:u,isReadonly:f,isPristine:o,isValid:h,isValidating:g,reset:y,resetValidation:w,validate:A,validationClasses:v}}const Wi=Z({id:String,appendIcon:tt,centerAffix:{type:Boolean,default:!0},prependIcon:tt,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":er(),"onClick:append":er(),...Ne(),...vn(),...IC()},"VInput"),Rn=ge()({name:"VInput",props:{...Wi()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r,emit:i}=t;const{densityClasses:s}=Hn(e),{rtlClasses:a}=Cn(),{InputIcon:o}=EC(e),l=Ln(),u=F(()=>e.id||`input-${l}`),f=F(()=>`${u.value}-messages`),{errorMessages:c,isDirty:d,isDisabled:h,isReadonly:g,isPristine:v,isValid:p,isValidating:y,reset:w,resetValidation:A,validate:I,validationClasses:k}=RC(e,"v-input",u),x=F(()=>({id:u,messagesId:f,isDirty:d,isDisabled:h,isReadonly:g,isPristine:v,isValid:p,isValidating:y,reset:w,resetValidation:A,validate:I})),C=F(()=>{var m;return(m=e.errorMessages)!=null&&m.length||!v.value&&c.value.length?c.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return _e(()=>{var R,D,$,M;const m=!!(r.prepend||e.prependIcon),_=!!(r.append||e.appendIcon),T=C.value.length>0,E=!e.hideDetails||e.hideDetails==="auto"&&(T||!!r.details);return b("div",{class:["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--hide-spin-buttons":e.hideSpinButtons},s.value,a.value,k.value,e.class],style:e.style},[m&&b("div",{key:"prepend",class:"v-input__prepend"},[(R=r.prepend)==null?void 0:R.call(r,x.value),e.prependIcon&&b(o,{key:"prepend-icon",name:"prepend"},null)]),r.default&&b("div",{class:"v-input__control"},[(D=r.default)==null?void 0:D.call(r,x.value)]),_&&b("div",{key:"append",class:"v-input__append"},[e.appendIcon&&b(o,{key:"append-icon",name:"append"},null),($=r.append)==null?void 0:$.call(r,x.value)]),E&&b("div",{class:"v-input__details"},[b(TC,{id:f.value,active:T,messages:C.value},{message:r.message}),(M=r.details)==null?void 0:M.call(r,x.value)])])}),{reset:w,resetValidation:A,validate:I,isValid:p,errorMessages:c}}}),mB=Z({...Wi(),...gn(CC(),["inline"])},"VCheckbox"),pB=ge()({name:"VCheckbox",inheritAttrs:!1,props:mB(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const i=Ke(e,"modelValue"),{isFocused:s,focus:a,blur:o}=Gi(e),l=Ln(),u=F(()=>e.id||`checkbox-${l}`);return _e(()=>{const[f,c]=_s(n),d=Rn.filterProps(e),h=Ni.filterProps(e);return b(Rn,xe({class:["v-checkbox",e.class]},f,d,{modelValue:i.value,"onUpdate:modelValue":g=>i.value=g,id:u.value,focused:s.value,style:e.style}),{...r,default:g=>{let{id:v,messagesId:p,isDisabled:y,isReadonly:w}=g;return b(Ni,xe(h,{id:v.value,"aria-describedby":p.value,disabled:y.value,readonly:w.value},c,{modelValue:i.value,"onUpdate:modelValue":A=>i.value=A,onFocus:a,onBlur:o}),r)}})}),{}}}),yB=Z({start:Boolean,end:Boolean,icon:tt,image:String,text:String,...Ne(),...vn(),...Ht(),...zi(),...rt(),...dt(),...Or({variant:"flat"})},"VAvatar"),$i=ge()({name:"VAvatar",props:yB(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{colorClasses:i,colorStyles:s,variantClasses:a}=ga(e),{densityClasses:o}=Hn(e),{roundedClasses:l}=Kt(e),{sizeClasses:u,sizeStyles:f}=Eo(e);return _e(()=>b(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},r.value,i.value,o.value,l.value,u.value,a.value,e.class],style:[s.value,f.value,e.style]},{default:()=>{var c;return[e.image?b(Js,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?b(Tt,{key:"icon",icon:e.icon},null):((c=n.default)==null?void 0:c.call(n))??e.text,ha(!1,"v-avatar")]}})),{}}}),kC=Symbol.for("vuetify:v-chip-group"),bB=Z({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Ss},...Ne(),...va({selectedClass:"v-chip--selected"}),...rt(),...dt(),...Or({variant:"tonal"})},"VChipGroup"),SB=ge()({name:"VChipGroup",props:bB(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{isSelected:i,select:s,next:a,prev:o,selected:l}=ws(e,kC);return Bt({VChip:{color:he(e,"color"),disabled:he(e,"disabled"),filter:he(e,"filter"),variant:he(e,"variant")}}),_e(()=>b(e.tag,{class:["v-chip-group",{"v-chip-group--column":e.column},r.value,e.class],style:e.style},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:i,select:s,next:a,prev:o,selected:l.value})]}})),{}}}),_B=Z({activeClass:String,appendAvatar:String,appendIcon:tt,closable:Boolean,closeIcon:{type:tt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:tt,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:er(),onClickOnce:er(),...mr(),...Ne(),...vn(),...ln(),...ma(),...Ht(),...nu(),...zi(),...rt({tag:"span"}),...dt(),...Or({variant:"tonal"})},"VChip"),iu=ge()({name:"VChip",directives:{Ripple:Ki},props:_B(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{t:s}=on(),{borderClasses:a}=Fr(e),{colorClasses:o,colorStyles:l,variantClasses:u}=ga(e),{densityClasses:f}=Hn(e),{elevationClasses:c}=En(e),{roundedClasses:d}=Kt(e),{sizeClasses:h}=Eo(e),{themeClasses:g}=xt(e),v=Ke(e,"modelValue"),p=pa(e,kC,!1),y=tu(e,n),w=F(()=>e.link!==!1&&y.isLink.value),A=F(()=>!e.disabled&&e.link!==!1&&(!!p||e.link||y.isClickable.value)),I=F(()=>({"aria-label":s(e.closeLabel),onClick(C){C.stopPropagation(),v.value=!1,r("click:close",C)}}));function k(C){var m;r("click",C),A.value&&((m=y.navigate)==null||m.call(y,C),p==null||p.toggle())}function x(C){(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),k(C))}return()=>{const C=y.isLink.value?"a":e.tag,m=!!(e.appendIcon||e.appendAvatar),_=!!(m||i.append),T=!!(i.close||e.closable),E=!!(i.filter||e.filter)&&p,R=!!(e.prependIcon||e.prependAvatar),D=!!(R||i.prepend),$=!p||p.isSelected.value;return v.value&&qt(b(C,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":A.value,"v-chip--filter":E,"v-chip--pill":e.pill},g.value,a.value,$?o.value:void 0,f.value,c.value,d.value,h.value,u.value,p==null?void 0:p.selectedClass.value,e.class],style:[$?l.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,href:y.href.value,tabindex:A.value?0:void 0,onClick:k,onKeydown:A.value&&!w.value&&x},{default:()=>{var M;return[ha(A.value,"v-chip"),E&&b(np,{key:"filter"},{default:()=>[qt(b("div",{class:"v-chip__filter"},[i.filter?b(ft,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},i.filter):b(Tt,{key:"filter-icon",icon:e.filterIcon},null)]),[[ci,p.isSelected.value]])]}),D&&b("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?b(ft,{key:"prepend-defaults",disabled:!R,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},i.prepend):b(Fe,null,[e.prependIcon&&b(Tt,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&b($i,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),b("div",{class:"v-chip__content"},[((M=i.default)==null?void 0:M.call(i,{isSelected:p==null?void 0:p.isSelected.value,selectedClass:p==null?void 0:p.selectedClass.value,select:p==null?void 0:p.select,toggle:p==null?void 0:p.toggle,value:p==null?void 0:p.value.value,disabled:e.disabled}))??e.text]),_&&b("div",{key:"append",class:"v-chip__append"},[i.append?b(ft,{key:"append-defaults",disabled:!m,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},i.append):b(Fe,null,[e.appendIcon&&b(Tt,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&b($i,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),T&&b("div",xe({key:"close",class:"v-chip__close"},I.value),[i.close?b(ft,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},i.close):b(Tt,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[nr("ripple"),A.value&&e.ripple,null]])}}}),Tg=Symbol.for("vuetify:list");function PC(){const e=it(Tg,{hasPrepend:Ae(!1),updateHasPrepend:()=>null}),t={hasPrepend:Ae(!1),updateHasPrepend:n=>{n&&(t.hasPrepend.value=n)}};return At(Tg,t),e}function DC(){return it(Tg,null)}const wB={open:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(n){const s=new Set;s.add(t);let a=i.get(t);for(;a!=null;)s.add(a),a=i.get(a);return s}else return r.delete(t),r},select:()=>null},FC={open:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(n){let s=i.get(t);for(r.add(t);s!=null&&s!==t;)r.add(s),s=i.get(s);return r}else r.delete(t);return r},select:()=>null},xB={open:FC.open,select:e=>{let{id:t,value:n,opened:r,parents:i}=e;if(!n)return r;const s=[];let a=i.get(t);for(;a!=null;)s.push(a),a=i.get(a);return new Set(s)}},op=e=>{const t={select:n=>{let{id:r,value:i,selected:s}=n;if(r=st(r),e&&!i){const a=Array.from(s.entries()).reduce((o,l)=>{let[u,f]=l;return f==="on"?[...o,u]:o},[]);if(a.length===1&&a[0]===r)return s}return s.set(r,i?"on":"off"),s},in:(n,r,i)=>{let s=new Map;for(const a of n||[])s=t.select({id:a,value:!0,selected:new Map(s),children:r,parents:i});return s},out:n=>{const r=[];for(const[i,s]of n.entries())s==="on"&&r.push(i);return r}};return t},OC=e=>{const t=op(e);return{select:r=>{let{selected:i,id:s,...a}=r;s=st(s);const o=i.has(s)?new Map([[s,i.get(s)]]):new Map;return t.select({...a,id:s,selected:o})},in:(r,i,s)=>{let a=new Map;return r!=null&&r.length&&(a=t.in(r.slice(0,1),i,s)),a},out:(r,i,s)=>t.out(r,i,s)}},CB=e=>{const t=op(e);return{select:r=>{let{id:i,selected:s,children:a,...o}=r;return i=st(i),a.has(i)?s:t.select({id:i,selected:s,children:a,...o})},in:t.in,out:t.out}},EB=e=>{const t=OC(e);return{select:r=>{let{id:i,selected:s,children:a,...o}=r;return i=st(i),a.has(i)?s:t.select({id:i,selected:s,children:a,...o})},in:t.in,out:t.out}},TB=e=>{const t={select:n=>{let{id:r,value:i,selected:s,children:a,parents:o}=n;r=st(r);const l=new Map(s),u=[r];for(;u.length;){const c=u.shift();s.set(c,i?"on":"off"),a.has(c)&&u.push(...a.get(c))}let f=o.get(r);for(;f;){const c=a.get(f),d=c.every(g=>s.get(g)==="on"),h=c.every(g=>!s.has(g)||s.get(g)==="off");s.set(f,d?"on":h?"off":"indeterminate"),f=o.get(f)}return e&&!i&&Array.from(s.entries()).reduce((d,h)=>{let[g,v]=h;return v==="on"?[...d,g]:d},[]).length===0?l:s},in:(n,r,i)=>{let s=new Map;for(const a of n||[])s=t.select({id:a,value:!0,selected:new Map(s),children:r,parents:i});return s},out:(n,r)=>{const i=[];for(const[s,a]of n.entries())a==="on"&&!r.has(s)&&i.push(s);return i}};return t},Pl=Symbol.for("vuetify:nested"),NC={id:Ae(),root:{register:()=>null,unregister:()=>null,parents:ne(new Map),children:ne(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:ne(new Set),selected:ne(new Map),selectedValues:ne([])}},AB=Z({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),IB=e=>{let t=!1;const n=ne(new Map),r=ne(new Map),i=Ke(e,"opened",e.opened,c=>new Set(c),c=>[...c.values()]),s=F(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single-leaf":return EB(e.mandatory);case"leaf":return CB(e.mandatory);case"independent":return op(e.mandatory);case"single-independent":return OC(e.mandatory);case"classic":default:return TB(e.mandatory)}}),a=F(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return xB;case"single":return wB;case"multiple":default:return FC}}),o=Ke(e,"selected",e.selected,c=>s.value.in(c,n.value,r.value),c=>s.value.out(c,n.value,r.value));sn(()=>{t=!0});function l(c){const d=[];let h=c;for(;h!=null;)d.unshift(h),h=r.value.get(h);return d}const u=an("nested"),f={id:Ae(),root:{opened:i,selected:o,selectedValues:F(()=>{const c=[];for(const[d,h]of o.value.entries())h==="on"&&c.push(d);return c}),register:(c,d,h)=>{d&&c!==d&&r.value.set(c,d),h&&n.value.set(c,[]),d!=null&&n.value.set(d,[...n.value.get(d)||[],c])},unregister:c=>{if(t)return;n.value.delete(c);const d=r.value.get(c);if(d){const h=n.value.get(d)??[];n.value.set(d,h.filter(g=>g!==c))}r.value.delete(c),i.value.delete(c)},open:(c,d,h)=>{u.emit("click:open",{id:c,value:d,path:l(c),event:h});const g=a.value.open({id:c,value:d,opened:new Set(i.value),children:n.value,parents:r.value,event:h});g&&(i.value=g)},openOnSelect:(c,d,h)=>{const g=a.value.select({id:c,value:d,selected:new Map(o.value),opened:new Set(i.value),children:n.value,parents:r.value,event:h});g&&(i.value=g)},select:(c,d,h)=>{u.emit("click:select",{id:c,value:d,path:l(c),event:h});const g=s.value.select({id:c,value:d,selected:new Map(o.value),children:n.value,parents:r.value,event:h});g&&(o.value=g),f.root.openOnSelect(c,d,h)},children:n,parents:r}};return At(Pl,f),f.root},$C=(e,t)=>{const n=it(Pl,NC),r=Symbol(Ln()),i=F(()=>e.value!==void 0?e.value:r),s={...n,id:i,open:(a,o)=>n.root.open(i.value,a,o),openOnSelect:(a,o)=>n.root.openOnSelect(i.value,a,o),isOpen:F(()=>n.root.opened.value.has(i.value)),parent:F(()=>n.root.parents.value.get(i.value)),select:(a,o)=>n.root.select(i.value,a,o),isSelected:F(()=>n.root.selected.value.get(st(i.value))==="on"),isIndeterminate:F(()=>n.root.selected.value.get(i.value)==="indeterminate"),isLeaf:F(()=>!n.root.children.value.get(i.value)),isGroupActivator:n.isGroupActivator};return!n.isGroupActivator&&n.root.register(i.value,n.id.value,t),sn(()=>{!n.isGroupActivator&&n.root.unregister(i.value)}),t&&At(Pl,s),s},RB=()=>{const e=it(Pl,NC);At(Pl,{...e,isGroupActivator:!0})},kB=hr({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return RB(),()=>{var r;return(r=n.default)==null?void 0:r.call(n)}}}),PB=Z({activeColor:String,baseColor:String,color:String,collapseIcon:{type:tt,default:"$collapse"},expandIcon:{type:tt,default:"$expand"},prependIcon:tt,appendIcon:tt,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Ne(),...rt()},"VListGroup"),Ag=ge()({name:"VListGroup",props:PB(),setup(e,t){let{slots:n}=t;const{isOpen:r,open:i,id:s}=$C(he(e,"value"),!0),a=F(()=>`v-list-group--id-${String(s.value)}`),o=DC(),{isBooted:l}=fa();function u(h){i(!r.value,h)}const f=F(()=>({onClick:u,class:"v-list-group__header",id:a.value})),c=F(()=>r.value?e.collapseIcon:e.expandIcon),d=F(()=>({VListItem:{active:r.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&c.value,appendIcon:e.appendIcon||!e.subgroup&&c.value,title:e.title,value:e.value}}));return _e(()=>b(e.tag,{class:["v-list-group",{"v-list-group--prepend":o==null?void 0:o.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":r.value},e.class],style:e.style},{default:()=>[n.activator&&b(ft,{defaults:d.value},{default:()=>[b(kB,null,{default:()=>[n.activator({props:f.value,isOpen:r.value})]})]}),b(Tr,{transition:{component:Xd},disabled:!l.value},{default:()=>{var h;return[qt(b("div",{class:"v-list-group__items",role:"group","aria-labelledby":a.value},[(h=n.default)==null?void 0:h.call(n)]),[[ci,r.value]])]}})]})),{}}}),MC=gr("v-list-item-subtitle"),VC=gr("v-list-item-title"),DB=Z({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:tt,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:tt,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:er(),onClickOnce:er(),...mr(),...Ne(),...vn(),...Kn(),...ln(),...Ht(),...nu(),...rt(),...dt(),...Or({variant:"text"})},"VListItem"),Mi=ge()({name:"VListItem",directives:{Ripple:Ki},props:DB(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:r,emit:i}=t;const s=tu(e,n),a=F(()=>e.value===void 0?s.href.value:e.value),{select:o,isSelected:l,isIndeterminate:u,isGroupActivator:f,root:c,parent:d,openOnSelect:h}=$C(a,!1),g=DC(),v=F(()=>{var W;return e.active!==!1&&(e.active||((W=s.isActive)==null?void 0:W.value)||l.value)}),p=F(()=>e.link!==!1&&s.isLink.value),y=F(()=>!e.disabled&&e.link!==!1&&(e.link||s.isClickable.value||e.value!=null&&!!g)),w=F(()=>e.rounded||e.nav),A=F(()=>e.color??e.activeColor),I=F(()=>({color:v.value?A.value??e.baseColor:e.baseColor,variant:e.variant}));Re(()=>{var W;return(W=s.isActive)==null?void 0:W.value},W=>{W&&d.value!=null&&c.open(d.value,!0),W&&h(W)},{immediate:!0});const{themeClasses:k}=xt(e),{borderClasses:x}=Fr(e),{colorClasses:C,colorStyles:m,variantClasses:_}=ga(I),{densityClasses:T}=Hn(e),{dimensionStyles:E}=Gn(e),{elevationClasses:R}=En(e),{roundedClasses:D}=Kt(w),$=F(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),M=F(()=>({isActive:v.value,select:o,isSelected:l.value,isIndeterminate:u.value}));function O(W){var te;i("click",W),!(f||!y.value)&&((te=s.navigate)==null||te.call(s,W),e.value!=null&&o(!l.value,W))}function L(W){(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),O(W))}return _e(()=>{const W=p.value?"a":e.tag,te=r.title||e.title,ie=r.subtitle||e.subtitle,Q=!!(e.appendAvatar||e.appendIcon),ee=!!(Q||r.append),ye=!!(e.prependAvatar||e.prependIcon),we=!!(ye||r.prepend);return g==null||g.updateHasPrepend(we),e.activeColor&&iM("active-color",["color","base-color"]),qt(b(W,{class:["v-list-item",{"v-list-item--active":v.value,"v-list-item--disabled":e.disabled,"v-list-item--link":y.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!we&&(g==null?void 0:g.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&v.value},k.value,x.value,C.value,T.value,R.value,$.value,D.value,_.value,e.class],style:[m.value,E.value,e.style],href:s.href.value,tabindex:y.value?g?-2:0:void 0,onClick:O,onKeydown:y.value&&!p.value&&L},{default:()=>{var $e;return[ha(y.value||v.value,"v-list-item"),we&&b("div",{key:"prepend",class:"v-list-item__prepend"},[r.prepend?b(ft,{key:"prepend-defaults",disabled:!ye,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var le;return[(le=r.prepend)==null?void 0:le.call(r,M.value)]}}):b(Fe,null,[e.prependAvatar&&b($i,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&b(Tt,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),b("div",{class:"v-list-item__spacer"},null)]),b("div",{class:"v-list-item__content","data-no-activator":""},[te&&b(VC,{key:"title"},{default:()=>{var le;return[((le=r.title)==null?void 0:le.call(r,{title:e.title}))??e.title]}}),ie&&b(MC,{key:"subtitle"},{default:()=>{var le;return[((le=r.subtitle)==null?void 0:le.call(r,{subtitle:e.subtitle}))??e.subtitle]}}),($e=r.default)==null?void 0:$e.call(r,M.value)]),ee&&b("div",{key:"append",class:"v-list-item__append"},[r.append?b(ft,{key:"append-defaults",disabled:!Q,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var le;return[(le=r.append)==null?void 0:le.call(r,M.value)]}}):b(Fe,null,[e.appendIcon&&b(Tt,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&b($i,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),b("div",{class:"v-list-item__spacer"},null)])]}}),[[nr("ripple"),y.value&&e.ripple]])}),{}}}),FB=Z({color:String,inset:Boolean,sticky:Boolean,title:String,...Ne(),...rt()},"VListSubheader"),BC=ge()({name:"VListSubheader",props:FB(),setup(e,t){let{slots:n}=t;const{textColorClasses:r,textColorStyles:i}=Mn(he(e,"color"));return _e(()=>{const s=!!(n.default||e.title);return b(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},r.value,e.class],style:[{textColorStyles:i},e.style]},{default:()=>{var a;return[s&&b("div",{class:"v-list-subheader__text"},[((a=n.default)==null?void 0:a.call(n))??e.title])]}})}),{}}}),OB=Z({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...Ne(),...dt()},"VDivider"),lp=ge()({name:"VDivider",props:OB(),setup(e,t){let{attrs:n}=t;const{themeClasses:r}=xt(e),{textColorClasses:i,textColorStyles:s}=Mn(he(e,"color")),a=F(()=>{const o={};return e.length&&(o[e.vertical?"maxHeight":"maxWidth"]=De(e.length)),e.thickness&&(o[e.vertical?"borderRightWidth":"borderTopWidth"]=De(e.thickness)),o});return _e(()=>b("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,i.value,e.class],style:[a.value,s.value,e.style],"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null)),{}}}),NB=Z({items:Array,returnObject:Boolean},"VListChildren"),LC=ge()({name:"VListChildren",props:NB(),setup(e,t){let{slots:n}=t;return PC(),()=>{var r,i;return((r=n.default)==null?void 0:r.call(n))??((i=e.items)==null?void 0:i.map(s=>{var d,h;let{children:a,props:o,type:l,raw:u}=s;if(l==="divider")return((d=n.divider)==null?void 0:d.call(n,{props:o}))??b(lp,o,null);if(l==="subheader")return((h=n.subheader)==null?void 0:h.call(n,{props:o}))??b(BC,o,null);const f={subtitle:n.subtitle?g=>{var v;return(v=n.subtitle)==null?void 0:v.call(n,{...g,item:u})}:void 0,prepend:n.prepend?g=>{var v;return(v=n.prepend)==null?void 0:v.call(n,{...g,item:u})}:void 0,append:n.append?g=>{var v;return(v=n.append)==null?void 0:v.call(n,{...g,item:u})}:void 0,title:n.title?g=>{var v;return(v=n.title)==null?void 0:v.call(n,{...g,item:u})}:void 0},c=Ag.filterProps(o);return a?b(Ag,xe({value:o==null?void 0:o.value},c),{activator:g=>{let{props:v}=g;const p={...o,...v,value:e.returnObject?u:o.value};return n.header?n.header({props:p}):b(Mi,p,f)},default:()=>b(LC,{items:a},n)}):n.item?n.item({props:o}):b(Mi,xe(o,{value:e.returnObject?u:o.value}),f)}))}}}),HC=Z({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:{type:Function,default:Ss}},"list-items");function Hs(e,t){const n=Sn(t,e.itemTitle,t),r=Sn(t,e.itemValue,n),i=Sn(t,e.itemChildren),s=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?gn(t,["children"]):t:void 0:Sn(t,e.itemProps),a={title:n,value:r,...s};return{title:String(a.title??""),value:a.value,props:a,children:Array.isArray(i)?jC(e,i):void 0,raw:t}}function jC(e,t){const n=[];for(const r of t)n.push(Hs(e,r));return n}function up(e){const t=F(()=>jC(e,e.items)),n=F(()=>t.value.some(s=>s.value===null));function r(s){return n.value||(s=s.filter(a=>a!==null)),s.map(a=>e.returnObject&&typeof a=="string"?Hs(e,a):t.value.find(o=>e.valueComparator(a,o.value))||Hs(e,a))}function i(s){return e.returnObject?s.map(a=>{let{raw:o}=a;return o}):s.map(a=>{let{value:o}=a;return o})}return{items:t,transformIn:r,transformOut:i}}function $B(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function MB(e,t){const n=Sn(t,e.itemType,"item"),r=$B(t)?t:Sn(t,e.itemTitle),i=Sn(t,e.itemValue,void 0),s=Sn(t,e.itemChildren),a=e.itemProps===!0?gn(t,["children"]):Sn(t,e.itemProps),o={title:r,value:i,...a};return{type:n,title:o.title,value:o.value,props:o,children:n==="item"&&s?qC(e,s):void 0,raw:t}}function qC(e,t){const n=[];for(const r of t)n.push(MB(e,r));return n}function VB(e){return{items:F(()=>qC(e,e.items))}}const BB=Z({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,...AB({selectStrategy:"single-leaf",openStrategy:"list"}),...mr(),...Ne(),...vn(),...Kn(),...ln(),itemType:{type:String,default:"type"},...HC(),...Ht(),...rt(),...dt(),...Or({variant:"text"})},"VList"),sf=ge()({name:"VList",props:BB(),emits:{"update:selected":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:r}=VB(e),{themeClasses:i}=xt(e),{backgroundColorClasses:s,backgroundColorStyles:a}=Ot(he(e,"bgColor")),{borderClasses:o}=Fr(e),{densityClasses:l}=Hn(e),{dimensionStyles:u}=Gn(e),{elevationClasses:f}=En(e),{roundedClasses:c}=Kt(e),{open:d,select:h}=IB(e),g=F(()=>e.lines?`v-list--${e.lines}-line`:void 0),v=he(e,"activeColor"),p=he(e,"baseColor"),y=he(e,"color");PC(),Bt({VListGroup:{activeColor:v,baseColor:p,color:y},VListItem:{activeClass:he(e,"activeClass"),activeColor:v,baseColor:p,color:y,density:he(e,"density"),disabled:he(e,"disabled"),lines:he(e,"lines"),nav:he(e,"nav"),slim:he(e,"slim"),variant:he(e,"variant")}});const w=Ae(!1),A=ne();function I(_){w.value=!0}function k(_){w.value=!1}function x(_){var T;!w.value&&!(_.relatedTarget&&((T=A.value)!=null&&T.contains(_.relatedTarget)))&&m()}function C(_){if(A.value){if(_.key==="ArrowDown")m("next");else if(_.key==="ArrowUp")m("prev");else if(_.key==="Home")m("first");else if(_.key==="End")m("last");else return;_.preventDefault()}}function m(_){if(A.value)return ro(A.value,_)}return _e(()=>b(e.tag,{ref:A,class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav},i.value,s.value,o.value,l.value,f.value,g.value,c.value,e.class],style:[a.value,u.value,e.style],tabindex:e.disabled||w.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:I,onFocusout:k,onFocus:x,onKeydown:C},{default:()=>[b(LC,{items:r.value,returnObject:e.returnObject},n)]})),{open:d,select:h,focus:m}}}),LB=gr("v-list-img"),HB=Z({start:Boolean,end:Boolean,...Ne(),...rt()},"VListItemAction"),jB=ge()({name:"VListItemAction",props:HB(),setup(e,t){let{slots:n}=t;return _e(()=>b(e.tag,{class:["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class],style:e.style},n)),{}}}),qB=Z({start:Boolean,end:Boolean,...Ne(),...rt()},"VListItemMedia"),UB=ge()({name:"VListItemMedia",props:qB(),setup(e,t){let{slots:n}=t;return _e(()=>b(e.tag,{class:["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class],style:e.style},n)),{}}});function bh(e,t){return{x:e.x+t.x,y:e.y+t.y}}function zB(e,t){return{x:e.x-t.x,y:e.y-t.y}}function C1(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:r}=e,i=r==="left"?0:r==="center"?t.width/2:r==="right"?t.width:r,s=n==="top"?0:n==="bottom"?t.height:n;return bh({x:i,y:s},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:r}=e,i=n==="left"?0:n==="right"?t.width:n,s=r==="top"?0:r==="center"?t.height/2:r==="bottom"?t.height:r;return bh({x:i,y:s},t)}return bh({x:t.width/2,y:t.height/2},t)}const UC={static:WB,connected:JB},KB=Z({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in UC},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function GB(e,t){const n=ne({}),r=ne();Pt&&(jr(()=>!!(t.isActive.value&&e.locationStrategy),s=>{var a,o;Re(()=>e.locationStrategy,s),In(()=>{r.value=void 0}),typeof e.locationStrategy=="function"?r.value=(a=e.locationStrategy(t,e,n))==null?void 0:a.updateLocation:r.value=(o=UC[e.locationStrategy](t,e,n))==null?void 0:o.updateLocation}),window.addEventListener("resize",i,{passive:!0}),In(()=>{window.removeEventListener("resize",i),r.value=void 0}));function i(s){var a;(a=r.value)==null||a.call(r,s)}return{contentStyles:n,updateLocation:r}}function WB(){}function YB(e,t){t?e.style.removeProperty("left"):e.style.removeProperty("right");const n=Um(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function JB(e,t,n){(Array.isArray(e.target.value)||EM(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:i,preferredOrigin:s}=jm(()=>{const g=dg(t.location,e.isRtl.value),v=t.origin==="overlap"?g:t.origin==="auto"?vh(g):dg(t.origin,e.isRtl.value);return g.side===v.side&&g.align===mh(v).align?{preferredAnchor:Yy(g),preferredOrigin:Yy(v)}:{preferredAnchor:g,preferredOrigin:v}}),[a,o,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(g=>F(()=>{const v=parseFloat(t[g]);return isNaN(v)?1/0:v})),f=F(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const g=t.offset.split(" ").map(parseFloat);return g.length<2&&g.push(0),g}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let c=!1;const d=new ResizeObserver(()=>{c&&h()});Re([e.target,e.contentEl],(g,v)=>{let[p,y]=g,[w,A]=v;w&&!Array.isArray(w)&&d.unobserve(w),p&&!Array.isArray(p)&&d.observe(p),A&&d.unobserve(A),y&&d.observe(y)},{immediate:!0}),In(()=>{d.disconnect()});function h(){if(c=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>c=!0)}),!e.target.value||!e.contentEl.value)return;const g=Px(e.target.value),v=YB(e.contentEl.value,e.isRtl.value),p=Dc(e.contentEl.value),y=12;p.length||(p.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(v.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),v.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const w=p.reduce((E,R)=>{const D=R.getBoundingClientRect(),$=new Gs({x:R===document.documentElement?0:D.x,y:R===document.documentElement?0:D.y,width:R.clientWidth,height:R.clientHeight});return E?new Gs({x:Math.max(E.left,$.left),y:Math.max(E.top,$.top),width:Math.min(E.right,$.right)-Math.max(E.left,$.left),height:Math.min(E.bottom,$.bottom)-Math.max(E.top,$.top)}):$},void 0);w.x+=y,w.y+=y,w.width-=y*2,w.height-=y*2;let A={anchor:i.value,origin:s.value};function I(E){const R=new Gs(v),D=C1(E.anchor,g),$=C1(E.origin,R);let{x:M,y:O}=zB(D,$);switch(E.anchor.side){case"top":O-=f.value[0];break;case"bottom":O+=f.value[0];break;case"left":M-=f.value[0];break;case"right":M+=f.value[0];break}switch(E.anchor.align){case"top":O-=f.value[1];break;case"bottom":O+=f.value[1];break;case"left":M-=f.value[1];break;case"right":M+=f.value[1];break}return R.x+=M,R.y+=O,R.width=Math.min(R.width,l.value),R.height=Math.min(R.height,u.value),{overflows:Xy(R,w),x:M,y:O}}let k=0,x=0;const C={x:0,y:0},m={x:!1,y:!1};let _=-1;for(;!(_++>10);){const{x:E,y:R,overflows:D}=I(A);k+=E,x+=R,v.x+=E,v.y+=R;{const $=Jy(A.anchor),M=D.x.before||D.x.after,O=D.y.before||D.y.after;let L=!1;if(["x","y"].forEach(W=>{if(W==="x"&&M&&!m.x||W==="y"&&O&&!m.y){const te={anchor:{...A.anchor},origin:{...A.origin}},ie=W==="x"?$==="y"?mh:vh:$==="y"?vh:mh;te.anchor=ie(te.anchor),te.origin=ie(te.origin);const{overflows:Q}=I(te);(Q[W].before<=D[W].before&&Q[W].after<=D[W].after||Q[W].before+Q[W].after<(D[W].before+D[W].after)/2)&&(A=te,L=m[W]=!0)}}),L)continue}D.x.before&&(k+=D.x.before,v.x+=D.x.before),D.x.after&&(k-=D.x.after,v.x-=D.x.after),D.y.before&&(x+=D.y.before,v.y+=D.y.before),D.y.after&&(x-=D.y.after,v.y-=D.y.after);{const $=Xy(v,w);C.x=w.width-$.x.before-$.x.after,C.y=w.height-$.y.before-$.y.after,k+=$.x.before,v.x+=$.x.before,x+=$.y.before,v.y+=$.y.before}break}const T=Jy(A.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${A.anchor.side} ${A.anchor.align}`,transformOrigin:`${A.origin.side} ${A.origin.align}`,top:De(Sh(x)),left:e.isRtl.value?void 0:De(Sh(k)),right:e.isRtl.value?De(Sh(-k)):void 0,minWidth:De(T==="y"?Math.min(a.value,g.width):a.value),maxWidth:De(E1(rn(C.x,a.value===1/0?0:a.value,l.value))),maxHeight:De(E1(rn(C.y,o.value===1/0?0:o.value,u.value)))}),{available:C,contentBox:v}}return Re(()=>[i.value,s.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>h()),ht(()=>{const g=h();if(!g)return;const{available:v,contentBox:p}=g;p.height>v.y&&requestAnimationFrame(()=>{h(),requestAnimationFrame(()=>{h()})})}),{updateLocation:h}}function Sh(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function E1(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Ig=!0;const $c=[];function XB(e){!Ig||$c.length?($c.push(e),Rg()):(Ig=!1,e(),Rg())}let T1=-1;function Rg(){cancelAnimationFrame(T1),T1=requestAnimationFrame(()=>{const e=$c.shift();e&&e(),$c.length?Rg():Ig=!0})}const Xu={none:null,close:eL,block:tL,reposition:nL},ZB=Z({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in Xu}},"VOverlay-scroll-strategies");function QB(e,t){if(!Pt)return;let n;Qt(async()=>{n==null||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=Ml(),await ht(),n.active&&n.run(()=>{var r;typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):(r=Xu[e.scrollStrategy])==null||r.call(Xu,t,e,n)}))}),In(()=>{n==null||n.stop()})}function eL(e){function t(n){e.isActive.value=!1}zC(e.targetEl.value??e.contentEl.value,t)}function tL(e,t){var a;const n=(a=e.root.value)==null?void 0:a.offsetParent,r=[...new Set([...Dc(e.targetEl.value,t.contained?n:void 0),...Dc(e.contentEl.value,t.contained?n:void 0)])].filter(o=>!o.classList.contains("v-overlay-scroll-blocked")),i=window.innerWidth-document.documentElement.offsetWidth,s=(o=>Ym(o)&&o)(n||document.documentElement);s&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((o,l)=>{o.style.setProperty("--v-body-scroll-x",De(-o.scrollLeft)),o.style.setProperty("--v-body-scroll-y",De(-o.scrollTop)),o!==document.documentElement&&o.style.setProperty("--v-scrollbar-offset",De(i)),o.classList.add("v-overlay-scroll-blocked")}),In(()=>{r.forEach((o,l)=>{const u=parseFloat(o.style.getPropertyValue("--v-body-scroll-x")),f=parseFloat(o.style.getPropertyValue("--v-body-scroll-y"));o.style.removeProperty("--v-body-scroll-x"),o.style.removeProperty("--v-body-scroll-y"),o.style.removeProperty("--v-scrollbar-offset"),o.classList.remove("v-overlay-scroll-blocked"),o.scrollLeft=-u,o.scrollTop=-f}),s&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function nL(e,t,n){let r=!1,i=-1,s=-1;function a(o){XB(()=>{var f,c;const l=performance.now();(c=(f=e.updateLocation).value)==null||c.call(f,o),r=(performance.now()-l)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?o=>o():requestIdleCallback)(()=>{n.run(()=>{zC(e.targetEl.value??e.contentEl.value,o=>{r?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{a(o)})})):a(o)})})}),In(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(i)})}function zC(e,t){const n=[document,...Dc(e)];n.forEach(r=>{r.addEventListener("scroll",t,{passive:!0})}),In(()=>{n.forEach(r=>{r.removeEventListener("scroll",t)})})}const kg=Symbol.for("vuetify:v-menu"),KC=Z({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function GC(e,t){const n={},r=i=>()=>{if(!Pt)return Promise.resolve(!0);const s=i==="openDelay";return n.closeDelay&&window.clearTimeout(n.closeDelay),delete n.closeDelay,n.openDelay&&window.clearTimeout(n.openDelay),delete n.openDelay,new Promise(a=>{const o=parseInt(e[i]??0,10);n[i]=window.setTimeout(()=>{t==null||t(s),a(s)},o)})};return{runCloseDelay:r("closeDelay"),runOpenDelay:r("openDelay")}}const rL=Z({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...KC()},"VOverlay-activator");function iL(e,t){let{isActive:n,isTop:r}=t;const i=an("useActivator"),s=ne();let a=!1,o=!1,l=!0;const u=F(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),f=F(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!u.value),{runOpenDelay:c,runCloseDelay:d}=GC(e,C=>{C===(e.openOnHover&&a||u.value&&o)&&!(e.openOnHover&&n.value&&!r.value)&&(n.value!==C&&(l=!0),n.value=C)}),h=ne(),g={onClick:C=>{C.stopPropagation(),s.value=C.currentTarget||C.target,n.value||(h.value=[C.clientX,C.clientY]),n.value=!n.value},onMouseenter:C=>{var m;(m=C.sourceCapabilities)!=null&&m.firesTouchEvents||(a=!0,s.value=C.currentTarget||C.target,c())},onMouseleave:C=>{a=!1,d()},onFocus:C=>{io(C.target,":focus-visible")!==!1&&(o=!0,C.stopPropagation(),s.value=C.currentTarget||C.target,c())},onBlur:C=>{o=!1,C.stopPropagation(),d()}},v=F(()=>{const C={};return f.value&&(C.onClick=g.onClick),e.openOnHover&&(C.onMouseenter=g.onMouseenter,C.onMouseleave=g.onMouseleave),u.value&&(C.onFocus=g.onFocus,C.onBlur=g.onBlur),C}),p=F(()=>{const C={};if(e.openOnHover&&(C.onMouseenter=()=>{a=!0,c()},C.onMouseleave=()=>{a=!1,d()}),u.value&&(C.onFocusin=()=>{o=!0,c()},C.onFocusout=()=>{o=!1,d()}),e.closeOnContentClick){const m=it(kg,null);C.onClick=()=>{n.value=!1,m==null||m.closeParents()}}return C}),y=F(()=>{const C={};return e.openOnHover&&(C.onMouseenter=()=>{l&&(a=!0,l=!1,c())},C.onMouseleave=()=>{a=!1,d()}),C});Re(r,C=>{C&&(e.openOnHover&&!a&&(!u.value||!o)||u.value&&!o&&(!e.openOnHover||!a))&&(n.value=!1)}),Re(n,C=>{C||setTimeout(()=>{h.value=void 0})},{flush:"post"});const w=ne();Qt(()=>{w.value&&ht(()=>{s.value=El(w.value)})});const A=ne(),I=F(()=>e.target==="cursor"&&h.value?h.value:A.value?El(A.value):WC(e.target,i)||s.value),k=F(()=>Array.isArray(I.value)?void 0:I.value);let x;return Re(()=>!!e.activator,C=>{C&&Pt?(x=Ml(),x.run(()=>{sL(e,i,{activatorEl:s,activatorEvents:v})})):x&&x.stop()},{flush:"post",immediate:!0}),In(()=>{x==null||x.stop()}),{activatorEl:s,activatorRef:w,target:I,targetEl:k,targetRef:A,activatorEvents:v,contentEvents:p,scrimEvents:y}}function sL(e,t,n){let{activatorEl:r,activatorEvents:i}=n;Re(()=>e.activator,(l,u)=>{if(u&&l!==u){const f=o(u);f&&a(f)}l&&ht(()=>s())},{immediate:!0}),Re(()=>e.activatorProps,()=>{s()}),In(()=>{a()});function s(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&Y$(l,xe(i.value,u))}function a(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&J$(l,xe(i.value,u))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const u=WC(l,t);return r.value=(u==null?void 0:u.nodeType)===Node.ELEMENT_NODE?u:void 0,r.value}}function WC(e,t){var r,i;if(!e)return;let n;if(e==="parent"){let s=(i=(r=t==null?void 0:t.proxy)==null?void 0:r.$el)==null?void 0:i.parentNode;for(;s!=null&&s.hasAttribute("data-no-activator");)s=s.parentNode;n=s}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function YC(){if(!Pt)return Ae(!1);const{ssr:e}=da();if(e){const t=Ae(!1);return zt(()=>{t.value=!0}),t}else return Ae(!0)}const af=Z({eager:Boolean},"lazy");function cp(e,t){const n=Ae(!1),r=F(()=>n.value||e.eager||t.value);Re(t,()=>n.value=!0);function i(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:i}}function Ro(){const t=an("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const A1=Symbol.for("vuetify:stack"),Vo=bn([]);function aL(e,t,n){const r=an("useStack"),i=!n,s=it(A1,void 0),a=bn({activeChildren:new Set});At(A1,a);const o=Ae(+t.value);jr(e,()=>{var c;const f=(c=Vo.at(-1))==null?void 0:c[1];o.value=f?f+10:+t.value,i&&Vo.push([r.uid,o.value]),s==null||s.activeChildren.add(r.uid),In(()=>{if(i){const d=st(Vo).findIndex(h=>h[0]===r.uid);Vo.splice(d,1)}s==null||s.activeChildren.delete(r.uid)})});const l=Ae(!0);i&&Qt(()=>{var c;const f=((c=Vo.at(-1))==null?void 0:c[0])===r.uid;setTimeout(()=>l.value=f)});const u=F(()=>!a.activeChildren.size);return{globalTop:Vl(l),localTop:u,stackStyles:F(()=>({zIndex:o.value}))}}function oL(e){return{teleportTarget:F(()=>{const n=e.value;if(n===!0||!Pt)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null)return;let i=r.querySelector(":scope > .v-overlay-container");return i||(i=document.createElement("div"),i.className="v-overlay-container",r.appendChild(i)),i})}}function lL(){return!0}function JC(e,t,n){if(!e||XC(e,n)===!1)return!1;const r=qx(t);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===e.target)return!1;const i=(typeof n.value=="object"&&n.value.include||(()=>[]))();return i.push(t),!i.some(s=>s==null?void 0:s.contains(e.target))}function XC(e,t){return(typeof t.value=="object"&&t.value.closeConditional||lL)(e)}function uL(e,t,n){const r=typeof n.value=="function"?n.value:n.value.handler;t._clickOutside.lastMousedownWasOutside&&JC(e,t,n)&&setTimeout(()=>{XC(e,n)&&r&&r(e)},0)}function I1(e,t){const n=qx(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const ZC={mounted(e,t){const n=i=>uL(i,e,t),r=i=>{e._clickOutside.lastMousedownWasOutside=JC(i,e,t)};I1(e,i=>{i.addEventListener("click",n,!0),i.addEventListener("mousedown",r,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:r}},unmounted(e,t){e._clickOutside&&(I1(e,n=>{var s;if(!n||!((s=e._clickOutside)!=null&&s[t.instance.$.uid]))return;const{onClick:r,onMousedown:i}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",i,!0)}),delete e._clickOutside[t.instance.$.uid])}};function cL(e){const{modelValue:t,color:n,...r}=e;return b(ii,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&b("div",xe({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},r),null)]})}const su=Z({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...rL(),...Ne(),...Kn(),...af(),...KB(),...ZB(),...dt(),...Ui()},"VOverlay"),oi=ge()({name:"VOverlay",directives:{ClickOutside:ZC},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...su()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:r,emit:i}=t;const s=Ke(e,"modelValue"),a=F({get:()=>s.value,set:ee=>{ee&&e.disabled||(s.value=ee)}}),{teleportTarget:o}=oL(F(()=>e.attach||e.contained)),{themeClasses:l}=xt(e),{rtlClasses:u,isRtl:f}=Cn(),{hasContent:c,onAfterLeave:d}=cp(e,a),h=Ot(F(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:g,localTop:v,stackStyles:p}=aL(a,he(e,"zIndex"),e._disableGlobalStack),{activatorEl:y,activatorRef:w,target:A,targetEl:I,targetRef:k,activatorEvents:x,contentEvents:C,scrimEvents:m}=iL(e,{isActive:a,isTop:v}),{dimensionStyles:_}=Gn(e),T=YC(),{scopeId:E}=Ro();Re(()=>e.disabled,ee=>{ee&&(a.value=!1)});const R=ne(),D=ne(),{contentStyles:$,updateLocation:M}=GB(e,{isRtl:f,contentEl:D,target:A,isActive:a});QB(e,{root:R,contentEl:D,targetEl:I,isActive:a,updateLocation:M});function O(ee){i("click:outside",ee),e.persistent?Q():a.value=!1}function L(){return a.value&&g.value}Pt&&Re(a,ee=>{ee?window.addEventListener("keydown",W):window.removeEventListener("keydown",W)},{immediate:!0});function W(ee){var ye,we;ee.key==="Escape"&&g.value&&(e.persistent?Q():(a.value=!1,(ye=D.value)!=null&&ye.contains(document.activeElement)&&((we=y.value)==null||we.focus())))}const te=fC();jr(()=>e.closeOnBack,()=>{XV(te,ee=>{g.value&&a.value?(ee(!1),e.persistent?Q():a.value=!1):ee()})});const ie=ne();Re(()=>a.value&&(e.absolute||e.contained)&&o.value==null,ee=>{if(ee){const ye=Wm(R.value);ye&&ye!==document.scrollingElement&&(ie.value=ye.scrollTop)}});function Q(){e.noClickAnimation||D.value&&Ls(D.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Al})}return _e(()=>{var ee;return b(Fe,null,[(ee=n.activator)==null?void 0:ee.call(n,{isActive:a.value,props:xe({ref:w,targetRef:k},x.value,e.activatorProps)}),T.value&&c.value&&b(pA,{disabled:!o.value,to:o.value},{default:()=>[b("div",xe({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":a.value,"v-overlay--contained":e.contained},l.value,u.value,e.class],style:[p.value,{top:De(ie.value)},e.style],ref:R},E,r),[b(cL,xe({color:h,modelValue:a.value&&!!e.scrim},m.value),null),b(Tr,{appear:!0,persisted:!0,transition:e.transition,target:A.value,onAfterLeave:()=>{d(),i("afterLeave")}},{default:()=>{var ye;return[qt(b("div",xe({ref:D,class:["v-overlay__content",e.contentClass],style:[_.value,$.value]},C.value,e.contentProps),[(ye=n.default)==null?void 0:ye.call(n,{isActive:a})]),[[ci,a.value],[nr("click-outside"),{handler:O,closeConditional:L,include:()=>[y.value]}]])]}})])]})])}),{activatorEl:y,target:A,animateClick:Q,contentEl:D,globalTop:g,localTop:v,updateLocation:M}}}),_h=Symbol("Forwarded refs");function wh(e,t){let n=e;for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e[_h]=n,new Proxy(e,{get(i,s){if(Reflect.has(i,s))return Reflect.get(i,s);if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const a of n)if(a.value&&Reflect.has(a.value,s)){const o=Reflect.get(a.value,s);return typeof o=="function"?o.bind(a.value):o}}},has(i,s){if(Reflect.has(i,s))return!0;if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const a of n)if(a.value&&Reflect.has(a.value,s))return!0;return!1},set(i,s,a){if(Reflect.has(i,s))return Reflect.set(i,s,a);if(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,s))return Reflect.set(o.value,s,a);return!1},getOwnPropertyDescriptor(i,s){var o;const a=Reflect.getOwnPropertyDescriptor(i,s);if(a)return a;if(!(typeof s=="symbol"||s.startsWith("$")||s.startsWith("__"))){for(const l of n){if(!l.value)continue;const u=wh(l.value,s)??("_"in l.value?wh((o=l.value._)==null?void 0:o.setupState,s):void 0);if(u)return u}for(const l of n){const u=l.value&&l.value[_h];if(!u)continue;const f=u.slice();for(;f.length;){const c=f.shift(),d=wh(c.value,s);if(d)return d;const h=c.value&&c.value[_h];h&&f.push(...h)}}}}})}const dL=Z({id:String,...gn(su({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Jd}}),["absolute"])},"VMenu"),of=ge()({name:"VMenu",props:dL(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),{scopeId:i}=Ro(),s=Ln(),a=F(()=>e.id||`v-menu-${s}`),o=ne(),l=it(kg,null),u=Ae(0);At(kg,{register(){++u.value},unregister(){--u.value},closeParents(){setTimeout(()=>{u.value||(r.value=!1,l==null||l.closeParents())},40)}});async function f(v){var w,A,I;const p=v.relatedTarget,y=v.target;await ht(),r.value&&p!==y&&((w=o.value)!=null&&w.contentEl)&&((A=o.value)!=null&&A.globalTop)&&![document,o.value.contentEl].includes(y)&&!o.value.contentEl.contains(y)&&((I=Tl(o.value.contentEl)[0])==null||I.focus())}Re(r,v=>{v?(l==null||l.register(),document.addEventListener("focusin",f,{once:!0})):(l==null||l.unregister(),document.removeEventListener("focusin",f))});function c(){l==null||l.closeParents()}function d(v){var p,y,w;e.disabled||v.key==="Tab"&&(Ix(Tl((p=o.value)==null?void 0:p.contentEl,!1),v.shiftKey?"prev":"next",I=>I.tabIndex>=0)||(r.value=!1,(w=(y=o.value)==null?void 0:y.activatorEl)==null||w.focus()))}function h(v){var y;if(e.disabled)return;const p=(y=o.value)==null?void 0:y.contentEl;p&&r.value?v.key==="ArrowDown"?(v.preventDefault(),ro(p,"next")):v.key==="ArrowUp"&&(v.preventDefault(),ro(p,"prev")):["ArrowDown","ArrowUp"].includes(v.key)&&(r.value=!0,v.preventDefault(),setTimeout(()=>setTimeout(()=>h(v))))}const g=F(()=>xe({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":a.value,onKeydown:h},e.activatorProps));return _e(()=>{const v=oi.filterProps(e);return b(oi,xe({ref:o,class:["v-menu",e.class],style:e.style},v,{modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,absolute:!0,activatorProps:g.value,"onClick:outside":c,onKeydown:d},i),{activator:n.activator,default:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];return b(ft,{root:"VMenu"},{default:()=>{var A;return[(A=n.default)==null?void 0:A.call(n,...y)]}})}})}),Wr({id:a,ΨopenChildren:u},o)}}),fL=Z({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ne(),...Ui({transition:{component:tp}})},"VCounter"),lf=ge()({name:"VCounter",functional:!0,props:fL(),setup(e,t){let{slots:n}=t;const r=F(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return _e(()=>b(Tr,{transition:e.transition},{default:()=>[qt(b("div",{class:["v-counter",e.class],style:e.style},[n.default?n.default({counter:r.value,max:e.max,value:e.value}):r.value]),[[ci,e.active]])]})),{}}}),hL=Z({floating:Boolean,...Ne()},"VFieldLabel"),qo=ge()({name:"VFieldLabel",props:hL(),setup(e,t){let{slots:n}=t;return _e(()=>b(Io,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},n)),{}}}),gL=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],au=Z({appendInnerIcon:tt,bgColor:String,clearable:Boolean,clearIcon:{type:tt,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:tt,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>gL.includes(e)},"onClick:clear":er(),"onClick:appendInner":er(),"onClick:prependInner":er(),...Ne(),...ef(),...Ht(),...dt()},"VField"),ko=ge()({name:"VField",inheritAttrs:!1,props:{id:String,...ru(),...au()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{themeClasses:s}=xt(e),{loaderClasses:a}=eu(e),{focusClasses:o,isFocused:l,focus:u,blur:f}=Gi(e),{InputIcon:c}=EC(e),{roundedClasses:d}=Kt(e),{rtlClasses:h}=Cn(),g=F(()=>e.dirty||e.active),v=F(()=>!e.singleLine&&!!(e.label||i.label)),p=Ln(),y=F(()=>e.id||`input-${p}`),w=F(()=>`${y.value}-messages`),A=ne(),I=ne(),k=ne(),x=F(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:C,backgroundColorStyles:m}=Ot(he(e,"bgColor")),{textColorClasses:_,textColorStyles:T}=Mn(F(()=>e.error||e.disabled?void 0:g.value&&l.value?e.color:e.baseColor));Re(g,D=>{if(v.value){const $=A.value.$el,M=I.value.$el;requestAnimationFrame(()=>{const O=Um($),L=M.getBoundingClientRect(),W=L.x-O.x,te=L.y-O.y-(O.height/2-L.height/2),ie=L.width/.75,Q=Math.abs(ie-O.width)>1?{maxWidth:De(ie)}:void 0,ee=getComputedStyle($),ye=getComputedStyle(M),we=parseFloat(ee.transitionDuration)*1e3||150,$e=parseFloat(ye.getPropertyValue("--v-field-label-scale")),le=ye.getPropertyValue("color");$.style.visibility="visible",M.style.visibility="hidden",Ls($,{transform:`translate(${W}px, ${te}px) scale(${$e})`,color:le,...Q},{duration:we,easing:Al,direction:D?"normal":"reverse"}).finished.then(()=>{$.style.removeProperty("visibility"),M.style.removeProperty("visibility")})})}},{flush:"post"});const E=F(()=>({isActive:g,isFocused:l,controlRef:k,blur:f,focus:u}));function R(D){D.target!==document.activeElement&&D.preventDefault()}return _e(()=>{var W,te,ie;const D=e.variant==="outlined",$=i["prepend-inner"]||e.prependInnerIcon,M=!!(e.clearable||i.clear),O=!!(i["append-inner"]||e.appendInnerIcon||M),L=i.label?i.label({...E.value,label:e.label,props:{for:y.value}}):e.label;return b("div",xe({class:["v-field",{"v-field--active":g.value,"v-field--appended":O,"v-field--center-affix":e.centerAffix??!x.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":$,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!L,[`v-field--variant-${e.variant}`]:!0},s.value,C.value,o.value,a.value,d.value,h.value,e.class],style:[m.value,e.style],onClick:R},n),[b("div",{class:"v-field__overlay"},null),b(tf,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:i.loader}),$&&b("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&b(c,{key:"prepend-icon",name:"prependInner"},null),(W=i["prepend-inner"])==null?void 0:W.call(i,E.value)]),b("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&v.value&&b(qo,{key:"floating-label",ref:I,class:[_.value],floating:!0,for:y.value,style:T.value},{default:()=>[L]}),b(qo,{ref:A,for:y.value},{default:()=>[L]}),(te=i.default)==null?void 0:te.call(i,{...E.value,props:{id:y.value,class:"v-field__input","aria-describedby":w.value},focus:u,blur:f})]),M&&b(np,{key:"clear"},{default:()=>[qt(b("div",{class:"v-field__clearable",onMousedown:Q=>{Q.preventDefault(),Q.stopPropagation()}},[i.clear?i.clear():b(c,{name:"clear"},null)]),[[ci,e.dirty]])]}),O&&b("div",{key:"append",class:"v-field__append-inner"},[(ie=i["append-inner"])==null?void 0:ie.call(i,E.value),e.appendInnerIcon&&b(c,{key:"append-icon",name:"appendInner"},null)]),b("div",{class:["v-field__outline",_.value],style:T.value},[D&&b(Fe,null,[b("div",{class:"v-field__outline__start"},null),v.value&&b("div",{class:"v-field__outline__notch"},[b(qo,{ref:I,floating:!0,for:y.value},{default:()=>[L]})]),b("div",{class:"v-field__outline__end"},null)]),x.value&&v.value&&b(qo,{ref:I,floating:!0,for:y.value},{default:()=>[L]})])])}),{controlRef:k}}});function dp(e){const t=Object.keys(ko.props).filter(n=>!qd(n)&&n!=="class"&&n!=="style");return xx(e,t)}const vL=["color","file","time","date","datetime-local","week","month"],uf=Z({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Wi(),...au()},"VTextField"),ps=ge()({name:"VTextField",directives:{Intersect:Ql},inheritAttrs:!1,props:uf(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const s=Ke(e,"modelValue"),{isFocused:a,focus:o,blur:l}=Gi(e),u=F(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:(s.value??"").toString().length),f=F(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),c=F(()=>["plain","underlined"].includes(e.variant));function d(x,C){var m,_;!e.autofocus||!x||(_=(m=C[0].target)==null?void 0:m.focus)==null||_.call(m)}const h=ne(),g=ne(),v=ne(),p=F(()=>vL.includes(e.type)||e.persistentPlaceholder||a.value||e.active);function y(){var x;v.value!==document.activeElement&&((x=v.value)==null||x.focus()),a.value||o()}function w(x){r("mousedown:control",x),x.target!==v.value&&(y(),x.preventDefault())}function A(x){y(),r("click:control",x)}function I(x){x.stopPropagation(),y(),ht(()=>{s.value=null,qm(e["onClick:clear"],x)})}function k(x){var m;const C=x.target;if(s.value=C.value,(m=e.modelModifiers)!=null&&m.trim&&["text","search","password","tel","url"].includes(e.type)){const _=[C.selectionStart,C.selectionEnd];ht(()=>{C.selectionStart=_[0],C.selectionEnd=_[1]})}}return _e(()=>{const x=!!(i.counter||e.counter!==!1&&e.counter!=null),C=!!(x||i.details),[m,_]=_s(n),{modelValue:T,...E}=Rn.filterProps(e),R=dp(e);return b(Rn,xe({ref:h,modelValue:s.value,"onUpdate:modelValue":D=>s.value=D,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":c.value},e.class],style:e.style},m,E,{centerAffix:!c.value,focused:a.value}),{...i,default:D=>{let{id:$,isDisabled:M,isDirty:O,isReadonly:L,isValid:W}=D;return b(ko,xe({ref:g,onMousedown:w,onClick:A,"onClick:clear":I,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},R,{id:$.value,active:p.value||O.value,dirty:O.value||e.dirty,disabled:M.value,focused:a.value,error:W.value===!1}),{...i,default:te=>{let{props:{class:ie,...Q}}=te;const ee=qt(b("input",xe({ref:v,value:s.value,onInput:k,autofocus:e.autofocus,readonly:L.value,disabled:M.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:y,onBlur:l},Q,_),null),[[nr("intersect"),{handler:d},null,{once:!0}]]);return b(Fe,null,[e.prefix&&b("span",{class:"v-text-field__prefix"},[b("span",{class:"v-text-field__prefix__text"},[e.prefix])]),i.default?b("div",{class:ie,"data-no-activator":""},[i.default(),ee]):Di(ee,{class:ie}),e.suffix&&b("span",{class:"v-text-field__suffix"},[b("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:C?D=>{var $;return b(Fe,null,[($=i.details)==null?void 0:$.call(i,D),x&&b(Fe,null,[b("span",null,null),b(lf,{active:e.persistentCounter||a.value,value:u.value,max:f.value},i.counter)])])}:void 0})}),Wr({},h,g,v)}}),mL=Z({renderless:Boolean,...Ne()},"VVirtualScrollItem"),QC=ge()({name:"VVirtualScrollItem",inheritAttrs:!1,props:mL(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{resizeRef:s,contentRect:a}=ai(void 0,"border");Re(()=>{var o;return(o=a.value)==null?void 0:o.height},o=>{o!=null&&r("update:height",o)}),_e(()=>{var o,l;return e.renderless?b(Fe,null,[(o=i.default)==null?void 0:o.call(i,{itemRef:s})]):b("div",xe({ref:s,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(l=i.default)==null?void 0:l.call(i)])})}}),pL=-1,yL=1,xh=100,eE=Z({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function tE(e,t){const n=da(),r=Ae(0);Qt(()=>{r.value=parseFloat(e.itemHeight||0)});const i=Ae(0),s=Ae(Math.ceil((parseInt(e.height)||n.height.value)/(r.value||16))||1),a=Ae(0),o=Ae(0),l=ne(),u=ne();let f=0;const{resizeRef:c,contentRect:d}=ai();Qt(()=>{c.value=l.value});const h=F(()=>{var te;return l.value===document.documentElement?n.height.value:((te=d.value)==null?void 0:te.height)||parseInt(e.height)||0}),g=F(()=>!!(l.value&&u.value&&h.value&&r.value));let v=Array.from({length:t.value.length}),p=Array.from({length:t.value.length});const y=Ae(0);let w=-1;function A(te){return v[te]||r.value}const I=U$(()=>{const te=performance.now();p[0]=0;const ie=t.value.length;for(let Q=1;Q<=ie-1;Q++)p[Q]=(p[Q-1]||0)+A(Q-1);y.value=Math.max(y.value,performance.now()-te)},y),k=Re(g,te=>{te&&(k(),f=u.value.offsetTop,I.immediate(),M(),~w&&ht(()=>{Pt&&window.requestAnimationFrame(()=>{L(w),w=-1})}))});Re(h,(te,ie)=>{ie&&M()}),In(()=>{I.clear()});function x(te,ie){const Q=v[te],ee=r.value;r.value=ee?Math.min(r.value,ie):ie,(Q!==ie||ee!==r.value)&&(v[te]=ie,I())}function C(te){return te=rn(te,0,t.value.length-1),p[te]||0}function m(te){return bL(p,te)}let _=0,T=0,E=0;function R(){if(!l.value||!u.value)return;const te=l.value.scrollTop,ie=performance.now();ie-E>500?(T=Math.sign(te-_),f=u.value.offsetTop):T=te-_,_=te,E=ie,M()}function D(){!l.value||!u.value||(T=0,E=0,M())}let $=-1;function M(){cancelAnimationFrame($),$=requestAnimationFrame(O)}function O(){if(!l.value||!h.value)return;const te=_-f,ie=Math.sign(T),Q=Math.max(0,te-xh),ee=rn(m(Q),0,t.value.length),ye=te+h.value+xh,we=rn(m(ye)+1,ee+1,t.value.length);if((ie!==pL||ee<i.value)&&(ie!==yL||we>s.value)){const $e=C(i.value)-C(ee),le=C(we)-C(s.value);Math.max($e,le)>xh?(i.value=ee,s.value=we):(ee<=0&&(i.value=ee),we>=t.value.length&&(s.value=we))}a.value=C(i.value),o.value=C(t.value.length)-C(s.value)}function L(te){const ie=C(te);!l.value||te&&!ie?w=te:l.value.scrollTop=ie}const W=F(()=>t.value.slice(i.value,s.value).map((te,ie)=>({raw:te,index:ie+i.value})));return Re(t,()=>{v=Array.from({length:t.value.length}),p=Array.from({length:t.value.length}),I.immediate(),M()},{deep:!0}),{containerRef:l,markerRef:u,computedItems:W,paddingTop:a,paddingBottom:o,scrollToIndex:L,handleScroll:R,handleScrollend:D,handleItemResize:x}}function bL(e,t){let n=e.length-1,r=0,i=0,s=null,a=-1;if(e[n]<t)return n;for(;r<=n;)if(i=r+n>>1,s=e[i],s>t)n=i-1;else if(s<t)a=i,r=i+1;else return s===t?i:r;return a}const SL=Z({items:{type:Array,default:()=>[]},renderless:Boolean,...eE(),...Ne(),...Kn()},"VVirtualScroll"),cf=ge()({name:"VVirtualScroll",props:SL(),setup(e,t){let{slots:n}=t;const r=an("VVirtualScroll"),{dimensionStyles:i}=Gn(e),{containerRef:s,markerRef:a,handleScroll:o,handleScrollend:l,handleItemResize:u,scrollToIndex:f,paddingTop:c,paddingBottom:d,computedItems:h}=tE(e,he(e,"items"));return jr(()=>e.renderless,()=>{function g(){var y,w;const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";s.value===document.documentElement?(document[p]("scroll",o,{passive:!0}),document[p]("scrollend",l)):((y=s.value)==null||y[p]("scroll",o,{passive:!0}),(w=s.value)==null||w[p]("scrollend",l))}zt(()=>{s.value=Wm(r.vnode.el,!0),g(!0)}),In(g)}),_e(()=>{const g=h.value.map(v=>b(QC,{key:v.index,renderless:e.renderless,"onUpdate:height":p=>u(v.index,p)},{default:p=>{var y;return(y=n.default)==null?void 0:y.call(n,{item:v.raw,index:v.index,...p})}}));return e.renderless?b(Fe,null,[b("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:De(c.value)}},null),g,b("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:De(d.value)}},null)]):b("div",{ref:s,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:l,style:[i.value,e.style]},[b("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:De(c.value),paddingBottom:De(d.value)}},[g])])}),{scrollToIndex:f}}});function fp(e,t){const n=Ae(!1);let r;function i(o){cancelAnimationFrame(r),n.value=!0,r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{n.value=!1})})}async function s(){await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>{if(n.value){const l=Re(n,()=>{l(),o()})}else o()})}async function a(o){var f,c;if(o.key==="Tab"&&((f=t.value)==null||f.focus()),!["PageDown","PageUp","Home","End"].includes(o.key))return;const l=(c=e.value)==null?void 0:c.$el;if(!l)return;(o.key==="Home"||o.key==="End")&&l.scrollTo({top:o.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await s();const u=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(o.key==="PageDown"||o.key==="Home"){const d=l.getBoundingClientRect().top;for(const h of u)if(h.getBoundingClientRect().top>=d){h.focus();break}}else{const d=l.getBoundingClientRect().bottom;for(const h of[...u].reverse())if(h.getBoundingClientRect().bottom<=d){h.focus();break}}}return{onListScroll:i,onListKeydown:a}}const hp=Z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:tt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...HC({itemChildren:!1})},"Select"),_L=Z({...hp(),...gn(uf({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...Ui({transition:{component:Jd}})},"VSelect"),nE=ge()({name:"VSelect",props:_L(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:r}=on(),i=ne(),s=ne(),a=ne(),o=Ke(e,"menu"),l=F({get:()=>o.value,set:O=>{var L;o.value&&!O&&((L=s.value)!=null&&L.ΨopenChildren)||(o.value=O)}}),{items:u,transformIn:f,transformOut:c}=up(e),d=Ke(e,"modelValue",[],O=>f(O===null?[null]:Wt(O)),O=>{const L=c(O);return e.multiple?L:L[0]??null}),h=rf(),g=F(()=>d.value.map(O=>O.value)),v=Ae(!1),p=F(()=>l.value?e.closeText:e.openText);let y="",w;const A=F(()=>e.hideSelected?u.value.filter(O=>!d.value.some(L=>L===O)):u.value),I=F(()=>e.hideNoData&&!u.value.length||e.readonly||(h==null?void 0:h.isReadonly.value)),k=ne(),{onListScroll:x,onListKeydown:C}=fp(k,i);function m(O){e.openOnClear&&(l.value=!0)}function _(){I.value||(l.value=!l.value)}function T(O){var Q,ee;if(!O.key||e.readonly||h!=null&&h.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(O.key)&&O.preventDefault(),["Enter","ArrowDown"," "].includes(O.key)&&(l.value=!0),["Escape","Tab"].includes(O.key)&&(l.value=!1),O.key==="Home"?(Q=k.value)==null||Q.focus("first"):O.key==="End"&&((ee=k.value)==null||ee.focus("last"));const L=1e3;function W(ye){const we=ye.key.length===1,$e=!ye.ctrlKey&&!ye.metaKey&&!ye.altKey;return we&&$e}if(e.multiple||!W(O))return;const te=performance.now();te-w>L&&(y=""),y+=O.key.toLowerCase(),w=te;const ie=u.value.find(ye=>ye.title.toLowerCase().startsWith(y));ie!==void 0&&(d.value=[ie])}function E(O){if(e.multiple){const L=d.value.findIndex(W=>e.valueComparator(W.value,O.value));if(L===-1)d.value=[...d.value,O];else{const W=[...d.value];W.splice(L,1),d.value=W}}else d.value=[O],l.value=!1}function R(O){var L;(L=k.value)!=null&&L.$el.contains(O.relatedTarget)||(l.value=!1)}function D(){var O;v.value&&((O=i.value)==null||O.focus())}function $(O){v.value=!0}function M(O){if(O==null)d.value=[];else if(io(i.value,":autofill")||io(i.value,":-webkit-autofill")){const L=u.value.find(W=>W.title===O);L&&E(L)}else i.value&&(i.value.value="")}return Re(l,()=>{if(!e.hideSelected&&l.value&&d.value.length){const O=A.value.findIndex(L=>d.value.some(W=>e.valueComparator(W.value,L.value)));Pt&&window.requestAnimationFrame(()=>{var L;O>=0&&((L=a.value)==null||L.scrollToIndex(O))})}}),_e(()=>{const O=!!(e.chips||n.chip),L=!!(!e.hideNoData||A.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),W=d.value.length>0,te=ps.filterProps(e),ie=W||!v.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return b(ps,xe({ref:i},te,{modelValue:d.value.map(Q=>Q.props.value).join(", "),"onUpdate:modelValue":M,focused:v.value,"onUpdate:focused":Q=>v.value=Q,validationValue:d.externalValue,counterValue:d.value.length,dirty:W,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:ie,"onClick:clear":m,"onMousedown:control":_,onBlur:R,onKeydown:T,"aria-label":r(p.value),title:r(p.value)}),{...n,default:()=>b(Fe,null,[b(of,xe({ref:s,modelValue:l.value,"onUpdate:modelValue":Q=>l.value=Q,activator:"parent",contentClass:"v-select__content",disabled:I.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:D},e.menuProps),{default:()=>[L&&b(sf,{ref:k,selected:g.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:Q=>Q.preventDefault(),onKeydown:C,onFocusin:$,onScrollPassive:x,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var Q,ee,ye;return[(Q=n["prepend-item"])==null?void 0:Q.call(n),!A.value.length&&!e.hideNoData&&(((ee=n["no-data"])==null?void 0:ee.call(n))??b(Mi,{title:r(e.noDataText)},null)),b(cf,{ref:a,renderless:!0,items:A.value},{default:we=>{var z;let{item:$e,index:le,itemRef:B}=we;const K=xe($e.props,{ref:B,key:le,onClick:()=>E($e)});return((z=n.item)==null?void 0:z.call(n,{item:$e,index:le,props:K}))??b(Mi,K,{prepend:se=>{let{isSelected:Ee}=se;return b(Fe,null,[e.multiple&&!e.hideSelected?b(Ni,{key:$e.value,modelValue:Ee,ripple:!1,tabindex:"-1"},null):void 0,$e.props.prependIcon&&b(Tt,{icon:$e.props.prependIcon},null)])}})}}),(ye=n["append-item"])==null?void 0:ye.call(n)]}})]}),d.value.map((Q,ee)=>{function ye(B){B.stopPropagation(),B.preventDefault(),E(Q)}const we={"onClick:close":ye,onMousedown(B){B.preventDefault(),B.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},$e=O?!!n.chip:!!n.selection,le=$e?Ud(O?n.chip({item:Q,index:ee,props:we}):n.selection({item:Q,index:ee})):void 0;if(!($e&&!le))return b("div",{key:Q.value,class:"v-select__selection"},[O?n.chip?b(ft,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:Q.title}}},{default:()=>[le]}):b(iu,xe({key:"chip",closable:e.closableChips,size:"small",text:Q.title,disabled:Q.props.disabled},we),null):le??b("span",{class:"v-select__selection-text"},[Q.title,e.multiple&&ee<d.value.length-1&&b("span",{class:"v-select__selection-comma"},[Ge(",")])])])})]),"append-inner":function(){var we;for(var Q=arguments.length,ee=new Array(Q),ye=0;ye<Q;ye++)ee[ye]=arguments[ye];return b(Fe,null,[(we=n["append-inner"])==null?void 0:we.call(n,...ee),e.menuIcon?b(Tt,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Wr({isFocused:v,menu:l,select:E},i)}}),wL=(e,t,n)=>e==null||t==null?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),ou=Z({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function xL(e,t,n){var o;const r=[],i=(n==null?void 0:n.default)??wL,s=n!=null&&n.filterKeys?Wt(n.filterKeys):!1,a=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return r;e:for(let l=0;l<e.length;l++){const[u,f=u]=Wt(e[l]),c={},d={};let h=-1;if(t&&!(n!=null&&n.noFilter)){if(typeof u=="object"){const p=s||Object.keys(f);for(const y of p){const w=Sn(f,y,f),A=(o=n==null?void 0:n.customKeyFilter)==null?void 0:o[y];if(h=A?A(w,t,u):i(w,t,u),h!==-1&&h!==!1)A?c[y]=h:d[y]=h;else if((n==null?void 0:n.filterMode)==="every")continue e}}else h=i(u,t,u),h!==-1&&h!==!1&&(d.title=h);const g=Object.keys(d).length,v=Object.keys(c).length;if(!g&&!v||(n==null?void 0:n.filterMode)==="union"&&v!==a&&!g||(n==null?void 0:n.filterMode)==="intersection"&&(v!==a||!g))continue}r.push({index:l,matches:{...d,...c}})}return r}function lu(e,t,n,r){const i=ne([]),s=ne(new Map),a=F(()=>r!=null&&r.transform?Se(t).map(l=>[l,r.transform(l)]):Se(t));Qt(()=>{const l=typeof n=="function"?n():Se(n),u=typeof l!="string"&&typeof l!="number"?"":String(l),f=xL(a.value,u,{customKeyFilter:{...e.customKeyFilter,...Se(r==null?void 0:r.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),c=Se(t),d=[],h=new Map;f.forEach(g=>{let{index:v,matches:p}=g;const y=c[v];d.push(y),h.set(y.value,p)}),i.value=d,s.value=h});function o(l){return s.value.get(l.value)}return{filteredItems:i,filteredMatches:s,getMatches:o}}function CL(e,t,n){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?b(Fe,null,[b("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),b("span",{class:"v-autocomplete__mask"},[e.substr(t,n)]),b("span",{class:"v-autocomplete__unmask"},[e.substr(t+n)])]):e}const EL=Z({autoSelectFirst:{type:[Boolean,String]},search:String,...ou({filterKeys:["title"]}),...hp(),...gn(uf({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ui({transition:!1})},"VAutocomplete"),TL=ge()({name:"VAutocomplete",props:EL(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:r}=on(),i=ne(),s=Ae(!1),a=Ae(!0),o=Ae(!1),l=ne(),u=ne(),f=Ke(e,"menu"),c=F({get:()=>f.value,set:K=>{var z;f.value&&!K&&((z=l.value)!=null&&z.ΨopenChildren)||(f.value=K)}}),d=Ae(-1),h=F(()=>{var K;return(K=i.value)==null?void 0:K.color}),g=F(()=>c.value?e.closeText:e.openText),{items:v,transformIn:p,transformOut:y}=up(e),{textColorClasses:w,textColorStyles:A}=Mn(h),I=Ke(e,"search",""),k=Ke(e,"modelValue",[],K=>p(K===null?[null]:Wt(K)),K=>{const z=y(K);return e.multiple?z:z[0]??null}),x=rf(),{filteredItems:C,getMatches:m}=lu(e,v,()=>a.value?"":I.value),_=F(()=>e.hideSelected?C.value.filter(K=>!k.value.some(z=>z.value===K.value)):C.value),T=F(()=>k.value.map(K=>K.props.value)),E=F(()=>{var z;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&I.value===((z=_.value[0])==null?void 0:z.title))&&_.value.length>0&&!a.value&&!o.value}),R=F(()=>e.hideNoData&&!v.value.length||e.readonly||(x==null?void 0:x.isReadonly.value)),D=ne(),{onListScroll:$,onListKeydown:M}=fp(D,i);function O(K){e.openOnClear&&(c.value=!0),I.value=""}function L(){R.value||(c.value=!0)}function W(K){R.value||(s.value&&(K.preventDefault(),K.stopPropagation()),c.value=!c.value)}function te(K){var Ee,V,H;if(e.readonly||x!=null&&x.isReadonly.value)return;const z=i.value.selectionStart,se=k.value.length;if((d.value>-1||["Enter","ArrowDown","ArrowUp"].includes(K.key))&&K.preventDefault(),["Enter","ArrowDown"].includes(K.key)&&(c.value=!0),["Escape"].includes(K.key)&&(c.value=!1),E.value&&["Enter","Tab"].includes(K.key)&&B(_.value[0]),K.key==="ArrowDown"&&E.value&&((Ee=D.value)==null||Ee.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(K.key)){if(d.value<0){K.key==="Backspace"&&!I.value&&(d.value=se-1);return}const G=d.value,re=k.value[d.value];re&&!re.props.disabled&&B(re),d.value=G>=se-1?se-2:G}if(K.key==="ArrowLeft"){if(d.value<0&&z>0)return;const G=d.value>-1?d.value-1:se-1;k.value[G]?d.value=G:(d.value=-1,i.value.setSelectionRange((V=I.value)==null?void 0:V.length,(H=I.value)==null?void 0:H.length))}if(K.key==="ArrowRight"){if(d.value<0)return;const G=d.value+1;k.value[G]?d.value=G:(d.value=-1,i.value.setSelectionRange(0,0))}}}function ie(K){I.value=K.target.value}function Q(K){if(io(i.value,":autofill")||io(i.value,":-webkit-autofill")){const z=v.value.find(se=>se.title===K.target.value);z&&B(z)}}function ee(){var K;s.value&&(a.value=!0,(K=i.value)==null||K.focus())}function ye(K){s.value=!0,setTimeout(()=>{o.value=!0})}function we(K){o.value=!1}function $e(K){(K==null||K===""&&!e.multiple)&&(k.value=[])}const le=Ae(!1);function B(K){if(e.multiple){const z=k.value.findIndex(se=>e.valueComparator(se.value,K.value));if(z===-1)k.value=[...k.value,K];else{const se=[...k.value];se.splice(z,1),k.value=se}}else k.value=[K],le.value=!0,I.value=K.title,c.value=!1,a.value=!0,ht(()=>le.value=!1)}return Re(s,(K,z)=>{var se;K!==z&&(K?(le.value=!0,I.value=e.multiple?"":String(((se=k.value.at(-1))==null?void 0:se.props.title)??""),a.value=!0,ht(()=>le.value=!1)):(!e.multiple&&!I.value?k.value=[]:E.value&&!o.value&&!k.value.some(Ee=>{let{value:V}=Ee;return V===_.value[0].value})&&B(_.value[0]),c.value=!1,I.value="",d.value=-1))}),Re(I,K=>{!s.value||le.value||(K&&(c.value=!0),a.value=!K)}),Re(c,()=>{if(!e.hideSelected&&c.value&&k.value.length){const K=_.value.findIndex(z=>k.value.some(se=>z.value===se.value));Pt&&window.requestAnimationFrame(()=>{var z;K>=0&&((z=u.value)==null||z.scrollToIndex(K))})}}),_e(()=>{const K=!!(e.chips||n.chip),z=!!(!e.hideNoData||_.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),se=k.value.length>0,Ee=ps.filterProps(e);return b(ps,xe({ref:i},Ee,{modelValue:I.value,"onUpdate:modelValue":$e,focused:s.value,"onUpdate:focused":V=>s.value=V,validationValue:k.externalValue,counterValue:k.value.length,dirty:se,onInput:ie,onChange:Q,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":c.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!n.selection,"v-autocomplete--selecting-index":d.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:se?void 0:e.placeholder,"onClick:clear":O,"onMousedown:control":L,onKeydown:te}),{...n,default:()=>b(Fe,null,[b(of,xe({ref:l,modelValue:c.value,"onUpdate:modelValue":V=>c.value=V,activator:"parent",contentClass:"v-autocomplete__content",disabled:R.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ee},e.menuProps),{default:()=>[z&&b(sf,{ref:D,selected:T.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:V=>V.preventDefault(),onKeydown:M,onFocusin:ye,onFocusout:we,onScrollPassive:$,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var V,H,G;return[(V=n["prepend-item"])==null?void 0:V.call(n),!_.value.length&&!e.hideNoData&&(((H=n["no-data"])==null?void 0:H.call(n))??b(Mi,{title:r(e.noDataText)},null)),b(cf,{ref:u,renderless:!0,items:_.value},{default:re=>{var P;let{item:ce,index:me,itemRef:Ce}=re;const ve=xe(ce.props,{ref:Ce,key:me,active:E.value&&me===0?!0:void 0,onClick:()=>B(ce)});return((P=n.item)==null?void 0:P.call(n,{item:ce,index:me,props:ve}))??b(Mi,ve,{prepend:N=>{let{isSelected:j}=N;return b(Fe,null,[e.multiple&&!e.hideSelected?b(Ni,{key:ce.value,modelValue:j,ripple:!1,tabindex:"-1"},null):void 0,ce.props.prependIcon&&b(Tt,{icon:ce.props.prependIcon},null)])},title:()=>{var N,j;return a.value?ce.title:CL(ce.title,(N=m(ce))==null?void 0:N.title,((j=I.value)==null?void 0:j.length)??0)}})}}),(G=n["append-item"])==null?void 0:G.call(n)]}})]}),k.value.map((V,H)=>{function G(Ce){Ce.stopPropagation(),Ce.preventDefault(),B(V)}const re={"onClick:close":G,onMousedown(Ce){Ce.preventDefault(),Ce.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ce=K?!!n.chip:!!n.selection,me=ce?Ud(K?n.chip({item:V,index:H,props:re}):n.selection({item:V,index:H})):void 0;if(!(ce&&!me))return b("div",{key:V.value,class:["v-autocomplete__selection",H===d.value&&["v-autocomplete__selection--selected",w.value]],style:H===d.value?A.value:{}},[K?n.chip?b(ft,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:V.title}}},{default:()=>[me]}):b(iu,xe({key:"chip",closable:e.closableChips,size:"small",text:V.title,disabled:V.props.disabled},re),null):me??b("span",{class:"v-autocomplete__selection-text"},[V.title,e.multiple&&H<k.value.length-1&&b("span",{class:"v-autocomplete__selection-comma"},[Ge(",")])])])})]),"append-inner":function(){var re;for(var V=arguments.length,H=new Array(V),G=0;G<V;G++)H[G]=arguments[G];return b(Fe,null,[(re=n["append-inner"])==null?void 0:re.call(n,...H),e.menuIcon?b(Tt,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:W,onClick:Rx,"aria-label":r(g.value),title:r(g.value)},null):void 0])}})}),Wr({isFocused:s,isPristine:a,menu:c,search:I,filteredItems:C,select:B},i)}}),AL=Z({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:tt,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ne(),...xs({location:"top end"}),...Ht(),...rt(),...dt(),...Ui({transition:"scale-rotate-transition"})},"VBadge"),IL=ge()({name:"VBadge",inheritAttrs:!1,props:AL(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:r}=Ot(he(e,"color")),{roundedClasses:i}=Kt(e),{t:s}=on(),{textColorClasses:a,textColorStyles:o}=Mn(he(e,"textColor")),{themeClasses:l}=Qx(),{locationStyles:u}=Cs(e,!0,f=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(f)?+(e.offsetY??0):["left","right"].includes(f)?+(e.offsetX??0):0));return _e(()=>{const f=Number(e.content),c=!e.max||isNaN(f)?e.content:f<=+e.max?f:`${e.max}+`,[d,h]=cg(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return b(e.tag,xe({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},h,{style:e.style}),{default:()=>{var g,v;return[b("div",{class:"v-badge__wrapper"},[(v=(g=t.slots).default)==null?void 0:v.call(g),b(Tr,{transition:e.transition},{default:()=>{var p,y;return[qt(b("span",xe({class:["v-badge__badge",l.value,n.value,i.value,a.value],style:[r.value,o.value,e.inline?{}:u.value],"aria-atomic":"true","aria-label":s(e.label,f),"aria-live":"polite",role:"status"},d),[e.dot?void 0:t.slots.badge?(y=(p=t.slots).badge)==null?void 0:y.call(p):e.icon?b(Tt,{icon:e.icon},null):c]),[[ci,e.modelValue]])]}})])]}})}),{}}}),RL=Z({color:String,density:String,...Ne()},"VBannerActions"),rE=ge()({name:"VBannerActions",props:RL(),setup(e,t){let{slots:n}=t;return Bt({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),_e(()=>{var r;return b("div",{class:["v-banner-actions",e.class],style:e.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),iE=gr("v-banner-text"),kL=Z({avatar:String,bgColor:String,color:String,icon:tt,lines:String,stacked:Boolean,sticky:Boolean,text:String,...mr(),...Ne(),...vn(),...Kn(),...Jm(),...ln(),...xs(),...To(),...Ht(),...rt(),...dt()},"VBanner"),PL=ge()({name:"VBanner",props:kL(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:i}=Ot(e,"bgColor"),{borderClasses:s}=Fr(e),{densityClasses:a}=Hn(e),{displayClasses:o,mobile:l}=da(e),{dimensionStyles:u}=Gn(e),{elevationClasses:f}=En(e),{locationStyles:c}=Cs(e),{positionClasses:d}=Ao(e),{roundedClasses:h}=Kt(e),{themeClasses:g}=xt(e),v=he(e,"color"),p=he(e,"density");Bt({VBannerActions:{color:v,density:p}}),_e(()=>{const y=!!(e.text||n.text),w=!!(e.avatar||e.icon),A=!!(w||n.prepend);return b(e.tag,{class:["v-banner",{"v-banner--stacked":e.stacked||l.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},g.value,r.value,s.value,a.value,o.value,f.value,d.value,h.value,e.class],style:[i.value,u.value,c.value,e.style],role:"banner"},{default:()=>{var I;return[A&&b("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?b(ft,{key:"prepend-defaults",disabled:!w,defaults:{VAvatar:{color:v.value,density:p.value,icon:e.icon,image:e.avatar}}},n.prepend):b($i,{key:"prepend-avatar",color:v.value,density:p.value,icon:e.icon,image:e.avatar},null)]),b("div",{class:"v-banner__content"},[y&&b(iE,{key:"text"},{default:()=>{var k;return[((k=n.text)==null?void 0:k.call(n))??e.text]}}),(I=n.default)==null?void 0:I.call(n)]),n.actions&&b(rE,{key:"actions"},n.actions)]}})})}}),DL=Z({bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...mr(),...Ne(),...vn(),...ln(),...Ht(),...xo({name:"bottom-navigation"}),...rt({tag:"header"}),...va({modelValue:!0,selectedClass:"v-btn--selected"}),...dt()},"VBottomNavigation"),FL=ge()({name:"VBottomNavigation",props:DL(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=Qx(),{borderClasses:i}=Fr(e),{backgroundColorClasses:s,backgroundColorStyles:a}=Ot(he(e,"bgColor")),{densityClasses:o}=Hn(e),{elevationClasses:l}=En(e),{roundedClasses:u}=Kt(e),{ssrBootStyles:f}=fa(),c=F(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),d=he(e,"active"),{layoutItemStyles:h}=Co({id:e.name,order:F(()=>parseInt(e.order,10)),position:F(()=>"bottom"),layoutSize:F(()=>d.value?c.value:0),elementSize:c,active:d,absolute:he(e,"absolute")});return ws(e,ip),Bt({VBtn:{color:he(e,"color"),density:he(e,"density"),stacked:F(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),_e(()=>b(e.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":d.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},r.value,s.value,i.value,o.value,l.value,u.value,e.class],style:[a.value,h.value,{height:De(c.value),transform:`translateY(${De(d.value?0:100,"%")})`},f.value,e.style]},{default:()=>[n.default&&b("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),sE=Z({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...su({origin:"center center",scrollStrategy:"block",transition:{component:Jd},zIndex:2400})},"VDialog"),Pg=ge()({name:"VDialog",props:sE(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),{scopeId:i}=Ro(),s=ne();function a(l){var c,d;const u=l.relatedTarget,f=l.target;if(u!==f&&((c=s.value)!=null&&c.contentEl)&&((d=s.value)!=null&&d.globalTop)&&![document,s.value.contentEl].includes(f)&&!s.value.contentEl.contains(f)){const h=Tl(s.value.contentEl);if(!h.length)return;const g=h[0],v=h[h.length-1];u===g?v.focus():g.focus()}}Pt&&Re(()=>r.value&&e.retainFocus,l=>{l?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0}),Re(r,async l=>{var u,f;await ht(),l?(u=s.value.contentEl)==null||u.focus({preventScroll:!0}):(f=s.value.activatorEl)==null||f.focus({preventScroll:!0})});const o=F(()=>xe({"aria-haspopup":"dialog","aria-expanded":String(r.value)},e.activatorProps));return _e(()=>{const l=oi.filterProps(e);return b(oi,xe({ref:s,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},l,{modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,"aria-modal":"true",activatorProps:o.value,role:"dialog"},i),{activator:n.activator,default:function(){for(var u=arguments.length,f=new Array(u),c=0;c<u;c++)f[c]=arguments[c];return b(ft,{root:"VDialog"},{default:()=>{var d;return[(d=n.default)==null?void 0:d.call(n,...f)]}})}})}),Wr({},s)}}),OL=Z({inset:Boolean,...sE({transition:"bottom-sheet-transition"})},"VBottomSheet"),NL=ge()({name:"VBottomSheet",props:OL(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue");return _e(()=>{const i=Pg.filterProps(e);return b(Pg,xe(i,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:r.value,"onUpdate:modelValue":s=>r.value=s,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),$L=Z({divider:[Number,String],...Ne()},"VBreadcrumbsDivider"),aE=ge()({name:"VBreadcrumbsDivider",props:$L(),setup(e,t){let{slots:n}=t;return _e(()=>{var r;return b("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((r=n==null?void 0:n.default)==null?void 0:r.call(n))??e.divider])}),{}}}),ML=Z({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Ne(),...nu(),...rt({tag:"li"})},"VBreadcrumbsItem"),oE=ge()({name:"VBreadcrumbsItem",props:ML(),setup(e,t){let{slots:n,attrs:r}=t;const i=tu(e,r),s=F(()=>{var u;return e.active||((u=i.isActive)==null?void 0:u.value)}),a=F(()=>s.value?e.activeColor:e.color),{textColorClasses:o,textColorStyles:l}=Mn(a);return _e(()=>b(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":s.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:s.value&&e.activeClass},o.value,e.class],style:[l.value,e.style],"aria-current":s.value?"page":void 0},{default:()=>{var u,f;return[i.isLink.value?b("a",{class:"v-breadcrumbs-item--link",href:i.href.value,"aria-current":s.value?"page":void 0,onClick:i.navigate},[((f=n.default)==null?void 0:f.call(n))??e.title]):((u=n.default)==null?void 0:u.call(n))??e.title]}})),{}}}),VL=Z({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:tt,items:{type:Array,default:()=>[]},...Ne(),...vn(),...Ht(),...rt({tag:"ul"})},"VBreadcrumbs"),BL=ge()({name:"VBreadcrumbs",props:VL(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:i}=Ot(he(e,"bgColor")),{densityClasses:s}=Hn(e),{roundedClasses:a}=Kt(e);Bt({VBreadcrumbsDivider:{divider:he(e,"divider")},VBreadcrumbsItem:{activeClass:he(e,"activeClass"),activeColor:he(e,"activeColor"),color:he(e,"color"),disabled:he(e,"disabled")}});const o=F(()=>e.items.map(l=>typeof l=="string"?{item:{title:l},raw:l}:{item:l,raw:l}));return _e(()=>{const l=!!(n.prepend||e.icon);return b(e.tag,{class:["v-breadcrumbs",r.value,s.value,a.value,e.class],style:[i.value,e.style]},{default:()=>{var u;return[l&&b("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?b(ft,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):b(Tt,{key:"prepend-icon",start:!0,icon:e.icon},null)]),o.value.map((f,c,d)=>{var v;let{item:h,raw:g}=f;return b(Fe,null,[((v=n.item)==null?void 0:v.call(n,{item:h,index:c}))??b(oE,xe({key:c,disabled:c>=d.length-1},typeof h=="string"?{title:h}:h),{default:n.title?()=>{var p;return(p=n.title)==null?void 0:p.call(n,{item:h,index:c})}:void 0}),c<d.length-1&&b(aE,null,{default:n.divider?()=>{var p;return(p=n.divider)==null?void 0:p.call(n,{item:g,index:c})}:void 0})])}),(u=n.default)==null?void 0:u.call(n)]}})}),{}}}),lE=ge()({name:"VCardActions",props:Ne(),setup(e,t){let{slots:n}=t;return Bt({VBtn:{slim:!0,variant:"text"}}),_e(()=>{var r;return b("div",{class:["v-card-actions",e.class],style:e.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),uE=gr("v-card-subtitle"),cE=gr("v-card-title"),LL=Z({appendAvatar:String,appendIcon:tt,prependAvatar:String,prependIcon:tt,subtitle:String,title:String,...Ne(),...vn()},"VCardItem"),dE=ge()({name:"VCardItem",props:LL(),setup(e,t){let{slots:n}=t;return _e(()=>{var u;const r=!!(e.prependAvatar||e.prependIcon),i=!!(r||n.prepend),s=!!(e.appendAvatar||e.appendIcon),a=!!(s||n.append),o=!!(e.title||n.title),l=!!(e.subtitle||n.subtitle);return b("div",{class:["v-card-item",e.class],style:e.style},[i&&b("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?b(ft,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:e.density,icon:e.prependIcon,image:e.prependAvatar}}},n.prepend):r&&b($i,{key:"prepend-avatar",density:e.density,icon:e.prependIcon,image:e.prependAvatar},null)]),b("div",{class:"v-card-item__content"},[o&&b(cE,{key:"title"},{default:()=>{var f;return[((f=n.title)==null?void 0:f.call(n))??e.title]}}),l&&b(uE,{key:"subtitle"},{default:()=>{var f;return[((f=n.subtitle)==null?void 0:f.call(n))??e.subtitle]}}),(u=n.default)==null?void 0:u.call(n)]),a&&b("div",{key:"append",class:"v-card-item__append"},[n.append?b(ft,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:e.density,icon:e.appendIcon,image:e.appendAvatar}}},n.append):s&&b($i,{key:"append-avatar",density:e.density,icon:e.appendIcon,image:e.appendAvatar},null)])])}),{}}}),fE=gr("v-card-text"),HL=Z({appendAvatar:String,appendIcon:tt,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:tt,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...mr(),...Ne(),...vn(),...Kn(),...ln(),...ef(),...xs(),...To(),...Ht(),...nu(),...rt(),...dt(),...Or({variant:"elevated"})},"VCard"),jL=ge()({name:"VCard",directives:{Ripple:Ki},props:HL(),setup(e,t){let{attrs:n,slots:r}=t;const{themeClasses:i}=xt(e),{borderClasses:s}=Fr(e),{colorClasses:a,colorStyles:o,variantClasses:l}=ga(e),{densityClasses:u}=Hn(e),{dimensionStyles:f}=Gn(e),{elevationClasses:c}=En(e),{loaderClasses:d}=eu(e),{locationStyles:h}=Cs(e),{positionClasses:g}=Ao(e),{roundedClasses:v}=Kt(e),p=tu(e,n),y=F(()=>e.link!==!1&&p.isLink.value),w=F(()=>!e.disabled&&e.link!==!1&&(e.link||p.isClickable.value));return _e(()=>{const A=y.value?"a":e.tag,I=!!(r.title||e.title),k=!!(r.subtitle||e.subtitle),x=I||k,C=!!(r.append||e.appendAvatar||e.appendIcon),m=!!(r.prepend||e.prependAvatar||e.prependIcon),_=!!(r.image||e.image),T=x||m||C,E=!!(r.text||e.text);return qt(b(A,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":w.value},i.value,s.value,a.value,u.value,c.value,d.value,g.value,v.value,l.value,e.class],style:[o.value,f.value,h.value,e.style],href:p.href.value,onClick:w.value&&p.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var R;return[_&&b("div",{key:"image",class:"v-card__image"},[r.image?b(ft,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},r.image):b(Js,{key:"image-img",cover:!0,src:e.image},null)]),b(tf,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:r.loader}),T&&b(dE,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),E&&b(fE,{key:"text"},{default:()=>{var D;return[((D=r.text)==null?void 0:D.call(r))??e.text]}}),(R=r.default)==null?void 0:R.call(r),r.actions&&b(lE,null,{default:r.actions}),ha(w.value,"v-card")]}}),[[nr("ripple"),w.value&&e.ripple]])}),{}}}),qL=e=>{const{touchstartX:t,touchendX:n,touchstartY:r,touchendY:i}=e,s=.5,a=16;e.offsetX=n-t,e.offsetY=i-r,Math.abs(e.offsetY)<s*Math.abs(e.offsetX)&&(e.left&&n<t-a&&e.left(e),e.right&&n>t+a&&e.right(e)),Math.abs(e.offsetX)<s*Math.abs(e.offsetY)&&(e.up&&i<r-a&&e.up(e),e.down&&i>r+a&&e.down(e))};function UL(e,t){var r;const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,(r=t.start)==null||r.call(t,{originalEvent:e,...t})}function zL(e,t){var r;const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,(r=t.end)==null||r.call(t,{originalEvent:e,...t}),qL(t)}function KL(e,t){var r;const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,(r=t.move)==null||r.call(t,{originalEvent:e,...t})}function GL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>UL(n,t),touchend:n=>zL(n,t),touchmove:n=>KL(n,t)}}function WL(e,t){var o;const n=t.value,r=n!=null&&n.parent?e.parentElement:e,i=(n==null?void 0:n.options)??{passive:!0},s=(o=t.instance)==null?void 0:o.$.uid;if(!r||!s)return;const a=GL(t.value);r._touchHandlers=r._touchHandlers??Object.create(null),r._touchHandlers[s]=a,wx(a).forEach(l=>{r.addEventListener(l,a[l],i)})}function YL(e,t){var s,a;const n=(s=t.value)!=null&&s.parent?e.parentElement:e,r=(a=t.instance)==null?void 0:a.$.uid;if(!(n!=null&&n._touchHandlers)||!r)return;const i=n._touchHandlers[r];wx(i).forEach(o=>{n.removeEventListener(o,i[o])}),delete n._touchHandlers[r]}const gp={mounted:WL,unmounted:YL},hE=Symbol.for("vuetify:v-window"),gE=Symbol.for("vuetify:v-window-group"),vp=Z({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ne(),...rt(),...dt()},"VWindow"),Dl=ge()({name:"VWindow",directives:{Touch:gp},props:vp(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{isRtl:i}=Cn(),{t:s}=on(),a=ws(e,gE),o=ne(),l=F(()=>i.value?!e.reverse:e.reverse),u=Ae(!1),f=F(()=>{const I=e.direction==="vertical"?"y":"x",x=(l.value?!u.value:u.value)?"-reverse":"";return`v-window-${I}${x}-transition`}),c=Ae(0),d=ne(void 0),h=F(()=>a.items.value.findIndex(I=>a.selected.value.includes(I.id)));Re(h,(I,k)=>{const x=a.items.value.length,C=x-1;x<=2?u.value=I<k:I===C&&k===0?u.value=!0:I===0&&k===C?u.value=!1:u.value=I<k}),At(hE,{transition:f,isReversed:u,transitionCount:c,transitionHeight:d,rootRef:o});const g=F(()=>e.continuous||h.value!==0),v=F(()=>e.continuous||h.value!==a.items.value.length-1);function p(){g.value&&a.prev()}function y(){v.value&&a.next()}const w=F(()=>{const I=[],k={icon:i.value?e.nextIcon:e.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:a.prev,ariaLabel:s("$vuetify.carousel.prev")};I.push(g.value?n.prev?n.prev({props:k}):b(pt,k,null):b("div",null,null));const x={icon:i.value?e.prevIcon:e.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:a.next,ariaLabel:s("$vuetify.carousel.next")};return I.push(v.value?n.next?n.next({props:x}):b(pt,x,null):b("div",null,null)),I}),A=F(()=>e.touch===!1?e.touch:{...{left:()=>{l.value?p():y()},right:()=>{l.value?y():p()},start:k=>{let{originalEvent:x}=k;x.stopPropagation()}},...e.touch===!0?{}:e.touch});return _e(()=>qt(b(e.tag,{ref:o,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},r.value,e.class],style:e.style},{default:()=>{var I,k;return[b("div",{class:"v-window__container",style:{height:d.value}},[(I=n.default)==null?void 0:I.call(n,{group:a}),e.showArrows!==!1&&b("div",{class:"v-window__controls"},[w.value])]),(k=n.additional)==null?void 0:k.call(n,{group:a})]}}),[[nr("touch"),A.value]])),{group:a}}}),JL=Z({color:String,cycle:Boolean,delimiterIcon:{type:tt,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...vp({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),XL=ge()({name:"VCarousel",props:JL(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),{t:i}=on(),s=ne();let a=-1;Re(r,l),Re(()=>e.interval,l),Re(()=>e.cycle,u=>{u?l():window.clearTimeout(a)}),zt(o);function o(){!e.cycle||!s.value||(a=window.setTimeout(s.value.group.next,+e.interval>0?+e.interval:6e3))}function l(){window.clearTimeout(a),window.requestAnimationFrame(o)}return _e(()=>{const u=Dl.filterProps(e);return b(Dl,xe({ref:s},u,{modelValue:r.value,"onUpdate:modelValue":f=>r.value=f,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:De(e.height)},e.style]}),{default:n.default,additional:f=>{let{group:c}=f;return b(Fe,null,[!e.hideDelimiters&&b("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[c.items.value.length>0&&b(ft,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[c.items.value.map((d,h)=>{const g={id:`carousel-item-${d.id}`,"aria-label":i("$vuetify.carousel.ariaLabel.delimiter",h+1,c.items.value.length),class:[c.isSelected(d.id)&&"v-btn--active"],onClick:()=>c.select(d.id,!0)};return n.item?n.item({props:g,item:d}):b(pt,xe(d,g),null)})]})]),e.progress&&b(Qd,{class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(c.getItemIndex(r.value)+1)/c.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),mp=Z({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ne(),...ma(),...af()},"VWindowItem"),Fl=ge()({name:"VWindowItem",directives:{Touch:gp},props:mp(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const r=it(hE),i=pa(e,gE),{isBooted:s}=fa();if(!r||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=Ae(!1),o=F(()=>s.value&&(r.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function l(){!a.value||!r||(a.value=!1,r.transitionCount.value>0&&(r.transitionCount.value-=1,r.transitionCount.value===0&&(r.transitionHeight.value=void 0)))}function u(){var g;a.value||!r||(a.value=!0,r.transitionCount.value===0&&(r.transitionHeight.value=De((g=r.rootRef.value)==null?void 0:g.clientHeight)),r.transitionCount.value+=1)}function f(){l()}function c(g){a.value&&ht(()=>{!o.value||!a.value||!r||(r.transitionHeight.value=De(g.clientHeight))})}const d=F(()=>{const g=r.isReversed.value?e.reverseTransition:e.transition;return o.value?{name:typeof g!="string"?r.transition.value:g,onBeforeEnter:u,onAfterEnter:l,onEnterCancelled:f,onBeforeLeave:u,onAfterLeave:l,onLeaveCancelled:f,onEnter:c}:!1}),{hasContent:h}=cp(e,i.isSelected);return _e(()=>b(Tr,{transition:d.value,disabled:!s.value},{default:()=>{var g;return[qt(b("div",{class:["v-window-item",i.selectedClass.value,e.class],style:e.style},[h.value&&((g=n.default)==null?void 0:g.call(n))]),[[ci,i.isSelected.value]])]}})),{groupItem:i}}}),ZL=Z({...lC(),...mp()},"VCarouselItem"),QL=ge()({name:"VCarouselItem",inheritAttrs:!1,props:ZL(),setup(e,t){let{slots:n,attrs:r}=t;_e(()=>{const i=Js.filterProps(e),s=Fl.filterProps(e);return b(Fl,xe({class:"v-carousel-item"},s),{default:()=>[b(Js,xe(r,i),n)]})})}}),e7=gr("v-code"),t7=Z({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Ne()},"VColorPickerCanvas"),n7=hr({name:"VColorPickerCanvas",props:t7(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const r=Ae(!1),i=ne(),s=Ae(parseFloat(e.width)),a=Ae(parseFloat(e.height)),o=ne({x:0,y:0}),l=F({get:()=>o.value,set(p){var A,I;if(!i.value)return;const{x:y,y:w}=p;o.value=p,n("update:color",{h:((A=e.color)==null?void 0:A.h)??0,s:rn(y,0,s.value)/s.value,v:1-rn(w,0,a.value)/a.value,a:((I=e.color)==null?void 0:I.a)??1})}}),u=F(()=>{const{x:p,y}=l.value,w=parseInt(e.dotSize,10)/2;return{width:De(e.dotSize),height:De(e.dotSize),transform:`translate(${De(p-w)}, ${De(y-w)})`}}),{resizeRef:f}=ai(p=>{var A;if(!((A=f.value)!=null&&A.offsetParent))return;const{width:y,height:w}=p[0].contentRect;s.value=y,a.value=w});function c(p,y,w){const{left:A,top:I,width:k,height:x}=w;l.value={x:rn(p-A,0,k),y:rn(y-I,0,x)}}function d(p){p.type==="mousedown"&&p.preventDefault(),!e.disabled&&(h(p),window.addEventListener("mousemove",h),window.addEventListener("mouseup",g),window.addEventListener("touchmove",h),window.addEventListener("touchend",g))}function h(p){if(e.disabled||!i.value)return;r.value=!0;const y=G$(p);c(y.clientX,y.clientY,i.value.getBoundingClientRect())}function g(){window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g),window.removeEventListener("touchmove",h),window.removeEventListener("touchend",g)}function v(){var I;if(!i.value)return;const p=i.value,y=p.getContext("2d");if(!y)return;const w=y.createLinearGradient(0,0,p.width,0);w.addColorStop(0,"hsla(0, 0%, 100%, 1)"),w.addColorStop(1,`hsla(${((I=e.color)==null?void 0:I.h)??0}, 100%, 50%, 1)`),y.fillStyle=w,y.fillRect(0,0,p.width,p.height);const A=y.createLinearGradient(0,0,0,p.height);A.addColorStop(0,"hsla(0, 0%, 100%, 0)"),A.addColorStop(1,"hsla(0, 0%, 0%, 1)"),y.fillStyle=A,y.fillRect(0,0,p.width,p.height)}return Re(()=>{var p;return(p=e.color)==null?void 0:p.h},v,{immediate:!0}),Re(()=>[s.value,a.value],(p,y)=>{v(),o.value={x:l.value.x*p[0]/y[0],y:l.value.y*p[1]/y[1]}},{flush:"post"}),Re(()=>e.color,()=>{if(r.value){r.value=!1;return}o.value=e.color?{x:e.color.s*s.value,y:(1-e.color.v)*a.value}:{x:0,y:0}},{deep:!0,immediate:!0}),zt(()=>v()),_e(()=>b("div",{ref:f,class:["v-color-picker-canvas",e.class],style:e.style,onMousedown:d,onTouchstartPassive:d},[b("canvas",{ref:i,width:s.value,height:a.value},null),e.color&&b("div",{class:["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}],style:u.value},null)])),{}}});function r7(e,t){if(t){const{a:n,...r}=e;return r}return e}function i7(e,t){if(t==null||typeof t=="string"){const n=Hx(e);return e.a===1?n.slice(0,7):n}if(typeof t=="object"){let n;return Bs(t,["r","g","b"])?n=Oi(e):Bs(t,["h","s","l"])?n=Nx(e):Bs(t,["h","s","v"])&&(n=e),r7(n,!Bs(t,["a"])&&e.a===1)}return e}const Ba={h:0,s:0,v:1,a:1},Dg={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)})},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)})},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)})}],to:Oi,from:zd};var nb;const s7={...Dg,inputs:(nb=Dg.inputs)==null?void 0:nb.slice(0,3)},Fg={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)})},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)})},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)})}],to:Nx,from:Km},a7={...Fg,inputs:Fg.inputs.slice(0,3)},vE={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t}],to:Hx,from:Lx},o7={...vE,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t}]},Ws={rgb:s7,rgba:Dg,hsl:a7,hsla:Fg,hex:o7,hexa:vE},l7=e=>{let{label:t,...n}=e;return b("div",{class:"v-color-picker-edit__input"},[b("input",n,null),b("span",null,[t])])},u7=Z({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Ws).includes(e)},modes:{type:Array,default:()=>Object.keys(Ws),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Ws).includes(t))},...Ne()},"VColorPickerEdit"),c7=hr({name:"VColorPickerEdit",props:u7(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const r=F(()=>e.modes.map(s=>({...Ws[s],name:s}))),i=F(()=>{var o;const s=r.value.find(l=>l.name===e.mode);if(!s)return[];const a=e.color?s.to(e.color):null;return(o=s.inputs)==null?void 0:o.map(l=>{let{getValue:u,getColor:f,...c}=l;return{...s.inputProps,...c,disabled:e.disabled,value:a&&u(a),onChange:d=>{const h=d.target;h&&n("update:color",s.from(f(a??Ba,h.value)))}}})});return _e(()=>{var s;return b("div",{class:["v-color-picker-edit",e.class],style:e.style},[(s=i.value)==null?void 0:s.map(a=>b(l7,a,null)),r.value.length>1&&b(pt,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const a=r.value.findIndex(o=>o.name===e.mode);n("update:mode",r.value[(a+1)%r.value.length].name)}},null)])}),{}}}),pp=Symbol.for("vuetify:v-slider");function Og(e,t,n){const r=n==="vertical",i=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return r?s.clientY-(i.top+i.height/2):s.clientX-(i.left+i.width/2)}function d7(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const mE=Z({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...Ht(),...ln({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),pE=e=>{const t=F(()=>parseFloat(e.min)),n=F(()=>parseFloat(e.max)),r=F(()=>+e.step>0?parseFloat(e.step):0),i=F(()=>Math.max(Uy(r.value),Uy(t.value)));function s(a){if(a=parseFloat(a),r.value<=0)return a;const o=rn(a,t.value,n.value),l=t.value%r.value,u=Math.round((o-l)/r.value)*r.value+l;return parseFloat(Math.min(u,n.value).toFixed(i.value))}return{min:t,max:n,step:r,decimals:i,roundValue:s}},yE=e=>{let{props:t,steps:n,onSliderStart:r,onSliderMove:i,onSliderEnd:s,getActiveThumb:a}=e;const{isRtl:o}=Cn(),l=he(t,"reverse"),u=F(()=>t.direction==="vertical"),f=F(()=>u.value!==l.value),{min:c,max:d,step:h,decimals:g,roundValue:v}=n,p=F(()=>parseInt(t.thumbSize,10)),y=F(()=>parseInt(t.tickSize,10)),w=F(()=>parseInt(t.trackSize,10)),A=F(()=>(d.value-c.value)/h.value),I=he(t,"disabled"),k=F(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),x=F(()=>t.error||t.disabled?void 0:t.trackColor??t.color),C=F(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),m=Ae(!1),_=Ae(0),T=ne(),E=ne();function R(le){var re;const B=t.direction==="vertical",K=B?"top":"left",z=B?"height":"width",se=B?"clientY":"clientX",{[K]:Ee,[z]:V}=(re=T.value)==null?void 0:re.$el.getBoundingClientRect(),H=d7(le,se);let G=Math.min(Math.max((H-Ee-_.value)/V,0),1)||0;return(B?f.value:f.value!==o.value)&&(G=1-G),v(c.value+G*(d.value-c.value))}const D=le=>{s({value:R(le)}),m.value=!1,_.value=0},$=le=>{E.value=a(le),E.value&&(E.value.focus(),m.value=!0,E.value.contains(le.target)?_.value=Og(le,E.value,t.direction):(_.value=0,i({value:R(le)})),r({value:R(le)}))},M={passive:!0,capture:!0};function O(le){i({value:R(le)})}function L(le){le.stopPropagation(),le.preventDefault(),D(le),window.removeEventListener("mousemove",O,M),window.removeEventListener("mouseup",L)}function W(le){var B;D(le),window.removeEventListener("touchmove",O,M),(B=le.target)==null||B.removeEventListener("touchend",W)}function te(le){var B;$(le),window.addEventListener("touchmove",O,M),(B=le.target)==null||B.addEventListener("touchend",W,{passive:!1})}function ie(le){le.preventDefault(),$(le),window.addEventListener("mousemove",O,M),window.addEventListener("mouseup",L,{passive:!1})}const Q=le=>{const B=(le-c.value)/(d.value-c.value)*100;return rn(isNaN(B)?0:B,0,100)},ee=he(t,"showTicks"),ye=F(()=>ee.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(le=>({value:le,position:Q(le),label:le.toString()})):Object.keys(t.ticks).map(le=>({value:parseFloat(le),position:Q(parseFloat(le)),label:t.ticks[le]})):A.value!==1/0?ni(A.value+1).map(le=>{const B=c.value+le*h.value;return{value:B,position:Q(B)}}):[]:[]),we=F(()=>ye.value.some(le=>{let{label:B}=le;return!!B})),$e={activeThumbRef:E,color:he(t,"color"),decimals:g,disabled:I,direction:he(t,"direction"),elevation:he(t,"elevation"),hasLabels:we,isReversed:l,indexFromEnd:f,min:c,max:d,mousePressed:m,numTicks:A,onSliderMousedown:ie,onSliderTouchstart:te,parsedTicks:ye,parseMouseMove:R,position:Q,readonly:he(t,"readonly"),rounded:he(t,"rounded"),roundValue:v,showTicks:ee,startOffset:_,step:h,thumbSize:p,thumbColor:k,thumbLabel:he(t,"thumbLabel"),ticks:he(t,"ticks"),tickSize:y,trackColor:x,trackContainerRef:T,trackFillColor:C,trackSize:w,vertical:u};return At(pp,$e),$e},f7=Z({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},...Ne()},"VSliderThumb"),Ng=ge()({name:"VSliderThumb",directives:{Ripple:Ki},props:f7(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:r}=t;const i=it(pp),{isRtl:s,rtlClasses:a}=Cn();if(!i)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:o,step:l,disabled:u,thumbSize:f,thumbLabel:c,direction:d,isReversed:h,vertical:g,readonly:v,elevation:p,mousePressed:y,decimals:w,indexFromEnd:A}=i,{textColorClasses:I,textColorStyles:k}=Mn(o),{pageup:x,pagedown:C,end:m,home:_,left:T,right:E,down:R,up:D}=ug,$=[x,C,m,_,T,E,R,D],M=F(()=>l.value?[1,2,3]:[1,5,10]);function O(W,te){if(!$.includes(W.key))return;W.preventDefault();const ie=l.value||.1,Q=(e.max-e.min)/ie;if([T,E,R,D].includes(W.key)){const ye=(g.value?[s.value?T:E,h.value?R:D]:A.value!==s.value?[T,D]:[E,D]).includes(W.key)?1:-1,we=W.shiftKey?2:W.ctrlKey?1:0;te=te+ye*ie*M.value[we]}else if(W.key===_)te=e.min;else if(W.key===m)te=e.max;else{const ee=W.key===C?1:-1;te=te-ee*ie*(Q>100?Q/10:10)}return Math.max(e.min,Math.min(e.max,te))}function L(W){const te=O(W,e.modelValue);te!=null&&r("update:modelValue",te)}return _e(()=>{const W=De(A.value?100-e.position:e.position,"%"),{elevationClasses:te}=En(F(()=>u.value?void 0:p.value));return b("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&y.value},e.class,a.value],style:[{"--v-slider-thumb-position":W,"--v-slider-thumb-size":De(f.value)},e.style],role:"slider",tabindex:u.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!v.value,"aria-orientation":d.value,onKeydown:v.value?void 0:L},[b("div",{class:["v-slider-thumb__surface",I.value,te.value],style:{...k.value}},null),qt(b("div",{class:["v-slider-thumb__ripple",I.value],style:k.value},null),[[nr("ripple"),e.ripple,null,{circle:!0,center:!0}]]),b(ep,{origin:"bottom center"},{default:()=>{var ie;return[qt(b("div",{class:"v-slider-thumb__label-container"},[b("div",{class:["v-slider-thumb__label"]},[b("div",null,[((ie=n["thumb-label"])==null?void 0:ie.call(n,{modelValue:e.modelValue}))??e.modelValue.toFixed(l.value?w.value:1)])])]),[[ci,c.value&&e.focused||c.value==="always"]])]}})])}),{}}}),h7=Z({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Ne()},"VSliderTrack"),bE=ge()({name:"VSliderTrack",props:h7(),emits:{},setup(e,t){let{slots:n}=t;const r=it(pp);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:i,parsedTicks:s,rounded:a,showTicks:o,tickSize:l,trackColor:u,trackFillColor:f,trackSize:c,vertical:d,min:h,max:g,indexFromEnd:v}=r,{roundedClasses:p}=Kt(a),{backgroundColorClasses:y,backgroundColorStyles:w}=Ot(f),{backgroundColorClasses:A,backgroundColorStyles:I}=Ot(u),k=F(()=>`inset-${d.value?"block":"inline"}-${v.value?"end":"start"}`),x=F(()=>d.value?"height":"width"),C=F(()=>({[k.value]:"0%",[x.value]:"100%"})),m=F(()=>e.stop-e.start),_=F(()=>({[k.value]:De(e.start,"%"),[x.value]:De(m.value,"%")})),T=F(()=>o.value?(d.value?s.value.slice().reverse():s.value).map((R,D)=>{var M;const $=R.value!==h.value&&R.value!==g.value?De(R.position,"%"):void 0;return b("div",{key:R.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":R.position>=e.start&&R.position<=e.stop,"v-slider-track__tick--first":R.value===h.value,"v-slider-track__tick--last":R.value===g.value}],style:{[k.value]:$}},[(R.label||n["tick-label"])&&b("div",{class:"v-slider-track__tick-label"},[((M=n["tick-label"])==null?void 0:M.call(n,{tick:R,index:D}))??R.label])])}):[]);return _e(()=>b("div",{class:["v-slider-track",p.value,e.class],style:[{"--v-slider-track-size":De(c.value),"--v-slider-tick-size":De(l.value)},e.style]},[b("div",{class:["v-slider-track__background",A.value,{"v-slider-track__background--opacity":!!i.value||!f.value}],style:{...C.value,...I.value}},null),b("div",{class:["v-slider-track__fill",y.value],style:{..._.value,...w.value}},null),o.value&&b("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":o.value==="always"}]},[T.value])])),{}}}),g7=Z({...ru(),...mE(),...Wi(),modelValue:{type:[Number,String],default:0}},"VSlider"),$g=ge()({name:"VSlider",props:g7(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const i=ne(),{rtlClasses:s}=Cn(),a=pE(e),o=Ke(e,"modelValue",void 0,x=>a.roundValue(x??a.min.value)),{min:l,max:u,mousePressed:f,roundValue:c,onSliderMousedown:d,onSliderTouchstart:h,trackContainerRef:g,position:v,hasLabels:p,readonly:y}=yE({props:e,steps:a,onSliderStart:()=>{r("start",o.value)},onSliderEnd:x=>{let{value:C}=x;const m=c(C);o.value=m,r("end",m)},onSliderMove:x=>{let{value:C}=x;return o.value=c(C)},getActiveThumb:()=>{var x;return(x=i.value)==null?void 0:x.$el}}),{isFocused:w,focus:A,blur:I}=Gi(e),k=F(()=>v(o.value));return _e(()=>{const x=Rn.filterProps(e),C=!!(e.label||n.label||n.prepend);return b(Rn,xe({class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||p.value,"v-slider--focused":w.value,"v-slider--pressed":f.value,"v-slider--disabled":e.disabled},s.value,e.class],style:e.style},x,{focused:w.value}),{...n,prepend:C?m=>{var _,T;return b(Fe,null,[((_=n.label)==null?void 0:_.call(n,m))??(e.label?b(Io,{id:m.id.value,class:"v-slider__label",text:e.label},null):void 0),(T=n.prepend)==null?void 0:T.call(n,m)])}:void 0,default:m=>{let{id:_,messagesId:T}=m;return b("div",{class:"v-slider__container",onMousedown:y.value?void 0:d,onTouchstartPassive:y.value?void 0:h},[b("input",{id:_.value,name:e.name||_.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:o.value},null),b(bE,{ref:g,start:0,stop:k.value},{"tick-label":n["tick-label"]}),b(Ng,{ref:i,"aria-describedby":T.value,focused:w.value,min:l.value,max:u.value,modelValue:o.value,"onUpdate:modelValue":E=>o.value=E,position:k.value,elevation:e.elevation,onFocus:A,onBlur:I,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),{}}}),v7=Z({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...Ne()},"VColorPickerPreview"),m7=hr({name:"VColorPickerPreview",props:v7(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const r=new AbortController;uv(()=>r.abort());async function i(){if(!Hy)return;const s=new window.EyeDropper;try{const a=await s.open({signal:r.signal}),o=Lx(a.sRGBHex);n("update:color",{...e.color??Ba,...o})}catch{}}return _e(()=>{var s,a;return b("div",{class:["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class],style:e.style},[Hy&&b("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[b(pt,{onClick:i,icon:"$eyeDropper",variant:"plain",density:"comfortable"},null)]),b("div",{class:"v-color-picker-preview__dot"},[b("div",{style:{background:Mx(e.color??Ba)}},null)]),b("div",{class:"v-color-picker-preview__sliders"},[b($g,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(s=e.color)==null?void 0:s.h,"onUpdate:modelValue":o=>n("update:color",{...e.color??Ba,h:o}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&b($g,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:((a=e.color)==null?void 0:a.a)??1,"onUpdate:modelValue":o=>n("update:color",{...e.color??Ba,a:o}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),p7={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},y7={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},b7={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},S7={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},_7={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},w7={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},x7={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},C7={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},E7={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},T7={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},A7={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},I7={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},R7={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},k7={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},P7={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},D7={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},F7={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},O7={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},N7={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},$7={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},M7={red:p7,pink:y7,purple:b7,deepPurple:S7,indigo:_7,blue:w7,lightBlue:x7,cyan:C7,teal:E7,green:T7,lightGreen:A7,lime:I7,yellow:R7,amber:k7,orange:P7,deepOrange:D7,brown:F7,blueGrey:O7,grey:N7,shades:$7},V7=Z({swatches:{type:Array,default:()=>B7(M7)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Ne()},"VColorPickerSwatches");function B7(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const L7=hr({name:"VColorPickerSwatches",props:V7(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return _e(()=>b("div",{class:["v-color-picker-swatches",e.class],style:[{maxHeight:De(e.maxHeight)},e.style]},[b("div",null,[e.swatches.map(r=>b("div",{class:"v-color-picker-swatches__swatch"},[r.map(i=>{const s=Er(i),a=zd(s),o=$x(s);return b("div",{class:"v-color-picker-swatches__color",onClick:()=>a&&n("update:color",a)},[b("div",{style:{background:o}},[e.color&&Ss(e.color,a)?b(Tt,{size:"x-small",icon:"$success",color:mM(i,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),df=Z({color:String,...mr(),...Ne(),...Kn(),...ln(),...xs(),...To(),...Ht(),...rt(),...dt()},"VSheet"),Zs=ge()({name:"VSheet",props:df(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{backgroundColorClasses:i,backgroundColorStyles:s}=Ot(he(e,"color")),{borderClasses:a}=Fr(e),{dimensionStyles:o}=Gn(e),{elevationClasses:l}=En(e),{locationStyles:u}=Cs(e),{positionClasses:f}=Ao(e),{roundedClasses:c}=Kt(e);return _e(()=>b(e.tag,{class:["v-sheet",r.value,i.value,a.value,l.value,f.value,c.value,e.class],style:[s.value,o.value,u.value,e.style]},n)),{}}}),H7=Z({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Ws).includes(e)},modes:{type:Array,default:()=>Object.keys(Ws),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Ws).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...gn(df({width:300}),["height","location","minHeight","maxHeight","minWidth","maxWidth"])},"VColorPicker"),j7=hr({name:"VColorPicker",props:H7(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e){const t=Ke(e,"mode"),n=ne(null),r=Ke(e,"modelValue",void 0,a=>{if(a==null||a==="")return null;let o;try{o=zd(Er(a))}catch{return null}return n.value&&(o={...o,h:n.value.h},n.value=null),o},a=>a?i7(a,e.modelValue):null),{rtlClasses:i}=Cn(),s=a=>{r.value=a,n.value=a};return zt(()=>{e.modes.includes(t.value)||(t.value=e.modes[0])}),Bt({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),_e(()=>{const a=Zs.filterProps(e);return b(Zs,xe({rounded:e.rounded,elevation:e.elevation,theme:e.theme,class:["v-color-picker",i.value,e.class],style:[{"--v-color-picker-color-hsv":Mx({...r.value??Ba,a:1})},e.style]},a,{maxWidth:e.width}),{default:()=>[!e.hideCanvas&&b(n7,{key:"canvas",color:r.value,"onUpdate:color":s,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&b("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&b(m7,{key:"preview",color:r.value,"onUpdate:color":s,hideAlpha:!t.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&b(c7,{key:"edit",modes:e.modes,mode:t.value,"onUpdate:mode":o=>t.value=o,color:r.value,"onUpdate:color":s,disabled:e.disabled},null)]),e.showSwatches&&b(L7,{key:"swatches",color:r.value,"onUpdate:color":s,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)]})}),{}}});function q7(e,t,n){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?b(Fe,null,[b("span",{class:"v-combobox__unmask"},[e.substr(0,t)]),b("span",{class:"v-combobox__mask"},[e.substr(t,n)]),b("span",{class:"v-combobox__unmask"},[e.substr(t+n)])]):e}const U7=Z({autoSelectFirst:{type:[Boolean,String]},delimiters:Array,...ou({filterKeys:["title"]}),...hp({hideNoData:!0,returnObject:!0}),...gn(uf({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ui({transition:!1})},"VCombobox"),z7=ge()({name:"VCombobox",props:U7(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){var K;let{emit:n,slots:r}=t;const{t:i}=on(),s=ne(),a=Ae(!1),o=Ae(!0),l=Ae(!1),u=ne(),f=ne(),c=Ke(e,"menu"),d=F({get:()=>c.value,set:z=>{var se;c.value&&!z&&((se=u.value)!=null&&se.ΨopenChildren)||(c.value=z)}}),h=Ae(-1);let g=!1;const v=F(()=>{var z;return(z=s.value)==null?void 0:z.color}),p=F(()=>d.value?e.closeText:e.openText),{items:y,transformIn:w,transformOut:A}=up(e),{textColorClasses:I,textColorStyles:k}=Mn(v),x=Ke(e,"modelValue",[],z=>w(Wt(z)),z=>{const se=A(z);return e.multiple?se:se[0]??null}),C=rf(),m=Ae(e.multiple?"":((K=x.value[0])==null?void 0:K.title)??""),_=F({get:()=>m.value,set:z=>{var se;if(m.value=z??"",e.multiple||(x.value=[Hs(e,z)]),z&&e.multiple&&((se=e.delimiters)!=null&&se.length)){const Ee=z.split(new RegExp(`(?:${e.delimiters.join("|")})+`));Ee.length>1&&(Ee.forEach(V=>{V=V.trim(),V&&we(Hs(e,V))}),m.value="")}z||(h.value=-1),o.value=!z}});Re(m,z=>{g?ht(()=>g=!1):a.value&&!d.value&&(d.value=!0),n("update:search",z)}),Re(x,z=>{var se;e.multiple||(m.value=((se=z[0])==null?void 0:se.title)??"")});const{filteredItems:T,getMatches:E}=lu(e,y,()=>o.value?"":_.value),R=F(()=>e.hideSelected?T.value.filter(z=>!x.value.some(se=>se.value===z.value)):T.value),D=F(()=>x.value.map(z=>z.value)),$=F(()=>{var se;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&_.value===((se=R.value[0])==null?void 0:se.title))&&R.value.length>0&&!o.value&&!l.value}),M=F(()=>e.hideNoData&&!y.value.length||e.readonly||(C==null?void 0:C.isReadonly.value)),O=ne(),{onListScroll:L,onListKeydown:W}=fp(O,s);function te(z){g=!0,e.openOnClear&&(d.value=!0)}function ie(){M.value||(d.value=!0)}function Q(z){M.value||(a.value&&(z.preventDefault(),z.stopPropagation()),d.value=!d.value)}function ee(z){var V;if(q$(z)||e.readonly||C!=null&&C.isReadonly.value)return;const se=s.value.selectionStart,Ee=x.value.length;if((h.value>-1||["Enter","ArrowDown","ArrowUp"].includes(z.key))&&z.preventDefault(),["Enter","ArrowDown"].includes(z.key)&&(d.value=!0),["Escape"].includes(z.key)&&(d.value=!1),["Enter","Escape","Tab"].includes(z.key)&&($.value&&["Enter","Tab"].includes(z.key)&&we(T.value[0]),o.value=!0),z.key==="ArrowDown"&&$.value&&((V=O.value)==null||V.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(z.key)){if(h.value<0){z.key==="Backspace"&&!_.value&&(h.value=Ee-1);return}const H=h.value,G=x.value[h.value];G&&!G.props.disabled&&we(G),h.value=H>=Ee-1?Ee-2:H}if(z.key==="ArrowLeft"){if(h.value<0&&se>0)return;const H=h.value>-1?h.value-1:Ee-1;x.value[H]?h.value=H:(h.value=-1,s.value.setSelectionRange(_.value.length,_.value.length))}if(z.key==="ArrowRight"){if(h.value<0)return;const H=h.value+1;x.value[H]?h.value=H:(h.value=-1,s.value.setSelectionRange(0,0))}z.key==="Enter"&&_.value&&(we(Hs(e,_.value)),_.value="")}}function ye(){var z;a.value&&(o.value=!0,(z=s.value)==null||z.focus())}function we(z){if(e.multiple){const se=x.value.findIndex(Ee=>e.valueComparator(Ee.value,z.value));if(se===-1)x.value=[...x.value,z];else{const Ee=[...x.value];Ee.splice(se,1),x.value=Ee}_.value=""}else x.value=[z],m.value=z.title,ht(()=>{d.value=!1,o.value=!0})}function $e(z){a.value=!0,setTimeout(()=>{l.value=!0})}function le(z){l.value=!1}function B(z){(z==null||z===""&&!e.multiple)&&(x.value=[])}return Re(T,z=>{!z.length&&e.hideNoData&&(d.value=!1)}),Re(a,(z,se)=>{z||z===se||(h.value=-1,d.value=!1,$.value&&!l.value&&!x.value.some(Ee=>{let{value:V}=Ee;return V===R.value[0].value})?we(R.value[0]):e.multiple&&_.value&&(x.value=[...x.value,Hs(e,_.value)],_.value=""))}),Re(d,()=>{if(!e.hideSelected&&d.value&&x.value.length){const z=R.value.findIndex(se=>x.value.some(Ee=>e.valueComparator(Ee.value,se.value)));Pt&&window.requestAnimationFrame(()=>{var se;z>=0&&((se=f.value)==null||se.scrollToIndex(z))})}}),_e(()=>{const z=!!(e.chips||r.chip),se=!!(!e.hideNoData||R.value.length||r["prepend-item"]||r["append-item"]||r["no-data"]),Ee=x.value.length>0,V=ps.filterProps(e);return b(ps,xe({ref:s},V,{modelValue:_.value,"onUpdate:modelValue":[H=>_.value=H,B],focused:a.value,"onUpdate:focused":H=>a.value=H,validationValue:x.externalValue,counterValue:e.multiple?x.value.length:_.value.length,dirty:Ee,class:["v-combobox",{"v-combobox--active-menu":d.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!r.selection,"v-combobox--selecting-index":h.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:e.readonly,placeholder:Ee?void 0:e.placeholder,"onClick:clear":te,"onMousedown:control":ie,onKeydown:ee}),{...r,default:()=>b(Fe,null,[b(of,xe({ref:u,modelValue:d.value,"onUpdate:modelValue":H=>d.value=H,activator:"parent",contentClass:"v-combobox__content",disabled:M.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ye},e.menuProps),{default:()=>[se&&b(sf,{ref:O,selected:D.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:H=>H.preventDefault(),onKeydown:W,onFocusin:$e,onFocusout:le,onScrollPassive:L,tabindex:"-1",color:e.itemColor??e.color},{default:()=>{var H,G,re;return[(H=r["prepend-item"])==null?void 0:H.call(r),!R.value.length&&!e.hideNoData&&(((G=r["no-data"])==null?void 0:G.call(r))??b(Mi,{title:i(e.noDataText)},null)),b(cf,{ref:f,renderless:!0,items:R.value},{default:ce=>{var N;let{item:me,index:Ce,itemRef:ve}=ce;const P=xe(me.props,{ref:ve,key:Ce,active:$.value&&Ce===0?!0:void 0,onClick:()=>we(me)});return((N=r.item)==null?void 0:N.call(r,{item:me,index:Ce,props:P}))??b(Mi,P,{prepend:j=>{let{isSelected:U}=j;return b(Fe,null,[e.multiple&&!e.hideSelected?b(Ni,{key:me.value,modelValue:U,ripple:!1,tabindex:"-1"},null):void 0,me.props.prependIcon&&b(Tt,{icon:me.props.prependIcon},null)])},title:()=>{var j,U;return o.value?me.title:q7(me.title,(j=E(me))==null?void 0:j.title,((U=_.value)==null?void 0:U.length)??0)}})}}),(re=r["append-item"])==null?void 0:re.call(r)]}})]}),x.value.map((H,G)=>{function re(ve){ve.stopPropagation(),ve.preventDefault(),we(H)}const ce={"onClick:close":re,onMousedown(ve){ve.preventDefault(),ve.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},me=z?!!r.chip:!!r.selection,Ce=me?Ud(z?r.chip({item:H,index:G,props:ce}):r.selection({item:H,index:G})):void 0;if(!(me&&!Ce))return b("div",{key:H.value,class:["v-combobox__selection",G===h.value&&["v-combobox__selection--selected",I.value]],style:G===h.value?k.value:{}},[z?r.chip?b(ft,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:H.title}}},{default:()=>[Ce]}):b(iu,xe({key:"chip",closable:e.closableChips,size:"small",text:H.title,disabled:H.props.disabled},ce),null):Ce??b("span",{class:"v-combobox__selection-text"},[H.title,e.multiple&&G<x.value.length-1&&b("span",{class:"v-combobox__selection-comma"},[Ge(",")])])])})]),"append-inner":function(){var ce;for(var H=arguments.length,G=new Array(H),re=0;re<H;re++)G[re]=arguments[re];return b(Fe,null,[(ce=r["append-inner"])==null?void 0:ce.call(r,...G),(!e.hideNoData||e.items.length)&&e.menuIcon?b(Tt,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:Q,onClick:Rx,"aria-label":i(p.value),title:i(p.value)},null):void 0])}})}),Wr({isFocused:a,isPristine:o,menu:d,search:_,selectionIndex:h,filteredItems:T,select:we},s)}}),SE=Z({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),_E=Symbol.for("vuetify:datatable:expanded");function ff(e){const t=he(e,"expandOnClick"),n=Ke(e,"expanded",e.expanded,o=>new Set(o),o=>[...o.values()]);function r(o,l){const u=new Set(n.value);l?u.add(o.value):u.delete(o.value),n.value=u}function i(o){return n.value.has(o.value)}function s(o){r(o,!i(o))}const a={expand:r,expanded:n,expandOnClick:t,isExpanded:i,toggleExpand:s};return At(_E,a),a}function wE(){const e=it(_E);if(!e)throw new Error("foo");return e}const yp=Z({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),xE=Symbol.for("vuetify:data-table-group");function bp(e){return{groupBy:Ke(e,"groupBy")}}function hf(e){const{groupBy:t,sortBy:n}=e,r=ne(new Set),i=F(()=>t.value.map(u=>({...u,order:u.order??!1})).concat(n.value));function s(u){return r.value.has(u.id)}function a(u){const f=new Set(r.value);s(u)?f.delete(u.id):f.add(u.id),r.value=f}function o(u){function f(c){const d=[];for(const h of c.items)"type"in h&&h.type==="group"?d.push(...f(h)):d.push(h);return d}return f({type:"group",items:u,id:"dummy",key:"dummy",value:"dummy",depth:0})}const l={sortByWithGroups:i,toggleGroup:a,opened:r,groupBy:t,extractRows:o,isGroupOpen:s};return At(xE,l),l}function CE(){const e=it(xE);if(!e)throw new Error("Missing group!");return e}function K7(e,t){if(!e.length)return[];const n=new Map;for(const r of e){const i=Ys(r.raw,t);n.has(i)||n.set(i,[]),n.get(i).push(r)}return n}function EE(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const i=K7(e,t[0]),s=[],a=t.slice(1);return i.forEach((o,l)=>{const u=t[0],f=`${r}_${u}_${l}`;s.push({depth:n,id:f,key:u,value:l,items:a.length?EE(o,a,n+1,f):o,type:"group"})}),s}function TE(e,t){const n=[];for(const r of e)"type"in r&&r.type==="group"?(r.value!=null&&n.push(r),(t.has(r.id)||r.value==null)&&n.push(...TE(r.items,t))):n.push(r);return n}function gf(e,t,n){return{flatItems:F(()=>{if(!t.value.length)return e.value;const i=EE(e.value,t.value.map(s=>s.key));return TE(i,n.value)})}}function vf(e){let{page:t,itemsPerPage:n,sortBy:r,groupBy:i,search:s}=e;const a=an("VDataTable"),o=F(()=>({page:t.value,itemsPerPage:n.value,sortBy:r.value,groupBy:i.value,search:s.value}));let l=null;Re(o,()=>{Ss(l,o.value)||((l==null?void 0:l.search)!==o.value.search&&(t.value=1),a.emit("update:options",o.value),l=o.value)},{deep:!0,immediate:!0})}const Sp=Z({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),AE=Symbol.for("vuetify:data-table-pagination");function _p(e){const t=Ke(e,"page",void 0,r=>+(r??1)),n=Ke(e,"itemsPerPage",void 0,r=>+(r??10));return{page:t,itemsPerPage:n}}function wp(e){const{page:t,itemsPerPage:n,itemsLength:r}=e,i=F(()=>n.value===-1?0:n.value*(t.value-1)),s=F(()=>n.value===-1?r.value:Math.min(r.value,i.value+n.value)),a=F(()=>n.value===-1||r.value===0?1:Math.ceil(r.value/n.value));Qt(()=>{t.value>a.value&&(t.value=a.value)});function o(d){n.value=d,t.value=1}function l(){t.value=rn(t.value+1,1,a.value)}function u(){t.value=rn(t.value-1,1,a.value)}function f(d){t.value=rn(d,1,a.value)}const c={page:t,itemsPerPage:n,startIndex:i,stopIndex:s,pageCount:a,itemsLength:r,nextPage:l,prevPage:u,setPage:f,setItemsPerPage:o};return At(AE,c),c}function G7(){const e=it(AE);if(!e)throw new Error("Missing pagination!");return e}function IE(e){const{items:t,startIndex:n,stopIndex:r,itemsPerPage:i}=e;return{paginatedItems:F(()=>i.value<=0?t.value:t.value.slice(n.value,r.value))}}const W7={showSelectAll:!1,allSelected:()=>[],select:e=>{var r;let{items:t,value:n}=e;return new Set(n?[(r=t[0])==null?void 0:r.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},RE={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:r}=e;for(const i of t)n?r.add(i.value):r.delete(i.value);return r},selectAll:e=>{let{value:t,currentPage:n,selected:r}=e;return RE.select({items:n,value:t,selected:r})}},kE={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:r}=e;for(const i of t)n?r.add(i.value):r.delete(i.value);return r},selectAll:e=>{let{value:t,allItems:n,selected:r}=e;return kE.select({items:n,value:t,selected:r})}},PE=Z({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Ss}},"DataTable-select"),DE=Symbol.for("vuetify:data-table-selection");function mf(e,t){let{allItems:n,currentPage:r}=t;const i=Ke(e,"modelValue",e.modelValue,p=>new Set(Wt(p).map(y=>{var w;return((w=n.value.find(A=>e.valueComparator(y,A.value)))==null?void 0:w.value)??y})),p=>[...p.values()]),s=F(()=>n.value.filter(p=>p.selectable)),a=F(()=>r.value.filter(p=>p.selectable)),o=F(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return W7;case"all":return kE;case"page":default:return RE}});function l(p){return Wt(p).every(y=>i.value.has(y.value))}function u(p){return Wt(p).some(y=>i.value.has(y.value))}function f(p,y){const w=o.value.select({items:p,value:y,selected:new Set(i.value)});i.value=w}function c(p){f([p],!l([p]))}function d(p){const y=o.value.selectAll({value:p,allItems:s.value,currentPage:a.value,selected:new Set(i.value)});i.value=y}const h=F(()=>i.value.size>0),g=F(()=>{const p=o.value.allSelected({allItems:s.value,currentPage:a.value});return!!p.length&&l(p)}),v={toggleSelect:c,select:f,selectAll:d,isSelected:l,isSomeSelected:u,someSelected:h,allSelected:g,showSelectAll:o.value.showSelectAll};return At(DE,v),v}function pf(){const e=it(DE);if(!e)throw new Error("Missing selection!");return e}const FE=Z({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),OE=Symbol.for("vuetify:data-table-sort");function yf(e){const t=Ke(e,"sortBy"),n=he(e,"mustSort"),r=he(e,"multiSort");return{sortBy:t,mustSort:n,multiSort:r}}function bf(e){const{sortBy:t,mustSort:n,multiSort:r,page:i}=e,s=l=>{if(l.key==null)return;let u=t.value.map(c=>({...c}))??[];const f=u.find(c=>c.key===l.key);f?f.order==="desc"?n.value?f.order="asc":u=u.filter(c=>c.key!==l.key):f.order="desc":r.value?u=[...u,{key:l.key,order:"asc"}]:u=[{key:l.key,order:"asc"}],t.value=u,i&&(i.value=1)};function a(l){return!!t.value.find(u=>u.key===l.key)}const o={sortBy:t,toggleSort:s,isSorted:a};return At(OE,o),o}function Y7(){const e=it(OE);if(!e)throw new Error("Missing sort!");return e}function xp(e,t,n,r){const i=on();return{sortedItems:F(()=>n.value.length?J7(t.value,n.value,i.current.value,{...e.customKeySort,...r==null?void 0:r.value}):t.value)}}function J7(e,t,n,r){const i=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return[...e].sort((s,a)=>{for(let o=0;o<t.length;o++){const l=t[o].key,u=t[o].order??"asc";if(u===!1)continue;let f=Ys(s.raw,l),c=Ys(a.raw,l);if(u==="desc"&&([f,c]=[c,f]),r!=null&&r[l]){const d=r[l](f,c);if(!d)continue;return d}if(f instanceof Date&&c instanceof Date)return f.getTime()-c.getTime();if([f,c]=[f,c].map(d=>d!=null?d.toString().toLocaleLowerCase():d),f!==c)return Iu(f)&&Iu(c)?0:Iu(f)?-1:Iu(c)?1:!isNaN(f)&&!isNaN(c)?Number(f)-Number(c):i.compare(f,c)}return 0})}const X7=Z({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function Z7(e,t){const n=e.returnObject?t:Sn(t,e.itemValue),r=Sn(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:r,raw:t}}function Q7(e,t){const n=[];for(const r of t)n.push(Z7(e,r));return n}function eH(e){return{items:F(()=>Q7(e,e.items))}}const tH=Z({search:String,loading:Boolean,...Ne(),...X7(),...PE(),...FE(),...Sp({itemsPerPage:5}),...SE(),...yp(),...ou(),...rt()},"VDataIterator"),nH=ge()({name:"VDataIterator",props:tH(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"groupBy"),i=he(e,"search"),{items:s}=eH(e),{filteredItems:a}=lu(e,s,i,{transform:Q=>Q.raw}),{sortBy:o,multiSort:l,mustSort:u}=yf(e),{page:f,itemsPerPage:c}=_p(e),{toggleSort:d}=bf({sortBy:o,multiSort:l,mustSort:u,page:f}),{sortByWithGroups:h,opened:g,extractRows:v,isGroupOpen:p,toggleGroup:y}=hf({groupBy:r,sortBy:o}),{sortedItems:w}=xp(e,a,h),{flatItems:A}=gf(w,r,g),I=F(()=>A.value.length),{startIndex:k,stopIndex:x,pageCount:C,prevPage:m,nextPage:_,setItemsPerPage:T,setPage:E}=wp({page:f,itemsPerPage:c,itemsLength:I}),{paginatedItems:R}=IE({items:A,startIndex:k,stopIndex:x,itemsPerPage:c}),D=F(()=>v(R.value)),{isSelected:$,select:M,selectAll:O,toggleSelect:L}=mf(e,{allItems:s,currentPage:D}),{isExpanded:W,toggleExpand:te}=ff(e);vf({page:f,itemsPerPage:c,sortBy:o,groupBy:r,search:i});const ie=F(()=>({page:f.value,itemsPerPage:c.value,sortBy:o.value,pageCount:C.value,toggleSort:d,prevPage:m,nextPage:_,setPage:E,setItemsPerPage:T,isSelected:$,select:M,selectAll:O,toggleSelect:L,isExpanded:W,toggleExpand:te,isGroupOpen:p,toggleGroup:y,items:D.value,groupedItems:R.value}));return _e(()=>b(e.tag,{class:["v-data-iterator",e.class],style:e.style},{default:()=>{var Q,ee,ye,we;return[(Q=n.header)==null?void 0:Q.call(n,ie.value),R.value.length?(ye=n.default)==null?void 0:ye.call(n,ie.value):(ee=n["no-data"])==null?void 0:ee.call(n),(we=n.footer)==null?void 0:we.call(n,ie.value)]}})),{}}}),Cp=Z({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ol=ge()({name:"VDataTableFooter",props:Cp(),setup(e,t){let{slots:n}=t;const{t:r}=on(),{page:i,pageCount:s,startIndex:a,stopIndex:o,itemsLength:l,itemsPerPage:u,setItemsPerPage:f}=G7(),c=F(()=>e.itemsPerPageOptions.map(d=>typeof d=="number"?{value:d,title:d===-1?r("$vuetify.dataFooter.itemsPerPageAll"):String(d)}:{...d,title:r(d.title)}));return()=>{var d;return b("div",{class:"v-data-table-footer"},[(d=n.prepend)==null?void 0:d.call(n),b("div",{class:"v-data-table-footer__items-per-page"},[b("span",null,[r(e.itemsPerPageText)]),b(nE,{items:c.value,modelValue:u.value,"onUpdate:modelValue":h=>f(Number(h)),density:"compact",variant:"outlined","hide-details":!0},null)]),b("div",{class:"v-data-table-footer__info"},[b("div",null,[r(e.pageText,l.value?a.value+1:0,o.value,l.value)])]),b("div",{class:"v-data-table-footer__pagination"},[b(pt,{icon:e.firstIcon,variant:"plain",onClick:()=>i.value=1,disabled:i.value===1,"aria-label":r(e.firstPageLabel)},null),b(pt,{icon:e.prevIcon,variant:"plain",onClick:()=>i.value=Math.max(1,i.value-1),disabled:i.value===1,"aria-label":r(e.prevPageLabel)},null),e.showCurrentPage&&b("span",{key:"page",class:"v-data-table-footer__page"},[i.value]),b(pt,{icon:e.nextIcon,variant:"plain",onClick:()=>i.value=Math.min(s.value,i.value+1),disabled:i.value===s.value,"aria-label":r(e.nextPageLabel)},null),b(pt,{icon:e.lastIcon,variant:"plain",onClick:()=>i.value=s.value,disabled:i.value===s.value,"aria-label":r(e.lastPageLabel)},null)])])}}}),Ep=SM({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(e,t)=>{let{slots:n}=t;const r=e.tag??"td";return b(r,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding},`v-data-table-column--align-${e.align}`],style:{height:De(e.height),width:De(e.width),left:De(e.fixedOffset||null)}},{default:()=>{var i;return[(i=n.default)==null?void 0:i.call(n)]}})}),rH=Z({headers:Array},"DataTable-header"),NE=Symbol.for("vuetify:data-table-headers"),$E={title:"",sortable:!1},iH={...$E,width:48};function sH(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,r)=>{let i=!1;for(let s=0;s<t.length;s++)if(t[s].priority>r){t.splice(s,0,{element:n,priority:r}),i=!0;break}i||t.push({element:n,priority:r})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const r=Math.floor(t[0].priority);for(let i=0;i<t.length;i++)Math.floor(t[i].priority)===r&&(n+=1);return n},dequeue:()=>t.shift()}}function Mg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)Mg(n,t);return t}function ME(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&ME(n.children,t);return t}function aH(e){if(e.key){if(e.key==="data-table-group")return $E;if(["data-table-expand","data-table-select"].includes(e.key))return iH}}function Tp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>Tp(n,t+1))):t}function oH(e){let t=!1;function n(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s)if(a&&(s.fixed=!0),s.fixed)if(s.children)for(let o=s.children.length-1;o>=0;o--)n(s.children[o],!0);else t?isNaN(+s.width)&&(`${s.key}`,void 0):s.lastFixed=!0,t=!0;else if(s.children)for(let o=s.children.length-1;o>=0;o--)n(s.children[o]);else t=!1}for(let s=e.length-1;s>=0;s--)n(e[s]);function r(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!s)return a;if(s.children){s.fixedOffset=a;for(const o of s.children)a=r(o,a)}else s.fixed&&(s.fixedOffset=a,a+=parseFloat(s.width||"0")||0);return a}let i=0;for(const s of e)i=r(s,i)}function lH(e,t){const n=[];let r=0;const i=sH(e);for(;i.size()>0;){let a=i.count();const o=[];let l=1;for(;a>0;){const{element:u,priority:f}=i.dequeue(),c=t-r-Tp(u);if(o.push({...u,rowspan:c??1,colspan:u.children?Mg(u).length:1}),u.children)for(const d of u.children){const h=f%1+l/Math.pow(10,r+1);i.enqueue(d,r+c+h)}l+=1,a-=1}r+=1,n.push(o)}return{columns:e.map(a=>Mg(a)).flat(),headers:n}}function VE(e){const t=[];for(const n of e){const r={...aH(n),...n},i=r.key??(typeof r.value=="string"?r.value:null),s=r.value??i??null,a={...r,key:i,value:s,sortable:r.sortable??(r.key!=null||!!r.sort),children:r.children?VE(r.children):void 0};t.push(a)}return t}function Ap(e,t){const n=ne([]),r=ne([]),i=ne(),s=ne();Qt(()=>{var g,v,p;const l=(e.headers||Object.keys(e.items[0]??{}).map(y=>({key:y,title:li(y)}))).slice(),u=ME(l);(g=t==null?void 0:t.groupBy)!=null&&g.value.length&&!u.has("data-table-group")&&l.unshift({key:"data-table-group",title:"Group"}),(v=t==null?void 0:t.showSelect)!=null&&v.value&&!u.has("data-table-select")&&l.unshift({key:"data-table-select"}),(p=t==null?void 0:t.showExpand)!=null&&p.value&&!u.has("data-table-expand")&&l.push({key:"data-table-expand"});const f=VE(l);oH(f);const c=Math.max(...f.map(y=>Tp(y)))+1,d=lH(f,c);n.value=d.headers,r.value=d.columns;const h=d.headers.flat(1);i.value=h.reduce((y,w)=>(w.sortable&&w.key&&w.sort&&(y[w.key]=w.sort),y),{}),s.value=h.reduce((y,w)=>(w.key&&w.filter&&(y[w.key]=w.filter),y),{})});const a={headers:n,columns:r,sortFunctions:i,filterFunctions:s};return At(NE,a),a}function Sf(){const e=it(NE);if(!e)throw new Error("Missing headers!");return e}const BE=Z({color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:tt,default:"$sortAsc"},sortDescIcon:{type:tt,default:"$sortDesc"},...ef()},"VDataTableHeaders"),lo=ge()({name:"VDataTableHeaders",props:BE(),setup(e,t){let{slots:n}=t;const{toggleSort:r,sortBy:i,isSorted:s}=Y7(),{someSelected:a,allSelected:o,selectAll:l,showSelectAll:u}=pf(),{columns:f,headers:c}=Sf(),{loaderClasses:d}=eu(e);function h(A,I){if(!(!e.sticky&&!A.fixed))return{position:"sticky",left:A.fixed?De(A.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${I})`:void 0}}function g(A){const I=i.value.find(k=>k.key===A.key);return I?I.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:v,backgroundColorStyles:p}=Ot(e,"color"),y=F(()=>({headers:c.value,columns:f.value,toggleSort:r,isSorted:s,sortBy:i.value,someSelected:a.value,allSelected:o.value,selectAll:l,getSortIcon:g})),w=A=>{let{column:I,x:k,y:x}=A;const C=I.key==="data-table-select"||I.key==="data-table-expand";return b(Ep,xe({tag:"th",align:I.align,class:["v-data-table__th",{"v-data-table__th--sortable":I.sortable,"v-data-table__th--sorted":s(I),"v-data-table__th--fixed":I.fixed},d.value],style:{width:De(I.width),minWidth:De(I.width),...h(I,x)},colspan:I.colspan,rowspan:I.rowspan,onClick:I.sortable?()=>r(I):void 0,fixed:I.fixed,lastFixed:I.lastFixed,noPadding:C},I.headerProps),{default:()=>{var T;const m=`header.${I.key}`,_={column:I,selectAll:l,isSorted:s,toggleSort:r,sortBy:i.value,someSelected:a.value,allSelected:o.value,getSortIcon:g};return n[m]?n[m](_):I.key==="data-table-select"?((T=n["header.data-table-select"])==null?void 0:T.call(n,_))??(u&&b(Ni,{modelValue:o.value,indeterminate:a.value&&!o.value,"onUpdate:modelValue":l},null)):b("div",{class:"v-data-table-header__content"},[b("span",null,[I.title]),I.sortable&&b(Tt,{key:"icon",class:"v-data-table-header__sort-icon",icon:g(I)},null),e.multiSort&&s(I)&&b("div",{key:"badge",class:["v-data-table-header__sort-badge",...v.value],style:p.value},[i.value.findIndex(E=>E.key===I.key)+1])])}})};_e(()=>b(Fe,null,[n.headers?n.headers(y.value):c.value.map((A,I)=>b("tr",null,[A.map((k,x)=>b(w,{column:k,x,y:I},null))])),e.loading&&b("tr",{class:"v-data-table-progress"},[b("th",{colspan:f.value.length},[b(tf,{name:"v-data-table-progress",active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),uH=Z({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),cH=ge()({name:"VDataTableGroupHeaderRow",props:uH(),setup(e,t){let{slots:n}=t;const{isGroupOpen:r,toggleGroup:i,extractRows:s}=CE(),{isSelected:a,isSomeSelected:o,select:l}=pf(),{columns:u}=Sf(),f=F(()=>s([e.item]));return()=>b("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(c=>{var d,h;if(c.key==="data-table-group"){const g=r(e.item)?"$expand":"$next",v=()=>i(e.item);return((d=n["data-table-group"])==null?void 0:d.call(n,{item:e.item,count:f.value.length,props:{icon:g,onClick:v}}))??b(Ep,{class:"v-data-table-group-header-row__column"},{default:()=>[b(pt,{size:"small",variant:"text",icon:g,onClick:v},null),b("span",null,[e.item.value]),b("span",null,[Ge("("),f.value.length,Ge(")")])]})}if(c.key==="data-table-select"){const g=a(f.value),v=o(f.value)&&!g,p=y=>l(f.value,y);return((h=n["data-table-select"])==null?void 0:h.call(n,{props:{modelValue:g,indeterminate:v,"onUpdate:modelValue":p}}))??b("td",null,[b(Ni,{modelValue:g,indeterminate:v,"onUpdate:modelValue":p},null)])}return b("td",null,null)})])}}),dH=Z({index:Number,item:Object,cellProps:[Object,Function],onClick:er(),onContextmenu:er(),onDblclick:er()},"VDataTableRow"),Ip=ge()({name:"VDataTableRow",props:dH(),setup(e,t){let{slots:n}=t;const{isSelected:r,toggleSelect:i}=pf(),{isExpanded:s,toggleExpand:a}=wE(),{columns:o}=Sf();_e(()=>b("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)}],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&o.value.map((l,u)=>{const f=e.item,c=`item.${l.key}`,d={index:e.index,item:f.raw,internalItem:f,value:Ys(f.columns,l.key),column:l,isSelected:r,toggleSelect:i,isExpanded:s,toggleExpand:a},h=typeof e.cellProps=="function"?e.cellProps({index:d.index,item:d.item,internalItem:d.internalItem,value:d.value,column:l}):e.cellProps,g=typeof l.cellProps=="function"?l.cellProps({index:d.index,item:d.item,internalItem:d.internalItem,value:d.value}):l.cellProps;return b(Ep,xe({align:l.align,fixed:l.fixed,fixedOffset:l.fixedOffset,lastFixed:l.lastFixed,noPadding:l.key==="data-table-select"||l.key==="data-table-expand",width:l.width},h,g),{default:()=>{var v,p;return n[c]?n[c](d):l.key==="data-table-select"?((v=n["item.data-table-select"])==null?void 0:v.call(n,d))??b(Ni,{disabled:!f.selectable,modelValue:r([f]),onClick:_0(()=>i(f),["stop"])},null):l.key==="data-table-expand"?((p=n["item.data-table-expand"])==null?void 0:p.call(n,d))??b(pt,{icon:s(f)?"$collapse":"$expand",size:"small",variant:"text",onClick:_0(()=>a(f),["stop"])},null):Ue(d.value)}})})]))}}),LE=Z({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,rowProps:[Object,Function],cellProps:[Object,Function]},"VDataTableRows"),Qs=ge()({name:"VDataTableRows",inheritAttrs:!1,props:LE(),setup(e,t){let{attrs:n,slots:r}=t;const{columns:i}=Sf(),{expandOnClick:s,toggleExpand:a,isExpanded:o}=wE(),{isSelected:l,toggleSelect:u}=pf(),{toggleGroup:f,isGroupOpen:c}=CE(),{t:d}=on();return _e(()=>{var h,g;return e.loading?b("tr",{class:"v-data-table-rows-loading",key:"loading"},[b("td",{colspan:i.value.length},[((h=r.loading)==null?void 0:h.call(r))??d(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?b("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[b("td",{colspan:i.value.length},[((g=r["no-data"])==null?void 0:g.call(r))??d(e.noDataText)])]):b(Fe,null,[e.items.map((v,p)=>{var A;if(v.type==="group"){const I={index:p,item:v,columns:i.value,isExpanded:o,toggleExpand:a,isSelected:l,toggleSelect:u,toggleGroup:f,isGroupOpen:c};return r["group-header"]?r["group-header"](I):b(cH,xe({key:`group-header_${v.id}`,item:v},l1(n,":group-header",()=>I)),r)}const y={index:p,item:v.raw,internalItem:v,columns:i.value,isExpanded:o,toggleExpand:a,isSelected:l,toggleSelect:u},w={...y,props:xe({key:`item_${v.key??v.index}`,onClick:s.value?()=>{a(v)}:void 0,index:p,item:v,cellProps:e.cellProps},l1(n,":row",()=>y),typeof e.rowProps=="function"?e.rowProps({item:y.item,index:y.index,internalItem:y.internalItem}):e.rowProps)};return b(Fe,{key:w.props.key},[r.item?r.item(w):b(Ip,w.props,r),o(v)&&((A=r["expanded-row"])==null?void 0:A.call(r,y))])})])}),{}}}),HE=Z({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Ne(),...vn(),...rt(),...dt()},"VTable"),ea=ge()({name:"VTable",props:HE(),setup(e,t){let{slots:n,emit:r}=t;const{themeClasses:i}=xt(e),{densityClasses:s}=Hn(e);return _e(()=>b(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover},i.value,s.value,e.class],style:e.style},{default:()=>{var a,o,l;return[(a=n.top)==null?void 0:a.call(n),n.default?b("div",{class:"v-table__wrapper",style:{height:De(e.height)}},[b("table",null,[n.default()])]):(o=n.wrapper)==null?void 0:o.call(n),(l=n.bottom)==null?void 0:l.call(n)]}})),{}}}),fH=Z({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function hH(e,t,n,r){const i=e.returnObject?t:Sn(t,e.itemValue),s=Sn(t,e.itemSelectable,!0),a=r.reduce((o,l)=>(l.key!=null&&(o[l.key]=Sn(t,l.value)),o),{});return{type:"item",key:e.returnObject?Sn(t,e.itemValue):i,index:n,value:i,selectable:s,columns:a,raw:t}}function gH(e,t,n){return t.map((r,i)=>hH(e,r,i,n))}function Rp(e,t){return{items:F(()=>gH(e,e.items,t.value))}}const kp=Z({...LE(),width:[String,Number],search:String,...SE(),...yp(),...rH(),...fH(),...PE(),...FE(),...BE(),...HE()},"DataTable"),vH=Z({...Sp(),...kp(),...ou(),...Cp()},"VDataTable"),mH=ge()({name:"VDataTable",props:vH(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{groupBy:i}=bp(e),{sortBy:s,multiSort:a,mustSort:o}=yf(e),{page:l,itemsPerPage:u}=_p(e),{columns:f,headers:c,sortFunctions:d,filterFunctions:h}=Ap(e,{groupBy:i,showSelect:he(e,"showSelect"),showExpand:he(e,"showExpand")}),{items:g}=Rp(e,f),v=he(e,"search"),{filteredItems:p}=lu(e,g,v,{transform:$e=>$e.columns,customKeyFilter:h}),{toggleSort:y}=bf({sortBy:s,multiSort:a,mustSort:o,page:l}),{sortByWithGroups:w,opened:A,extractRows:I,isGroupOpen:k,toggleGroup:x}=hf({groupBy:i,sortBy:s}),{sortedItems:C}=xp(e,p,w,d),{flatItems:m}=gf(C,i,A),_=F(()=>m.value.length),{startIndex:T,stopIndex:E,pageCount:R,setItemsPerPage:D}=wp({page:l,itemsPerPage:u,itemsLength:_}),{paginatedItems:$}=IE({items:m,startIndex:T,stopIndex:E,itemsPerPage:u}),M=F(()=>I($.value)),{isSelected:O,select:L,selectAll:W,toggleSelect:te,someSelected:ie,allSelected:Q}=mf(e,{allItems:g,currentPage:M}),{isExpanded:ee,toggleExpand:ye}=ff(e);vf({page:l,itemsPerPage:u,sortBy:s,groupBy:i,search:v}),Bt({VDataTableRows:{hideNoData:he(e,"hideNoData"),noDataText:he(e,"noDataText"),loading:he(e,"loading"),loadingText:he(e,"loadingText")}});const we=F(()=>({page:l.value,itemsPerPage:u.value,sortBy:s.value,pageCount:R.value,toggleSort:y,setItemsPerPage:D,someSelected:ie.value,allSelected:Q.value,isSelected:O,select:L,selectAll:W,toggleSelect:te,isExpanded:ee,toggleExpand:ye,isGroupOpen:k,toggleGroup:x,items:M.value.map($e=>$e.raw),internalItems:M.value,groupedItems:$.value,columns:f.value,headers:c.value}));return _e(()=>{const $e=Ol.filterProps(e),le=lo.filterProps(e),B=Qs.filterProps(e),K=ea.filterProps(e);return b(ea,xe({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},K),{top:()=>{var z;return(z=r.top)==null?void 0:z.call(r,we.value)},default:()=>{var z,se,Ee,V,H,G;return r.default?r.default(we.value):b(Fe,null,[(z=r.colgroup)==null?void 0:z.call(r,we.value),b("thead",null,[b(lo,le,r)]),(se=r.thead)==null?void 0:se.call(r,we.value),b("tbody",null,[(Ee=r["body.prepend"])==null?void 0:Ee.call(r,we.value),r.body?r.body(we.value):b(Qs,xe(n,B,{items:$.value}),r),(V=r["body.append"])==null?void 0:V.call(r,we.value)]),(H=r.tbody)==null?void 0:H.call(r,we.value),(G=r.tfoot)==null?void 0:G.call(r,we.value)])},bottom:()=>r.bottom?r.bottom(we.value):b(Fe,null,[b(Ol,$e,{prepend:r["footer.prepend"]})])})}),{}}}),pH=Z({...kp(),...yp(),...eE(),...ou()},"VDataTableVirtual"),yH=ge()({name:"VDataTableVirtual",props:pH(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{groupBy:i}=bp(e),{sortBy:s,multiSort:a,mustSort:o}=yf(e),{columns:l,headers:u,sortFunctions:f,filterFunctions:c}=Ap(e,{groupBy:i,showSelect:he(e,"showSelect"),showExpand:he(e,"showExpand")}),{items:d}=Rp(e,l),h=he(e,"search"),{filteredItems:g}=lu(e,d,h,{transform:le=>le.columns,customKeyFilter:c}),{toggleSort:v}=bf({sortBy:s,multiSort:a,mustSort:o}),{sortByWithGroups:p,opened:y,extractRows:w,isGroupOpen:A,toggleGroup:I}=hf({groupBy:i,sortBy:s}),{sortedItems:k}=xp(e,g,p,f),{flatItems:x}=gf(k,i,y),C=F(()=>w(x.value)),{isSelected:m,select:_,selectAll:T,toggleSelect:E,someSelected:R,allSelected:D}=mf(e,{allItems:C,currentPage:C}),{isExpanded:$,toggleExpand:M}=ff(e),{containerRef:O,markerRef:L,paddingTop:W,paddingBottom:te,computedItems:ie,handleItemResize:Q,handleScroll:ee,handleScrollend:ye}=tE(e,x),we=F(()=>ie.value.map(le=>le.raw));vf({sortBy:s,page:Ae(1),itemsPerPage:Ae(-1),groupBy:i,search:h}),Bt({VDataTableRows:{hideNoData:he(e,"hideNoData"),noDataText:he(e,"noDataText"),loading:he(e,"loading"),loadingText:he(e,"loadingText")}});const $e=F(()=>({sortBy:s.value,toggleSort:v,someSelected:R.value,allSelected:D.value,isSelected:m,select:_,selectAll:T,toggleSelect:E,isExpanded:$,toggleExpand:M,isGroupOpen:A,toggleGroup:I,items:C.value.map(le=>le.raw),internalItems:C.value,groupedItems:x.value,columns:l.value,headers:u.value}));_e(()=>{const le=lo.filterProps(e),B=Qs.filterProps(e),K=ea.filterProps(e);return b(ea,xe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},K),{top:()=>{var z;return(z=r.top)==null?void 0:z.call(r,$e.value)},wrapper:()=>{var z,se;return b("div",{ref:O,onScrollPassive:ee,onScrollend:ye,class:"v-table__wrapper",style:{height:De(e.height)}},[b("table",null,[b("thead",null,[b(lo,xe(le,{sticky:e.fixedHeader}),r)]),b("tbody",null,[b("tr",{ref:L,style:{height:De(W.value),border:0}},[b("td",{colspan:l.value.length,style:{height:0,border:0}},null)]),(z=r["body.prepend"])==null?void 0:z.call(r,$e.value),b(Qs,xe(n,B,{items:we.value}),{...r,item:Ee=>b(QC,{key:Ee.internalItem.index,renderless:!0,"onUpdate:height":V=>Q(Ee.internalItem.index,V)},{default:V=>{var G;let{itemRef:H}=V;return((G=r.item)==null?void 0:G.call(r,{...Ee,itemRef:H}))??b(Ip,xe(Ee.props,{ref:H,key:Ee.internalItem.index,index:Ee.internalItem.index}),r)}})}),(se=r["body.append"])==null?void 0:se.call(r,$e.value),b("tr",{style:{height:De(te.value),border:0}},[b("td",{colspan:l.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var z;return(z=r.bottom)==null?void 0:z.call(r,$e.value)}})})}}),bH=Z({itemsLength:{type:[Number,String],required:!0},...Sp(),...kp(),...Cp()},"VDataTableServer"),SH=ge()({name:"VDataTableServer",props:bH(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const{groupBy:i}=bp(e),{sortBy:s,multiSort:a,mustSort:o}=yf(e),{page:l,itemsPerPage:u}=_p(e),f=F(()=>parseInt(e.itemsLength,10)),{columns:c,headers:d}=Ap(e,{groupBy:i,showSelect:he(e,"showSelect"),showExpand:he(e,"showExpand")}),{items:h}=Rp(e,c),{toggleSort:g}=bf({sortBy:s,multiSort:a,mustSort:o,page:l}),{opened:v,isGroupOpen:p,toggleGroup:y,extractRows:w}=hf({groupBy:i,sortBy:s}),{pageCount:A,setItemsPerPage:I}=wp({page:l,itemsPerPage:u,itemsLength:f}),{flatItems:k}=gf(h,i,v),{isSelected:x,select:C,selectAll:m,toggleSelect:_,someSelected:T,allSelected:E}=mf(e,{allItems:h,currentPage:h}),{isExpanded:R,toggleExpand:D}=ff(e),$=F(()=>w(h.value));vf({page:l,itemsPerPage:u,sortBy:s,groupBy:i,search:he(e,"search")}),At("v-data-table",{toggleSort:g,sortBy:s}),Bt({VDataTableRows:{hideNoData:he(e,"hideNoData"),noDataText:he(e,"noDataText"),loading:he(e,"loading"),loadingText:he(e,"loadingText")}});const M=F(()=>({page:l.value,itemsPerPage:u.value,sortBy:s.value,pageCount:A.value,toggleSort:g,setItemsPerPage:I,someSelected:T.value,allSelected:E.value,isSelected:x,select:C,selectAll:m,toggleSelect:_,isExpanded:R,toggleExpand:D,isGroupOpen:p,toggleGroup:y,items:$.value.map(O=>O.raw),internalItems:$.value,groupedItems:k.value,columns:c.value,headers:d.value}));_e(()=>{const O=Ol.filterProps(e),L=lo.filterProps(e),W=Qs.filterProps(e),te=ea.filterProps(e);return b(ea,xe({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},te),{top:()=>{var ie;return(ie=r.top)==null?void 0:ie.call(r,M.value)},default:()=>{var ie,Q,ee,ye,we,$e;return r.default?r.default(M.value):b(Fe,null,[(ie=r.colgroup)==null?void 0:ie.call(r,M.value),b("thead",{class:"v-data-table__thead",role:"rowgroup"},[b(lo,xe(L,{sticky:e.fixedHeader}),r)]),(Q=r.thead)==null?void 0:Q.call(r,M.value),b("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(ee=r["body.prepend"])==null?void 0:ee.call(r,M.value),r.body?r.body(M.value):b(Qs,xe(n,W,{items:k.value}),r),(ye=r["body.append"])==null?void 0:ye.call(r,M.value)]),(we=r.tbody)==null?void 0:we.call(r,M.value),($e=r.tfoot)==null?void 0:$e.call(r,M.value)])},bottom:()=>r.bottom?r.bottom(M.value):b(Ol,O,{prepend:r["footer.prepend"]})})})}}),_H=Z({fluid:{type:Boolean,default:!1},...Ne(),...rt()},"VContainer"),wH=ge()({name:"VContainer",props:_H(),setup(e,t){let{slots:n}=t;const{rtlClasses:r}=Cn();return _e(()=>b(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},r.value,e.class],style:e.style},n)),{}}}),jE=(()=>Gd.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}))(),qE=(()=>Gd.reduce((e,t)=>{const n="offset"+li(t);return e[n]={type:[String,Number],default:null},e},{}))(),UE=(()=>Gd.reduce((e,t)=>{const n="order"+li(t);return e[n]={type:[String,Number],default:null},e},{}))(),R1={col:Object.keys(jE),offset:Object.keys(qE),order:Object.keys(UE)};function xH(e,t,n){let r=e;if(!(n==null||n===!1)){if(t){const i=t.replace(e,"");r+=`-${i}`}return e==="col"&&(r="v-"+r),e==="col"&&(n===""||n===!0)||(r+=`-${n}`),r.toLowerCase()}}const CH=["auto","start","end","center","baseline","stretch"],EH=Z({cols:{type:[Boolean,String,Number],default:!1},...jE,offset:{type:[String,Number],default:null},...qE,order:{type:[String,Number],default:null},...UE,alignSelf:{type:String,default:null,validator:e=>CH.includes(e)},...Ne(),...rt()},"VCol"),TH=ge()({name:"VCol",props:EH(),setup(e,t){let{slots:n}=t;const r=F(()=>{const i=[];let s;for(s in R1)R1[s].forEach(o=>{const l=e[o],u=xH(s,o,l);u&&i.push(u)});const a=i.some(o=>o.startsWith("v-col-"));return i.push({"v-col":!a||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),i});return()=>{var i;return ui(e.tag,{class:[r.value,e.class],style:e.style},(i=n.default)==null?void 0:i.call(n))}}}),Pp=["start","end","center"],zE=["space-between","space-around","space-evenly"];function Dp(e,t){return Gd.reduce((n,r)=>{const i=e+li(r);return n[i]=t(),n},{})}const AH=[...Pp,"baseline","stretch"],KE=e=>AH.includes(e),GE=Dp("align",()=>({type:String,default:null,validator:KE})),IH=[...Pp,...zE],WE=e=>IH.includes(e),YE=Dp("justify",()=>({type:String,default:null,validator:WE})),RH=[...Pp,...zE,"stretch"],JE=e=>RH.includes(e),XE=Dp("alignContent",()=>({type:String,default:null,validator:JE})),k1={align:Object.keys(GE),justify:Object.keys(YE),alignContent:Object.keys(XE)},kH={align:"align",justify:"justify",alignContent:"align-content"};function PH(e,t,n){let r=kH[e];if(n!=null){if(t){const i=t.replace(e,"");r+=`-${i}`}return r+=`-${n}`,r.toLowerCase()}}const DH=Z({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:KE},...GE,justify:{type:String,default:null,validator:WE},...YE,alignContent:{type:String,default:null,validator:JE},...XE,...Ne(),...rt()},"VRow"),FH=ge()({name:"VRow",props:DH(),setup(e,t){let{slots:n}=t;const r=F(()=>{const i=[];let s;for(s in k1)k1[s].forEach(a=>{const o=e[a],l=PH(s,a,o);l&&i.push(l)});return i.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),i});return()=>{var i;return ui(e.tag,{class:["v-row",r.value,e.class],style:e.style},(i=n.default)==null?void 0:i.call(n))}}}),ZE=gr("v-spacer","div","VSpacer"),QE=Z({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Vg=ge()({name:"VDatePickerControls",props:QE(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const r=F(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),i=F(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),s=F(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),a=F(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function o(){n("click:prev")}function l(){n("click:next")}function u(){n("click:year")}function f(){n("click:month")}return _e(()=>b("div",{class:["v-date-picker-controls"]},[b(pt,{class:"v-date-picker-controls__month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:f},null),b(pt,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:i.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:u},null),b(ZE,{key:"mode-spacer"},null),b("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[b(pt,{disabled:s.value,icon:e.prevIcon,variant:"text",onClick:o},null),b(pt,{disabled:a.value,icon:e.nextIcon,variant:"text",onClick:l},null)])])),{}}}),OH=Z({appendIcon:String,color:String,header:String,transition:String,onClick:er()},"VDatePickerHeader"),Bg=ge()({name:"VDatePickerHeader",props:OH(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:r}=t;const{backgroundColorClasses:i,backgroundColorStyles:s}=Ot(e,"color");function a(){n("click")}function o(){n("click:append")}return _e(()=>{const l=!!(r.default||e.header),u=!!(r.append||e.appendIcon);return b("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},i.value],style:s.value,onClick:a},[r.prepend&&b("div",{key:"prepend",class:"v-date-picker-header__prepend"},[r.prepend()]),l&&b(Tr,{key:"content",name:e.transition},{default:()=>{var f;return[b("div",{key:e.header,class:"v-date-picker-header__content"},[((f=r.default)==null?void 0:f.call(r))??e.header])]}}),u&&b("div",{class:"v-date-picker-header__append"},[r.append?b(ft,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var f;return[(f=r.append)==null?void 0:f.call(r)]}}):b(pt,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:o},null)])])}),{}}}),e2=Z({allowedDates:[Array,Function],disabled:Boolean,color:String,month:[Number,String],hideWeekdays:Boolean,max:null,min:null,modelValue:Array,multiple:Boolean,showAdjacentMonths:Boolean,showWeek:Boolean,year:[Number,String]},"VDatePickerMonth"),Lg=ge()({name:"VDatePickerMonth",props:e2(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const i=ne(),s=Kd(),a=Ke(e,"modelValue",[],v=>Wt(v)),o=F(()=>{var p;const v=(p=a.value)==null?void 0:p[0];return v&&s.isValid(v)?v:s.date()}),l=Ke(e,"year",void 0,v=>{let p=s.date(o.value);return v!=null&&(p=s.setYear(p,Number(v))),s.startOfYear(p)},v=>s.getYear(v)),u=Ke(e,"month",void 0,v=>{let p=s.date(o.value);return v!=null&&(p=s.setMonth(p,Number(v))),p=s.setYear(p,s.getYear(l.value)),p},v=>s.getMonth(v)),f=F(()=>{const v=s.getWeekArray(u.value),p=v.flat(),y=6*7;if(p.length<y){const w=p[p.length-1];let A=[];for(let I=1;I<=y-p.length;I++)A.push(s.addDays(w,I)),I%7===0&&(v.push(A),A=[])}return v}),c=F(()=>{const v=f.value.flat(),p=s.date();return v.map((y,w)=>{const A=s.toISO(y),I=!s.isSameMonth(y,u.value);return{date:y,isoDate:A,formatted:s.format(y,"keyboardDate"),year:s.getYear(y),month:s.getMonth(y),isDisabled:h(y),isWeekStart:w%7===0,isWeekEnd:w%7===6,isSelected:a.value.some(k=>s.isSameDay(y,k)),isToday:s.isSameDay(y,p),isAdjacent:I,isHidden:I&&!e.showAdjacentMonths,isHovered:!1,localized:s.format(y,"dayOfMonth")}})}),d=F(()=>f.value.map(v=>ZM(s,v[0])));function h(v){if(e.disabled)return!0;const p=s.date(v);return e.min&&s.isAfter(e.min,p)||e.max&&s.isAfter(p,e.max)?!0:Array.isArray(e.allowedDates)?!e.allowedDates.some(y=>s.isSameDay(s.date(y),p)):typeof e.allowedDates=="function"?!e.allowedDates(p):!1}function g(v){if(e.multiple){const p=a.value.findIndex(y=>s.isSameDay(y,v));if(p===-1)a.value=[...a.value,v];else{const y=[...a.value];y.splice(p,1),a.value=y}}else a.value=[v]}return()=>b("div",{class:"v-date-picker-month"},[e.showWeek&&b("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&b("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[Ge(" ")]),d.value.map(v=>b("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[v]))]),b("div",{ref:i,class:"v-date-picker-month__days"},[!e.hideWeekdays&&s.getWeekdays().map(v=>b("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[v])),c.value.map((v,p)=>{const y={props:{onClick:()=>g(v.date)},item:v,i:p};return b("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":v.isAdjacent,"v-date-picker-month__day--hide-adjacent":v.isHidden,"v-date-picker-month__day--hovered":v.isHovered,"v-date-picker-month__day--selected":v.isSelected,"v-date-picker-month__day--week-end":v.isWeekEnd,"v-date-picker-month__day--week-start":v.isWeekStart}],"data-v-date":v.isDisabled?void 0:v.isoDate},[(e.showAdjacentMonths||!v.isAdjacent)&&b(ft,{defaults:{VBtn:{color:(v.isSelected||v.isToday)&&!v.isDisabled?e.color:void 0,disabled:v.isDisabled,icon:!0,ripple:!1,text:v.localized,variant:v.isDisabled?"text":v.isToday&&!v.isSelected?"outlined":"flat",onClick:()=>g(v.date)}}},{default:()=>{var w;return[((w=r.day)==null?void 0:w.call(r,y))??b(pt,y.props,null)]}})])})])])}}),t2=Z({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),Hg=ge()({name:"VDatePickerMonths",props:t2(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Kd(),i=Ke(e,"modelValue"),s=F(()=>{let a=r.startOfYear(r.date());return ni(12).map(o=>{const l=r.format(a,"monthShort");return a=r.getNextMonth(a),{text:l,value:o}})});return Qt(()=>{i.value=i.value??r.getMonth(r.date())}),_e(()=>b("div",{class:"v-date-picker-months",style:{height:De(e.height)}},[b("div",{class:"v-date-picker-months__content"},[s.value.map((a,o)=>{var f;const l={active:i.value===o,color:i.value===o?e.color:void 0,rounded:!0,text:a.text,variant:i.value===a.value?"flat":"text",onClick:()=>u(o)};function u(c){i.value=c}return((f=n.month)==null?void 0:f.call(n,{month:a,i:o,props:l}))??b(pt,xe({key:"month"},l,{onClick:()=>u(o)}),null)})])])),{}}}),n2=Z({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),jg=ge()({name:"VDatePickerYears",props:n2(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Kd(),i=Ke(e,"modelValue"),s=F(()=>{const o=r.getYear(r.date());let l=o-100,u=o+52;e.min&&(l=r.getYear(r.date(e.min))),e.max&&(u=r.getYear(r.date(e.max)));let f=r.startOfYear(r.date());return f=r.setYear(f,l),ni(u-l+1,l).map(c=>{const d=r.format(f,"year");return f=r.setYear(f,r.getYear(f)+1),{text:d,value:c}})});Qt(()=>{i.value=i.value??r.getYear(r.date())});const a=ne();return zt(async()=>{var o;await ht(),(o=a.value)==null||o.$el.scrollIntoView({block:"center"})}),_e(()=>b("div",{class:"v-date-picker-years",style:{height:De(e.height)}},[b("div",{class:"v-date-picker-years__content"},[s.value.map((o,l)=>{var f;const u={ref:i.value===o.value?a:void 0,active:i.value===o.value,color:i.value===o.value?e.color:void 0,rounded:!0,text:o.text,variant:i.value===o.value?"flat":"text",onClick:()=>i.value=o.value};return((f=n.year)==null?void 0:f.call(n,{year:o,i:l,props:u}))??b(pt,xe({key:"month"},u),null)})])])),{}}}),NH=gr("v-picker-title"),r2=Z({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...df()},"VPicker"),P1=ge()({name:"VPicker",props:r2(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:i}=Ot(he(e,"color"));return _e(()=>{const s=Zs.filterProps(e),a=!!(e.title||n.title);return b(Zs,xe(s,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>{var o;return[!e.hideHeader&&b("div",{key:"header",class:[r.value],style:[i.value]},[a&&b(NH,{key:"picker-title"},{default:()=>{var l;return[((l=n.title)==null?void 0:l.call(n))??e.title]}}),n.header&&b("div",{class:"v-picker__header"},[n.header()])]),b("div",{class:"v-picker__body"},[(o=n.default)==null?void 0:o.call(n)]),n.actions&&b(ft,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[b("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),$H=Z({calendarIcon:{type:String,default:"$calendar"},keyboardIcon:{type:String,default:"$edit"},inputMode:{type:String,default:"calendar"},inputText:{type:String,default:"$vuetify.datePicker.input.placeholder"},inputPlaceholder:{type:String,default:"dd/mm/yyyy"},header:{type:String,default:"$vuetify.datePicker.header"},...QE(),...e2(),...gn(t2(),["modelValue"]),...gn(n2(),["modelValue"]),...r2({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),MH=ge()({name:"VDatePicker",props:$H(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:inputMode":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:r}=t;const i=Kd(),{t:s}=on(),a=Ke(e,"modelValue",void 0,m=>Wt(m),m=>e.multiple?m:m[0]),o=Ke(e,"viewMode"),l=Ke(e,"inputMode"),u=F(()=>{var _;const m=i.date((_=a.value)==null?void 0:_[0]);return m&&i.isValid(m)?m:i.date()}),f=ne(Number(e.month??i.getMonth(i.startOfMonth(u.value)))),c=ne(Number(e.year??i.getYear(i.startOfYear(i.setMonth(u.value,f.value))))),d=Ae(!1),h=F(()=>e.multiple&&a.value.length>1?s("$vuetify.datePicker.itemsSelected",a.value.length):a.value[0]&&i.isValid(a.value[0])?i.format(a.value[0],"normalDateWithWeekday"):s(e.header)),g=F(()=>i.format(i.setYear(i.setMonth(i.date(),f.value),c.value),"monthAndYear")),v=F(()=>`date-picker-header${d.value?"-reverse":""}-transition`),p=F(()=>{const m=i.date(e.min);return e.min&&i.isValid(m)?m:null}),y=F(()=>{const m=i.date(e.max);return e.max&&i.isValid(m)?m:null}),w=F(()=>{if(e.disabled)return!0;const m=[];if(o.value!=="month")m.push("prev","next");else{let _=i.date();if(_=i.setYear(_,c.value),_=i.setMonth(_,f.value),p.value){const T=i.addDays(i.startOfMonth(_),-1);i.isAfter(p.value,T)&&m.push("prev")}if(y.value){const T=i.addDays(i.endOfMonth(_),1);i.isAfter(T,y.value)&&m.push("next")}}return m});function A(){l.value=l.value==="calendar"?"keyboard":"calendar"}function I(){f.value<11?(f.value++,n("update:month",f.value)):(c.value++,f.value=0,n("update:year",c.value))}function k(){f.value>0?(f.value--,n("update:month",f.value)):(c.value--,f.value=11,n("update:year",f.value))}function x(){o.value=o.value==="months"?"month":"months"}function C(){o.value=o.value==="year"?"month":"year"}return Re(f,()=>{o.value==="months"&&x()}),Re(c,()=>{o.value==="year"&&C()}),Re(a,(m,_)=>{const T=i.date(Wt(m)[0]),E=i.date(Wt(_)[0]);d.value=i.isBefore(T,E)}),_e(()=>{const m=P1.filterProps(e),_=Vg.filterProps(e),T=Bg.filterProps(e),E=Lg.filterProps(e),R=gn(Hg.filterProps(e),["modelValue"]),D=gn(jg.filterProps(e),["modelValue"]),$={header:h.value,transition:v.value,"onClick:append":A};return b(P1,xe(m,{class:["v-date-picker",`v-date-picker--${o.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var M;return((M=r.title)==null?void 0:M.call(r))??b("div",{class:"v-date-picker__title"},[s(e.title)])},header:()=>r.header?b(ft,{defaults:{VDatePickerHeader:{...$}}},{default:()=>{var M;return[(M=r.header)==null?void 0:M.call(r,$)]}}):b(Bg,xe({key:"header"},T,$),r),default:()=>e.inputMode==="calendar"?b(Fe,null,[b(Vg,xe(_,{disabled:w.value,text:g.value,"onClick:next":I,"onClick:prev":k,"onClick:month":x,"onClick:year":C}),null),b(Oc,{hideOnLeave:!0},{default:()=>[o.value==="months"?b(Hg,xe({key:"date-picker-months"},R,{modelValue:f.value,"onUpdate:modelValue":M=>f.value=M,min:p.value,max:y.value}),null):o.value==="year"?b(jg,xe({key:"date-picker-years"},D,{modelValue:c.value,"onUpdate:modelValue":M=>c.value=M,min:p.value,max:y.value}),null):b(Lg,xe({key:"date-picker-month"},E,{modelValue:a.value,"onUpdate:modelValue":M=>a.value=M,month:f.value,"onUpdate:month":M=>f.value=M,year:c.value,"onUpdate:year":M=>c.value=M,min:p.value,max:y.value}),null)]})]):b("div",{class:"v-date-picker__input"},[b(ps,{label:s(e.inputText),placeholder:e.inputPlaceholder},null)]),actions:r.actions})}),{}}}),Nl=Symbol.for("vuetify:v-expansion-panel"),VH=["default","accordion","inset","popout"],BH=Z({color:String,static:Boolean,variant:{type:String,default:"default",validator:e=>VH.includes(e)},readonly:Boolean,...Ne(),...va(),...rt(),...dt()},"VExpansionPanels"),LH=ge()({name:"VExpansionPanels",props:BH(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;ws(e,Nl);const{themeClasses:r}=xt(e),i=F(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return Bt({VExpansionPanel:{color:he(e,"color")},VExpansionPanelTitle:{readonly:he(e,"readonly"),static:he(e,"static")}}),_e(()=>b(e.tag,{class:["v-expansion-panels",r.value,i.value,e.class],style:e.style},n)),{}}}),HH=Z({...Ne(),...af()},"VExpansionPanelText"),i2=ge()({name:"VExpansionPanelText",props:HH(),setup(e,t){let{slots:n}=t;const r=it(Nl);if(!r)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:i,onAfterLeave:s}=cp(e,r.isSelected);return _e(()=>b(Xd,{onAfterLeave:s},{default:()=>{var a;return[qt(b("div",{class:["v-expansion-panel-text",e.class],style:e.style},[n.default&&i.value&&b("div",{class:"v-expansion-panel-text__wrapper"},[(a=n.default)==null?void 0:a.call(n)])]),[[ci,r.isSelected.value]])]}})),{}}}),s2=Z({color:String,expandIcon:{type:tt,default:"$expand"},collapseIcon:{type:tt,default:"$collapse"},hideActions:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Ne()},"VExpansionPanelTitle"),a2=ge()({name:"VExpansionPanelTitle",directives:{Ripple:Ki},props:s2(),setup(e,t){let{slots:n}=t;const r=it(Nl);if(!r)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:i,backgroundColorStyles:s}=Ot(e,"color"),a=F(()=>({collapseIcon:e.collapseIcon,disabled:r.disabled.value,expanded:r.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly}));return _e(()=>{var o;return qt(b("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":r.isSelected.value,"v-expansion-panel-title--static":e.static},i.value,e.class],style:[s.value,e.style],type:"button",tabindex:r.disabled.value?-1:void 0,disabled:r.disabled.value,"aria-expanded":r.isSelected.value,onClick:e.readonly?void 0:r.toggle},[b("span",{class:"v-expansion-panel-title__overlay"},null),(o=n.default)==null?void 0:o.call(n,a.value),!e.hideActions&&b("span",{class:"v-expansion-panel-title__icon"},[n.actions?n.actions(a.value):b(Tt,{icon:r.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[nr("ripple"),e.ripple]])}),{}}}),jH=Z({title:String,text:String,bgColor:String,...Ne(),...ln(),...ma(),...af(),...Ht(),...rt(),...s2()},"VExpansionPanel"),qH=ge()({name:"VExpansionPanel",props:jH(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const r=pa(e,Nl),{backgroundColorClasses:i,backgroundColorStyles:s}=Ot(e,"bgColor"),{elevationClasses:a}=En(e),{roundedClasses:o}=Kt(e),l=F(()=>(r==null?void 0:r.disabled.value)||e.disabled),u=F(()=>r.group.items.value.reduce((d,h,g)=>(r.group.selected.value.includes(h.id)&&d.push(g),d),[])),f=F(()=>{const d=r.group.items.value.findIndex(h=>h.id===r.id);return!r.isSelected.value&&u.value.some(h=>h-d===1)}),c=F(()=>{const d=r.group.items.value.findIndex(h=>h.id===r.id);return!r.isSelected.value&&u.value.some(h=>h-d===-1)});return At(Nl,r),Bt({VExpansionPanelText:{eager:he(e,"eager")}}),_e(()=>{const d=!!(n.text||e.text),h=!!(n.title||e.title);return b(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":f.value,"v-expansion-panel--after-active":c.value,"v-expansion-panel--disabled":l.value},o.value,i.value,e.class],style:[s.value,e.style]},{default:()=>{var g;return[b("div",{class:["v-expansion-panel__shadow",...a.value]},null),h&&b(a2,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[n.title?n.title():e.title]}),d&&b(i2,{key:"text"},{default:()=>[n.text?n.text():e.text]}),(g=n.default)==null?void 0:g.call(n)]}})}),{}}}),UH=Z({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...Wi({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>Wt(e).every(t=>t!=null&&typeof t=="object")},...au({clearable:!0})},"VFileInput"),zH=ge()({name:"VFileInput",inheritAttrs:!1,props:UH(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{t:s}=on(),a=Ke(e,"modelValue"),{isFocused:o,focus:l,blur:u}=Gi(e),f=F(()=>typeof e.showSize!="boolean"?e.showSize:void 0),c=F(()=>(a.value??[]).reduce((_,T)=>{let{size:E=0}=T;return _+E},0)),d=F(()=>Gy(c.value,f.value)),h=F(()=>(a.value??[]).map(_=>{const{name:T="",size:E=0}=_;return e.showSize?`${T} (${Gy(E,f.value)})`:T})),g=F(()=>{var T;const _=((T=a.value)==null?void 0:T.length)??0;return e.showSize?s(e.counterSizeString,_,d.value):s(e.counterString,_)}),v=ne(),p=ne(),y=ne(),w=F(()=>o.value||e.active),A=F(()=>["plain","underlined"].includes(e.variant));function I(){var _;y.value!==document.activeElement&&((_=y.value)==null||_.focus()),o.value||l()}function k(_){C(_)}function x(_){r("mousedown:control",_)}function C(_){var T;(T=y.value)==null||T.click(),r("click:control",_)}function m(_){_.stopPropagation(),I(),ht(()=>{a.value=[],qm(e["onClick:clear"],_)})}return Re(a,_=>{(!Array.isArray(_)||!_.length)&&y.value&&(y.value.value="")}),_e(()=>{const _=!!(i.counter||e.counter),T=!!(_||i.details),[E,R]=_s(n),{modelValue:D,...$}=Rn.filterProps(e),M=dp(e);return b(Rn,xe({ref:v,modelValue:a.value,"onUpdate:modelValue":O=>a.value=O,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":A.value},e.class],style:e.style,"onClick:prepend":k},E,$,{centerAffix:!A.value,focused:o.value}),{...i,default:O=>{let{id:L,isDisabled:W,isDirty:te,isReadonly:ie,isValid:Q}=O;return b(ko,xe({ref:p,"prepend-icon":e.prependIcon,onMousedown:x,onClick:C,"onClick:clear":m,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},M,{id:L.value,active:w.value||te.value,dirty:te.value,disabled:W.value,focused:o.value,error:Q.value===!1}),{...i,default:ee=>{var $e;let{props:{class:ye,...we}}=ee;return b(Fe,null,[b("input",xe({ref:y,type:"file",readonly:ie.value,disabled:W.value,multiple:e.multiple,name:e.name,onClick:le=>{le.stopPropagation(),ie.value&&le.preventDefault(),I()},onChange:le=>{if(!le.target)return;const B=le.target;a.value=[...B.files??[]]},onFocus:I,onBlur:u},we,R),null),b("div",{class:ye},[!!(($e=a.value)!=null&&$e.length)&&(i.selection?i.selection({fileNames:h.value,totalBytes:c.value,totalBytesReadable:d.value}):e.chips?h.value.map(le=>b(iu,{key:le,size:"small",color:e.color},{default:()=>[le]})):h.value.join(", "))])])}})},details:T?O=>{var L,W;return b(Fe,null,[(L=i.details)==null?void 0:L.call(i,O),_&&b(Fe,null,[b("span",null,null),b(lf,{active:!!((W=a.value)!=null&&W.length),value:g.value},i.counter)])])}:void 0})}),Wr({},v,p,y)}}),KH=Z({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...mr(),...Ne(),...ln(),...xo(),...Ht(),...rt({tag:"footer"}),...dt()},"VFooter"),GH=ge()({name:"VFooter",props:KH(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{backgroundColorClasses:i,backgroundColorStyles:s}=Ot(he(e,"color")),{borderClasses:a}=Fr(e),{elevationClasses:o}=En(e),{roundedClasses:l}=Kt(e),u=Ae(32),{resizeRef:f}=ai(h=>{h.length&&(u.value=h[0].target.clientHeight)}),c=F(()=>e.height==="auto"?u.value:parseInt(e.height,10)),{layoutItemStyles:d}=Co({id:e.name,order:F(()=>parseInt(e.order,10)),position:F(()=>"bottom"),layoutSize:c,elementSize:F(()=>e.height==="auto"?void 0:c.value),active:F(()=>e.app),absolute:he(e,"absolute")});return _e(()=>b(e.tag,{ref:f,class:["v-footer",r.value,i.value,a.value,o.value,l.value,e.class],style:[s.value,e.app?d.value:{height:De(e.height)},e.style]},n)),{}}}),WH=Z({...Ne(),...gB()},"VForm"),YH=ge()({name:"VForm",props:WH(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const i=vB(e),s=ne();function a(l){l.preventDefault(),i.reset()}function o(l){const u=l,f=i.validate();u.then=f.then.bind(f),u.catch=f.catch.bind(f),u.finally=f.finally.bind(f),r("submit",u),u.defaultPrevented||f.then(c=>{var h;let{valid:d}=c;d&&((h=s.value)==null||h.submit())}),u.preventDefault()}return _e(()=>{var l;return b("form",{ref:s,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:a,onSubmit:o},[(l=n.default)==null?void 0:l.call(n,i)])}),Wr(i,s)}}),JH=Z({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...KC()},"VHover"),XH=ge()({name:"VHover",props:JH(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),{runOpenDelay:i,runCloseDelay:s}=GC(e,a=>!e.disabled&&(r.value=a));return()=>{var a;return(a=n.default)==null?void 0:a.call(n,{isHovering:r.value,props:{onMouseenter:i,onMouseleave:s}})}}}),ZH=Z({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Kn(),...rt()},"VInfiniteScroll"),D1=hr({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootRef:null,rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:r,isIntersecting:i}=Zd(s=>{},e.rootMargin?{rootMargin:e.rootMargin}:void 0);return Re(i,async s=>{n("intersect",e.side,s)}),_e(()=>b("div",{class:"v-infinite-scroll-intersect",ref:r},[Ge(" ")])),{}}}),QH=ge()({name:"VInfiniteScroll",props:ZH(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const i=ne(),s=Ae("ok"),a=Ae("ok"),o=F(()=>De(e.margin)),l=Ae(!1);function u(k){if(!i.value)return;const x=e.direction==="vertical"?"scrollTop":"scrollLeft";i.value[x]=k}function f(){if(!i.value)return 0;const k=e.direction==="vertical"?"scrollTop":"scrollLeft";return i.value[k]}function c(){if(!i.value)return 0;const k=e.direction==="vertical"?"scrollHeight":"scrollWidth";return i.value[k]}function d(){if(!i.value)return 0;const k=e.direction==="vertical"?"clientHeight":"clientWidth";return i.value[k]}zt(()=>{i.value&&(e.side==="start"?u(c()):e.side==="both"&&u(c()/2-d()/2))});function h(k,x){k==="start"?s.value=x:k==="end"&&(a.value=x)}function g(k){return k==="start"?s.value:a.value}let v=0;function p(k,x){l.value=x,l.value&&y(k)}function y(k){if(e.mode!=="manual"&&!l.value)return;const x=g(k);if(!i.value||x==="loading")return;v=c(),h(k,"loading");function C(m){h(k,m),ht(()=>{m==="empty"||m==="error"||(m==="ok"&&k==="start"&&u(c()-v+f()),e.mode!=="manual"&&ht(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{y(k)})})})}))})}r("load",{side:k,done:C})}const{t:w}=on();function A(k,x){var _,T,E,R,D;if(e.side!==k&&e.side!=="both")return;const C=()=>y(k),m={side:k,props:{onClick:C,color:e.color}};return x==="error"?(_=n.error)==null?void 0:_.call(n,m):x==="empty"?((T=n.empty)==null?void 0:T.call(n,m))??b("div",null,[w(e.emptyText)]):e.mode==="manual"?x==="loading"?((E=n.loading)==null?void 0:E.call(n,m))??b(oo,{indeterminate:!0,color:e.color},null):((R=n["load-more"])==null?void 0:R.call(n,m))??b(pt,{variant:"outlined",color:e.color,onClick:C},{default:()=>[w(e.loadMoreText)]}):((D=n.loading)==null?void 0:D.call(n,m))??b(oo,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:I}=Gn(e);_e(()=>{const k=e.tag,x=e.side==="start"||e.side==="both",C=e.side==="end"||e.side==="both",m=e.mode==="intersect";return b(k,{ref:i,class:["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":x,"v-infinite-scroll--end":C}],style:I.value},{default:()=>{var _;return[b("div",{class:"v-infinite-scroll__side"},[A("start",s.value)]),i.value&&x&&m&&b(D1,{key:"start",side:"start",onIntersect:p,rootRef:i.value,rootMargin:o.value},null),(_=n.default)==null?void 0:_.call(n),i.value&&C&&m&&b(D1,{key:"end",side:"end",onIntersect:p,rootRef:i.value,rootMargin:o.value},null),b("div",{class:"v-infinite-scroll__side"},[A("end",a.value)])]}})})}}),o2=Symbol.for("vuetify:v-item-group"),e9=Z({...Ne(),...va({selectedClass:"v-item--selected"}),...rt(),...dt()},"VItemGroup"),t9=ge()({name:"VItemGroup",props:e9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{isSelected:i,select:s,next:a,prev:o,selected:l}=ws(e,o2);return()=>b(e.tag,{class:["v-item-group",r.value,e.class],style:e.style},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:i,select:s,next:a,prev:o,selected:l.value})]}})}}),n9=ge()({name:"VItem",props:ma(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:r,select:i,toggle:s,selectedClass:a,value:o,disabled:l}=pa(e,o2);return()=>{var u;return(u=n.default)==null?void 0:u.call(n,{isSelected:r.value,selectedClass:a.value,select:i,toggle:s,value:o.value,disabled:l.value})}}}),r9=gr("v-kbd"),i9=Z({...Ne(),...tC()},"VLayout"),s9=ge()({name:"VLayout",props:i9(),setup(e,t){let{slots:n}=t;const{layoutClasses:r,layoutStyles:i,getLayoutItem:s,items:a,layoutRef:o}=nC(e);return _e(()=>{var l;return b("div",{ref:o,class:[r.value,e.class],style:[i.value,e.style]},[(l=n.default)==null?void 0:l.call(n)])}),{getLayoutItem:s,items:a}}}),a9=Z({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Ne(),...xo()},"VLayoutItem"),o9=ge()({name:"VLayoutItem",props:a9(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:r}=Co({id:e.name,order:F(()=>parseInt(e.order,10)),position:he(e,"position"),elementSize:he(e,"size"),layoutSize:he(e,"size"),active:he(e,"modelValue"),absolute:he(e,"absolute")});return()=>{var i;return b("div",{class:["v-layout-item",e.class],style:[r.value,e.style]},[(i=n.default)==null?void 0:i.call(n)])}}}),l9=Z({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Ne(),...Kn(),...rt(),...Ui({transition:"fade-transition"})},"VLazy"),u9=ge()({name:"VLazy",directives:{intersect:Ql},props:l9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:r}=Gn(e),i=Ke(e,"modelValue");function s(a){i.value||(i.value=a)}return _e(()=>qt(b(e.tag,{class:["v-lazy",e.class],style:[r.value,e.style]},{default:()=>[i.value&&b(Tr,{transition:e.transition,appear:!0},{default:()=>{var a;return[(a=n.default)==null?void 0:a.call(n)]}})]}),[[nr("intersect"),{handler:s,options:e.options},null]])),{}}}),c9=Z({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Ne()},"VLocaleProvider"),d9=ge()({name:"VLocaleProvider",props:c9(),setup(e,t){let{slots:n}=t;const{rtlClasses:r}=cV(e);return _e(()=>{var i;return b("div",{class:["v-locale-provider",r.value,e.class],style:e.style},[(i=n.default)==null?void 0:i.call(n)])}),{}}}),f9=Z({scrollable:Boolean,...Ne(),...rt({tag:"main"})},"VMain"),h9=ge()({name:"VMain",props:f9(),setup(e,t){let{slots:n}=t;const{mainStyles:r}=vV(),{ssrBootStyles:i}=fa();return _e(()=>b(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[r.value,i.value,e.style]},{default:()=>{var s,a;return[e.scrollable?b("div",{class:"v-main__scroller"},[(s=n.default)==null?void 0:s.call(n)]):(a=n.default)==null?void 0:a.call(n)]}})),{}}});function g9(e){let{rootEl:t,isSticky:n,layoutItemStyles:r}=e;const i=Ae(!1),s=Ae(0),a=F(()=>{const u=typeof i.value=="boolean"?"top":i.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,i.value?{[u]:De(s.value)}:{top:r.value.top}]});zt(()=>{Re(n,u=>{u?window.addEventListener("scroll",l,{passive:!0}):window.removeEventListener("scroll",l)},{immediate:!0})}),sn(()=>{window.removeEventListener("scroll",l)});let o=0;function l(){const u=o>window.scrollY?"up":"down",f=t.value.getBoundingClientRect(),c=parseFloat(r.value.top??0),d=window.scrollY-Math.max(0,s.value-c),h=f.height+Math.max(s.value,c)-window.scrollY-window.innerHeight,g=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;f.height<window.innerHeight-c?(i.value="top",s.value=c):u==="up"&&i.value==="bottom"||u==="down"&&i.value==="top"?(s.value=window.scrollY+f.top-g,i.value=!0):u==="down"&&h<=0?(s.value=0,i.value="bottom"):u==="up"&&d<=0&&(g?i.value!=="top"&&(s.value=-d+g+c,i.value="top"):(s.value=f.top+d,i.value="top")),o=window.scrollY}return{isStuck:i,stickyStyles:a}}const v9=100,m9=20;function F1(e){const t=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*t}function O1(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const r=F1(t),i=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(i-r)*Math.abs(i),n===e.length-1&&(t*=.5)}return F1(t)*1e3}function p9(){const e={};function t(i){Array.from(i.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new K$(m9))).push([i.timeStamp,s])})}function n(i){Array.from(i.changedTouches).forEach(s=>{delete e[s.identifier]})}function r(i){var u;const s=(u=e[i])==null?void 0:u.values().reverse();if(!s)throw new Error(`No samples for touch id ${i}`);const a=s[0],o=[],l=[];for(const f of s){if(a[0]-f[0]>v9)break;o.push({t:f[0],d:f[1].clientX}),l.push({t:f[0],d:f[1].clientY})}return{x:O1(o),y:O1(l),get direction(){const{x:f,y:c}=this,[d,h]=[Math.abs(f),Math.abs(c)];return d>h&&f>=0?"right":d>h&&f<=0?"left":h>d&&c>=0?"down":h>d&&c<=0?"up":y9()}}}return{addMovement:t,endTouch:n,getVelocity:r}}function y9(){throw new Error}function b9(e){let{isActive:t,isTemporary:n,width:r,touchless:i,position:s}=e;zt(()=>{window.addEventListener("touchstart",y,{passive:!0}),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",A,{passive:!0})}),sn(()=>{window.removeEventListener("touchstart",y),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",A)});const a=F(()=>["left","right"].includes(s.value)),{addMovement:o,endTouch:l,getVelocity:u}=p9();let f=!1;const c=Ae(!1),d=Ae(0),h=Ae(0);let g;function v(k,x){return(s.value==="left"?k:s.value==="right"?document.documentElement.clientWidth-k:s.value==="top"?k:s.value==="bottom"?document.documentElement.clientHeight-k:Pa())-(x?r.value:0)}function p(k){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const C=s.value==="left"?(k-h.value)/r.value:s.value==="right"?(document.documentElement.clientWidth-k-h.value)/r.value:s.value==="top"?(k-h.value)/r.value:s.value==="bottom"?(document.documentElement.clientHeight-k-h.value)/r.value:Pa();return x?Math.max(0,Math.min(1,C)):C}function y(k){if(i.value)return;const x=k.changedTouches[0].clientX,C=k.changedTouches[0].clientY,m=25,_=s.value==="left"?x<m:s.value==="right"?x>document.documentElement.clientWidth-m:s.value==="top"?C<m:s.value==="bottom"?C>document.documentElement.clientHeight-m:Pa(),T=t.value&&(s.value==="left"?x<r.value:s.value==="right"?x>document.documentElement.clientWidth-r.value:s.value==="top"?C<r.value:s.value==="bottom"?C>document.documentElement.clientHeight-r.value:Pa());(_||T||t.value&&n.value)&&(f=!0,g=[x,C],h.value=v(a.value?x:C,t.value),d.value=p(a.value?x:C),l(k),o(k))}function w(k){const x=k.changedTouches[0].clientX,C=k.changedTouches[0].clientY;if(f){if(!k.cancelable){f=!1;return}const _=Math.abs(x-g[0]),T=Math.abs(C-g[1]);(a.value?_>T&&_>3:T>_&&T>3)?(c.value=!0,f=!1):(a.value?T:_)>3&&(f=!1)}if(!c.value)return;k.preventDefault(),o(k);const m=p(a.value?x:C,!1);d.value=Math.max(0,Math.min(1,m)),m>1?h.value=v(a.value?x:C,!0):m<0&&(h.value=v(a.value?x:C,!1))}function A(k){if(f=!1,!c.value)return;o(k),c.value=!1;const x=u(k.changedTouches[0].identifier),C=Math.abs(x.x),m=Math.abs(x.y);(a.value?C>m&&C>400:m>C&&m>3)?t.value=x.direction===({left:"right",right:"left",top:"down",bottom:"up"}[s.value]||Pa()):t.value=d.value>.5}const I=F(()=>c.value?{transform:s.value==="left"?`translateX(calc(-100% + ${d.value*r.value}px))`:s.value==="right"?`translateX(calc(100% - ${d.value*r.value}px))`:s.value==="top"?`translateY(calc(-100% + ${d.value*r.value}px))`:s.value==="bottom"?`translateY(calc(100% - ${d.value*r.value}px))`:Pa(),transition:"none"}:void 0);return{isDragging:c,dragProgress:d,dragStyles:I}}function Pa(){throw new Error}const S9=["start","end","left","right","top","bottom"],_9=Z({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>S9.includes(e)},sticky:Boolean,...mr(),...Ne(),...Jm(),...ln(),...xo(),...Ht(),...rt({tag:"nav"}),...dt()},"VNavigationDrawer"),w9=ge()({name:"VNavigationDrawer",props:_9(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{isRtl:s}=Cn(),{themeClasses:a}=xt(e),{borderClasses:o}=Fr(e),{backgroundColorClasses:l,backgroundColorStyles:u}=Ot(he(e,"color")),{elevationClasses:f}=En(e),{displayClasses:c,mobile:d}=da(e),{roundedClasses:h}=Kt(e),g=fC(),v=Ke(e,"modelValue",null,ie=>!!ie),{ssrBootStyles:p}=fa(),{scopeId:y}=Ro(),w=ne(),A=Ae(!1),I=F(()=>e.rail&&e.expandOnHover&&A.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),k=F(()=>fg(e.location,s.value)),x=F(()=>!e.permanent&&(d.value||e.temporary)),C=F(()=>e.sticky&&!x.value&&k.value!=="bottom");jr(()=>e.expandOnHover&&e.rail!=null,()=>{Re(A,ie=>r("update:rail",!ie))}),jr(()=>!e.disableResizeWatcher,()=>{Re(x,ie=>!e.permanent&&ht(()=>v.value=!ie))}),jr(()=>!e.disableRouteWatcher&&!!g,()=>{Re(g.currentRoute,()=>x.value&&(v.value=!1))}),Re(()=>e.permanent,ie=>{ie&&(v.value=!0)}),Jc(()=>{e.modelValue!=null||x.value||(v.value=e.permanent||!d.value)});const{isDragging:m,dragProgress:_,dragStyles:T}=b9({isActive:v,isTemporary:x,width:I,touchless:he(e,"touchless"),position:k}),E=F(()=>{const ie=x.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):I.value;return m.value?ie*_.value:ie}),{layoutItemStyles:R,layoutItemScrimStyles:D}=Co({id:e.name,order:F(()=>parseInt(e.order,10)),position:k,layoutSize:E,elementSize:I,active:F(()=>v.value||m.value),disableTransitions:F(()=>m.value),absolute:F(()=>e.absolute||C.value&&typeof $.value!="string")}),{isStuck:$,stickyStyles:M}=g9({rootEl:w,isSticky:C,layoutItemStyles:R}),O=Ot(F(()=>typeof e.scrim=="string"?e.scrim:null)),L=F(()=>({...m.value?{opacity:_.value*.2,transition:"none"}:void 0,...D.value}));Bt({VList:{bgColor:"transparent"}});function W(){A.value=!0}function te(){A.value=!1}return _e(()=>{const ie=i.image||e.image;return b(Fe,null,[b(e.tag,xe({ref:w,onMouseenter:W,onMouseleave:te,class:["v-navigation-drawer",`v-navigation-drawer--${k.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":A.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":x.value,"v-navigation-drawer--active":v.value,"v-navigation-drawer--sticky":C.value},a.value,l.value,o.value,c.value,f.value,h.value,e.class],style:[u.value,R.value,T.value,p.value,M.value,e.style]},y,n),{default:()=>{var Q,ee,ye,we;return[ie&&b("div",{key:"image",class:"v-navigation-drawer__img"},[i.image?(Q=i.image)==null?void 0:Q.call(i,{image:e.image}):b("img",{src:e.image,alt:""},null)]),i.prepend&&b("div",{class:"v-navigation-drawer__prepend"},[(ee=i.prepend)==null?void 0:ee.call(i)]),b("div",{class:"v-navigation-drawer__content"},[(ye=i.default)==null?void 0:ye.call(i)]),i.append&&b("div",{class:"v-navigation-drawer__append"},[(we=i.append)==null?void 0:we.call(i)])]}}),b(ii,{name:"fade-transition"},{default:()=>[x.value&&(m.value||v.value)&&!!e.scrim&&b("div",xe({class:["v-navigation-drawer__scrim",O.backgroundColorClasses.value],style:[L.value,O.backgroundColorStyles.value],onClick:()=>v.value=!1},y),null)]})])}),{isStuck:$}}}),x9=hr({name:"VNoSsr",setup(e,t){let{slots:n}=t;const r=YC();return()=>{var i;return r.value&&((i=n.default)==null?void 0:i.call(n))}}}),C9=Z({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Kn(),...ru(),...Cx(au({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),E9=ge()({name:"VOtpInput",props:C9(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const{dimensionStyles:s}=Gn(e),{isFocused:a,focus:o,blur:l}=Gi(e),u=Ke(e,"modelValue","",C=>String(C).split(""),C=>C.join("")),{t:f}=on(),c=F(()=>Number(e.length)),d=F(()=>Array(c.value).fill(0)),h=ne(-1),g=ne(),v=ne([]),p=F(()=>v.value[h.value]);function y(){if(e.type==="number"&&/[^0-9]/g.test(p.value.value)){p.value.value="";return}const C=u.value.slice(),m=p.value.value;C[h.value]=m;let _=null;h.value>u.value.length?_=u.value.length+1:h.value+1!==c.value&&(_="next"),u.value=C,_&&ro(g.value,_)}function w(C){const m=u.value.slice(),_=h.value;let T=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(C.key)&&(C.preventDefault(),C.key==="ArrowLeft"?T="prev":C.key==="ArrowRight"?T="next":["Backspace","Delete"].includes(C.key)&&(m[h.value]="",u.value=m,h.value>0&&C.key==="Backspace"?T="prev":requestAnimationFrame(()=>{var E;(E=v.value[_])==null||E.select()})),requestAnimationFrame(()=>{T!=null&&ro(g.value,T)}))}function A(C,m){var _,T;m.preventDefault(),m.stopPropagation(),u.value=(((_=m==null?void 0:m.clipboardData)==null?void 0:_.getData("Text"))??"").split(""),(T=v.value)==null||T[C].blur()}function I(){u.value=[]}function k(C,m){o(),h.value=m}function x(){l(),h.value=-1}return Bt({VField:{color:F(()=>e.color),bgColor:F(()=>e.color),baseColor:F(()=>e.baseColor),disabled:F(()=>e.disabled),error:F(()=>e.error),variant:F(()=>e.variant)}},{scoped:!0}),Re(u,C=>{C.length===c.value&&r("finish",C.join(""))},{deep:!0}),Re(h,C=>{C<0||ht(()=>{var m;(m=v.value[C])==null||m.select()})}),_e(()=>{var _;const[C,m]=_s(n);return b("div",xe({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},C),[b("div",{ref:g,class:"v-otp-input__content",style:[s.value]},[d.value.map((T,E)=>b(Fe,null,[e.divider&&E!==0&&b("span",{class:"v-otp-input__divider"},[e.divider]),b(ko,{focused:a.value&&e.focusAll||h.value===E,key:E},{...i,default:()=>b("input",{ref:R=>v.value[E]=R,"aria-label":f(e.label,E+1),autofocus:E===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:u.value[E],onInput:y,onFocus:R=>k(R,E),onBlur:x,onKeydown:w,onPaste:R=>A(E,R)},null)})])),b("input",xe({class:"v-otp-input-input",type:"hidden"},m,{value:u.value.join("")}),null),b(oi,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var T;return[((T=i.loader)==null?void 0:T.call(i))??b(oo,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(_=i.default)==null?void 0:_.call(i)])])}),{blur:()=>{var C;(C=v.value)==null||C.some(m=>m.blur())},focus:()=>{var C;(C=v.value)==null||C[0].focus()},reset:I,isFocused:a}}});function T9(){const e=ne([]);Lb(()=>e.value=[]);function t(n,r){e.value[r]=n}return{refs:e,updateRef:t}}const A9=Z({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:tt,default:"$first"},prevIcon:{type:tt,default:"$prev"},nextIcon:{type:tt,default:"$next"},lastIcon:{type:tt,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...mr(),...Ne(),...vn(),...ln(),...Ht(),...zi(),...rt({tag:"nav"}),...dt(),...Or({variant:"text"})},"VPagination"),I9=ge()({name:"VPagination",props:A9(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const i=Ke(e,"modelValue"),{t:s,n:a}=on(),{isRtl:o}=Cn(),{themeClasses:l}=xt(e),{width:u}=da(),f=Ae(-1);Bt(void 0,{scoped:!0});const{resizeRef:c}=ai(m=>{if(!m.length)return;const{target:_,contentRect:T}=m[0],E=_.querySelector(".v-pagination__list > *");if(!E)return;const R=T.width,D=E.offsetWidth+parseFloat(getComputedStyle(E).marginRight)*2;f.value=v(R,D)}),d=F(()=>parseInt(e.length,10)),h=F(()=>parseInt(e.start,10)),g=F(()=>e.totalVisible?parseInt(e.totalVisible,10):f.value>=0?f.value:v(u.value,58));function v(m,_){const T=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((m-_*T)/_).toFixed(2)))}const p=F(()=>{if(d.value<=0||isNaN(d.value)||d.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=1)return[i.value];if(d.value<=g.value)return ni(d.value,h.value);const m=g.value%2===0,_=m?g.value/2:Math.floor(g.value/2),T=m?_:_+1,E=d.value-_;if(T-i.value>=0)return[...ni(Math.max(1,g.value-1),h.value),e.ellipsis,d.value];if(i.value-E>=(m?1:0)){const R=g.value-1,D=d.value-R+h.value;return[h.value,e.ellipsis,...ni(R,D)]}else{const R=Math.max(1,g.value-3),D=R===1?i.value:i.value-Math.ceil(R/2)+h.value;return[h.value,e.ellipsis,...ni(R,D),e.ellipsis,d.value]}});function y(m,_,T){m.preventDefault(),i.value=_,T&&r(T,_)}const{refs:w,updateRef:A}=T9();Bt({VPaginationBtn:{color:he(e,"color"),border:he(e,"border"),density:he(e,"density"),size:he(e,"size"),variant:he(e,"variant"),rounded:he(e,"rounded"),elevation:he(e,"elevation")}});const I=F(()=>p.value.map((m,_)=>{const T=E=>A(E,_);if(typeof m=="string")return{isActive:!1,key:`ellipsis-${_}`,page:m,props:{ref:T,ellipsis:!0,icon:!0,disabled:!0}};{const E=m===i.value;return{isActive:E,key:m,page:a(m),props:{ref:T,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:E?e.activeColor:e.color,ariaCurrent:E,ariaLabel:s(E?e.currentPageAriaLabel:e.pageAriaLabel,m),onClick:R=>y(R,m)}}}})),k=F(()=>{const m=!!e.disabled||i.value<=h.value,_=!!e.disabled||i.value>=h.value+d.value-1;return{first:e.showFirstLastPage?{icon:o.value?e.lastIcon:e.firstIcon,onClick:T=>y(T,h.value,"first"),disabled:m,ariaLabel:s(e.firstAriaLabel),ariaDisabled:m}:void 0,prev:{icon:o.value?e.nextIcon:e.prevIcon,onClick:T=>y(T,i.value-1,"prev"),disabled:m,ariaLabel:s(e.previousAriaLabel),ariaDisabled:m},next:{icon:o.value?e.prevIcon:e.nextIcon,onClick:T=>y(T,i.value+1,"next"),disabled:_,ariaLabel:s(e.nextAriaLabel),ariaDisabled:_},last:e.showFirstLastPage?{icon:o.value?e.firstIcon:e.lastIcon,onClick:T=>y(T,h.value+d.value-1,"last"),disabled:_,ariaLabel:s(e.lastAriaLabel),ariaDisabled:_}:void 0}});function x(){var _;const m=i.value-h.value;(_=w.value[m])==null||_.$el.focus()}function C(m){m.key===ug.left&&!e.disabled&&i.value>+e.start?(i.value=i.value-1,ht(x)):m.key===ug.right&&!e.disabled&&i.value<h.value+d.value-1&&(i.value=i.value+1,ht(x))}return _e(()=>b(e.tag,{ref:c,class:["v-pagination",l.value,e.class],style:e.style,role:"navigation","aria-label":s(e.ariaLabel),onKeydown:C,"data-test":"v-pagination-root"},{default:()=>[b("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&b("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(k.value.first):b(pt,xe({_as:"VPaginationBtn"},k.value.first),null)]),b("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(k.value.prev):b(pt,xe({_as:"VPaginationBtn"},k.value.prev),null)]),I.value.map((m,_)=>b("li",{key:m.key,class:["v-pagination__item",{"v-pagination__item--is-active":m.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(m):b(pt,xe({_as:"VPaginationBtn"},m.props),{default:()=>[m.page]})])),b("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(k.value.next):b(pt,xe({_as:"VPaginationBtn"},k.value.next),null)]),e.showFirstLastPage&&b("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(k.value.last):b(pt,xe({_as:"VPaginationBtn"},k.value.last),null)])])]})),{}}});function R9(e){return Math.floor(Math.abs(e))*Math.sign(e)}const k9=Z({scale:{type:[Number,String],default:.5},...Ne()},"VParallax"),P9=ge()({name:"VParallax",props:k9(),setup(e,t){let{slots:n}=t;const{intersectionRef:r,isIntersecting:i}=Zd(),{resizeRef:s,contentRect:a}=ai(),{height:o}=da(),l=ne();Qt(()=>{var h;r.value=s.value=(h=l.value)==null?void 0:h.$el});let u;Re(i,h=>{h?(u=Wm(r.value),u=u===document.scrollingElement?document:u,u.addEventListener("scroll",d,{passive:!0}),d()):u.removeEventListener("scroll",d)}),sn(()=>{u==null||u.removeEventListener("scroll",d)}),Re(o,d),Re(()=>{var h;return(h=a.value)==null?void 0:h.height},d);const f=F(()=>1-rn(+e.scale));let c=-1;function d(){i.value&&(cancelAnimationFrame(c),c=requestAnimationFrame(()=>{var k;const h=((k=l.value)==null?void 0:k.$el).querySelector(".v-img__img");if(!h)return;const g=u instanceof Document?document.documentElement.clientHeight:u.clientHeight,v=u instanceof Document?window.scrollY:u.scrollTop,p=r.value.getBoundingClientRect().top+v,y=a.value.height,w=p+(y-g)/2,A=R9((v-w)*f.value),I=Math.max(1,(f.value*(g-y)+y)/y);h.style.setProperty("transform",`translateY(${A}px) scale(${I})`)}))}return _e(()=>b(Js,{class:["v-parallax",{"v-parallax--active":i.value},e.class],style:e.style,ref:l,cover:!0,onLoadstart:d,onLoad:d},n)),{}}}),D9=Z({...nf({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),F9=ge()({name:"VRadio",props:D9(),setup(e,t){let{slots:n}=t;return _e(()=>b(Xs,xe(e,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)),{}}}),O9=Z({height:{type:[Number,String],default:"auto"},...Wi(),...gn(ap(),["multiple"]),trueIcon:{type:tt,default:"$radioOn"},falseIcon:{type:tt,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),N9=ge()({name:"VRadioGroup",inheritAttrs:!1,props:O9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const i=Ln(),s=F(()=>e.id||`radio-group-${i}`),a=Ke(e,"modelValue");return _e(()=>{const[o,l]=_s(n),u=Rn.filterProps(e),f=Xs.filterProps(e),c=r.label?r.label({label:e.label,props:{for:s.value}}):e.label;return b(Rn,xe({class:["v-radio-group",e.class],style:e.style},o,u,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,id:s.value}),{...r,default:d=>{let{id:h,messagesId:g,isDisabled:v,isReadonly:p}=d;return b(Fe,null,[c&&b(Io,{id:h.value},{default:()=>[c]}),b(xC,xe(f,{id:h.value,"aria-describedby":g.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:v.value,readonly:p.value,"aria-labelledby":c?h.value:void 0,multiple:!1},l,{modelValue:a.value,"onUpdate:modelValue":y=>a.value=y}),r)])}})}),{}}}),$9=Z({...ru(),...Wi(),...mE(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),M9=ge()({name:"VRangeSlider",props:$9(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const i=ne(),s=ne(),a=ne(),{rtlClasses:o}=Cn();function l(_){if(!i.value||!s.value)return;const T=Og(_,i.value.$el,e.direction),E=Og(_,s.value.$el,e.direction),R=Math.abs(T),D=Math.abs(E);return R<D||R===D&&T<0?i.value.$el:s.value.$el}const u=pE(e),f=Ke(e,"modelValue",void 0,_=>_!=null&&_.length?_.map(T=>u.roundValue(T)):[0,0]),{activeThumbRef:c,hasLabels:d,max:h,min:g,mousePressed:v,onSliderMousedown:p,onSliderTouchstart:y,position:w,trackContainerRef:A}=yE({props:e,steps:u,onSliderStart:()=>{r("start",f.value)},onSliderEnd:_=>{var R;let{value:T}=_;const E=c.value===((R=i.value)==null?void 0:R.$el)?[T,f.value[1]]:[f.value[0],T];!e.strict&&E[0]<E[1]&&(f.value=E),r("end",f.value)},onSliderMove:_=>{var D,$,M,O;let{value:T}=_;const[E,R]=f.value;!e.strict&&E===R&&E!==g.value&&(c.value=T>E?(D=s.value)==null?void 0:D.$el:($=i.value)==null?void 0:$.$el,(M=c.value)==null||M.focus()),c.value===((O=i.value)==null?void 0:O.$el)?f.value=[Math.min(T,R),R]:f.value=[E,Math.max(E,T)]},getActiveThumb:l}),{isFocused:I,focus:k,blur:x}=Gi(e),C=F(()=>w(f.value[0])),m=F(()=>w(f.value[1]));return _e(()=>{const _=Rn.filterProps(e),T=!!(e.label||n.label||n.prepend);return b(Rn,xe({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||d.value,"v-slider--focused":I.value,"v-slider--pressed":v.value,"v-slider--disabled":e.disabled},o.value,e.class],style:e.style,ref:a},_,{focused:I.value}),{...n,prepend:T?E=>{var R,D;return b(Fe,null,[((R=n.label)==null?void 0:R.call(n,E))??(e.label?b(Io,{class:"v-slider__label",text:e.label},null):void 0),(D=n.prepend)==null?void 0:D.call(n,E)])}:void 0,default:E=>{var $,M;let{id:R,messagesId:D}=E;return b("div",{class:"v-slider__container",onMousedown:p,onTouchstartPassive:y},[b("input",{id:`${R.value}_start`,name:e.name||R.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:f.value[0]},null),b("input",{id:`${R.value}_stop`,name:e.name||R.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:f.value[1]},null),b(bE,{ref:A,start:C.value,stop:m.value},{"tick-label":n["tick-label"]}),b(Ng,{ref:i,"aria-describedby":D.value,focused:I&&c.value===(($=i.value)==null?void 0:$.$el),modelValue:f.value[0],"onUpdate:modelValue":O=>f.value=[O,f.value[1]],onFocus:O=>{var L,W,te,ie;k(),c.value=(L=i.value)==null?void 0:L.$el,f.value[0]===f.value[1]&&f.value[1]===g.value&&O.relatedTarget!==((W=s.value)==null?void 0:W.$el)&&((te=i.value)==null||te.$el.blur(),(ie=s.value)==null||ie.$el.focus())},onBlur:()=>{x(),c.value=void 0},min:g.value,max:f.value[1],position:C.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),b(Ng,{ref:s,"aria-describedby":D.value,focused:I&&c.value===((M=s.value)==null?void 0:M.$el),modelValue:f.value[1],"onUpdate:modelValue":O=>f.value=[f.value[0],O],onFocus:O=>{var L,W,te,ie;k(),c.value=(L=s.value)==null?void 0:L.$el,f.value[0]===f.value[1]&&f.value[0]===h.value&&O.relatedTarget!==((W=i.value)==null?void 0:W.$el)&&((te=s.value)==null||te.$el.blur(),(ie=i.value)==null||ie.$el.focus())},onBlur:()=>{x(),c.value=void 0},min:f.value[0],max:h.value,position:m.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),{}}}),V9=Z({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:tt,default:"$ratingEmpty"},fullIcon:{type:tt,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Ne(),...vn(),...zi(),...rt(),...dt()},"VRating"),B9=ge()({name:"VRating",props:V9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:r}=on(),{themeClasses:i}=xt(e),s=Ke(e,"modelValue"),a=F(()=>rn(parseFloat(s.value),0,+e.length)),o=F(()=>ni(Number(e.length),1)),l=F(()=>o.value.flatMap(v=>e.halfIncrements?[v-.5,v]:[v])),u=Ae(-1),f=F(()=>l.value.map(v=>{const p=e.hover&&u.value>-1,y=a.value>=v,w=u.value>=v,I=(p?w:y)?e.fullIcon:e.emptyIcon,k=e.activeColor??e.color,x=y||w?k:e.color;return{isFilled:y,isHovered:w,icon:I,color:x}})),c=F(()=>[0,...l.value].map(v=>{function p(){u.value=v}function y(){u.value=-1}function w(){e.disabled||e.readonly||(s.value=a.value===v&&e.clearable?0:v)}return{onMouseenter:e.hover?p:void 0,onMouseleave:e.hover?y:void 0,onClick:w}})),d=F(()=>e.name??`v-rating-${Ln()}`);function h(v){var m,_;let{value:p,index:y,showStar:w=!0}=v;const{onMouseenter:A,onMouseleave:I,onClick:k}=c.value[y+1],x=`${d.value}-${String(p).replace(".","-")}`,C={color:(m=f.value[y])==null?void 0:m.color,density:e.density,disabled:e.disabled,icon:(_=f.value[y])==null?void 0:_.icon,ripple:e.ripple,size:e.size,variant:"plain"};return b(Fe,null,[b("label",{for:x,class:{"v-rating__item--half":e.halfIncrements&&p%1>0,"v-rating__item--full":e.halfIncrements&&p%1===0},onMouseenter:A,onMouseleave:I,onClick:k},[b("span",{class:"v-rating__hidden"},[r(e.itemAriaLabel,p,e.length)]),w?n.item?n.item({...f.value[y],props:C,value:p,index:y,rating:a.value}):b(pt,xe({"aria-label":r(e.itemAriaLabel,p,e.length)},C),null):void 0]),b("input",{class:"v-rating__hidden",name:d.value,id:x,type:"radio",value:p,checked:a.value===p,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function g(v){return n["item-label"]?n["item-label"](v):v.label?b("span",null,[v.label]):b("span",null,[Ge(" ")])}return _e(()=>{var p;const v=!!((p=e.itemLabels)!=null&&p.length)||n["item-label"];return b(e.tag,{class:["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},i.value,e.class],style:e.style},{default:()=>[b(h,{value:0,index:-1,showStar:!1},null),o.value.map((y,w)=>{var A,I;return b("div",{class:"v-rating__wrapper"},[v&&e.itemLabelPosition==="top"?g({value:y,index:w,label:(A=e.itemLabels)==null?void 0:A[w]}):void 0,b("div",{class:"v-rating__item"},[e.halfIncrements?b(Fe,null,[b(h,{value:y-.5,index:w*2},null),b(h,{value:y,index:w*2+1},null)]):b(h,{value:y,index:w},null)]),v&&e.itemLabelPosition==="bottom"?g({value:y,index:w,label:(I=e.itemLabels)==null?void 0:I[w]}):void 0])})]})}),{}}}),L9={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function H9(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return b("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[t])}function N1(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>_f(t))}function _f(e){let t=[];if(!e)return t;const n=L9[e];if(e!==n){if(e.includes(","))return $1(e);if(e.includes("@"))return N1(e);n.includes(",")?t=$1(n):n.includes("@")?t=N1(n):n&&t.push(_f(n))}return[H9(e,t)]}function $1(e){return e.replace(/\s/g,"").split(",").map(_f)}const j9=Z({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Kn(),...ln(),...dt()},"VSkeletonLoader"),q9=ge()({name:"VSkeletonLoader",props:j9(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:r,backgroundColorStyles:i}=Ot(he(e,"color")),{dimensionStyles:s}=Gn(e),{elevationClasses:a}=En(e),{themeClasses:o}=xt(e),{t:l}=on(),u=F(()=>_f(Wt(e.type).join(",")));return _e(()=>{var c;const f=!n.default||e.loading;return b("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},o.value,r.value,a.value],style:[i.value,f?s.value:{}],"aria-busy":e.boilerplate?void 0:f,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:l(e.loadingText),role:e.boilerplate?void 0:"alert"},[f?u.value:(c=n.default)==null?void 0:c.call(n)])}),{}}});function M1(e){const n=Math.abs(e);return Math.sign(e)*(n/((1/.501-2)*(1-n)+1))}function V1(e){let{selectedElement:t,containerSize:n,contentSize:r,isRtl:i,currentScrollOffset:s,isHorizontal:a}=e;const o=a?t.clientWidth:t.clientHeight,l=a?t.offsetLeft:t.offsetTop,u=i&&a?r-l-o:l,f=n+s,c=o+u,d=o*.4;return u<=s?s=Math.max(u-d,0):f<=c&&(s=Math.min(s-(f-c-d),r-n)),s}function U9(e){let{selectedElement:t,containerSize:n,contentSize:r,isRtl:i,isHorizontal:s}=e;const a=s?t.clientWidth:t.clientHeight,o=s?t.offsetLeft:t.offsetTop,l=i&&s?r-o-a/2-n/2:o+a/2-n/2;return Math.min(r-n,Math.max(0,l))}const l2=Symbol.for("vuetify:v-slide-group"),u2=Z({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:l2},nextIcon:{type:tt,default:"$next"},prevIcon:{type:tt,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Ne(),...Jm(),...rt(),...va({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),qg=ge()({name:"VSlideGroup",props:u2(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:r}=Cn(),{displayClasses:i,mobile:s}=da(e),a=ws(e,e.symbol),o=Ae(!1),l=Ae(0),u=Ae(0),f=Ae(0),c=F(()=>e.direction==="horizontal"),{resizeRef:d,contentRect:h}=ai(),{resizeRef:g,contentRect:v}=ai(),p=F(()=>a.selected.value.length?a.items.value.findIndex(Q=>Q.id===a.selected.value[0]):-1),y=F(()=>a.selected.value.length?a.items.value.findIndex(Q=>Q.id===a.selected.value[a.selected.value.length-1]):-1);if(Pt){let Q=-1;Re(()=>[a.selected.value,h.value,v.value,c.value],()=>{cancelAnimationFrame(Q),Q=requestAnimationFrame(()=>{if(h.value&&v.value){const ee=c.value?"width":"height";u.value=h.value[ee],f.value=v.value[ee],o.value=u.value+1<f.value}if(p.value>=0&&g.value){const ee=g.value.children[y.value];p.value===0||!o.value?l.value=0:e.centerActive?l.value=U9({selectedElement:ee,containerSize:u.value,contentSize:f.value,isRtl:r.value,isHorizontal:c.value}):o.value&&(l.value=V1({selectedElement:ee,containerSize:u.value,contentSize:f.value,isRtl:r.value,currentScrollOffset:l.value,isHorizontal:c.value}))}})})}const w=Ae(!1);let A=0,I=0;function k(Q){const ee=c.value?"clientX":"clientY";I=(r.value&&c.value?-1:1)*l.value,A=Q.touches[0][ee],w.value=!0}function x(Q){if(!o.value)return;const ee=c.value?"clientX":"clientY",ye=r.value&&c.value?-1:1;l.value=ye*(I+A-Q.touches[0][ee])}function C(Q){const ee=f.value-u.value;l.value<0||!o.value?l.value=0:l.value>=ee&&(l.value=ee),w.value=!1}function m(){d.value&&(d.value[c.value?"scrollLeft":"scrollTop"]=0)}const _=Ae(!1);function T(Q){if(_.value=!0,!(!o.value||!g.value)){for(const ee of Q.composedPath())for(const ye of g.value.children)if(ye===ee){l.value=V1({selectedElement:ye,containerSize:u.value,contentSize:f.value,isRtl:r.value,currentScrollOffset:l.value,isHorizontal:c.value});return}}}function E(Q){_.value=!1}function R(Q){var ee;!_.value&&!(Q.relatedTarget&&((ee=g.value)!=null&&ee.contains(Q.relatedTarget)))&&$()}function D(Q){g.value&&(c.value?Q.key==="ArrowRight"?$(r.value?"prev":"next"):Q.key==="ArrowLeft"&&$(r.value?"next":"prev"):Q.key==="ArrowDown"?$("next"):Q.key==="ArrowUp"&&$("prev"),Q.key==="Home"?$("first"):Q.key==="End"&&$("last"))}function $(Q){var ee,ye,we,$e,le;if(g.value)if(!Q)(ee=Tl(g.value)[0])==null||ee.focus();else if(Q==="next"){const B=(ye=g.value.querySelector(":focus"))==null?void 0:ye.nextElementSibling;B?B.focus():$("first")}else if(Q==="prev"){const B=(we=g.value.querySelector(":focus"))==null?void 0:we.previousElementSibling;B?B.focus():$("last")}else Q==="first"?($e=g.value.firstElementChild)==null||$e.focus():Q==="last"&&((le=g.value.lastElementChild)==null||le.focus())}function M(Q){const ee=l.value+(Q==="prev"?-1:1)*u.value;l.value=rn(ee,0,f.value-u.value)}const O=F(()=>{let Q=l.value>f.value-u.value?-(f.value-u.value)+M1(f.value-u.value-l.value):-l.value;l.value<=0&&(Q=M1(-l.value));const ee=r.value&&c.value?-1:1;return{transform:`translate${c.value?"X":"Y"}(${ee*Q}px)`,transition:w.value?"none":"",willChange:w.value?"transform":""}}),L=F(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),W=F(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!s.value;case!0:return o.value||Math.abs(l.value)>0;case"mobile":return s.value||o.value||Math.abs(l.value)>0;default:return!s.value&&(o.value||Math.abs(l.value)>0)}}),te=F(()=>Math.abs(l.value)>0),ie=F(()=>f.value>Math.abs(l.value)+u.value);return _e(()=>b(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!c.value,"v-slide-group--has-affixes":W.value,"v-slide-group--is-overflowing":o.value},i.value,e.class],style:e.style,tabindex:_.value||a.selected.value.length?-1:0,onFocus:R},{default:()=>{var Q,ee,ye;return[W.value&&b("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!te.value}],onClick:()=>M("prev")},[((Q=n.prev)==null?void 0:Q.call(n,L.value))??b(Oc,null,{default:()=>[b(Tt,{icon:r.value?e.nextIcon:e.prevIcon},null)]})]),b("div",{key:"container",ref:d,class:"v-slide-group__container",onScroll:m},[b("div",{ref:g,class:"v-slide-group__content",style:O.value,onTouchstartPassive:k,onTouchmovePassive:x,onTouchendPassive:C,onFocusin:T,onFocusout:E,onKeydown:D},[(ee=n.default)==null?void 0:ee.call(n,L.value)])]),W.value&&b("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!ie.value}],onClick:()=>M("next")},[((ye=n.next)==null?void 0:ye.call(n,L.value))??b(Oc,null,{default:()=>[b(Tt,{icon:r.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:M,scrollOffset:l,focus:$}}}),z9=ge()({name:"VSlideGroupItem",props:ma(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const r=pa(e,l2);return()=>{var i;return(i=n.default)==null?void 0:i.call(n,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}});function K9(e){const t=Ae(e);let n=-1;function r(){clearInterval(n)}function i(){r(),ht(()=>t.value=e)}function s(a){const o=a?getComputedStyle(a):{transitionDuration:.2},l=parseFloat(o.transitionDuration)*1e3||200;if(r(),t.value<=0)return;const u=performance.now();n=window.setInterval(()=>{const f=performance.now()-u+l;t.value=Math.max(e-f,0),t.value<=0&&r()},l)}return In(r),{clear:r,time:t,start:s,reset:i}}const G9=Z({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...xs({location:"bottom"}),...To(),...Ht(),...Or(),...dt(),...gn(su({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),W9=ge()({name:"VSnackbar",props:G9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),{locationStyles:i}=Cs(e),{positionClasses:s}=Ao(e),{scopeId:a}=Ro(),{themeClasses:o}=xt(e),{colorClasses:l,colorStyles:u,variantClasses:f}=ga(e),{roundedClasses:c}=Kt(e),d=K9(Number(e.timeout)),h=ne(),g=ne(),v=Ae(!1);Re(r,y),Re(()=>e.timeout,y),zt(()=>{r.value&&y()});let p=-1;function y(){d.reset(),window.clearTimeout(p);const k=Number(e.timeout);if(!r.value||k===-1)return;const x=El(g.value);d.start(x),p=window.setTimeout(()=>{r.value=!1},k)}function w(){d.reset(),window.clearTimeout(p)}function A(){v.value=!0,w()}function I(){v.value=!1,y()}return _e(()=>{const k=oi.filterProps(e),x=!!(n.default||n.text||e.text);return b(oi,xe({ref:h,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},s.value,e.class],style:e.style},k,{modelValue:r.value,"onUpdate:modelValue":C=>r.value=C,contentProps:xe({class:["v-snackbar__wrapper",o.value,l.value,c.value,f.value],style:[i.value,u.value],onPointerenter:A,onPointerleave:I},k.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},a),{default:()=>{var C,m;return[ha(!1,"v-snackbar"),e.timer&&b("div",{key:"timer",class:"v-snackbar__timer"},[b(Qd,{ref:g,active:!v.value,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":d.time.value},null)]),x&&b("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((C=n.text)==null?void 0:C.call(n))??e.text,(m=n.default)==null?void 0:m.call(n)]),n.actions&&b(ft,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[b("div",{class:"v-snackbar__actions"},[n.actions()])]})]},activator:n.activator})}),Wr({},h)}}),c2=Z({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),d2=ge()({name:"VStepperActions",props:c2(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:r}=t;const{t:i}=on();function s(){n("click:prev")}function a(){n("click:next")}return _e(()=>{const o={onClick:s},l={onClick:a};return b("div",{class:"v-stepper-actions"},[b(ft,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:i(e.prevText),variant:"text"}}},{default:()=>{var u;return[((u=r.prev)==null?void 0:u.call(r,{props:o}))??b(pt,o,null)]}}),b(ft,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:i(e.nextText),variant:"tonal"}}},{default:()=>{var u;return[((u=r.next)==null?void 0:u.call(r,{props:l}))??b(pt,l,null)]}})])}),{}}}),f2=gr("v-stepper-header"),Y9=Z({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},error:Boolean,errorIcon:{type:String,default:"$error"},icon:String,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]},...ma()},"VStepperItem"),h2=ge()({name:"VStepperItem",directives:{Ripple:Ki},props:Y9(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const r=pa(e,m2,!0),i=F(()=>(r==null?void 0:r.value.value)??e.value),s=F(()=>e.rules.every(c=>c()===!0)),a=F(()=>!e.disabled&&e.editable),o=F(()=>e.error||!s.value),l=F(()=>e.complete||e.rules.length>0&&s.value),u=F(()=>o.value?e.errorIcon:l.value?e.completeIcon:e.editable?e.editIcon:e.icon),f=F(()=>({canEdit:a.value,hasError:o.value,hasCompleted:l.value,title:e.title,subtitle:e.subtitle,step:i.value,value:e.value}));return _e(()=>{var v,p,y;const c=(!r||r.isSelected.value||l.value||a.value)&&!o.value&&!e.disabled,d=!!(e.title||n.title),h=!!(e.subtitle||n.subtitle);function g(){r==null||r.toggle()}return qt(b("button",{class:["v-stepper-item",{"v-stepper-item--complete":l.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":o.value},r==null?void 0:r.selectedClass.value],disabled:!e.editable,onClick:g},[b($i,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:c?e.color:void 0,size:24},{default:()=>{var w;return[((w=n.icon)==null?void 0:w.call(n,f.value))??(u.value?b(Tt,{icon:u.value},null):i.value)]}}),b("div",{class:"v-stepper-item__content"},[d&&b("div",{key:"title",class:"v-stepper-item__title"},[((v=n.title)==null?void 0:v.call(n,f.value))??e.title]),h&&b("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((p=n.subtitle)==null?void 0:p.call(n,f.value))??e.subtitle]),(y=n.default)==null?void 0:y.call(n,f.value)])]),[[nr("ripple"),e.ripple&&e.editable,null]])}),{}}}),J9=Symbol.for("vuetify:v-stepper"),X9=Z({...gn(vp(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),g2=ge()({name:"VStepperWindow",props:X9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=it(J9,null),i=Ke(e,"modelValue"),s=F({get(){var a;return i.value!=null||!r?i.value:(a=r.items.value.find(o=>r.selected.value.includes(o.id)))==null?void 0:a.value},set(a){i.value=a}});return _e(()=>{const a=Dl.filterProps(e);return b(Dl,xe({_as:"VStepperWindow"},a,{modelValue:s.value,"onUpdate:modelValue":o=>s.value=o,class:"v-stepper-window",mandatory:!1,touch:!1}),n)}),{}}}),Z9=Z({...mp()},"VStepperWindowItem"),v2=ge()({name:"VStepperWindowItem",props:Z9(),setup(e,t){let{slots:n}=t;return _e(()=>{const r=Fl.filterProps(e);return b(Fl,xe({_as:"VStepperWindowItem"},r,{class:"v-stepper-window-item"}),n)}),{}}}),m2=Symbol.for("vuetify:v-stepper"),Q9=Z({altLabels:Boolean,bgColor:String,editable:Boolean,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},mobile:Boolean,nonLinear:Boolean,flat:Boolean,...va({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...df(),...Cx(c2(),["prevText","nextText"])},"VStepper"),ej=ge()({name:"VStepper",props:Q9(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:r,next:i,prev:s,selected:a}=ws(e,m2),{color:o,editable:l,prevText:u,nextText:f}=Bl(e),c=F(()=>e.items.map((g,v)=>{const p=Sn(g,e.itemTitle,g),y=Sn(g,e.itemValue,v+1);return{title:p,value:y,raw:g}})),d=F(()=>r.value.findIndex(g=>a.value.includes(g.id))),h=F(()=>e.disabled?e.disabled:d.value===0?"prev":d.value===r.value.length-1?"next":!1);return Bt({VStepperItem:{editable:l,prevText:u,nextText:f},VStepperActions:{color:o,disabled:h,prevText:u,nextText:f}}),_e(()=>{const g=Zs.filterProps(e),v=!!(n.header||e.items.length),p=e.items.length>0,y=!e.hideActions&&!!(p||n.actions);return b(Zs,xe(g,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":e.mobile},e.class],style:e.style}),{default:()=>{var w,A;return[v&&b(f2,{key:"stepper-header"},{default:()=>[c.value.map((I,k)=>b(Fe,null,[!!k&&b(lp,null,null),b(h2,I,{default:n[`header-item.${I.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})]))]}),p&&b(g2,{key:"stepper-window"},{default:()=>[c.value.map(I=>b(v2,{value:I.value},{default:()=>{var k,x;return((k=n[`item.${I.value}`])==null?void 0:k.call(n,I))??((x=n.item)==null?void 0:x.call(n,I))}}))]}),(w=n.default)==null?void 0:w.call(n,{prev:s,next:i}),y&&(((A=n.actions)==null?void 0:A.call(n,{next:i,prev:s}))??b(d2,{key:"stepper-actions","onClick:prev":s,"onClick:next":i},n))]}})}),{prev:s,next:i}}}),tj=Z({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Wi(),...nf()},"VSwitch"),nj=ge()({name:"VSwitch",inheritAttrs:!1,props:tj(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:r}=t;const i=Ke(e,"indeterminate"),s=Ke(e,"modelValue"),{loaderClasses:a}=eu(e),{isFocused:o,focus:l,blur:u}=Gi(e),f=ne(),c=F(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),d=Ln(),h=F(()=>e.id||`switch-${d}`);function g(){i.value&&(i.value=!1)}function v(p){var y,w;p.stopPropagation(),p.preventDefault(),(w=(y=f.value)==null?void 0:y.input)==null||w.click()}return _e(()=>{const[p,y]=_s(n),w=Rn.filterProps(e),A=Xs.filterProps(e);return b(Rn,xe({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":i.value},a.value,e.class]},p,w,{modelValue:s.value,"onUpdate:modelValue":I=>s.value=I,id:h.value,focused:o.value,style:e.style}),{...r,default:I=>{let{id:k,messagesId:x,isDisabled:C,isReadonly:m,isValid:_}=I;return b(Xs,xe({ref:f},A,{modelValue:s.value,"onUpdate:modelValue":[T=>s.value=T,g],id:k.value,"aria-describedby":x.value,type:"checkbox","aria-checked":i.value?"mixed":void 0,disabled:C.value,readonly:m.value,onFocus:l,onBlur:u},y),{...r,default:T=>{let{backgroundColorClasses:E,backgroundColorStyles:R}=T;return b("div",{class:["v-switch__track",...E.value],style:R.value,onClick:v},null)},input:T=>{let{inputNode:E,icon:R,backgroundColorClasses:D,backgroundColorStyles:$}=T;return b(Fe,null,[E,b("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":R||e.loading},e.inset?void 0:D.value],style:e.inset?void 0:$.value},[b(ep,null,{default:()=>[e.loading?b(tf,{name:"v-switch",active:!0,color:_.value===!1?void 0:c.value},{default:M=>r.loader?r.loader(M):b(oo,{active:M.isActive,color:M.color,indeterminate:!0,size:"16",width:"2"},null)}):R&&b(Tt,{key:R,icon:R,size:"x-small"},null)]})])])}})}})}),{}}}),rj=Z({color:String,height:[Number,String],window:Boolean,...Ne(),...ln(),...xo(),...Ht(),...rt(),...dt()},"VSystemBar"),ij=ge()({name:"VSystemBar",props:rj(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{backgroundColorClasses:i,backgroundColorStyles:s}=Ot(he(e,"color")),{elevationClasses:a}=En(e),{roundedClasses:o}=Kt(e),{ssrBootStyles:l}=fa(),u=F(()=>e.height??(e.window?32:24)),{layoutItemStyles:f}=Co({id:e.name,order:F(()=>parseInt(e.order,10)),position:Ae("top"),layoutSize:u,elementSize:u,active:F(()=>!0),absolute:he(e,"absolute")});return _e(()=>b(e.tag,{class:["v-system-bar",{"v-system-bar--window":e.window},r.value,i.value,a.value,o.value,e.class],style:[s.value,f.value,l.value,e.style]},n)),{}}}),p2=Symbol.for("vuetify:v-tabs"),sj=Z({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...gn(sp({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),y2=ge()({name:"VTab",props:sj(),setup(e,t){let{slots:n,attrs:r}=t;const{textColorClasses:i,textColorStyles:s}=Mn(e,"sliderColor"),a=F(()=>e.direction==="horizontal"),o=Ae(!1),l=ne(),u=ne();function f(c){var h,g;let{value:d}=c;if(o.value=d,d){const v=(g=(h=l.value)==null?void 0:h.$el.parentElement)==null?void 0:g.querySelector(".v-tab--selected .v-tab__slider"),p=u.value;if(!v||!p)return;const y=getComputedStyle(v).color,w=v.getBoundingClientRect(),A=p.getBoundingClientRect(),I=a.value?"x":"y",k=a.value?"X":"Y",x=a.value?"right":"bottom",C=a.value?"width":"height",m=w[I],_=A[I],T=m>_?w[x]-A[x]:w[I]-A[I],E=Math.sign(T)>0?a.value?"right":"bottom":Math.sign(T)<0?a.value?"left":"top":"center",D=(Math.abs(T)+(Math.sign(T)<0?w[C]:A[C]))/Math.max(w[C],A[C])||0,$=w[C]/A[C]||0,M=1.5;Ls(p,{backgroundColor:[y,"currentcolor"],transform:[`translate${k}(${T}px) scale${k}(${$})`,`translate${k}(${T/M}px) scale${k}(${(D-1)/M+1})`,"none"],transformOrigin:Array(3).fill(E)},{duration:225,easing:Al})}}return _e(()=>{const c=pt.filterProps(e);return b(pt,xe({symbol:p2,ref:l,class:["v-tab",e.class],style:e.style,tabindex:o.value?0:-1,role:"tab","aria-selected":String(o.value),active:!1},c,r,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":f}),{default:()=>{var d;return[((d=n.default)==null?void 0:d.call(n))??e.text,!e.hideSlider&&b("div",{ref:u,class:["v-tab__slider",i.value],style:s.value},null)]}})}),{}}});function aj(e){return e?e.map(t=>Rc(t)?t:{text:t,value:t}):[]}const oj=Z({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...u2({mandatory:"force"}),...vn(),...rt()},"VTabs"),lj=ge()({name:"VTabs",props:oj(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),i=F(()=>aj(e.items)),{densityClasses:s}=Hn(e),{backgroundColorClasses:a,backgroundColorStyles:o}=Ot(he(e,"bgColor"));return Bt({VTab:{color:he(e,"color"),direction:he(e,"direction"),stacked:he(e,"stacked"),fixed:he(e,"fixedTabs"),sliderColor:he(e,"sliderColor"),hideSlider:he(e,"hideSlider")}}),_e(()=>{const l=qg.filterProps(e);return b(qg,xe(l,{modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},s.value,a.value,e.class],style:[{"--v-tabs-height":De(e.height)},o.value,e.style],role:"tablist",symbol:p2}),{default:()=>[n.default?n.default():i.value.map(u=>b(y2,xe(u,{key:u.text}),null))]})}),{}}}),uj=Z({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Wi(),...au()},"VTextarea"),cj=ge()({name:"VTextarea",directives:{Intersect:Ql},inheritAttrs:!1,props:uj(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:r,slots:i}=t;const s=Ke(e,"modelValue"),{isFocused:a,focus:o,blur:l}=Gi(e),u=F(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),f=F(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function c(E,R){var D,$;!e.autofocus||!E||($=(D=R[0].target)==null?void 0:D.focus)==null||$.call(D)}const d=ne(),h=ne(),g=Ae(""),v=ne(),p=F(()=>e.persistentPlaceholder||a.value||e.active);function y(){var E;v.value!==document.activeElement&&((E=v.value)==null||E.focus()),a.value||o()}function w(E){y(),r("click:control",E)}function A(E){r("mousedown:control",E)}function I(E){E.stopPropagation(),y(),ht(()=>{s.value="",qm(e["onClick:clear"],E)})}function k(E){var D;const R=E.target;if(s.value=R.value,(D=e.modelModifiers)!=null&&D.trim){const $=[R.selectionStart,R.selectionEnd];ht(()=>{R.selectionStart=$[0],R.selectionEnd=$[1]})}}const x=ne(),C=ne(+e.rows),m=F(()=>["plain","underlined"].includes(e.variant));Qt(()=>{e.autoGrow||(C.value=+e.rows)});function _(){e.autoGrow&&ht(()=>{if(!x.value||!h.value)return;const E=getComputedStyle(x.value),R=getComputedStyle(h.value.$el),D=parseFloat(E.getPropertyValue("--v-field-padding-top"))+parseFloat(E.getPropertyValue("--v-input-padding-top"))+parseFloat(E.getPropertyValue("--v-field-padding-bottom")),$=x.value.scrollHeight,M=parseFloat(E.lineHeight),O=Math.max(parseFloat(e.rows)*M+D,parseFloat(R.getPropertyValue("--v-input-control-height"))),L=parseFloat(e.maxRows)*M+D||1/0,W=rn($??0,O,L);C.value=Math.floor((W-D)/M),g.value=De(W)})}zt(_),Re(s,_),Re(()=>e.rows,_),Re(()=>e.maxRows,_),Re(()=>e.density,_);let T;return Re(x,E=>{E?(T=new ResizeObserver(_),T.observe(x.value)):T==null||T.disconnect()}),sn(()=>{T==null||T.disconnect()}),_e(()=>{const E=!!(i.counter||e.counter||e.counterValue),R=!!(E||i.details),[D,$]=_s(n),{modelValue:M,...O}=Rn.filterProps(e),L=dp(e);return b(Rn,xe({ref:d,modelValue:s.value,"onUpdate:modelValue":W=>s.value=W,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":m.value},e.class],style:e.style},D,O,{centerAffix:C.value===1&&!m.value,focused:a.value}),{...i,default:W=>{let{id:te,isDisabled:ie,isDirty:Q,isReadonly:ee,isValid:ye}=W;return b(ko,xe({ref:h,style:{"--v-textarea-control-height":g.value},onClick:w,onMousedown:A,"onClick:clear":I,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},L,{id:te.value,active:p.value||Q.value,centerAffix:C.value===1&&!m.value,dirty:Q.value||e.dirty,disabled:ie.value,focused:a.value,error:ye.value===!1}),{...i,default:we=>{let{props:{class:$e,...le}}=we;return b(Fe,null,[e.prefix&&b("span",{class:"v-text-field__prefix"},[e.prefix]),qt(b("textarea",xe({ref:v,class:$e,value:s.value,onInput:k,autofocus:e.autofocus,readonly:ee.value,disabled:ie.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:y,onBlur:l},le,$),null),[[nr("intersect"),{handler:c},null,{once:!0}]]),e.autoGrow&&qt(b("textarea",{class:[$e,"v-textarea__sizer"],id:`${le.id}-sizer`,"onUpdate:modelValue":B=>s.value=B,ref:x,readonly:!0,"aria-hidden":"true"},null),[[iI,s.value]]),e.suffix&&b("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:R?W=>{var te;return b(Fe,null,[(te=i.details)==null?void 0:te.call(i,W),E&&b(Fe,null,[b("span",null,null),b(lf,{active:e.persistentCounter||a.value,value:u.value,max:f.value},i.counter)])])}:void 0})}),Wr({},d,h,v)}}),dj=Z({withBackground:Boolean,...Ne(),...dt(),...rt()},"VThemeProvider"),fj=ge()({name:"VThemeProvider",props:dj(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e);return()=>{var i;return e.withBackground?b(e.tag,{class:["v-theme-provider",r.value,e.class],style:e.style},{default:()=>{var s;return[(s=n.default)==null?void 0:s.call(n)]}}):(i=n.default)==null?void 0:i.call(n)}}}),hj=Z({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Ne(),...vn(),...rt(),...dt()},"VTimeline"),gj=ge()({name:"VTimeline",props:hj(),setup(e,t){let{slots:n}=t;const{themeClasses:r}=xt(e),{densityClasses:i}=Hn(e),{rtlClasses:s}=Cn();Bt({VTimelineDivider:{lineColor:he(e,"lineColor")},VTimelineItem:{density:he(e,"density"),lineInset:he(e,"lineInset")}});const a=F(()=>{const l=e.side?e.side:e.density!=="default"?"end":null;return l&&`v-timeline--side-${l}`}),o=F(()=>{const l=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return l;case"start":return l[0];case"end":return l[1];default:return null}});return _e(()=>b(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,o.value,{"v-timeline--inset-line":!!e.lineInset},r.value,i.value,a.value,s.value,e.class],style:[{"--v-timeline-line-thickness":De(e.lineThickness)},e.style]},n)),{}}}),vj=Z({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:tt,iconColor:String,lineColor:String,...Ne(),...Ht(),...zi(),...ln()},"VTimelineDivider"),mj=ge()({name:"VTimelineDivider",props:vj(),setup(e,t){let{slots:n}=t;const{sizeClasses:r,sizeStyles:i}=Eo(e,"v-timeline-divider__dot"),{backgroundColorStyles:s,backgroundColorClasses:a}=Ot(he(e,"dotColor")),{roundedClasses:o}=Kt(e,"v-timeline-divider__dot"),{elevationClasses:l}=En(e),{backgroundColorClasses:u,backgroundColorStyles:f}=Ot(he(e,"lineColor"));return _e(()=>b("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[b("div",{class:["v-timeline-divider__before",u.value],style:f.value},null),!e.hideDot&&b("div",{key:"dot",class:["v-timeline-divider__dot",l.value,o.value,r.value],style:i.value},[b("div",{class:["v-timeline-divider__inner-dot",a.value,o.value],style:s.value},[n.default?b(ft,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):b(Tt,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),b("div",{class:["v-timeline-divider__after",u.value],style:f.value},null)])),{}}}),pj=Z({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:tt,iconColor:String,lineInset:[Number,String],...Ne(),...Kn(),...ln(),...Ht(),...zi(),...rt()},"VTimelineItem"),yj=ge()({name:"VTimelineItem",props:pj(),setup(e,t){let{slots:n}=t;const{dimensionStyles:r}=Gn(e),i=Ae(0),s=ne();return Re(s,a=>{var o;a&&(i.value=((o=a.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:o.getBoundingClientRect().width)??0)},{flush:"post"}),_e(()=>{var a,o;return b("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":De(i.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${De(e.lineInset)})`:De(0)},e.style]},[b("div",{class:"v-timeline-item__body",style:r.value},[(a=n.default)==null?void 0:a.call(n)]),b(mj,{ref:s,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&b("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((o=n.opposite)==null?void 0:o.call(n))])])}),{}}}),bj=Z({...Ne(),...Or({variant:"text"})},"VToolbarItems"),Sj=ge()({name:"VToolbarItems",props:bj(),setup(e,t){let{slots:n}=t;return Bt({VBtn:{color:he(e,"color"),height:"inherit",variant:he(e,"variant")}}),_e(()=>{var r;return b("div",{class:["v-toolbar-items",e.class],style:e.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),_j=Z({id:String,text:String,...gn(su({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),wj=ge()({name:"VTooltip",props:_j(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=Ke(e,"modelValue"),{scopeId:i}=Ro(),s=Ln(),a=F(()=>e.id||`v-tooltip-${s}`),o=ne(),l=F(()=>e.location.split(" ").length>1?e.location:e.location+" center"),u=F(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),f=F(()=>e.transition?e.transition:r.value?"scale-transition":"fade-transition"),c=F(()=>xe({"aria-describedby":a.value},e.activatorProps));return _e(()=>{const d=oi.filterProps(e);return b(oi,xe({ref:o,class:["v-tooltip",e.class],style:e.style,id:a.value},d,{modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,transition:f.value,absolute:!0,location:l.value,origin:u.value,persistent:!0,role:"tooltip",activatorProps:c.value,_disableGlobalStack:!0},i),{activator:n.activator,default:function(){var p;for(var h=arguments.length,g=new Array(h),v=0;v<h;v++)g[v]=arguments[v];return((p=n.default)==null?void 0:p.call(n,...g))??e.text}})}),Wr({},o)}}),xj=ge()({name:"VValidation",props:IC(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const r=RC(e,"validation");return()=>{var i;return(i=n.default)==null?void 0:i.call(n,r)}}}),Cj=Object.freeze(Object.defineProperty({__proto__:null,VAlert:uB,VAlertTitle:_C,VApp:bV,VAppBar:BV,VAppBarNavIcon:sB,VAppBarTitle:aB,VAutocomplete:TL,VAvatar:$i,VBadge:IL,VBanner:PL,VBannerActions:rE,VBannerText:iE,VBottomNavigation:FL,VBottomSheet:NL,VBreadcrumbs:BL,VBreadcrumbsDivider:aE,VBreadcrumbsItem:oE,VBtn:pt,VBtnGroup:xg,VBtnToggle:zV,VCard:jL,VCardActions:lE,VCardItem:dE,VCardSubtitle:uE,VCardText:fE,VCardTitle:cE,VCarousel:XL,VCarouselItem:QL,VCheckbox:pB,VCheckboxBtn:Ni,VChip:iu,VChipGroup:SB,VClassIcon:Yd,VCode:e7,VCol:TH,VColorPicker:j7,VCombobox:z7,VComponentIcon:Sg,VContainer:wH,VCounter:lf,VDataIterator:nH,VDataTable:mH,VDataTableFooter:Ol,VDataTableRow:Ip,VDataTableRows:Qs,VDataTableServer:SH,VDataTableVirtual:yH,VDatePicker:MH,VDatePickerControls:Vg,VDatePickerHeader:Bg,VDatePickerMonth:Lg,VDatePickerMonths:Hg,VDatePickerYears:jg,VDefaultsProvider:ft,VDialog:Pg,VDialogBottomTransition:xV,VDialogTopTransition:CV,VDialogTransition:Jd,VDivider:lp,VExpandTransition:Xd,VExpandXTransition:np,VExpansionPanel:qH,VExpansionPanelText:i2,VExpansionPanelTitle:a2,VExpansionPanels:LH,VFabTransition:wV,VFadeTransition:Oc,VField:ko,VFieldLabel:qo,VFileInput:zH,VFooter:GH,VForm:YH,VHover:XH,VIcon:Tt,VImg:Js,VInfiniteScroll:QH,VInput:Rn,VItem:n9,VItemGroup:t9,VKbd:r9,VLabel:Io,VLayout:s9,VLayoutItem:o9,VLazy:u9,VLigatureIcon:tV,VList:sf,VListGroup:Ag,VListImg:LB,VListItem:Mi,VListItemAction:jB,VListItemMedia:UB,VListItemSubtitle:MC,VListItemTitle:VC,VListSubheader:BC,VLocaleProvider:d9,VMain:h9,VMenu:of,VMessages:TC,VNavigationDrawer:w9,VNoSsr:x9,VOtpInput:E9,VOverlay:oi,VPagination:I9,VParallax:P9,VProgressCircular:oo,VProgressLinear:Qd,VRadio:F9,VRadioGroup:N9,VRangeSlider:M9,VRating:B9,VResponsive:_g,VRow:FH,VScaleTransition:ep,VScrollXReverseTransition:TV,VScrollXTransition:EV,VScrollYReverseTransition:IV,VScrollYTransition:AV,VSelect:nE,VSelectionControl:Xs,VSelectionControlGroup:xC,VSheet:Zs,VSkeletonLoader:q9,VSlideGroup:qg,VSlideGroupItem:z9,VSlideXReverseTransition:kV,VSlideXTransition:RV,VSlideYReverseTransition:PV,VSlideYTransition:tp,VSlider:$g,VSnackbar:W9,VSpacer:ZE,VStepper:ej,VStepperActions:d2,VStepperHeader:f2,VStepperItem:h2,VStepperWindow:g2,VStepperWindowItem:v2,VSvgIcon:Xm,VSwitch:nj,VSystemBar:ij,VTab:y2,VTable:ea,VTabs:lj,VTextField:ps,VTextarea:cj,VThemeProvider:fj,VTimeline:gj,VTimelineItem:yj,VToolbar:wg,VToolbarItems:Sj,VToolbarTitle:Qm,VTooltip:wj,VValidation:xj,VVirtualScroll:cf,VWindow:Dl,VWindowItem:Fl},Symbol.toStringTag,{value:"Module"}));function Ej(e,t){const n=t.modifiers||{},r=t.value,{once:i,immediate:s,...a}=n,o=!Object.keys(a).length,{handler:l,options:u}=typeof r=="object"?r:{handler:r,options:{attributes:(a==null?void 0:a.attr)??o,characterData:(a==null?void 0:a.char)??o,childList:(a==null?void 0:a.child)??o,subtree:(a==null?void 0:a.sub)??o}},f=new MutationObserver(function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=arguments.length>1?arguments[1]:void 0;l==null||l(c,d),i&&b2(e,t)});s&&(l==null||l([],f)),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:f},f.observe(e,u)}function b2(e,t){var n;(n=e._mutate)!=null&&n[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const Tj={mounted:Ej,unmounted:b2};function Aj(e,t){var i,s;const n=t.value,r={passive:!((i=t.modifiers)!=null&&i.active)};window.addEventListener("resize",n,r),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:r},(s=t.modifiers)!=null&&s.quiet||n()}function Ij(e,t){var i;if(!((i=e._onResize)!=null&&i[t.instance.$.uid]))return;const{handler:n,options:r}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,r),delete e._onResize[t.instance.$.uid]}const Rj={mounted:Aj,unmounted:Ij};function S2(e,t){const{self:n=!1}=t.modifiers??{},r=t.value,i=typeof r=="object"&&r.options||{passive:!0},s=typeof r=="function"||"handleEvent"in r?r:r.handler,a=n?e:t.arg?document.querySelector(t.arg):window;a&&(a.addEventListener("scroll",s,i),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:s,options:i,target:n?void 0:a})}function _2(e,t){var s;if(!((s=e._onScroll)!=null&&s[t.instance.$.uid]))return;const{handler:n,options:r,target:i=e}=e._onScroll[t.instance.$.uid];i.removeEventListener("scroll",n,r),delete e._onScroll[t.instance.$.uid]}function kj(e,t){t.value!==t.oldValue&&(_2(e,t),S2(e,t))}const Pj={mounted:S2,unmounted:_2,updated:kj},Dj=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:ZC,Intersect:Ql,Mutate:Tj,Resize:Rj,Ripple:Ki,Scroll:Pj,Touch:gp},Symbol.toStringTag,{value:"Module"})),Fj={component:Yd};/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const $a=typeof window<"u";function Oj(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Rt=Object.assign;function Ch(e,t){const n={};for(const r in t){const i=t[r];n[r]=Kr(i)?i.map(e):e(i)}return n}const sl=()=>{},Kr=Array.isArray,Nj=/\/$/,$j=e=>e.replace(Nj,"");function Eh(e,t,n="/"){let r,i={},s="",a="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,o>-1?o:t.length),i=e(s)),o>-1&&(r=r||t.slice(0,o),a=t.slice(o,t.length)),r=Lj(r??t,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function Mj(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function B1(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Vj(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&uo(t.matched[r],n.matched[i])&&w2(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function uo(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function w2(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Bj(e[n],t[n]))return!1;return!0}function Bj(e,t){return Kr(e)?L1(e,t):Kr(t)?L1(t,e):e===t}function L1(e,t){return Kr(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Lj(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var $l;(function(e){e.pop="pop",e.push="push"})($l||($l={}));var al;(function(e){e.back="back",e.forward="forward",e.unknown=""})(al||(al={}));function Hj(e){if(!e)if($a){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),$j(e)}const jj=/^[^#]+#/;function qj(e,t){return e.replace(jj,"#")+t}function Uj(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const wf=()=>({left:window.pageXOffset,top:window.pageYOffset});function zj(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Uj(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function H1(e,t){return(history.state?history.state.position-t:-1)+e}const Ug=new Map;function Kj(e,t){Ug.set(e,t)}function Gj(e){const t=Ug.get(e);return Ug.delete(e),t}let Wj=()=>location.protocol+"//"+location.host;function x2(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let o=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),B1(l,"")}return B1(n,e)+r+i}function Yj(e,t,n,r){let i=[],s=[],a=null;const o=({state:d})=>{const h=x2(e,location),g=n.value,v=t.value;let p=0;if(d){if(n.value=h,t.value=d,a&&a===g){a=null;return}p=v?d.position-v.position:0}else r(h);i.forEach(y=>{y(n.value,g,{delta:p,type:$l.pop,direction:p?p>0?al.forward:al.back:al.unknown})})};function l(){a=n.value}function u(d){i.push(d);const h=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(h),h}function f(){const{history:d}=window;d.state&&d.replaceState(Rt({},d.state,{scroll:wf()}),"")}function c(){for(const d of s)d();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:u,destroy:c}}function j1(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?wf():null}}function Jj(e){const{history:t,location:n}=window,r={value:x2(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,u,f){const c=e.indexOf("#"),d=c>-1?(n.host&&document.querySelector("base")?e:e.slice(c))+l:Wj()+e+l;try{t[f?"replaceState":"pushState"](u,"",d),i.value=u}catch(h){console.error(h),n[f?"replace":"assign"](d)}}function a(l,u){const f=Rt({},t.state,j1(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,f,!0),r.value=l}function o(l,u){const f=Rt({},i.value,t.state,{forward:l,scroll:wf()});s(f.current,f,!0);const c=Rt({},j1(r.value,l,null),{position:f.position+1},u);s(l,c,!1),r.value=l}return{location:r,state:i,push:o,replace:a}}function Xj(e){e=Hj(e);const t=Jj(e),n=Yj(e,t.state,t.location,t.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=Rt({location:"",base:e,go:r,createHref:qj.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Zj(e){return typeof e=="string"||e&&typeof e=="object"}function C2(e){return typeof e=="string"||typeof e=="symbol"}const Qi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},E2=Symbol("");var q1;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(q1||(q1={}));function co(e,t){return Rt(new Error,{type:e,[E2]:!0},t)}function _i(e,t){return e instanceof Error&&E2 in e&&(t==null||!!(e.type&t))}const U1="[^/]+?",Qj={sensitive:!1,strict:!1,start:!0,end:!0},eq=/[.+*?^${}()[\]/\\]/g;function tq(e,t){const n=Rt({},Qj,t),r=[];let i=n.start?"^":"";const s=[];for(const u of e){const f=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let c=0;c<u.length;c++){const d=u[c];let h=40+(n.sensitive?.25:0);if(d.type===0)c||(i+="/"),i+=d.value.replace(eq,"\\$&"),h+=40;else if(d.type===1){const{value:g,repeatable:v,optional:p,regexp:y}=d;s.push({name:g,repeatable:v,optional:p});const w=y||U1;if(w!==U1){h+=10;try{new RegExp(`(${w})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${g}" (${w}): `+I.message)}}let A=v?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;c||(A=p&&u.length<2?`(?:/${A})`:"/"+A),p&&(A+="?"),i+=A,h+=20,p&&(h+=-8),v&&(h+=-20),w===".*"&&(h+=-50)}f.push(h)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function o(u){const f=u.match(a),c={};if(!f)return null;for(let d=1;d<f.length;d++){const h=f[d]||"",g=s[d-1];c[g.name]=h&&g.repeatable?h.split("/"):h}return c}function l(u){let f="",c=!1;for(const d of e){(!c||!f.endsWith("/"))&&(f+="/"),c=!1;for(const h of d)if(h.type===0)f+=h.value;else if(h.type===1){const{value:g,repeatable:v,optional:p}=h,y=g in u?u[g]:"";if(Kr(y)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const w=Kr(y)?y.join("/"):y;if(!w)if(p)d.length<2&&(f.endsWith("/")?f=f.slice(0,-1):c=!0);else throw new Error(`Missing required param "${g}"`);f+=w}}return f||"/"}return{re:a,score:r,keys:s,parse:o,stringify:l}}function nq(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function rq(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=nq(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(z1(r))return 1;if(z1(i))return-1}return i.length-r.length}function z1(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const iq={type:0,value:""},sq=/[a-zA-Z0-9_]/;function aq(e){if(!e)return[[]];if(e==="/")return[[iq]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let o=0,l,u="",f="";function c(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;o<e.length;){if(l=e[o++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&c(),a()):l===":"?(c(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:sq.test(l)?d():(c(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=3:f+=l;break;case 3:c(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,f="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),c(),a(),i}function oq(e,t,n){const r=tq(aq(e.path),n),i=Rt(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function lq(e,t){const n=[],r=new Map;t=W1({strict:!1,end:!0,sensitive:!1},t);function i(f){return r.get(f)}function s(f,c,d){const h=!d,g=uq(f);g.aliasOf=d&&d.record;const v=W1(t,f),p=[g];if("alias"in f){const A=typeof f.alias=="string"?[f.alias]:f.alias;for(const I of A)p.push(Rt({},g,{components:d?d.record.components:g.components,path:I,aliasOf:d?d.record:g}))}let y,w;for(const A of p){const{path:I}=A;if(c&&I[0]!=="/"){const k=c.record.path,x=k[k.length-1]==="/"?"":"/";A.path=c.record.path+(I&&x+I)}if(y=oq(A,c,v),d?d.alias.push(y):(w=w||y,w!==y&&w.alias.push(y),h&&f.name&&!G1(y)&&a(f.name)),g.children){const k=g.children;for(let x=0;x<k.length;x++)s(k[x],y,d&&d.children[x])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return w?()=>{a(w)}:sl}function a(f){if(C2(f)){const c=r.get(f);c&&(r.delete(f),n.splice(n.indexOf(c),1),c.children.forEach(a),c.alias.forEach(a))}else{const c=n.indexOf(f);c>-1&&(n.splice(c,1),f.record.name&&r.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function o(){return n}function l(f){let c=0;for(;c<n.length&&rq(f,n[c])>=0&&(f.record.path!==n[c].record.path||!T2(f,n[c]));)c++;n.splice(c,0,f),f.record.name&&!G1(f)&&r.set(f.record.name,f)}function u(f,c){let d,h={},g,v;if("name"in f&&f.name){if(d=r.get(f.name),!d)throw co(1,{location:f});v=d.record.name,h=Rt(K1(c.params,d.keys.filter(w=>!w.optional).map(w=>w.name)),f.params&&K1(f.params,d.keys.map(w=>w.name))),g=d.stringify(h)}else if("path"in f)g=f.path,d=n.find(w=>w.re.test(g)),d&&(h=d.parse(g),v=d.record.name);else{if(d=c.name?r.get(c.name):n.find(w=>w.re.test(c.path)),!d)throw co(1,{location:f,currentLocation:c});v=d.record.name,h=Rt({},c.params,f.params),g=d.stringify(h)}const p=[];let y=d;for(;y;)p.unshift(y.record),y=y.parent;return{name:v,path:g,params:h,matched:p,meta:dq(p)}}return e.forEach(f=>s(f)),{addRoute:s,resolve:u,removeRoute:a,getRoutes:o,getRecordMatcher:i}}function K1(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function uq(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:cq(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function cq(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function G1(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function dq(e){return e.reduce((t,n)=>Rt(t,n.meta),{})}function W1(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function T2(e,t){return t.children.some(n=>n===e||T2(e,n))}const A2=/#/g,fq=/&/g,hq=/\//g,gq=/=/g,vq=/\?/g,I2=/\+/g,mq=/%5B/g,pq=/%5D/g,R2=/%5E/g,yq=/%60/g,k2=/%7B/g,bq=/%7C/g,P2=/%7D/g,Sq=/%20/g;function Fp(e){return encodeURI(""+e).replace(bq,"|").replace(mq,"[").replace(pq,"]")}function _q(e){return Fp(e).replace(k2,"{").replace(P2,"}").replace(R2,"^")}function zg(e){return Fp(e).replace(I2,"%2B").replace(Sq,"+").replace(A2,"%23").replace(fq,"%26").replace(yq,"`").replace(k2,"{").replace(P2,"}").replace(R2,"^")}function wq(e){return zg(e).replace(gq,"%3D")}function xq(e){return Fp(e).replace(A2,"%23").replace(vq,"%3F")}function Cq(e){return e==null?"":xq(e).replace(hq,"%2F")}function Mc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Eq(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(I2," "),a=s.indexOf("="),o=Mc(a<0?s:s.slice(0,a)),l=a<0?null:Mc(s.slice(a+1));if(o in t){let u=t[o];Kr(u)||(u=t[o]=[u]),u.push(l)}else t[o]=l}return t}function Y1(e){let t="";for(let n in e){const r=e[n];if(n=wq(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Kr(r)?r.map(s=>s&&zg(s)):[r&&zg(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Tq(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Kr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const Aq=Symbol(""),J1=Symbol(""),Op=Symbol(""),Np=Symbol(""),Kg=Symbol("");function Bo(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function rs(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,o)=>{const l=c=>{c===!1?o(co(4,{from:n,to:t})):c instanceof Error?o(c):Zj(c)?o(co(2,{from:t,to:c})):(s&&r.enterCallbacks[i]===s&&typeof c=="function"&&s.push(c),a())},u=e.call(r&&r.instances[i],t,n,l);let f=Promise.resolve(u);e.length<3&&(f=f.then(l)),f.catch(c=>o(c))})}function Th(e,t,n,r){const i=[];for(const s of e)for(const a in s.components){let o=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(Iq(o)){const u=(o.__vccOpts||o)[t];u&&i.push(rs(u,n,r,s,a))}else{let l=o();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const f=Oj(u)?u.default:u;s.components[a]=f;const d=(f.__vccOpts||f)[t];return d&&rs(d,n,r,s,a)()}))}}return i}function Iq(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function X1(e){const t=it(Op),n=it(Np),r=F(()=>t.resolve(Se(e.to))),i=F(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],c=n.matched;if(!f||!c.length)return-1;const d=c.findIndex(uo.bind(null,f));if(d>-1)return d;const h=Z1(l[u-2]);return u>1&&Z1(f)===h&&c[c.length-1].path!==h?c.findIndex(uo.bind(null,l[u-2])):d}),s=F(()=>i.value>-1&&Dq(n.params,r.value.params)),a=F(()=>i.value>-1&&i.value===n.matched.length-1&&w2(n.params,r.value.params));function o(l={}){return Pq(l)?t[Se(e.replace)?"replace":"push"](Se(e.to)).catch(sl):Promise.resolve()}return{route:r,href:F(()=>r.value.href),isActive:s,isExactActive:a,navigate:o}}const Rq=go({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:X1,setup(e,{slots:t}){const n=bn(X1(e)),{options:r}=it(Op),i=F(()=>({[Q1(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Q1(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:ui("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),kq=Rq;function Pq(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Dq(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Kr(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function Z1(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Q1=(e,t,n)=>e??t??n,Fq=go({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=it(Kg),i=F(()=>e.route||r.value),s=it(J1,0),a=F(()=>{let u=Se(s);const{matched:f}=i.value;let c;for(;(c=f[u])&&!c.components;)u++;return u}),o=F(()=>i.value.matched[a.value]);At(J1,F(()=>a.value+1)),At(Aq,o),At(Kg,i);const l=ne();return Re(()=>[l.value,o.value,e.name],([u,f,c],[d,h,g])=>{f&&(f.instances[c]=u,h&&h!==f&&u&&u===d&&(f.leaveGuards.size||(f.leaveGuards=h.leaveGuards),f.updateGuards.size||(f.updateGuards=h.updateGuards))),u&&f&&(!h||!uo(f,h)||!d)&&(f.enterCallbacks[c]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,f=e.name,c=o.value,d=c&&c.components[f];if(!d)return eb(n.default,{Component:d,route:u});const h=c.props[f],g=h?h===!0?u.params:typeof h=="function"?h(u):h:null,p=ui(d,Rt({},g,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(c.instances[f]=null)},ref:l}));return eb(n.default,{Component:p,route:u})||p}}});function eb(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Oq=Fq;function Nq(e){const t=lq(e.routes,e),n=e.parseQuery||Eq,r=e.stringifyQuery||Y1,i=e.history,s=Bo(),a=Bo(),o=Bo(),l=Ae(Qi);let u=Qi;$a&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ch.bind(null,B=>""+B),c=Ch.bind(null,Cq),d=Ch.bind(null,Mc);function h(B,K){let z,se;return C2(B)?(z=t.getRecordMatcher(B),se=K):se=B,t.addRoute(se,z)}function g(B){const K=t.getRecordMatcher(B);K&&t.removeRoute(K)}function v(){return t.getRoutes().map(B=>B.record)}function p(B){return!!t.getRecordMatcher(B)}function y(B,K){if(K=Rt({},K||l.value),typeof B=="string"){const G=Eh(n,B,K.path),re=t.resolve({path:G.path},K),ce=i.createHref(G.fullPath);return Rt(G,re,{params:d(re.params),hash:Mc(G.hash),redirectedFrom:void 0,href:ce})}let z;if("path"in B)z=Rt({},B,{path:Eh(n,B.path,K.path).path});else{const G=Rt({},B.params);for(const re in G)G[re]==null&&delete G[re];z=Rt({},B,{params:c(G)}),K.params=c(K.params)}const se=t.resolve(z,K),Ee=B.hash||"";se.params=f(d(se.params));const V=Mj(r,Rt({},B,{hash:_q(Ee),path:se.path})),H=i.createHref(V);return Rt({fullPath:V,hash:Ee,query:r===Y1?Tq(B.query):B.query||{}},se,{redirectedFrom:void 0,href:H})}function w(B){return typeof B=="string"?Eh(n,B,l.value.path):Rt({},B)}function A(B,K){if(u!==B)return co(8,{from:K,to:B})}function I(B){return C(B)}function k(B){return I(Rt(w(B),{replace:!0}))}function x(B){const K=B.matched[B.matched.length-1];if(K&&K.redirect){const{redirect:z}=K;let se=typeof z=="function"?z(B):z;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=w(se):{path:se},se.params={}),Rt({query:B.query,hash:B.hash,params:"path"in se?{}:B.params},se)}}function C(B,K){const z=u=y(B),se=l.value,Ee=B.state,V=B.force,H=B.replace===!0,G=x(z);if(G)return C(Rt(w(G),{state:typeof G=="object"?Rt({},Ee,G.state):Ee,force:V,replace:H}),K||z);const re=z;re.redirectedFrom=K;let ce;return!V&&Vj(r,se,z)&&(ce=co(16,{to:re,from:se}),Q(se,se,!0,!1)),(ce?Promise.resolve(ce):T(re,se)).catch(me=>_i(me)?_i(me,2)?me:ie(me):W(me,re,se)).then(me=>{if(me){if(_i(me,2))return C(Rt({replace:H},w(me.to),{state:typeof me.to=="object"?Rt({},Ee,me.to.state):Ee,force:V}),K||re)}else me=R(re,se,!0,H,Ee);return E(re,se,me),me})}function m(B,K){const z=A(B,K);return z?Promise.reject(z):Promise.resolve()}function _(B){const K=we.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(B):B()}function T(B,K){let z;const[se,Ee,V]=$q(B,K);z=Th(se.reverse(),"beforeRouteLeave",B,K);for(const G of se)G.leaveGuards.forEach(re=>{z.push(rs(re,B,K))});const H=m.bind(null,B,K);return z.push(H),le(z).then(()=>{z=[];for(const G of s.list())z.push(rs(G,B,K));return z.push(H),le(z)}).then(()=>{z=Th(Ee,"beforeRouteUpdate",B,K);for(const G of Ee)G.updateGuards.forEach(re=>{z.push(rs(re,B,K))});return z.push(H),le(z)}).then(()=>{z=[];for(const G of V)if(G.beforeEnter)if(Kr(G.beforeEnter))for(const re of G.beforeEnter)z.push(rs(re,B,K));else z.push(rs(G.beforeEnter,B,K));return z.push(H),le(z)}).then(()=>(B.matched.forEach(G=>G.enterCallbacks={}),z=Th(V,"beforeRouteEnter",B,K),z.push(H),le(z))).then(()=>{z=[];for(const G of a.list())z.push(rs(G,B,K));return z.push(H),le(z)}).catch(G=>_i(G,8)?G:Promise.reject(G))}function E(B,K,z){o.list().forEach(se=>_(()=>se(B,K,z)))}function R(B,K,z,se,Ee){const V=A(B,K);if(V)return V;const H=K===Qi,G=$a?history.state:{};z&&(se||H?i.replace(B.fullPath,Rt({scroll:H&&G&&G.scroll},Ee)):i.push(B.fullPath,Ee)),l.value=B,Q(B,K,z,H),ie()}let D;function $(){D||(D=i.listen((B,K,z)=>{if(!$e.listening)return;const se=y(B),Ee=x(se);if(Ee){C(Rt(Ee,{replace:!0}),se).catch(sl);return}u=se;const V=l.value;$a&&Kj(H1(V.fullPath,z.delta),wf()),T(se,V).catch(H=>_i(H,12)?H:_i(H,2)?(C(H.to,se).then(G=>{_i(G,20)&&!z.delta&&z.type===$l.pop&&i.go(-1,!1)}).catch(sl),Promise.reject()):(z.delta&&i.go(-z.delta,!1),W(H,se,V))).then(H=>{H=H||R(se,V,!1),H&&(z.delta&&!_i(H,8)?i.go(-z.delta,!1):z.type===$l.pop&&_i(H,20)&&i.go(-1,!1)),E(se,V,H)}).catch(sl)}))}let M=Bo(),O=Bo(),L;function W(B,K,z){ie(B);const se=O.list();return se.length?se.forEach(Ee=>Ee(B,K,z)):console.error(B),Promise.reject(B)}function te(){return L&&l.value!==Qi?Promise.resolve():new Promise((B,K)=>{M.add([B,K])})}function ie(B){return L||(L=!B,$(),M.list().forEach(([K,z])=>B?z(B):K()),M.reset()),B}function Q(B,K,z,se){const{scrollBehavior:Ee}=e;if(!$a||!Ee)return Promise.resolve();const V=!z&&Gj(H1(B.fullPath,0))||(se||!z)&&history.state&&history.state.scroll||null;return ht().then(()=>Ee(B,K,V)).then(H=>H&&zj(H)).catch(H=>W(H,B,K))}const ee=B=>i.go(B);let ye;const we=new Set,$e={currentRoute:l,listening:!0,addRoute:h,removeRoute:g,hasRoute:p,getRoutes:v,resolve:y,options:e,push:I,replace:k,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:O.add,isReady:te,install(B){const K=this;B.component("RouterLink",kq),B.component("RouterView",Oq),B.config.globalProperties.$router=K,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>Se(l)}),$a&&!ye&&l.value===Qi&&(ye=!0,I(i.location).catch(Ee=>{}));const z={};for(const Ee in Qi)Object.defineProperty(z,Ee,{get:()=>l.value[Ee],enumerable:!0});B.provide(Op,K),B.provide(Np,_b(z)),B.provide(Kg,l);const se=B.unmount;we.add(B),B.unmount=function(){we.delete(B),we.size<1&&(u=Qi,D&&D(),D=null,l.value=Qi,ye=!1,L=!1),se()}}};function le(B){return B.reduce((K,z)=>K.then(()=>_(z)),Promise.resolve())}return $e}function $q(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const o=t.matched[a];o&&(e.matched.find(u=>uo(u,o))?r.push(o):n.push(o));const l=e.matched[a];l&&(t.matched.find(u=>uo(u,l))||i.push(l))}return[n,r,i]}function Mq(){return it(Np)}const Vq=e=>(Kc("data-v-0c6a457c"),e=e(),Gc(),e),Bq=Vq(()=>He("h1",{class:"mb-5"},"Équipes",-1)),Lq={key:0},Hq={class:"justify-self-end mr-1"},jq={__name:"Teams",setup(e){const t=vi(),n=ne("");return(r,i)=>{const s=ae("v-text-field"),a=ae("v-avatar"),o=ae("v-list-item-title"),l=ae("v-list-item-subtitle"),u=ae("v-btn"),f=ae("v-icon"),c=ae("v-list-item"),d=ae("v-list"),h=ae("v-card"),g=ae("v-menu"),v=ae("v-card-actions"),p=ae("v-col"),y=ae("v-skeleton-loader"),w=ae("v-row");return de(),et(Fe,null,[Bq,b(s,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=A=>n.value=A),"append-icon":"mdi-magnify",label:"Rechercher une personne ou entrer un numéro","single-line":"",rounded:"",class:"rounded-pill",density:"compact",variant:"outlined"},null,8,["modelValue"]),b(w,{class:"py-2 mt-2"},{default:q(()=>[Se(t).team.members.length>0?(de(),et(Fe,{key:0},[Se(t).team.search(n.value).length<=0?(de(),et("p",Lq,"Aucun résultat trouvé")):Je("",!0),(de(!0),et(Fe,null,zn(Se(t).team.search(n.value),A=>(de(),ke(p,{cols:"4",key:A.id},{default:q(()=>[b(h,{class:ri(A.do_not_disturb?"dnd":A.line_state)},{default:q(()=>[b(v,null,{default:q(()=>[b(c,{class:"w-100 pa-0"},{prepend:q(()=>[b(a,{image:A.avatar},null,8,["image"])]),append:q(()=>[He("div",Hq,[b(u,{density:"compact",icon:"mdi-phone",onClick:I=>Se(t).call.new(A.exten)},null,8,["onClick"]),b(u,{density:"compact",icon:"mdi-chat",to:"/chat/"+A.uuid},null,8,["to"]),b(g,{transition:"slide-y-transition"},{activator:q(({props:I})=>[b(u,xe(I,{density:"compact",icon:"mdi-dots-horizontal"}),null,16)]),default:q(()=>[b(h,{class:"mx-auto","max-width":"300"},{default:q(()=>[b(d,{density:"compact"},{default:q(()=>[b(c,{to:"mailto:"+A.email,value:"1",color:"primary"},{prepend:q(()=>[b(f,{icon:"mdi-email-arrow-right"})]),default:q(()=>[b(o,null,{default:q(()=>[Ge("Envoyer un email")]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),default:q(()=>[b(o,null,{default:q(()=>[Ge(Ue(A.firstname)+" "+Ue(A.lastname),1)]),_:2},1024),b(l,null,{default:q(()=>[He("b",null,Ue(A.exten),1)]),_:2},1024),b(l,null,{default:q(()=>[Ge(Ue(A.status)+" ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))],64)):(de(),et(Fe,{key:1},zn(4,A=>b(p,{cols:"4",key:A},{default:q(()=>[b(h,{class:"unavailable"},{default:q(()=>[b(v,null,{default:q(()=>[b(c,{class:"w-100 pa-0"},{prepend:q(()=>[b(a,null,{default:q(()=>[b(y,{class:"mx-auto border",type:"image",width:"100"})]),_:1})]),append:q(()=>[b(y,{type:"button",width:"40"}),b(y,{type:"button",width:"40"}),b(y,{type:"button",width:"40"}),b(y,{type:"button",width:"40"})]),default:q(()=>[b(o,null,{default:q(()=>[b(y,{type:"list-item-two-line"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})],64)}}},qq=xn(jq,[["__scopeId","data-v-0c6a457c"]]),Uq=He("h1",{class:"mb-5"},"Journal d'appel",-1),zq={__name:"History",setup(e){const t=qi(),n=ne(!0),r=ne(""),i=[{key:"icon"},{title:"Source",key:"caller"},{title:"Destination",key:"called"},{title:"Durée",key:"duration"},{title:"Date",key:"date"},{title:"Heure",key:"time"}],s=F(()=>t.call.log.map(u=>{let f="",c="";return n.value=!1,u.call_direction==="outbound"?f="mdi-call-made":u.call_direction==="inbound"?f="mdi-call-received":u.call_direction==="internal"&&(f="mdi-swap-vertical-variant"),u.answered===!1&&(f="mdi-call-missed",u.call_direction==="inbound"&&(c="missed-call")),{icon:f,caller:u.source_extension||"Inconnu",called:u.destination_extension||"Inconnu",duration:u.duration,date:u.start,time:u.start,rowClass:c}}));function a(u){return new Date(u).toLocaleDateString()}function o(u){return new Date(u).toLocaleTimeString()}function l(u){const f=Math.floor(u/1e3),c=Math.floor(f/3600),d=Math.floor((f-c*3600)/60),h=f%60;return c>0?`${c}h ${d}m ${h}s`:`${d}m ${h}s`}return(u,f)=>{const c=ae("v-text-field"),d=ae("v-icon"),h=ae("v-data-table");return de(),et("div",null,[Uq,b(c,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=g=>r.value=g),"append-icon":"mdi-magnify",label:"Rechercher","single-line":"",rounded:"",class:"rounded-pill",density:"compact",variant:"outlined"},null,8,["modelValue"]),b(h,{loading:n.value,headers:i,items:s.value,search:r.value,density:"compact"},{item:q(({item:g})=>[He("tr",{class:ri(g.rowClass)},[He("td",null,[b(d,null,{default:q(()=>[Ge(Ue(g.icon),1)]),_:2},1024)]),He("td",null,Ue(g.caller),1),He("td",null,Ue(g.called),1),He("td",null,Ue(l(g.duration)),1),He("td",null,Ue(a(g.date)),1),He("td",null,Ue(o(g.time)),1)],2)]),_:1},8,["loading","items","search"])])}}},Kq=He("b",null,"Nouveau message",-1),tb={__name:"Chat",setup(e){const t=Mq();vi();const n=ne([{id:"99f2c9f7-331c-4edb-b133-ce789d3f3dcf",subject:"Antoine Lamotte",avatar:"https://cdn.vuetifyjs.com/images/lists/1.jpg",members:[{id:"99f2c9f7-331c-4edb-b133-ce789d3f3dcf",name:"Antoine Lamotte",avatar:"https://cdn.vuetifyjs.com/images/lists/1.jpg"},{id:"me"}],messages:[{src:"99f2c9f7-331c-4edb-b133-ce789d3f3dcf",content:"Are you free?",date:"2021-09-01T12:04:00",seen:!1,avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"},{src:"me",content:"Hello World",date:"2021-09-01T12:00:00",avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"},{src:"99f2c9f7-331c-4edb-b133-ce789d3f3dcf",content:"Hi",date:"2021-09-01T12:01:00",avatar:"https://cdn.vuetifyjs.com/images/lists/1.jpg",seen:!0},{src:"me",content:"How are you?",date:"2021-09-01T12:02:00",avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"},{src:"99f2c9f7-331c-4edb-b133-ce789d3f3dcf",content:"I am fine",date:"2021-09-01T12:03:00",seen:!0,avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"}]},{id:"22f2c9f7-331c-4edb-b133-ce789d3f3dcf",subject:"John Doe",avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",members:[{id:"22f2c9f7-331c-4edb-b133-ce789d3f3dcf",name:"John Doe",avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg"},{id:"me",avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"}],messages:[{src:"22f2c9f7-331c-4edb-b133-ce789d3f3dcf",content:"Hi",date:"2021-09-01T12:01:00",avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",seen:!0},{src:"me",content:"How are you?",date:"2021-09-01T12:02:00",avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"},{src:"22f2c9f7-331c-4edb-b133-ce789d3f3dcf",content:"I am fine",date:"2021-09-01T12:03:00",seen:!0,avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"},{src:"22f2c9f7-331c-4edb-b133-ce789d3f3dcf",content:"Are you free?",date:"2021-09-01T12:04:00",seen:!0,avatar:"https://cdn.vuetifyjs.com/images/lists/3.jpg"}]}]),r=F(()=>n.value.find(i=>i.id===t.params.id)||n.value[0]);return(i,s)=>{const a=ae("v-img"),o=ae("v-avatar"),l=ae("v-list-item-title"),u=ae("v-list-item-subtitle"),f=ae("v-list-item-content"),c=ae("v-container"),d=ae("v-list-item"),h=ae("v-list"),g=ae("v-col"),v=ae("v-card-title"),p=ae("v-divider"),y=ae("v-chip"),w=ae("v-card-text"),A=ae("v-text-field"),I=ae("v-icon"),k=ae("v-btn"),x=ae("v-card-actions"),C=ae("v-card"),m=ae("v-row");return de(),ke(m,{"no-gutters":"",class:"fill-height"},{default:q(()=>[b(g,{cols:"3",class:"overflow-y-auto"},{default:q(()=>[b(h,{class:"pa-0"},{default:q(()=>[(de(!0),et(Fe,null,zn(n.value,_=>(de(),ke(d,{key:_.id,to:_.id,rounded:"",class:"pa-0 mb-1"},{default:q(()=>[b(c,{class:"pt-2 pb-2 ma-0 align-center d-flex ga-5"},{default:q(()=>[b(o,null,{default:q(()=>[b(a,{src:_.avatar},null,8,["src"])]),_:2},1024),b(f,null,{default:q(()=>[b(l,null,{default:q(()=>[Ge(Ue(_.subject),1)]),_:2},1024),_.messages[0].seen?(de(),ke(u,{key:0},{default:q(()=>[Ge(Ue(_.messages[0].content),1)]),_:2},1024)):(de(),ke(u,{key:1},{default:q(()=>[Kq]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1}),b(g,{cols:"9",class:"d-flex flex-column fill-height"},{default:q(()=>[b(C,{class:"flex-grow-1 d-flex flex-column",height:"95vh"},{default:q(()=>[b(v,null,{default:q(()=>[b(c,{class:"pa-0 align-center d-flex ga-5"},{default:q(()=>[b(o,null,{default:q(()=>[b(a,{src:r.value.avatar},null,8,["src"])]),_:1}),b(f,null,{default:q(()=>[b(l,null,{default:q(()=>[Ge(Ue(r.value.subject),1)]),_:1})]),_:1})]),_:1})]),_:1}),b(p),b(w,{class:"flex-grow-1 overflow-y-auto"},{default:q(()=>[b(h,null,{default:q(()=>[(de(!0),et(Fe,null,zn(r.value.messages,_=>(de(),ke(d,{key:_.date},{default:q(()=>[b(c,{class:"pt-2 pb-2 ma-0 align-center d-flex ga-5"},{default:q(()=>[b(o,null,{default:q(()=>[b(a,{src:_.avatar},null,8,["src"])]),_:2},1024),b(f,null,{default:q(()=>[b(l,null,{default:q(()=>[_.src==="me"?(de(),ke(y,{key:0,color:"primary",class:"white--text pa-3"},{default:q(()=>[Ge(Ue(_.content),1)]),_:2},1024)):(de(),ke(y,{key:1,color:"grey lighten-1",class:"white--text pa-3"},{default:q(()=>[Ge(Ue(_.content),1)]),_:2},1024))]),_:2},1024),b(u,null,{default:q(()=>[Ge(Ue(_.date),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),b(p),b(x,{class:"pa-2"},{default:q(()=>[b(A,{modelValue:i.message,"onUpdate:modelValue":s[0]||(s[0]=_=>i.message=_),"single-line":"",rounded:"",class:"flex-grow-1 rounded-pill",density:"compact",variant:"solo","hide-details":""},null,8,["modelValue"]),b(k,{icon:"",onClick:s[1]||(s[1]=_=>i.sendMessage(i.message))},{default:q(()=>[b(I,null,{default:q(()=>[Ge("mdi-send")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},Gq={},Wq=He("h1",null,"Carnet d'adresse",-1),Yq=[Wq];function Jq(e,t){return de(),et("div",null,Yq)}const Xq=xn(Gq,[["render",Jq]]),Zq={},Qq=He("h1",null,"Conférence",-1),eU=[Qq];function tU(e,t){return de(),et("div",null,eU)}const nU=xn(Zq,[["render",tU]]),rU={};function iU(e,t){return null}const sU=xn(rU,[["render",iU]]),aU=He("h3",null,"Gestion des périphériques",-1),oU={class:"ga-5 d-flex align-center"},lU={class:"ga-5 d-flex align-center"},uU={class:"ga-5 d-flex align-center"},cU=He("h3",null,"Sonnerie",-1),dU={__name:"SettingsAudioVideo",setup(e){const t=vi(),n=F(()=>t.setting.mediaDevices.audio.in.map(i=>({value:i.deviceId,title:i.label}))),r=F(()=>t.setting.mediaDevices.audio.out.map(i=>({value:i.deviceId,title:i.label})));return(i,s)=>{const a=ae("v-col"),o=ae("v-select"),l=ae("v-slider"),u=ae("v-icon"),f=ae("v-divider"),c=ae("v-row"),d=ae("v-form"),h=ae("v-container");return de(),ke(h,null,{default:q(()=>[b(d,null,{default:q(()=>[b(c,null,{default:q(()=>[b(a,{cols:"12"},{default:q(()=>[aU]),_:1}),b(a,{cols:"12",sm:"6"},{default:q(()=>[b(o,{rounded:"",class:"rounded-pill",density:"compact",variant:"solo",items:n.value,label:"Microphone",modelValue:Se(t).setting.selectedAudioIn,"onUpdate:modelValue":s[0]||(s[0]=g=>Se(t).setting.selectedAudioIn=g)},null,8,["items","modelValue"]),He("div",oU,[b(l,{"hide-details":"",modelValue:Se(t).setting.volumeIn,"onUpdate:modelValue":s[1]||(s[1]=g=>Se(t).setting.volumeIn=g)},null,8,["modelValue"]),He("span",null,Ue(Math.round(Se(t).setting.volumeIn))+"%",1),Se(t).setting.volumeIn>=1?(de(),ke(u,{key:0,onClick:s[2]||(s[2]=g=>Se(t).setting.volumeOut=0)},{default:q(()=>[Ge("mdi-volume-high")]),_:1})):Je("",!0),Se(t).setting.volumeIn==0?(de(),ke(u,{key:1,onClick:s[3]||(s[3]=g=>Se(t).setting.volumeIn=100)},{default:q(()=>[Ge("mdi-volume-off")]),_:1})):Je("",!0)])]),_:1}),b(a,{cols:"12",sm:"6"},{default:q(()=>[b(o,{rounded:"",class:"rounded-pill",density:"compact",variant:"solo",items:r.value,label:"Haut-parleur","thumbs-label":"",modelValue:Se(t).setting.selectedAudioOut,"onUpdate:modelValue":s[4]||(s[4]=g=>Se(t).setting.selectedAudioOut=g)},null,8,["items","modelValue"]),He("div",lU,[b(l,{"hide-details":"",modelValue:Se(t).setting.volumeOut,"onUpdate:modelValue":s[5]||(s[5]=g=>Se(t).setting.volumeOut=g)},null,8,["modelValue"]),He("span",null,Ue(Math.round(Se(t).setting.volumeOut))+"%",1),Se(t).setting.volumeOut>=1?(de(),ke(u,{key:0,onClick:s[6]||(s[6]=g=>Se(t).setting.volumeOut=0)},{default:q(()=>[Ge("mdi-volume-high")]),_:1})):Je("",!0),Se(t).setting.volumeOut==0?(de(),ke(u,{key:1,onClick:s[7]||(s[7]=g=>Se(t).setting.volumeOut=100)},{default:q(()=>[Ge("mdi-volume-off")]),_:1})):Je("",!0)])]),_:1}),b(a,{cols:"12",sm:"6"},{default:q(()=>[b(o,{rounded:"",class:"rounded-pill",density:"compact",variant:"solo",items:r.value,label:"Sonnerie","thumbs-label":"",modelValue:Se(t).setting.selectedAudioRinger,"onUpdate:modelValue":s[8]||(s[8]=g=>Se(t).setting.selectedAudioRinger=g)},null,8,["items","modelValue"]),He("div",uU,[b(l,{"hide-details":"",modelValue:Se(t).setting.volumeRinger,"onUpdate:modelValue":s[9]||(s[9]=g=>Se(t).setting.volumeRinger=g)},null,8,["modelValue"]),He("span",null,Ue(Math.round(Se(t).setting.volumeRinger))+"%",1),Se(t).setting.volumeRinger>=1?(de(),ke(u,{key:0,onClick:s[10]||(s[10]=g=>Se(t).setting.volumeRinger=0)},{default:q(()=>[Ge("mdi-volume-high")]),_:1})):Je("",!0),Se(t).setting.volumeRinger==0?(de(),ke(u,{key:1,onClick:s[11]||(s[11]=g=>Se(t).setting.volumeRinger=100)},{default:q(()=>[Ge("mdi-volume-off")]),_:1})):Je("",!0)])]),_:1}),b(a,{cols:"12"},{default:q(()=>[b(f)]),_:1}),b(a,{cols:"12"},{default:q(()=>[cU]),_:1})]),_:1})]),_:1})]),_:1})}}},fU=He("h1",{class:"mb-5"},"Paramètres",-1),hU={__name:"Settings",setup(e){const t=ne("audio");return(n,r)=>{const i=ae("v-tab"),s=ae("v-tabs"),a=dU,o=ae("v-card-text"),l=ae("v-card"),u=ae("v-window-item"),f=sU,c=ae("v-window");return de(),et("div",null,[fU,b(s,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=d=>t.value=d),vertical:""},{default:q(()=>[b(i,{value:"audio"},{default:q(()=>[Ge("Audio / Vidéo")]),_:1}),b(i,{value:"callForwarding"},{default:q(()=>[Ge("Renvoi d'appel")]),_:1})]),_:1},8,["modelValue"]),b(c,{modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=d=>t.value=d)},{default:q(()=>[b(u,{value:"audio"},{default:q(()=>[b(l,{flat:""},{default:q(()=>[b(o,null,{default:q(()=>[b(a)]),_:1})]),_:1})]),_:1}),b(u,{value:"callForwarding"},{default:q(()=>[b(l,{flat:""},{default:q(()=>[b(o,null,{default:q(()=>[b(f)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},gU={},vU=He("h1",null,"Messagerie vocal",-1),mU=[vU];function pU(e,t){return de(),et("div",null,mU)}const yU=xn(gU,[["render",pU]]),bU={},SU=He("h1",null,"Wallboard",-1),_U=[SU];function wU(e,t){return de(),et("div",null,_U)}const xU=xn(bU,[["render",wU]]),CU=e=>(Kc("data-v-fcfe34d1"),e=e(),Gc(),e),EU=CU(()=>He("h1",null,"Compte",-1)),TU=[EU],AU={__name:"Account",setup(e){return vi(),(t,n)=>(de(),et("div",null,TU))}},IU=xn(AU,[["__scopeId","data-v-fcfe34d1"]]),RU=Nq({history:Xj(),routes:[{path:"/",component:qq,name:"teams"},{path:"/account",component:IU,name:"account"},{path:"/chat",component:tb,name:"chat",children:[{path:":id",component:tb,name:"chat"}]},{path:"/history",component:zq,name:"history"},{path:"/contacts",component:Xq,name:"contacts"},{path:"/meeting",component:nU,name:"meeting"},{path:"/settings",component:hU,name:"settings"},{path:"/voicemail",component:yU,name:"voicemail"},{path:"/wallboard",component:xU,name:"wallboard"}]});Zm({});const kU=Zm({icons:{defaultSet:"mdi",aliases:Wx,sets:{mdi:Yx,fa:Fj}},components:{...Cj},directives:Dj}),D2=BI();D2.use(N$);const uu=cI(R$);uu.use(kU);uu.use(D2);uu.use(MI);uu.use(RU);uu.mount("#app")});export default PU();
